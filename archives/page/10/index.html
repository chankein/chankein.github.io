
<!DOCTYPE html>
<html lang="zh-tw">
    
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css">

    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/min/moment.min.js"></script>
    
      <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/locale/zh-tw.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
    <script>
      window.algoliaConfig = {
        appId: 'AWFC86Q51O',
        apiKey: 'c9d952906eb1b154d75cf863e75c1ede',
        indexName: 'MyBlog'
      };
      var algoliaIndex = algoliasearch(
        algoliaConfig.appId,
        algoliaConfig.apiKey
      ).initIndex(algoliaConfig.indexName);
    </script>


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Kein&#39;s blog">
    <title>所有文章 - Kein&#39;s blog</title>
    <meta name="author" content="Kein Chan">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Kein&#39;s blog">
<meta property="og:url" content="https://keinchan.com/archives/page/10/index.html">
<meta property="og:site_name" content="Kein&#39;s blog">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Kein Chan">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://keinchan.com../../../assets/images/profile.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="../../../assets/css/style-l9zwheso7r7pnk98nvirovsz9dl7fhkrc9mlb5vmuxw7tk5movrk0eevsrpr.min.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="../../../index.html"
            aria-label=""
        >
            Kein&#39;s blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打開鏈接: ../../../#about"
            >
        
        
            <img class="header-picture" src="../../../assets/images/profile.jpg" alt="作者的圖片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="../../../#about"
                    aria-label="閱讀有關作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="../../../assets/images/profile.jpg" alt="作者的圖片"/>
                </a>
                <h4 class="sidebar-profile-name">Kein Chan</h4>
                
                    <h5 class="sidebar-profile-bio"><p>這是獨立全棧工程師Kein Chan的技術博客</br>分享一些技術教程,命令備忘(cheat-sheet)等</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../index.html"
                            
                            rel="noopener"
                            title="首頁"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首頁</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../all-categories"
                            
                            rel="noopener"
                            title="分類"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分類</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../all-tags"
                            
                            rel="noopener"
                            title="標籤"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">標籤</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../all-archives"
                            
                            rel="noopener"
                            title="所有文章"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">所有文章</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="搜尋"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜尋</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="關於"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">關於</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/chankein/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../mailto:kein.chan85@gmail.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Email"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Email</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../atom.xml"
                            
                            rel="noopener"
                            title="Atom"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Atom</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../2020/05/24/linux/8-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/"
                            aria-label=": 8.系统管理"
                        >
                            8.系统管理
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-24T20:06:24+08:00">
	
		    2020 年 5 月 24 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1>Linux 用户、群组与系统管理</h1>
<h2 id="1-用户和群组管理">1. 用户和群组管理</h2>
<h3 id="1-1-用户配置文件">1.1 用户配置文件</h3>
<h4 id="etc-passwd-文件格式">/etc/passwd 文件格式</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">lpic:x:500:500:LPI linux:/home/lpic:/bin/bash</span><br><span class="line">↑    ↑ ↑   ↑   ↑         ↑          ↑</span><br><span class="line">│    │ │   │   │         │          └─ 默认shell</span><br><span class="line">│    │ │   │   │         └─────────── 家目录</span><br><span class="line">│    │ │   │   └───────────────────── 用户备注信息(GECOS)</span><br><span class="line">│    │ │   └───────────────────────── 主组GID</span><br><span class="line">│    │ └───────────────────────────── 用户UID</span><br><span class="line">│    └─────────────────────────────── 密码占位符(实际在/etc/shadow)</span><br><span class="line">└──────────────────────────────────── 用户名</span><br></pre></td></tr></table></figure>
<h4 id="etc-shadow-文件">/etc/shadow 文件</h4>
<ul>
<li>存储用户密码哈希值</li>
<li>只有root用户可访问</li>
<li>包含密码过期时间等安全信息</li>
</ul>
<h4 id="etc-group-文件格式">/etc/group 文件格式</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">staff:x:500:linux,lpic</span><br><span class="line">↑     ↑ ↑   ↑</span><br><span class="line">│     │ │   └───────────── 附加组成员</span><br><span class="line">│     │ └───────────────── 组GID</span><br><span class="line">│     └─────────────────── 组密码占位符</span><br><span class="line">└───────────────────────── 组名</span><br></pre></td></tr></table></figure>
<h3 id="1-2-用户管理命令">1.2 用户管理命令</h3>
<h4 id="useradd-添加用户">useradd - 添加用户</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -c <span class="string">&quot;开发人员&quot;</span> -d /home/dev -g staff -G developers -s /bin/bash -m devuser</span><br></pre></td></tr></table></figure>
<p>常用选项：</p>
<ul>
<li><code>-c</code>：用户备注信息</li>
<li><code>-d</code>：指定家目录路径</li>
<li><code>-g</code>：指定主组</li>
<li><code>-G</code>：指定附加组</li>
<li><code>-s</code>：指定登录shell</li>
<li><code>-m</code>：自动创建家目录(从/etc/skel复制模板)</li>
</ul>
<h4 id="usermod-修改用户">usermod - 修改用户</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -c <span class="string">&quot;高级开发&quot;</span> -G managers -s /bin/zsh devuser</span><br></pre></td></tr></table></figure>
<p>常用选项：</p>
<ul>
<li><code>-c</code>：备注:指定备注</li>
<li><code>-d</code>：path:home目录</li>
<li><code>-g</code>：组名/GID:所属主组</li>
<li><code>-G</code>：组名/GID:其他所属组</li>
<li><code>-s</code>：path: login shell</li>
<li><code>-L</code>：锁定用户密码</li>
<li><code>-U</code>：解锁用户密码</li>
</ul>
<h4 id="userdel-删除用户">userdel - 删除用户</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel -r devuser  <span class="comment"># 删除用户并移除家目录</span></span><br></pre></td></tr></table></figure>
<h4 id="passwd-密码管理">passwd - 密码管理</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">passwd devuser      <span class="comment"># 设置密码</span></span><br><span class="line">passwd -l devuser   <span class="comment"># 锁定账户</span></span><br><span class="line">passwd -u devuser   <span class="comment"># 解锁账户</span></span><br></pre></td></tr></table></figure>
<h3 id="1-3-群组管理命令">1.3 群组管理命令</h3>
<h4 id="groupadd-添加组">groupadd - 添加组</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd developers</span><br></pre></td></tr></table></figure>
<h4 id="groupmod-修改组">groupmod - 修改组</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupmod -g 1001 -n devgroup developers</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-g</code>：修改GID</li>
<li><code>-n</code>：修改组名</li>
</ul>
<h4 id="groupdel-删除组">groupdel - 删除组</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupdel devgroup</span><br></pre></td></tr></table></figure>
<h4 id="id-查看用户信息">id - 查看用户信息</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">id</span> devuser  <span class="comment"># 显示用户UID、GID和所属组</span></span><br></pre></td></tr></table></figure>
<h2 id="2-系统时间管理">2. 系统时间管理</h2>
<h3 id="2-1-date-系统时间">2.1 date - 系统时间</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">date</span> 093017002012.30    <span class="comment"># 设置为2012年9月30日17:00:30</span></span><br><span class="line"><span class="built_in">date</span> <span class="string">&quot;+%Y/%m/%d (%a)&quot;</span>   <span class="comment"># 格式化为&quot;2023/05/15 (Mon)&quot;</span></span><br></pre></td></tr></table></figure>
<p>常用格式符号：</p>
<ul>
<li><code>%Y</code>：4位年份</li>
<li><code>%m</code>：2位月份</li>
<li><code>%d</code>：2位日期</li>
<li><code>%H</code>：24小时制小时</li>
<li><code>%M</code>：分钟</li>
<li><code>%a</code>：星期缩写</li>
</ul>
<h3 id="2-2-hwclock-硬件时钟">2.2 hwclock - 硬件时钟</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hwclock --show          <span class="comment"># 显示硬件时钟</span></span><br><span class="line">hwclock --systohc       <span class="comment"># 系统时间同步到硬件时钟</span></span><br><span class="line">hwclock --hctosys       <span class="comment"># 硬件时钟同步到系统时间</span></span><br></pre></td></tr></table></figure>
<h3 id="2-3-NTP时间同步">2.3 NTP时间同步</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ntpdate time.server.lpic.jp  <span class="comment"># 手动同步时间</span></span><br><span class="line">service ntpd start           <span class="comment"># 启动NTP服务</span></span><br></pre></td></tr></table></figure>
<p>NTP配置文件(<code>/etc/ntp.conf</code>)：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">driftfile /etc/ntp.drift</span><br><span class="line">logfile /var/log/ntp.log</span><br><span class="line">server ntp.server.lpic.jp</span><br></pre></td></tr></table></figure>
<h2 id="3-系统日志管理">3. 系统日志管理</h2>
<h3 id="3-1-syslog-配置">3.1 syslog 配置</h3>
<p>配置文件：<code>/etc/syslog.conf</code></p>
<p>格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">facility.priority    log_location</span><br></pre></td></tr></table></figure>
<h4 id="facility-设施-类型：">facility(设施)类型：</h4>
<ul>
<li><code>auth</code>/<code>authpriv</code>：认证相关</li>
<li><code>cron</code>：定时任务</li>
<li><code>daemon</code>：守护进程</li>
<li><code>kern</code>：内核消息</li>
<li><code>mail</code>：邮件系统</li>
<li><code>syslog</code>：syslog自身</li>
<li><code>local0</code>-<code>local7</code>：自定义设施</li>
</ul>
<h4 id="priority-优先级-：">priority(优先级)：</h4>
<ul>
<li><code>emerg</code>：紧急情况</li>
<li><code>alert</code>：需要立即处理</li>
<li><code>crit</code>：严重错误</li>
<li><code>err</code>：一般错误</li>
<li><code>warning</code>：警告</li>
<li><code>notice</code>：重要通知</li>
<li><code>info</code>：一般信息</li>
<li><code>debug</code>：调试信息</li>
</ul>
<h4 id="输出目标：">输出目标：</h4>
<ul>
<li>文件名：如<code>/var/log/messages</code></li>
<li><code>@host</code>：远程syslog服务器</li>
<li>用户名：发送到用户终端</li>
<li><code>*</code>：所有用户终端</li>
</ul>
<h3 id="3-2-logger-命令">3.2 logger 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger -p syslog.info -t TEST <span class="string">&quot;测试日志消息&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-3-常用日志文件">3.3 常用日志文件</h3>
<ul>
<li><code>/var/log/secure</code>：认证日志</li>
<li><code>/var/log/messages</code>：系统消息</li>
<li><code>/var/log/boot.log</code>：启动日志</li>
</ul>
<h3 id="3-4-用户登录信息">3.4 用户登录信息</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">who</span>          <span class="comment"># 显示当前登录用户</span></span><br><span class="line">w            <span class="comment"># 显示详细登录信息</span></span><br><span class="line">last         <span class="comment"># 显示登录历史</span></span><br><span class="line">lastlog      <span class="comment"># 显示用户最近登录时间</span></span><br></pre></td></tr></table></figure>
<h3 id="3-5-日志轮转">3.5 日志轮转</h3>
<p>配置文件：<code>/etc/logrotate.conf</code></p>
<p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">weekly</span><br><span class="line">rotate 4</span><br><span class="line">create</span><br><span class="line">compress</span><br><span class="line"></span><br><span class="line">/var/log/wtmp &#123;</span><br><span class="line">    monthly</span><br><span class="line">    create 0664 root utmp</span><br><span class="line">    rotate 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-邮件系统">4. 邮件系统</h2>
<h3 id="4-1-邮件组件">4.1 邮件组件</h3>
<ul>
<li><strong>MTA</strong>(邮件传输代理)：sendmail/postfix/exim</li>
<li><strong>MDA</strong>(邮件投递代理)：procmail</li>
<li><strong>MUA</strong>(邮件用户代理)：mail/mutt/thunderbird</li>
</ul>
<h3 id="4-2-启动MTA">4.2 启动MTA</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service sendmail start</span><br><span class="line">service postfix start</span><br><span class="line">service exim4 start</span><br></pre></td></tr></table></figure>
<h3 id="4-3-mail-命令">4.3 mail 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mail -s <span class="string">&quot;测试邮件&quot;</span> user@example.com</span><br><span class="line">邮件正文...</span><br><span class="line">.   <span class="comment"># 单独一行输入点结束</span></span><br><span class="line">Cc: <span class="comment"># 抄送地址(可选)</span></span><br></pre></td></tr></table></figure>
<h3 id="4-4-邮件转发">4.4 邮件转发</h3>
<h4 id="etc-aliases">/etc/aliases</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root: admin,lpic</span><br></pre></td></tr></table></figure>
<p>更新别名数据库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">newaliases</span><br></pre></td></tr></table></figure>
<h4 id="用户-forward文件">用户.forward文件</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/home/user/.forward:</span><br><span class="line">user2@example.com</span><br></pre></td></tr></table></figure>
<h2 id="5-打印系统">5. 打印系统</h2>
<h3 id="5-1-CUPS打印系统">5.1 CUPS打印系统</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service cups start  <span class="comment"># 启动CUPS服务</span></span><br></pre></td></tr></table></figure>
<p>主要配置文件：</p>
<ul>
<li><code>/etc/cups/cupsd.conf</code>：服务配置</li>
<li><code>/etc/cups/printers.conf</code>：打印机配置</li>
<li><code>/etc/cups/ppd/</code>：PPD驱动文件</li>
</ul>
<h3 id="5-2-打印命令">5.2 打印命令</h3>
<h4 id="lpr-打印文件">lpr - 打印文件</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lpr -P LaserJet -#2 document.pdf</span><br></pre></td></tr></table></figure>
<h4 id="lpq-查看打印队列">lpq - 查看打印队列</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lpq -P LaserJet</span><br></pre></td></tr></table></figure>
<h4 id="lprm-删除打印任务">lprm - 删除打印任务</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lprm -P LaserJet 123  <span class="comment"># 删除指定任务</span></span><br><span class="line">lprm -P LaserJet -    <span class="comment"># 删除用户所有任务</span></span><br></pre></td></tr></table></figure>
<h3 id="5-3-Web管理界面">5.3 Web管理界面</h3>
<p>访问：<a target="_blank" rel="noopener" href="http://localhost:631">http://localhost:631</a></p>
<h2 id="6-定时任务管理">6. 定时任务管理</h2>
<h3 id="6-1-cron-定时任务系统">6.1 cron 定时任务系统</h3>
<h4 id="crontab-命令">crontab 命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">crontab -e            <span class="comment"># 编辑当前用户的crontab</span></span><br><span class="line">crontab -l            <span class="comment"># 列出当前用户的crontab</span></span><br><span class="line">crontab -r            <span class="comment"># 删除当前用户的crontab</span></span><br><span class="line">crontab -u user -e    <span class="comment"># 编辑指定用户的crontab(root权限)</span></span><br></pre></td></tr></table></figure>
<h4 id="crontab-文件格式">crontab 文件格式</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* * * * * command_to_execute</span><br><span class="line">│ │ │ │ │</span><br><span class="line">│ │ │ │ └── 星期几 (0-6, 0=星期日)</span><br><span class="line">│ │ │ └──── 月份 (1-12)</span><br><span class="line">│ │ └────── 日 (1-31)</span><br><span class="line">│ └──────── 小时 (0-23)</span><br><span class="line">└────────── 分钟 (0-59)</span><br></pre></td></tr></table></figure>
<p>特殊字符：</p>
<ul>
<li><code>*</code>：所有有效值</li>
<li><code>,</code>：值列表分隔符(如1,3,5)</li>
<li><code>-</code>：范围(如1-5)</li>
<li><code>/</code>：步长(如*/2表示每2个单位)</li>
</ul>
<h4 id="系统cron目录">系统cron目录</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/etc/crontab           <span class="comment"># 系统级crontab文件</span></span><br><span class="line">/etc/cron.d/           <span class="comment"># 系统cron片段</span></span><br><span class="line">/etc/cron.hourly/      <span class="comment"># 每小时执行</span></span><br><span class="line">/etc/cron.daily/       <span class="comment"># 每天执行</span></span><br><span class="line">/etc/cron.weekly/      <span class="comment"># 每周执行</span></span><br><span class="line">/etc/cron.monthly/     <span class="comment"># 每月执行</span></span><br></pre></td></tr></table></figure>
<h4 id="anacron">anacron</h4>
<ul>
<li>用于在系统停机后执行错过的定时任务</li>
<li>配置文件：<code>/etc/anacrontab</code></li>
</ul>
<h3 id="6-2-at-一次性任务">6.2 at 一次性任务</h3>
<h4 id="at-命令">at 命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">at 17:00 tomorrow      <span class="comment"># 创建定时任务</span></span><br><span class="line">at -f job.sh 23:00     <span class="comment"># 从文件读取任务</span></span><br><span class="line">atq                    <span class="comment"># 查看待执行任务(at -l)</span></span><br><span class="line">atrm 3                 <span class="comment"># 删除任务3(at -d 3)</span></span><br></pre></td></tr></table></figure>
<h4 id="时间格式">时间格式</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HH:MM                  # 24小时制(如23:00)</span><br><span class="line">noon/midnight          # 中午12点/午夜12点</span><br><span class="line">today/tomorrow         # 今天/明天</span><br><span class="line">now + count time-units # 如now + 3 days</span><br></pre></td></tr></table></figure>
<h3 id="6-3-batch-低负荷执行">6.3 batch 低负荷执行</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">batch                  <span class="comment"># 进入交互式输入模式</span></span><br><span class="line">batch -f job.sh        <span class="comment"># 从文件读取任务</span></span><br></pre></td></tr></table></figure>
<h3 id="6-4-访问控制">6.4 访问控制</h3>
<h4 id="cron-访问控制">cron 访问控制</h4>
<ol>
<li>如存在<code>/etc/cron.allow</code>，仅允许文件内用户</li>
<li>如无allow文件，检查<code>/etc/cron.deny</code>，拒绝文件内用户</li>
<li>如两者都不存在，默认行为取决于系统配置</li>
</ol>
<h4 id="at-访问控制">at 访问控制</h4>
<ol>
<li>如存在<code>/etc/at.allow</code>，仅允许文件内用户</li>
<li>如无allow文件，检查<code>/etc/at.deny</code>，拒绝文件内用户</li>
<li>如两者都不存在，默认只有root可用</li>
</ol>
<h2 id="7-本地化与国际化">7. 本地化与国际化</h2>
<h3 id="7-1-本地化变量">7.1 本地化变量</h3>
<table>
<thead>
<tr>
<th>变量</th>
<th>作用域</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LC_CTYPE</code></td>
<td>字符分类和大小写转换</td>
</tr>
<tr>
<td><code>LC_COLLATE</code></td>
<td>排序和比较规则</td>
</tr>
<tr>
<td><code>LC_MESSAGES</code></td>
<td>系统消息语言</td>
</tr>
<tr>
<td><code>LC_MONETARY</code></td>
<td>货币格式</td>
</tr>
<tr>
<td><code>LC_NUMERIC</code></td>
<td>数字格式</td>
</tr>
<tr>
<td><code>LC_TIME</code></td>
<td>日期时间格式</td>
</tr>
<tr>
<td><code>LC_ALL</code></td>
<td>覆盖所有LC_*设置</td>
</tr>
<tr>
<td><code>LANG</code></td>
<td>默认设置(未被LC_*覆盖时使用)</td>
</tr>
</tbody>
</table>
<h3 id="7-2-常用locale设置">7.2 常用locale设置</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">C/POSIX               <span class="comment"># 最小locale</span></span><br><span class="line">en_US.utf8            <span class="comment"># 英文(美国)</span></span><br><span class="line">ja_JP.utf8            <span class="comment"># 日文(UTF-8)</span></span><br><span class="line">ja_JP.eucJP           <span class="comment"># 日文(EUC-JP)</span></span><br><span class="line">zh_CN.utf8            <span class="comment"># 中文(简体)</span></span><br></pre></td></tr></table></figure>
<h3 id="7-3-locale-命令">7.3 locale 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">locale -a             <span class="comment"># 列出可用locale</span></span><br><span class="line">locale -m             <span class="comment"># 列出可用字符编码</span></span><br><span class="line">locale                <span class="comment"># 显示当前locale设置</span></span><br></pre></td></tr></table></figure>
<h3 id="7-4-字符编码">7.4 字符编码</h3>
<table>
<thead>
<tr>
<th>编码</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ASCII</td>
<td>7位英文字符</td>
</tr>
<tr>
<td>ISO-8859</td>
<td>8位扩展ASCII</td>
</tr>
<tr>
<td>UTF-8</td>
<td>Unicode编码</td>
</tr>
<tr>
<td>EUC-JP</td>
<td>Linux日文编码</td>
</tr>
<tr>
<td>Shift_JIS</td>
<td>Windows/Mac日文编码</td>
</tr>
<tr>
<td>ISO-2022-JP</td>
<td>邮件用日文编码</td>
</tr>
</tbody>
</table>
<h3 id="7-5-iconv-编码转换">7.5 iconv 编码转换</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iconv -f eucjp -t utf8 input.txt &gt; output.txt  <span class="comment"># EUC-JP转UTF-8</span></span><br><span class="line">iconv -l                                      <span class="comment"># 列出支持编码</span></span><br></pre></td></tr></table></figure>
<h2 id="8-时区设置">8. 时区设置</h2>
<h3 id="8-1-时区文件">8.1 时区文件</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/zoneinfo/   <span class="comment"># 所有时区定义文件</span></span><br><span class="line">/etc/localtime         <span class="comment"># 系统当前时区链接</span></span><br></pre></td></tr></table></figure>
<h3 id="8-2-设置时区方法">8.2 设置时区方法</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法1: 复制时区文件</span></span><br><span class="line"><span class="built_in">cp</span> /usr/share/zoneinfo/Asia/Tokyo /etc/localtime</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法2: 创建符号链接</span></span><br><span class="line"><span class="built_in">ln</span> -sf /usr/share/zoneinfo/Asia/Tokyo /etc/localtime</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法3: 临时设置(当前会话有效)</span></span><br><span class="line"><span class="built_in">export</span> TZ=<span class="string">&quot;Asia/Tokyo&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="8-3-时区配置工具">8.3 时区配置工具</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tzselect   <span class="comment"># 交互式时区选择</span></span><br><span class="line">tzconfig   <span class="comment"># 时区配置工具(部分发行版)</span></span><br><span class="line">dpkg-reconfigure tzdata  <span class="comment"># Debian系重新配置时区</span></span><br><span class="line">timedatectl set-timezone Asia/Tokyo  <span class="comment"># systemd系统设置时区</span></span><br></pre></td></tr></table></figure>
<h2 id="9-打印系统补充">9. 打印系统补充</h2>
<h3 id="9-1-CUPS-Web管理界面">9.1 CUPS Web管理界面</h3>
<p>访问：<code>http://localhost:631</code></p>
<h3 id="9-2-打印命令补充">9.2 打印命令补充</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lpstat -p -d          <span class="comment"># 显示打印机状态和默认打印机</span></span><br><span class="line">lpoptions -d LaserJet <span class="comment"># 设置默认打印机</span></span><br></pre></td></tr></table></figure>
<h3 id="9-3-打印系统日志">9.3 打印系统日志</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/var/log/cups/        <span class="comment"># CUPS日志目录</span></span><br></pre></td></tr></table></figure>
                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../2020/05/24/linux/8-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../2020/05/08/linux/7-XWindow/"
                            aria-label=": 7.XWindow"
                        >
                            7.XWindow
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-08T20:06:24+08:00">
	
		    2020 年 5 月 8 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># X Window 系统架构详解</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 基础架构</span></span><br></pre></td></tr></table></figure>
<p>localhost(X server) --X protocol-- remotehost(X client)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 核心组件说明</span><br><span class="line">1. **X Server**：</span><br><span class="line">   - 负责硬件管理（显卡、显示器、输入设备等）</span><br><span class="line">   - 屏幕绘制与渲染</span><br><span class="line">   - 提供字体服务功能</span><br><span class="line">   - 典型实现：Xorg</span><br><span class="line"></span><br><span class="line">2. **X Client**：</span><br><span class="line">   - 应用程序逻辑处理</span><br><span class="line">   - 响应X Server的事件请求</span><br><span class="line">   - 例如：xterm、Firefox等GUI程序</span><br><span class="line"></span><br><span class="line">3. **X Window Manager**：</span><br><span class="line">   - 特殊的X Client</span><br><span class="line">   - 负责管理窗口布局、装饰和交互</span><br><span class="line">   - 常见WM：twm、KWin、Metacity等</span><br><span class="line"></span><br><span class="line">4. **Display Manager**：</span><br><span class="line">   - 提供图形化登录界面</span><br><span class="line">   - 负责加载用户选择的WM和语言环境</span><br><span class="line">   - 常见实现：GDM、KDM、XDM</span><br><span class="line"></span><br><span class="line">## startx 启动流程</span><br><span class="line"></span><br><span class="line">### 命令语法</span><br><span class="line">```bash</span><br><span class="line">startx [X client 参数] -- [X server 参数]</span><br></pre></td></tr></table></figure>
<h3 id="X-server-参数查找顺序">X server 参数查找顺序</h3>
<ol>
<li>startx 命令行参数</li>
<li>用户主目录 <code>~/.xserverrc</code></li>
<li>系统默认 <code>/etc/X11/xinit/xserverrc</code></li>
<li>最终回退 <code>/usr/bin/X</code> (X server可执行文件)</li>
</ol>
<h3 id="X-client-参数查找顺序">X client 参数查找顺序</h3>
<ol>
<li>startx 命令行参数</li>
<li>用户主目录 <code>~/.xinitrc</code></li>
<li>系统默认 <code>/etc/X11/xinit/xinitrc</code></li>
<li>最终回退 <code>xterm</code> (基础终端模拟器)</li>
</ol>
<h3 id="底层调用">底层调用</h3>
<p>startx 最终调用 <code>xinit</code> 启动X系统：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xinit [client option] -- [server or display option]</span><br></pre></td></tr></table></figure>
<p>默认等效命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xinit /etc/X11/xinit/xinitrc -- /usr/bin/X</span><br></pre></td></tr></table></figure>
<p>最小化启动示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xinit xterm -geometry +1+1 -n login -display :0 -- X :0</span><br></pre></td></tr></table></figure>
<h2 id="配置文件体系">配置文件体系</h2>
<h3 id="核心配置文件">核心配置文件</h3>
<ul>
<li>主配置文件：<code>/etc/X11/xorg.conf</code></li>
<li>模块目录：<code>/usr/lib64/xorg/modules/</code></li>
<li>字体目录：<code>/usr/share/X11/fonts/</code></li>
<li>显卡驱动：<code>/usr/lib64/xorg/modules/drivers/</code></li>
</ul>
<h3 id="配置段落-Section">配置段落(Section)</h3>
<table>
<thead>
<tr>
<th>Section名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Module</td>
<td>X Server加载的功能模块</td>
</tr>
<tr>
<td>InputDevice</td>
<td>输入设备配置（键盘/鼠标）</td>
</tr>
<tr>
<td>Files</td>
<td>字体和颜色资源路径</td>
</tr>
<tr>
<td>Monitor</td>
<td>显示器参数（刷新率等）</td>
</tr>
<tr>
<td>Device</td>
<td>显卡芯片组配置</td>
</tr>
<tr>
<td>Screen</td>
<td>显示分辨率和色深设置</td>
</tr>
<tr>
<td>ServerLayout</td>
<td>各模块的组合配置</td>
</tr>
</tbody>
</table>
<h3 id="配置生成工具">配置生成工具</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Xorg -configure</span><br><span class="line"><span class="comment"># 生成测试配置文件：/root/xorg.conf.new</span></span><br><span class="line"><span class="comment"># 测试命令：X -config /root/xorg.conf.new</span></span><br></pre></td></tr></table></figure>
<h2 id="实用命令工具">实用命令工具</h2>
<h3 id="显示调节">显示调节</h3>
<ul>
<li><code>xvidtune</code>：GUI显示器频率调节工具</li>
<li><code>xhost</code>：X server访问控制<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xhost +hostname  <span class="comment"># 添加访问权限</span></span><br><span class="line">xhost -hostname  <span class="comment"># 移除访问权限</span></span><br><span class="line">xhost +          <span class="comment"># 允许所有主机</span></span><br><span class="line">xhost -          <span class="comment"># 禁用所有远程访问</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="环境变量">环境变量</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DISPLAY=localhost:0  <span class="comment"># 指定显示目标</span></span><br><span class="line"><span class="built_in">export</span> DISPLAY</span><br></pre></td></tr></table></figure>
<h3 id="信息查询">信息查询</h3>
<table>
<thead>
<tr>
<th>命令</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>showrgb</td>
<td>显示可用RGB颜色值</td>
</tr>
<tr>
<td>xlsclients</td>
<td>列出运行中的X客户端</td>
</tr>
<tr>
<td>xwininfo</td>
<td>查询窗口几何属性</td>
</tr>
<tr>
<td>xdpyinfo</td>
<td>显示X Server详细信息</td>
</tr>
</tbody>
</table>
<h2 id="显示管理器-XDM">显示管理器(XDM)</h2>
<h3 id="类型对比">类型对比</h3>
<table>
<thead>
<tr>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>XDM</td>
<td>基础X Display Manager</td>
</tr>
<tr>
<td>GDM</td>
<td>GNOME显示管理器</td>
</tr>
<tr>
<td>KDM</td>
<td>KDE显示管理器</td>
</tr>
</tbody>
</table>
<h3 id="XDM启动流程">XDM启动流程</h3>
<ol>
<li>启动XDM服务</li>
<li>加载 <code>/etc/X11/Xsession</code></li>
<li>执行 <code>/etc/X11/xinit/xinitrc.d/</code> 下脚本</li>
<li>读取用户配置 <code>~/.xsession</code></li>
<li>加载 <code>~/.Xclients</code> 或 <code>/etc/X11/xinit/Xclients</code></li>
</ol>
<h3 id="关键配置文件">关键配置文件</h3>
<table>
<thead>
<tr>
<th>文件名</th>
<th>用途描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>xdm-config</td>
<td>基础配置和访问控制</td>
</tr>
<tr>
<td>Xaccess</td>
<td>主机访问权限设置</td>
</tr>
<tr>
<td>Xresources</td>
<td>登录界面样式和X资源定义</td>
</tr>
<tr>
<td>Xservers</td>
<td>X Server与Display映射</td>
</tr>
<tr>
<td>Xsetup_0</td>
<td>登录前环境设置（如壁纸）</td>
</tr>
<tr>
<td>Xsession</td>
<td>会话启动流程控制</td>
</tr>
</tbody>
</table>
<h2 id="窗口管理器列表">窗口管理器列表</h2>
<table>
<thead>
<tr>
<th>名称</th>
<th>特点描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>twm</td>
<td>最基本的窗口管理器</td>
</tr>
<tr>
<td>fvwm</td>
<td>轻量级窗口管理器</td>
</tr>
<tr>
<td>sawfish</td>
<td>GNOME集成WM</td>
</tr>
<tr>
<td>enlightenment</td>
<td>高定制化WM</td>
</tr>
<tr>
<td>metacity</td>
<td>GNOME默认WM</td>
</tr>
<tr>
<td>fluxbox</td>
<td>轻量级高自由度WM</td>
</tr>
<tr>
<td>WindowMaker</td>
<td>NeXTSTEP风格WM</td>
</tr>
<tr>
<td>KWin</td>
<td>KDE标准窗口管理器</td>
</tr>
</tbody>
</table>
<h2 id="辅助功能技术">辅助功能技术</h2>
<h3 id="AccessX-功能">AccessX 功能</h3>
<table>
<thead>
<tr>
<th>功能</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>粘滞键</td>
<td>分离组合键输入</td>
</tr>
<tr>
<td>慢速键</td>
<td>调整按键响应时间</td>
</tr>
<tr>
<td>防反弹键</td>
<td>防止重复输入</td>
</tr>
<tr>
<td>切换键</td>
<td>切换状态声音反馈</td>
</tr>
<tr>
<td>鼠标键</td>
<td>键盘模拟鼠标操作</td>
</tr>
</tbody>
</table>
<h3 id="其他辅助工具">其他辅助工具</h3>
<ul>
<li><strong>高对比度显示</strong>：增强视觉可读性</li>
<li><strong>屏幕阅读器</strong>：Orca等文本转语音工具</li>
<li><strong>盲文显示器</strong>：触觉输出设备</li>
<li><strong>屏幕放大镜</strong>：视觉辅助工具</li>
<li><strong>屏幕键盘</strong>：GOK等虚拟输入工具</li>
</ul>
<h3 id="专用软件">专用软件</h3>
<ul>
<li><strong>Orca</strong>：GNOME屏幕阅读器和放大镜</li>
<li><strong>GOK</strong>：GNOME屏幕键盘</li>
<li><strong>emacspeak</strong>：为Emacs添加语音功能</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../2020/05/08/linux/7-XWindow/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../2020/05/08/linux/6-Shell%E5%8F%98%E9%87%8F%E4%B8%8EShell%E8%84%9A%E6%9C%AC/"
                            aria-label=": 6.Shell变量与Shell脚本"
                        >
                            6.Shell变量与Shell脚本
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-08T19:16:24+08:00">
	
		    2020 年 5 月 8 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1>Shell变量与Shell脚本</h1>
<h2 id="Bash设定文档">Bash设定文档</h2>
<ul>
<li><strong>/etc/profile</strong>: 登录时执行，适用于所有用户</li>
<li><strong>~/.bash_profile</strong>: 登录时执行</li>
<li><strong>~/.bash_login</strong>: 当 <code>~/.bash_profile</code> 不存在时，登录时执行</li>
<li><strong>~/.profile</strong>: 当 <code>~/.bash_profile</code> 和 <code>~/.bash_login</code> 都不存在时，登录时执行</li>
<li><strong>~/.bashrc</strong>: 每次启动 Bash 时执行</li>
<li><strong>~/.bash_logout</strong>: 登出时执行</li>
</ul>
<h2 id="Shell环境定制化">Shell环境定制化</h2>
<h3 id="export命令"><code>export</code>命令</h3>
<p>用于将shell变量转化为环境变量，使得该变量能够被其他程序或子进程访问。</p>
<h3 id="set命令"><code>set</code>命令</h3>
<ul>
<li>
<p><code>set</code>: 显示打印当前的环境变量和Shell变量</p>
</li>
<li>
<p><code>set [-o] [+o] option</code>：</p>
<ul>
<li><code>-o</code>：启用该选项</li>
<li><code>+o</code>：禁用该选项</li>
<li>常用选项：
<ul>
<li><code>allexport</code>: 自动将变量导出为环境变量</li>
<li><code>emacs</code>: 设置Emacs风格的键绑定</li>
<li><code>ignoreeof</code>: 禁止通过 Ctrl+D 退出Shell</li>
<li><code>noclobber</code>: 禁止文件重定向覆盖文件</li>
<li><code>noglob</code>: 禁用元字符解析</li>
<li><code>vi</code>: 设置vi风格的键绑定</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>set -o</code>: 显示或更改选项的状态</p>
</li>
</ul>
<h3 id="printenv命令"><code>printenv</code>命令</h3>
<p>用于打印当前的环境变量。</p>
<h3 id="alias-unalias"><code>alias</code>/<code>unalias</code></h3>
<ul>
<li><code>alias</code>: 设置命令别名</li>
<li><code>unalias</code>: 取消命令别名</li>
<li>临时解除别名：可以使用反斜杠 <code>\</code>，例如：<code>alias ls='ls -l'</code> 后，<code>'\ls'</code> 会执行原始的 <code>ls</code> 命令。</li>
</ul>
<h2 id="定义Shell函数">定义Shell函数</h2>
<ul>
<li>
<p>定义函数语法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> [函数名] () &#123;</span><br><span class="line">    运行内容;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意：<code>&#123;</code> 和 <code>&#125;</code> 前后需要有空格。</p>
</li>
<li>
<p>定义变量：<code>$变量名</code></p>
</li>
<li>
<p>函数名不能与变量名重名。</p>
</li>
<li>
<p>查看已定义的函数：<code>declare -f</code></p>
</li>
<li>
<p>删除函数：<code>unset</code></p>
</li>
</ul>
<h2 id="Shell脚本">Shell脚本</h2>
<h3 id="执行Shell脚本">执行Shell脚本</h3>
<ul>
<li>脚本命令可以分行书写，并逐行执行。</li>
<li>运行脚本时，如果没有执行权限，只需要文件的读取权限和文件夹的运行权限即可。
<ul>
<li>使用 <code>source [脚本名]</code> 或简化版 <code>.[脚本名]</code> 执行脚本。</li>
<li>如果脚本有执行权限，可以省略 <code>source</code>，例如：<code>./[脚本名]</code>。</li>
<li>如果脚本不在 <code>PATH</code> 环境变量指定的文件夹中，需要显式指定脚本路径，或者在当前目录使用 <code>./</code>。</li>
</ul>
</li>
</ul>
<h3 id="传入Shell脚本的变量">传入Shell脚本的变量</h3>
<ul>
<li><code>$0</code>：脚本文件名（全路径）</li>
<li><code>$1</code>：第一个传入的变量值</li>
<li><code>$2</code>：第二个传入的变量值</li>
<li><code>#$</code>：传入的变量数量</li>
<li><code>$@</code>：所有传入的变量值（空格分隔）</li>
<li><code>$*</code>：所有变量值（以系统默认的分隔符分隔）</li>
<li>脚本执行结束后的返回状态：<code>echo $?</code>。正常执行返回0，错误返回1。</li>
</ul>
<h3 id="文件检查">文件检查</h3>
<p>使用 <code>test</code> 命令或者 <code>[</code> <code>]</code> 语法进行文件检查：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">test</span> 条件文</span><br><span class="line">[ 条件文 ]</span><br></pre></td></tr></table></figure>
<h4 id="常见条件文：">常见条件文：</h4>
<ul>
<li><code>-f 文件名</code>：检查文件是否存在且为普通文件</li>
<li><code>-d 文件夹名</code>：检查文件夹是否存在</li>
<li><code>-r 文件名</code>：检查文件是否有读取权限</li>
<li><code>-w 文件名</code>：检查文件是否有写入权限</li>
<li><code>-x 文件名</code>：检查文件是否有执行权限</li>
<li><code>-s 文件名</code>：检查文件是否为空</li>
<li><code>-L 文件名</code>：检查是否为软链接</li>
<li><code>-e 文件名</code>：检查文件是否存在</li>
<li><code>文件名1 -nt 文件名2</code>：文件1是否比文件2新</li>
<li><code>文件名1 -ot 文件名2</code>：文件1是否比文件2旧</li>
<li>数值比较：<code>-eq</code>, <code>-ge</code>, <code>-gt</code>, <code>-le</code>, <code>-lt</code>, <code>-ne</code>（等于、大于等于、大于、小于等于、小于、不等于）</li>
<li>字符串比较：<code>-n</code>（字符串长度大于0），<code>-z</code>（字符串长度为0）</li>
<li>字符串相等：<code>字符串1 = 字符串2</code></li>
<li>字符串不等：<code>字符串1 != 字符串2</code></li>
<li>逻辑操作：
<ul>
<li><code>!</code>：条件非</li>
<li><code>-a</code>：与（and）</li>
<li><code>-o</code>：或（or）</li>
</ul>
</li>
</ul>
<h2 id="条件分歧">条件分歧</h2>
<h3 id="if语句"><code>if</code>语句</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件式</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    执行文1</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    执行文2</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>或者：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件式; <span class="keyword">then</span></span><br><span class="line">    执行文1</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    执行文2</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<h3 id="case语句"><code>case</code>语句</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> 式 <span class="keyword">in</span></span><br><span class="line">    值1)</span><br><span class="line">        执行文1 ;;</span><br><span class="line">    值2)</span><br><span class="line">        执行文2 ;;</span><br><span class="line">    *)</span><br><span class="line">        执行其他文 ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>
<p>注意：每个 <code>执行文</code> 后面要有 <code>;;</code>，并且最后使用 <code>esac</code> 结束。</p>
<h3 id="for循环"><code>for</code>循环</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 变量名 <span class="keyword">in</span> 变量值列表</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    执行文</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> Vine SUSE Gentoo</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$var</span> Linux</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>变量值列表可以通过空格分隔，也可以使用 <code>seq</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">seq</span> 10 15`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<h3 id="while循环"><code>while</code>循环</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> 条件文</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    执行文</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<h3 id="read命令"><code>read</code>命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -n <span class="string">&#x27;Who are you?:&#x27;</span></span><br><span class="line"><span class="built_in">read</span> username</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Hello, <span class="variable">$username</span>!&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>如果 <code>echo</code> 后面跟 <code>-n</code>，则输入的提示信息和用户输入将在同一行显示。</li>
</ul>
<h2 id="指定执行Shell类型">指定执行Shell类型</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br></pre></td></tr></table></figure>
<p>此行用于指定脚本执行时使用的Shell解释器。</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../2020/05/08/linux/6-Shell%E5%8F%98%E9%87%8F%E4%B8%8EShell%E8%84%9A%E6%9C%AC/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../2020/05/08/linux/5-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"
                            aria-label=": 5.文件系统与存储管理"
                        >
                            5.文件系统与存储管理
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-08T19:06:24+08:00">
	
		    2020 年 5 月 8 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="1-磁盘配额管理">1. 磁盘配额管理</h2>
<h3 id="1-1-配额概念与类型">1.1 配额概念与类型</h3>
<h4 id="配额类型说明">配额类型说明</h4>
<ul>
<li><strong>硬限制(Hard Limit)</strong>：用户绝对不能超过的磁盘空间限制</li>
<li><strong>软限制(Soft Limit)</strong>：允许用户暂时超过的限制，系统会发出警告</li>
<li><strong>宽限期(Grace Period)</strong>：超过软限制后允许保留的时间（默认7天）</li>
</ul>
<h3 id="1-2-配额实施完整步骤">1.2 配额实施完整步骤</h3>
<ol>
<li>
<p><strong>修改fstab文件</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在/etc/fstab中添加usrquota和/或grpquota选项</span></span><br><span class="line">/dev/sda1 /home ext4 defaults,usrquota,grpquota 0 2</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>重新挂载文件系统</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">umount /home</span><br><span class="line">mount -o remount /home</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>创建配额文件</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> /home/aquota.user /home/aquota.group</span><br><span class="line"><span class="built_in">chmod</span> 600 /home/aquota.*</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>初始化配额数据库</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quotacheck -cugm /home</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>启用配额系统</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quotaon -avug</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>为用户设置配额</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">edquota username</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="1-3-配额管理命令详解">1.3 配额管理命令详解</h3>
<h4 id="quota-显示配额信息">quota - 显示配额信息</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">quota -u username  <span class="comment"># 显示用户配额</span></span><br><span class="line">quota -g groupname <span class="comment"># 显示组配额</span></span><br><span class="line">quota -v           <span class="comment"># 显示详细信息</span></span><br></pre></td></tr></table></figure>
<h4 id="quotacheck-检查配额">quotacheck - 检查配额</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">quotacheck -avug  <span class="comment"># 检查所有文件系统配额</span></span><br><span class="line">quotacheck -cug /home  <span class="comment"># 检查指定文件系统</span></span><br></pre></td></tr></table></figure>
<h4 id="quotaon-quotaoff-启用-禁用配额">quotaon/quotaoff - 启用/禁用配额</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">quotaon -avug     <span class="comment"># 启用所有配额</span></span><br><span class="line">quotaoff /home    <span class="comment"># 禁用指定文件系统配额</span></span><br></pre></td></tr></table></figure>
<h4 id="edquota-编辑配额">edquota - 编辑配额</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">edquota -u username  <span class="comment"># 编辑用户配额</span></span><br><span class="line">edquota -p template_user new_user  <span class="comment"># 复制配额设置</span></span><br><span class="line">edquota -t           <span class="comment"># 修改宽限期</span></span><br></pre></td></tr></table></figure>
<h4 id="repquota-报告配额状态">repquota - 报告配额状态</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">repquota -a       <span class="comment"># 报告所有文件系统配额状态</span></span><br><span class="line">repquota -u /home <span class="comment"># 报告/home的用户配额</span></span><br></pre></td></tr></table></figure>
<h2 id="2-文件系统层次标准-FHS">2. 文件系统层次标准(FHS)</h2>
<h3 id="2-1-核心目录结构">2.1 核心目录结构</h3>
<table>
<thead>
<tr>
<th>目录</th>
<th>完整描述</th>
<th>典型内容</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/bin</code></td>
<td>基础命令二进制文件</td>
<td>ls, cp, mv等基本命令</td>
</tr>
<tr>
<td><code>/sbin</code></td>
<td>系统管理二进制文件</td>
<td>fdisk, fsck, ifconfig等</td>
</tr>
<tr>
<td><code>/etc</code></td>
<td>系统配置文件</td>
<td>passwd, fstab, network等配置文件</td>
</tr>
<tr>
<td><code>/dev</code></td>
<td>设备文件</td>
<td>sda, tty, null等设备节点</td>
</tr>
<tr>
<td><code>/lib</code></td>
<td>系统库文件</td>
<td>系统运行所需共享库</td>
</tr>
<tr>
<td><code>/mnt</code></td>
<td>临时挂载点</td>
<td>临时挂载文件系统的目录</td>
</tr>
<tr>
<td><code>/opt</code></td>
<td>可选应用软件包</td>
<td>第三方应用程序</td>
</tr>
<tr>
<td><code>/proc</code></td>
<td>进程和内核信息</td>
<td>虚拟文件系统，提供系统信息</td>
</tr>
<tr>
<td><code>/root</code></td>
<td>root用户主目录</td>
<td>root用户的个人文件和配置</td>
</tr>
<tr>
<td><code>/boot</code></td>
<td>启动加载文件</td>
<td>vmlinuz, initramfs, grub等</td>
</tr>
<tr>
<td><code>/home</code></td>
<td>用户主目录</td>
<td>普通用户的个人目录</td>
</tr>
<tr>
<td><code>/tmp</code></td>
<td>临时文件</td>
<td>系统重启后通常清空</td>
</tr>
<tr>
<td><code>/var</code></td>
<td>可变数据文件</td>
<td>日志、邮件、数据库等</td>
</tr>
<tr>
<td><code>/usr</code></td>
<td>用户程序资源</td>
<td>应用程序、文档、库文件等</td>
</tr>
</tbody>
</table>
<h2 id="3-分区与文件系统管理">3. 分区与文件系统管理</h2>
<h3 id="3-1-分区管理">3.1 分区管理</h3>
<h4 id="fdisk-完整操作流程">fdisk 完整操作流程</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fdisk /dev/sdb</span><br></pre></td></tr></table></figure>
<p>交互命令列表：</p>
<ul>
<li><code>n</code>：创建新分区</li>
<li><code>d</code>：删除分区</li>
<li><code>p</code>：显示分区表</li>
<li><code>t</code>：更改分区类型</li>
<li><code>a</code>：切换启动标志</li>
<li><code>w</code>：写入并退出</li>
<li><code>q</code>：不保存退出</li>
<li><code>m</code>：显示帮助菜单</li>
</ul>
<h3 id="3-2-文件系统创建与管理">3.2 文件系统创建与管理</h3>
<h4 id="mkfs-命令集">mkfs 命令集</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkfs -t ext4 /dev/sdb1      <span class="comment"># 创建ext4文件系统</span></span><br><span class="line">mkfs.ext4 /dev/sdb1         <span class="comment"># 同上</span></span><br><span class="line">mkfs.xfs /dev/sdb2          <span class="comment"># 创建XFS文件系统</span></span><br><span class="line">mkfs.btrfs /dev/sdb3        <span class="comment"># 创建Btrfs文件系统</span></span><br></pre></td></tr></table></figure>
<h4 id="交换空间管理">交换空间管理</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkswap /dev/sdb4            <span class="comment"># 创建交换分区</span></span><br><span class="line">swapon /dev/sdb4            <span class="comment"># 启用交换分区</span></span><br><span class="line">swapon -s                   <span class="comment"># 显示交换空间状态</span></span><br><span class="line">swapoff /dev/sdb4           <span class="comment"># 禁用交换分区</span></span><br></pre></td></tr></table></figure>
<h3 id="3-3-文件系统检查与维护">3.3 文件系统检查与维护</h3>
<h4 id="fsck-系列命令">fsck 系列命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fsck /dev/sdb1              <span class="comment"># 基本文件系统检查</span></span><br><span class="line">fsck -y /dev/sdb1           <span class="comment"># 自动修复错误</span></span><br><span class="line">e2fsck -p /dev/sdb1         <span class="comment"># ext文件系统自动修复</span></span><br><span class="line">xfs_repair /dev/sdb2        <span class="comment"># XFS文件系统修复</span></span><br></pre></td></tr></table></figure>
<h4 id="tune2fs-调整参数">tune2fs 调整参数</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tune2fs -c 30 /dev/sdb1     <span class="comment"># 设置每30次挂载后检查</span></span><br><span class="line">tune2fs -i 15d /dev/sdb1    <span class="comment"># 设置15天间隔检查</span></span><br><span class="line">tune2fs -L DATA /dev/sdb1   <span class="comment"># 设置卷标为DATA</span></span><br></pre></td></tr></table></figure>
<h3 id="3-4-空间监控命令">3.4 空间监控命令</h3>
<h4 id="df-详细用法">df 详细用法</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> -h                       <span class="comment"># 人类可读格式</span></span><br><span class="line"><span class="built_in">df</span> -i                       <span class="comment"># 显示inode使用情况</span></span><br><span class="line"><span class="built_in">df</span> -T                       <span class="comment"># 显示文件系统类型</span></span><br><span class="line"><span class="built_in">df</span> --total                  <span class="comment"># 显示总计信息</span></span><br></pre></td></tr></table></figure>
<h4 id="du-详细用法">du 详细用法</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">du</span> -sh /var/log             <span class="comment"># 显示目录总大小</span></span><br><span class="line"><span class="built_in">du</span> -ah /home                <span class="comment"># 显示所有文件和目录大小</span></span><br><span class="line"><span class="built_in">du</span> -csh *                   <span class="comment"># 显示当前目录各项目大小和总计</span></span><br><span class="line"><span class="built_in">du</span> --max-depth=1 /usr       <span class="comment"># 只显示一级子目录大小</span></span><br></pre></td></tr></table></figure>
<h2 id="4-文件搜索命令">4. 文件搜索命令</h2>
<h3 id="4-1-find-命令完整用法">4.1 find 命令完整用法</h3>
<h4 id="基本语法">基本语法</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find [路径] [选项] [操作]</span><br></pre></td></tr></table></figure>
<h4 id="常用示例">常用示例</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">find / -name <span class="string">&quot;*.conf&quot;</span>               <span class="comment"># 按名称查找</span></span><br><span class="line">find /home -user alice              <span class="comment"># 按属主查找</span></span><br><span class="line">find /var/log -mtime -7             <span class="comment"># 查找7天内修改的文件</span></span><br><span class="line">find /tmp -size +10M                <span class="comment"># 查找大于10MB的文件</span></span><br><span class="line">find . -perm 644                    <span class="comment"># 查找权限为644的文件</span></span><br><span class="line">find /etc -<span class="built_in">type</span> f -<span class="built_in">exec</span> grep -l <span class="string">&quot;error&quot;</span> &#123;&#125; \;  <span class="comment"># 结合grep</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2-locate-updatedb-系统">4.2 locate/updatedb 系统</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">locate passwd              <span class="comment"># 快速查找文件</span></span><br><span class="line">updatedb                   <span class="comment"># 更新数据库</span></span><br><span class="line">updatedb -e /mnt           <span class="comment"># 排除/mnt目录</span></span><br></pre></td></tr></table></figure>
<h3 id="4-3-which-whereis-type">4.3 which/whereis/type</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> <span class="built_in">ls</span>                   <span class="comment"># 查找命令路径</span></span><br><span class="line">whereis python             <span class="comment"># 查找命令相关文件</span></span><br><span class="line"><span class="built_in">type</span> -a <span class="built_in">cd</span>                 <span class="comment"># 显示命令类型</span></span><br></pre></td></tr></table></figure>
<h2 id="5-挂载管理">5. 挂载管理</h2>
<h3 id="5-1-挂载选项详解">5.1 挂载选项详解</h3>
<table>
<thead>
<tr>
<th>选项</th>
<th>完整描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>async/sync</code></td>
<td>异步/同步写入</td>
</tr>
<tr>
<td><code>auto/noauto</code></td>
<td>是否允许mount -a自动挂载</td>
</tr>
<tr>
<td><code>exec/noexec</code></td>
<td>是否允许执行二进制文件</td>
</tr>
<tr>
<td><code>ro/rw</code></td>
<td>只读/读写模式</td>
</tr>
<tr>
<td><code>suid/nosuid</code></td>
<td>是否允许SUID/SGID</td>
</tr>
<tr>
<td><code>user/nouser</code></td>
<td>是否允许普通用户挂载</td>
</tr>
<tr>
<td><code>defaults</code></td>
<td>默认选项(rw,suid,dev,exec,auto,nouser,async)</td>
</tr>
</tbody>
</table>
<h3 id="5-2-mount-umount-完整用法">5.2 mount/umount 完整用法</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/sdb1 /mnt/data           <span class="comment"># 基本挂载</span></span><br><span class="line">mount -o remount,ro /mnt/data       <span class="comment"># 重新挂载为只读</span></span><br><span class="line">mount -t nfs server:/share /mnt/nfs <span class="comment"># 挂载NFS</span></span><br><span class="line">umount /mnt/data                    <span class="comment"># 卸载</span></span><br><span class="line">umount -l /mnt/data                 <span class="comment"># 延迟卸载</span></span><br></pre></td></tr></table></figure>
<h3 id="5-3-etc-fstab-文件格式">5.3 /etc/fstab 文件格式</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 设备文件/挂载点/文件系统类型/选项/备份标记/检查顺序</span><br><span class="line">/dev/sdb1  /data  ext4  defaults  0  2</span><br><span class="line">UUID=xxxx  /home  xfs   defaults  0  1</span><br></pre></td></tr></table></figure>
<h2 id="6-逻辑卷管理-LVM">6. 逻辑卷管理(LVM)</h2>
<h3 id="6-1-LVM-基本概念">6.1 LVM 基本概念</h3>
<ol>
<li><strong>PV(Physical Volume)</strong>：物理卷，实际存储设备</li>
<li><strong>VG(Volume Group)</strong>：卷组，由PV组成的存储池</li>
<li><strong>LV(Logical Volume)</strong>：逻辑卷，从VG划分的可挂载空间</li>
<li><strong>PE(Physical Extent)</strong>：物理块，LVM最小分配单元(默认4MB)</li>
<li><strong>LE(Logical Extent)</strong>：逻辑块，与PE一一对应</li>
</ol>
<h3 id="6-2-LVM-完整操作流程">6.2 LVM 完整操作流程</h3>
<h4 id="物理卷-PV-管理">物理卷(PV)管理</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pvcreate /dev/sdb /dev/sdc          <span class="comment"># 创建PV</span></span><br><span class="line">pvdisplay                           <span class="comment"># 显示PV信息</span></span><br><span class="line">pvmove /dev/sdb                     <span class="comment"># 迁移PV数据</span></span><br><span class="line">pvremove /dev/sdb                   <span class="comment"># 删除PV</span></span><br></pre></td></tr></table></figure>
<h4 id="卷组-VG-管理">卷组(VG)管理</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vgcreate vg_data /dev/sdb /dev/sdc  <span class="comment"># 创建VG</span></span><br><span class="line">vgextend vg_data /dev/sdd           <span class="comment"># 扩展VG</span></span><br><span class="line">vgreduce vg_data /dev/sdb           <span class="comment"># 缩减VG</span></span><br><span class="line">vgdisplay                           <span class="comment"># 显示VG信息</span></span><br><span class="line">vgremove vg_data                    <span class="comment"># 删除VG</span></span><br></pre></td></tr></table></figure>
<h4 id="逻辑卷-LV-管理">逻辑卷(LV)管理</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">lvcreate -L 50G -n lv_home vg_data  <span class="comment"># 创建50G逻辑卷</span></span><br><span class="line">lvextend -L +10G /dev/vg_data/lv_home <span class="comment"># 扩展10G</span></span><br><span class="line">lvreduce -L -5G /dev/vg_data/lv_home <span class="comment"># 缩减5G</span></span><br><span class="line">lvresize -L 60G /dev/vg_data/lv_home <span class="comment"># 调整到60G</span></span><br><span class="line">lvdisplay                           <span class="comment"># 显示LV信息</span></span><br><span class="line">lvremove /dev/vg_data/lv_home       <span class="comment"># 删除LV</span></span><br></pre></td></tr></table></figure>
<h4 id="文件系统扩展">文件系统扩展</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对于ext2/3/4文件系统</span></span><br><span class="line">resize2fs /dev/vg_data/lv_home</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对于XFS文件系统</span></span><br><span class="line">xfs_growfs /dev/vg_data/lv_home</span><br></pre></td></tr></table></figure>
<h3 id="6-3-LVM-快照功能">6.3 LVM 快照功能</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lvcreate -L 10G -s -n snap_home /dev/vg_data/lv_home  <span class="comment"># 创建快照</span></span><br><span class="line">mount /dev/vg_data/snap_home /mnt/snapshot           <span class="comment"># 挂载快照</span></span><br><span class="line">umount /mnt/snapshot                                 <span class="comment"># 卸载快照</span></span><br><span class="line">lvremove /dev/vg_data/snap_home                      <span class="comment"># 删除快照</span></span><br></pre></td></tr></table></figure>
<h3 id="6-4-LVM-信息查看命令">6.4 LVM 信息查看命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pvs        <span class="comment"># 简要PV信息</span></span><br><span class="line">vgs        <span class="comment"># 简要VG信息</span></span><br><span class="line">lvs        <span class="comment"># 简要LV信息</span></span><br><span class="line">pvdisplay  <span class="comment"># 详细PV信息</span></span><br><span class="line">vgdisplay  <span class="comment"># 详细VG信息</span></span><br><span class="line">lvdisplay  <span class="comment"># 详细LV信息</span></span><br><span class="line">lsblk      <span class="comment"># 块设备层次结构</span></span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../2020/05/08/linux/5-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../2020/05/08/linux/4-%E6%96%87%E4%BB%B6%E5%92%8C%E7%A8%8B%E5%BA%8F%E7%AE%A1%E7%90%86/"
                            aria-label=": 4.文件和程序管理"
                        >
                            4.文件和程序管理
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-08T16:06:24+08:00">
	
		    2020 年 5 月 8 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="1-用户权限管理">1. 用户权限管理</h2>
<h3 id="1-1-文件权限基础">1.1 文件权限基础</h3>
<h4 id="权限表示法">权限表示法</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">d rwx r-x r--</span><br><span class="line">↑ ↑   ↑   ↑</span><br><span class="line">│ │   │   └─ 其他用户权限(r--)</span><br><span class="line">│ │   └─── 所属组权限(r-x)</span><br><span class="line">│ └────── 所有者权限(rwx)</span><br><span class="line">└──────── 文件类型(d=目录)</span><br></pre></td></tr></table></figure>
<h4 id="权限数值">权限数值</h4>
<ul>
<li>r(读): 4</li>
<li>w(写): 2</li>
<li>x(执行): 1</li>
</ul>
<h3 id="1-2-chmod-命令">1.2 chmod 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> [选项] 权限 文件</span><br></pre></td></tr></table></figure>
<h4 id="常用选项">常用选项</h4>
<ul>
<li><code>-R</code>: 递归修改目录下所有文件</li>
</ul>
<h4 id="权限设置方法">权限设置方法</h4>
<ol>
<li>
<p><strong>符号法</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> u+x file      <span class="comment"># 给所有者添加执行权限</span></span><br><span class="line"><span class="built_in">chmod</span> g-w file      <span class="comment"># 移除组的写权限</span></span><br><span class="line"><span class="built_in">chmod</span> o=rx file     <span class="comment"># 设置其他用户为读执行</span></span><br><span class="line"><span class="built_in">chmod</span> a+r file      <span class="comment"># 给所有用户添加读权限</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>数字法</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 755 file      <span class="comment"># rwxr-xr-x</span></span><br><span class="line"><span class="built_in">chmod</span> 644 file      <span class="comment"># rw-r--r--</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="1-3-特殊权限">1.3 特殊权限</h3>
<table>
<thead>
<tr>
<th>权限</th>
<th>数值</th>
<th>设置方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>SUID</td>
<td>4000</td>
<td><code>u+s</code></td>
<td>执行时以文件所有者权限运行</td>
</tr>
<tr>
<td>SGID</td>
<td>2000</td>
<td><code>g+s</code></td>
<td>执行时以文件所属组权限运行</td>
</tr>
<tr>
<td>Sticky</td>
<td>1000</td>
<td><code>o+t</code></td>
<td>目录中文件只有所有者能删除</td>
</tr>
</tbody>
</table>
<h3 id="1-4-umask-命令">1.4 umask 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">umask</span>           <span class="comment"># 查看当前umask值</span></span><br><span class="line"><span class="built_in">umask</span> 022       <span class="comment"># 设置新的umask值</span></span><br></pre></td></tr></table></figure>
<ul>
<li>文件默认权限: <code>666 - umask</code></li>
<li>目录默认权限: <code>777 - umask</code></li>
</ul>
<h3 id="1-5-ACL-高级权限控制">1.5 ACL 高级权限控制</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setfacl -m u:user:rwx file   <span class="comment"># 添加用户ACL</span></span><br><span class="line">setfacl -x u:user file       <span class="comment"># 删除用户ACL</span></span><br><span class="line">getfacl file                 <span class="comment"># 查看ACL权限</span></span><br></pre></td></tr></table></figure>
<h3 id="1-6-所有权管理">1.6 所有权管理</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> user:group file        <span class="comment"># 修改所有者和组</span></span><br><span class="line"><span class="built_in">chown</span> -R user:group <span class="built_in">dir</span>      <span class="comment"># 递归修改</span></span><br><span class="line"><span class="built_in">chgrp</span> group file             <span class="comment"># 修改文件所属组</span></span><br></pre></td></tr></table></figure>
<h2 id="2-链接管理">2. 链接管理</h2>
<h3 id="2-1-链接类型对比">2.1 链接类型对比</h3>
<table>
<thead>
<tr>
<th>特性</th>
<th>硬链接</th>
<th>软链接</th>
</tr>
</thead>
<tbody>
<tr>
<td>inode</td>
<td>相同</td>
<td>不同</td>
</tr>
<tr>
<td>跨文件系统</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>链接目录</td>
<td>不允许</td>
<td>允许</td>
</tr>
<tr>
<td>原文件删除</td>
<td>仍可访问</td>
<td>失效</td>
</tr>
</tbody>
</table>
<h3 id="2-2-ln-命令">2.2 ln 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> <span class="built_in">source</span> <span class="built_in">link</span>        <span class="comment"># 创建硬链接</span></span><br><span class="line"><span class="built_in">ln</span> -s <span class="built_in">source</span> <span class="built_in">link</span>     <span class="comment"># 创建软链接</span></span><br></pre></td></tr></table></figure>
<h2 id="3-进程管理">3. 进程管理</h2>
<h3 id="3-1-ps-命令">3.1 ps 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ps aux       <span class="comment"># 查看所有进程</span></span><br><span class="line">ps -ef       <span class="comment"># 完整格式显示</span></span><br><span class="line">ps -u user   <span class="comment"># 查看指定用户进程</span></span><br></pre></td></tr></table></figure>
<h3 id="3-2-top-命令">3.2 top 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top          <span class="comment"># 动态查看进程</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>r</code>: 调整进程优先级</li>
<li><code>k</code>: 终止进程</li>
<li><code>q</code>: 退出</li>
</ul>
<h3 id="3-3-进程控制">3.3 进程控制</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -9 PID          <span class="comment"># 强制终止进程</span></span><br><span class="line">killall process      <span class="comment"># 终止同名所有进程</span></span><br><span class="line">pkill pattern        <span class="comment"># 按模式终止进程</span></span><br></pre></td></tr></table></figure>
<h4 id="常用信号">常用信号</h4>
<table>
<thead>
<tr>
<th>信号</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>HUP</td>
<td>1</td>
<td>重新加载配置</td>
</tr>
<tr>
<td>INT</td>
<td>2</td>
<td>中断(Ctrl+C)</td>
</tr>
<tr>
<td>KILL</td>
<td>9</td>
<td>强制终止</td>
</tr>
<tr>
<td>TERM</td>
<td>15</td>
<td>正常终止</td>
</tr>
</tbody>
</table>
<h3 id="3-4-作业控制">3.4 作业控制</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &amp;       <span class="comment"># 后台运行</span></span><br><span class="line"><span class="built_in">fg</span> %1          <span class="comment"># 前台恢复作业1</span></span><br><span class="line"><span class="built_in">bg</span> %2          <span class="comment"># 后台继续作业2</span></span><br><span class="line"><span class="built_in">jobs</span>           <span class="comment"># 查看后台作业</span></span><br></pre></td></tr></table></figure>
<h3 id="3-5-优先级管理">3.5 优先级管理</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nice</span> -n 10 <span class="built_in">command</span>   <span class="comment"># 启动低优先级进程</span></span><br><span class="line">renice 15 -p PID     <span class="comment"># 调整运行中进程优先级</span></span><br></pre></td></tr></table></figure>
<h3 id="3-6-终端复用器">3.6 终端复用器</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tmux                <span class="comment"># 启动新会话</span></span><br></pre></td></tr></table></figure>
<p>常用快捷键:</p>
<ul>
<li><code>Ctrl+b c</code>: 新建窗口</li>
<li><code>Ctrl+b %</code>: 垂直分割</li>
<li><code>Ctrl+b &quot;</code>: 水平分割</li>
<li><code>Ctrl+b d</code>: 分离会话</li>
</ul>
<h2 id="4-压缩与归档">4. 压缩与归档</h2>
<h3 id="4-1-单文件压缩">4.1 单文件压缩</h3>
<h4 id="gzip">gzip</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gzip file            <span class="comment"># 压缩为file.gz</span></span><br><span class="line">gunzip file.gz       <span class="comment"># 解压</span></span><br><span class="line">gzip -d file.gz      <span class="comment"># 解压(同上)</span></span><br></pre></td></tr></table></figure>
<h4 id="bzip2">bzip2</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bzip2 file           <span class="comment"># 压缩为file.bz2</span></span><br><span class="line">bunzip2 file.bz2     <span class="comment"># 解压</span></span><br></pre></td></tr></table></figure>
<h4 id="xz">xz</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xz file              <span class="comment"># 压缩为file.xz</span></span><br><span class="line">unxz file.xz         <span class="comment"># 解压</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2-归档工具">4.2 归档工具</h3>
<h4 id="tar-命令">tar 命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打包压缩</span></span><br><span class="line">tar czvf archive.tar.gz <span class="built_in">dir</span>/     <span class="comment"># gzip压缩</span></span><br><span class="line">tar cjvf archive.tar.bz2 <span class="built_in">dir</span>/    <span class="comment"># bzip2压缩</span></span><br><span class="line">tar cJvf archive.tar.xz <span class="built_in">dir</span>/     <span class="comment"># xz压缩</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar xzvf archive.tar.gz          <span class="comment"># 解压gzip</span></span><br><span class="line">tar xjvf archive.tar.bz2         <span class="comment"># 解压bzip2</span></span><br><span class="line">tar xJvf archive.tar.xz          <span class="comment"># 解压xz</span></span><br></pre></td></tr></table></figure>
<h4 id="cpio-命令">cpio 命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . | cpio -ov &gt; backup.cpio      <span class="comment"># 创建归档</span></span><br><span class="line">cpio -idv &lt; backup.cpio              <span class="comment"># 解压归档</span></span><br></pre></td></tr></table></figure>
<h4 id="dd-命令">dd 命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/sda of=disk.img bs=1M     <span class="comment"># 创建磁盘映像</span></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=disk.img of=/dev/sdb           <span class="comment"># 恢复磁盘映像</span></span><br></pre></td></tr></table></figure>
<h2 id="5-实用技巧">5. 实用技巧</h2>
<h3 id="5-1-nohup-命令">5.1 nohup 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> <span class="built_in">command</span> &amp;      <span class="comment"># 退出终端后继续运行</span></span><br></pre></td></tr></table></figure>
<h3 id="5-2-watch-命令">5.2 watch 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 5 <span class="string">&#x27;ls -l&#x27;</span>   <span class="comment"># 每5秒执行一次命令</span></span><br></pre></td></tr></table></figure>
<h3 id="5-3-文件传输">5.3 文件传输</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=file.iso | ssh user@host <span class="string">&quot;dd of=file.iso&quot;</span>  <span class="comment"># 通过SSH传输文件</span></span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../2020/05/08/linux/4-%E6%96%87%E4%BB%B6%E5%92%8C%E7%A8%8B%E5%BA%8F%E7%AE%A1%E7%90%86/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../2020/05/07/linux/3-bash/"
                            aria-label=": 3.bash"
                        >
                            3.bash
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-07T16:30:52+08:00">
	
		    2020 年 5 月 7 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1>Bash 命令与 Shell 使用指南</h1>
<h2 id="1-命令组合与控制">1. 命令组合与控制</h2>
<h3 id="1-1-命令组合方式">1.1 命令组合方式</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">命令1 ; 命令2    <span class="comment"># 无论命令1成功与否，都会执行命令2</span></span><br><span class="line">命令1 &amp;&amp; 命令2   <span class="comment"># 只有命令1成功执行(返回0)才会执行命令2</span></span><br><span class="line">命令1 || 命令2   <span class="comment"># 只有命令1执行失败(非0)才会执行命令2</span></span><br></pre></td></tr></table></figure>
<h3 id="1-2-引用符号">1.2 引用符号</h3>
<table>
<thead>
<tr>
<th>符号</th>
<th>名称</th>
<th>功能说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>'</code></td>
<td>单引号</td>
<td>内部所有内容视为纯文本，不解释变量和特殊字符</td>
</tr>
<tr>
<td><code>&quot;</code></td>
<td>双引号</td>
<td>会解释$、`和\等特殊字符，变量会被展开</td>
</tr>
<tr>
<td><code>`</code></td>
<td>反引号</td>
<td>执行内部命令并将结果替换到当前位置(等同于<code>$(命令)</code>语法)</td>
</tr>
</tbody>
</table>
<h2 id="2-命令历史">2. 命令历史</h2>
<h3 id="2-1-history-命令">2.1 history 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">history</span>        <span class="comment"># 显示命令历史记录</span></span><br><span class="line">!5            <span class="comment"># 执行历史记录中第5条命令</span></span><br><span class="line">!<span class="built_in">ls</span>           <span class="comment"># 执行最近以ls开头的命令</span></span><br><span class="line">!?config      <span class="comment"># 执行最近包含config的命令</span></span><br></pre></td></tr></table></figure>
<h3 id="2-2-历史记录管理">2.2 历史记录管理</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">history</span> -c    <span class="comment"># 清除当前shell的历史记录</span></span><br><span class="line"><span class="built_in">history</span> -d 10 <span class="comment"># 删除第10条历史记录</span></span><br></pre></td></tr></table></figure>
<h3 id="2-3-相关环境变量">2.3 相关环境变量</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HISTSIZE=1000       <span class="comment"># 内存中保存的历史记录数量</span></span><br><span class="line">HISTFILESIZE=2000   <span class="comment"># 历史记录文件保存的最大数量</span></span><br><span class="line">HISTFILE=~/.bash_history  <span class="comment"># 历史记录文件路径</span></span><br></pre></td></tr></table></figure>
<h2 id="3-Shell-类型与快捷键">3. Shell 类型与快捷键</h2>
<h3 id="3-1-常见Shell类型">3.1 常见Shell类型</h3>
<ul>
<li><strong>Bourne Shell(sh)</strong>: 经典Unix shell → 衍生出bash</li>
<li><strong>Bash(Bourne-Again Shell)</strong>: Linux默认shell</li>
<li><strong>C Shell(csh)</strong>: 类C语法 → 衍生出tcsh</li>
<li><strong>Korn Shell(ksh)</strong>: 结合sh和csh优点</li>
<li><strong>Z Shell(zsh)</strong>: 功能强大的现代shell</li>
</ul>
<h3 id="3-2-常用快捷键">3.2 常用快捷键</h3>
<table>
<thead>
<tr>
<th>快捷键</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tab</td>
<td>命令/文件名自动补全</td>
</tr>
<tr>
<td>Ctrl+A</td>
<td>移动到行首</td>
</tr>
<tr>
<td>Ctrl+E</td>
<td>移动到行尾</td>
</tr>
<tr>
<td>Ctrl+D</td>
<td>删除当前字符(相当于Delete)</td>
</tr>
<tr>
<td>Ctrl+H</td>
<td>删除前一个字符(相当于Backspace)</td>
</tr>
<tr>
<td>Ctrl+L</td>
<td>清屏(等同于clear命令)</td>
</tr>
<tr>
<td>Ctrl+C</td>
<td>终止当前命令</td>
</tr>
<tr>
<td>Ctrl+Z</td>
<td>暂停当前命令(可用fg恢复)</td>
</tr>
<tr>
<td>Ctrl+S</td>
<td>暂停屏幕输出</td>
</tr>
<tr>
<td>Ctrl+Q</td>
<td>恢复屏幕输出</td>
</tr>
</tbody>
</table>
<h2 id="4-变量与环境设置">4. 变量与环境设置</h2>
<h3 id="4-1-变量操作">4.1 变量操作</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> VAR=value    <span class="comment"># 设置环境变量(对新shell有效)</span></span><br><span class="line"><span class="built_in">unset</span> VAR           <span class="comment"># 删除变量</span></span><br><span class="line">PATH=<span class="variable">$PATH</span>:/new/path <span class="comment"># 追加PATH路径</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2-set-命令选项">4.2 set 命令选项</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> -o option      <span class="comment"># 启用选项</span></span><br><span class="line"><span class="built_in">set</span> +o option      <span class="comment"># 禁用选项</span></span><br></pre></td></tr></table></figure>
<p>常用选项：</p>
<ul>
<li><code>noclobber</code>/<code>-C</code>: 防止重定向覆盖已有文件</li>
<li><code>histexpand</code>/<code>-H</code>: 启用<code>!</code>历史命令扩展</li>
</ul>
<h3 id="4-3-提示符定制-PS1">4.3 提示符定制(PS1)</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS1=<span class="string">&#x27;[\u@\h \W]\$ &#x27;</span>  <span class="comment"># 常见默认提示符格式</span></span><br></pre></td></tr></table></figure>
<p>可用转义符：</p>
<ul>
<li><code>\s</code>: shell名称</li>
<li><code>\v</code>: bash版本</li>
<li><code>\u</code>: 用户名</li>
<li><code>\h</code>: 主机名</li>
<li><code>\w</code>: 当前工作目录</li>
</ul>
<h3 id="4-4-用户切换">4.4 用户切换</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su user       <span class="comment"># 切换用户(不改变环境变量)</span></span><br><span class="line">su - user     <span class="comment"># 完全切换用户(包括环境)</span></span><br></pre></td></tr></table></figure>
<h2 id="5-帮助命令-man-详解">5.帮助命令 <code>man</code> 详解</h2>
<h3 id="基本用法">基本用法</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man <span class="built_in">command</span>      <span class="comment"># 查看命令的手册页(返回第一个匹配的帮助文件)</span></span><br></pre></td></tr></table></figure>
<h3 id="常用选项">常用选项</h3>
<table>
<thead>
<tr>
<th>选项</th>
<th>功能说明</th>
<th>等价命令</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-a</code></td>
<td>显示所有匹配的手册页(按顺序显示)</td>
<td>-</td>
</tr>
<tr>
<td><code>-f</code></td>
<td>查找完全匹配的命令文档</td>
<td><code>whatis</code></td>
</tr>
<tr>
<td><code>-k</code></td>
<td>查找包含关键词的文档</td>
<td><code>apropos</code></td>
</tr>
<tr>
<td><code>-w</code></td>
<td>显示手册页的存储路径</td>
<td>-</td>
</tr>
</tbody>
</table>
<h3 id="指定手册章节">指定手册章节</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">man 5 passwd     <span class="comment"># 查看/etc/passwd文件的格式说明(第5节)</span></span><br><span class="line">man 3 <span class="built_in">printf</span>     <span class="comment"># 查看C库函数printf的文档(第3节)</span></span><br></pre></td></tr></table></figure>
<h3 id="手册章节分类">手册章节分类</h3>
<table>
<thead>
<tr>
<th>Section</th>
<th>内容类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>用户命令</td>
</tr>
<tr>
<td>2</td>
<td>系统调用</td>
</tr>
<tr>
<td>3</td>
<td>C库函数</td>
</tr>
<tr>
<td>4</td>
<td>设备文件</td>
</tr>
<tr>
<td>5</td>
<td>配置文件格式</td>
</tr>
<tr>
<td>6</td>
<td>游戏</td>
</tr>
<tr>
<td>7</td>
<td>杂项</td>
</tr>
<tr>
<td>8</td>
<td>系统管理命令</td>
</tr>
<tr>
<td>9</td>
<td>Linux内核相关</td>
</tr>
</tbody>
</table>
<h3 id="手册页存储位置">手册页存储位置</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/man         <span class="comment"># 系统手册页主目录</span></span><br><span class="line">/usr/local/share/man   <span class="comment"># 本地安装软件的手册页</span></span><br></pre></td></tr></table></figure>
<h3 id="维护whatis数据库">维护whatis数据库</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">makewhatis            <span class="comment"># 生成/更新whatis数据库(供-f/-k使用)</span></span><br><span class="line">mandb                 <span class="comment"># 现代系统中更新手册数据库(替代makewhatis)</span></span><br></pre></td></tr></table></figure>
<h3 id="使用示例">使用示例</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">man -a <span class="built_in">printf</span>        <span class="comment"># 查看所有章节的printf文档</span></span><br><span class="line">man -k <span class="string">&quot;copy&quot;</span>        <span class="comment"># 查找所有包含&quot;copy&quot;关键词的命令</span></span><br><span class="line">man -f <span class="built_in">ls</span>            <span class="comment"># 精确查找ls命令的文档</span></span><br><span class="line">man -w 5 passwd      <span class="comment"># 显示passwd配置文件的文档路径</span></span><br></pre></td></tr></table></figure>
<h2 id="6-管道与重定向">6. 管道与重定向</h2>
<h3 id="6-1-标准文件描述符">6.1 标准文件描述符</h3>
<table>
<thead>
<tr>
<th>文件描述符</th>
<th>名称</th>
<th>默认设备</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>标准输入(stdin)</td>
<td>键盘</td>
</tr>
<tr>
<td>1</td>
<td>标准输出(stdout)</td>
<td>屏幕</td>
</tr>
<tr>
<td>2</td>
<td>标准错误(stderr)</td>
<td>屏幕</td>
</tr>
</tbody>
</table>
<h3 id="6-2-管道">6.2 管道(|)</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">命令1 | 命令2    <span class="comment"># 将命令1的输出作为命令2的输入</span></span><br></pre></td></tr></table></figure>
<h3 id="6-3-tee命令">6.3 tee命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">命令 | <span class="built_in">tee</span> 文件    <span class="comment"># 同时输出到屏幕和文件</span></span><br><span class="line">命令 | <span class="built_in">tee</span> -a 文件 <span class="comment"># 追加模式(不覆盖原文件)</span></span><br></pre></td></tr></table></figure>
<h3 id="6-4-重定向操作">6.4 重定向操作</h3>
<table>
<thead>
<tr>
<th>语法</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>命令 &gt; 文件</code></td>
<td>标准输出覆盖写入文件</td>
</tr>
<tr>
<td><code>命令 &gt;&gt; 文件</code></td>
<td>标准输出追加写入文件</td>
</tr>
<tr>
<td><code>命令 &lt; 文件</code></td>
<td>从文件读取标准输入</td>
</tr>
<tr>
<td><code>命令 2&gt; 文件</code></td>
<td>标准错误覆盖写入文件</td>
</tr>
<tr>
<td><code>命令 2&gt;&gt; 文件</code></td>
<td>标准错误追加写入文件</td>
</tr>
<tr>
<td><code>命令 &gt; 文件 2&gt;&amp;1</code></td>
<td>标准输出和错误都覆盖写入同一文件</td>
</tr>
<tr>
<td><code>命令 &gt;&gt; 文件 2&gt;&amp;1</code></td>
<td>标准输出和错误都追加写入同一文件</td>
</tr>
<tr>
<td><code>命令 &lt;&lt; 结束标记</code></td>
<td>从标准输入读取直到遇到&quot;结束标记&quot;(here文档)</td>
</tr>
<tr>
<td><code>命令 &amp;&gt; 文件</code></td>
<td>标准输出和错误都覆盖写入文件(bash简写)</td>
</tr>
</tbody>
</table>
<h2 id="7-文件操作命令">7. 文件操作命令</h2>
<h3 id="7-1-ls命令">7.1 ls命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -a    <span class="comment"># 显示所有文件(包括.开头的隐藏文件)</span></span><br><span class="line"><span class="built_in">ls</span> -A    <span class="comment"># 类似-a但不显示.和..</span></span><br><span class="line"><span class="built_in">ls</span> -d    <span class="comment"># 显示目录本身而非内容</span></span><br><span class="line"><span class="built_in">ls</span> -F    <span class="comment"># 显示文件类型标识(/:目录, *:可执行, @:链接)</span></span><br><span class="line"><span class="built_in">ls</span> -i    <span class="comment"># 显示inode编号</span></span><br><span class="line"><span class="built_in">ls</span> -l    <span class="comment"># 长格式显示详细信息</span></span><br><span class="line"><span class="built_in">ls</span> -t    <span class="comment"># 按修改时间排序</span></span><br><span class="line"><span class="built_in">ls</span> -h    <span class="comment"># 人类可读的文件大小(如1K, 2M)</span></span><br></pre></td></tr></table></figure>
<h3 id="7-2-cp命令">7.2 cp命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> -f    <span class="comment"># 强制覆盖不提示</span></span><br><span class="line"><span class="built_in">cp</span> -i    <span class="comment"># 覆盖前提示确认</span></span><br><span class="line"><span class="built_in">cp</span> -p    <span class="comment"># 保留原文件属性</span></span><br><span class="line"><span class="built_in">cp</span> -r/R  <span class="comment"># 递归复制目录</span></span><br><span class="line"><span class="built_in">cp</span> -d    <span class="comment"># 保留链接文件</span></span><br><span class="line"><span class="built_in">cp</span> -a    <span class="comment"># 归档模式(相当于-dpR)</span></span><br></pre></td></tr></table></figure>
<h3 id="7-3-mv命令">7.3 mv命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> -f    <span class="comment"># 强制覆盖不提示</span></span><br><span class="line"><span class="built_in">mv</span> -i    <span class="comment"># 覆盖前提示确认</span></span><br></pre></td></tr></table></figure>
<h3 id="7-4-mkdir命令">7.4 mkdir命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -m 755 <span class="built_in">dir</span>   <span class="comment"># 创建指定权限的目录</span></span><br><span class="line"><span class="built_in">mkdir</span> -p dir1/dir2 <span class="comment"># 创建多级目录</span></span><br></pre></td></tr></table></figure>
<h3 id="7-5-rm命令">7.5 rm命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -f    <span class="comment"># 强制删除不提示</span></span><br><span class="line"><span class="built_in">rm</span> -i    <span class="comment"># 删除前提示确认</span></span><br><span class="line"><span class="built_in">rm</span> -r/R  <span class="comment"># 递归删除目录</span></span><br></pre></td></tr></table></figure>
<h3 id="7-6-rmdir命令">7.6 rmdir命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rmdir</span> -p dir1/dir2 <span class="comment"># 删除多级空目录</span></span><br></pre></td></tr></table></figure>
<h3 id="7-7-touch命令">7.7 touch命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> -t 202405071530.00 file  <span class="comment"># 设置特定时间戳(YYMMDDhhmm.ss)</span></span><br><span class="line"><span class="built_in">touch</span> -a file       <span class="comment"># 仅更新访问时间</span></span><br><span class="line"><span class="built_in">touch</span> -m file       <span class="comment"># 仅更新修改时间</span></span><br></pre></td></tr></table></figure>
<h3 id="7-8-file命令">7.8 file命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file document.txt   <span class="comment"># 检测文件类型和编码</span></span><br></pre></td></tr></table></figure>
<h2 id="8-元字符-通配符">8. 元字符(通配符)</h2>
<table>
<thead>
<tr>
<th>元字符</th>
<th>功能描述</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>*</code></td>
<td>匹配任意长度字符(包括空字符)</td>
<td><code>ls *.txt</code></td>
</tr>
<tr>
<td><code>?</code></td>
<td>匹配任意单个字符</td>
<td><code>ls file?.txt</code></td>
</tr>
<tr>
<td><code>[]</code></td>
<td>匹配括号内任意一个字符</td>
<td><code>ls file[123].txt</code></td>
</tr>
<tr>
<td><code>[!]</code></td>
<td>匹配不在括号内的任意一个字符</td>
<td><code>ls file[!a-z].txt</code></td>
</tr>
<tr>
<td><code>&#123;&#125;</code></td>
<td>展开括号内逗号分隔的多个模式</td>
<td><code>touch file&#123;1,2,3&#125;</code></td>
</tr>
</tbody>
</table>
<p>示例扩展：</p>
<ul>
<li><code>[a-z]</code>: 任意小写字母</li>
<li><code>[0-9]</code>: 任意数字</li>
<li><code>[a-zA-Z]</code>: 任意字母</li>
<li><code>file&#123;1..3&#125;</code>: 展开为file1, file2, file3</li>
</ul>
<h2 id="9-文档处理命令">9. 文档处理命令</h2>
<h3 id="9-1-文件内容查看">9.1 文件内容查看</h3>
<h4 id="cat-命令">cat 命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> -n file.txt  <span class="comment"># 显示文件内容并添加行号</span></span><br></pre></td></tr></table></figure>
<h4 id="nl-命令（行号显示）">nl 命令（行号显示）</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nl</span> -b a file.txt    <span class="comment"># 所有行添加行号</span></span><br><span class="line"><span class="built_in">nl</span> -b t file.txt    <span class="comment"># 非空行添加行号</span></span><br><span class="line"><span class="built_in">nl</span> -h a -f a file.txt  <span class="comment"># 为页眉和页脚也添加行号</span></span><br></pre></td></tr></table></figure>
<h4 id="od-命令（二进制查看）">od 命令（二进制查看）</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">od</span> -t c file.bin    <span class="comment"># 以ASCII字符显示</span></span><br><span class="line"><span class="built_in">od</span> -t o file.bin    <span class="comment"># 以八进制显示</span></span><br><span class="line"><span class="built_in">od</span> -t x file.bin    <span class="comment"># 以十六进制显示</span></span><br></pre></td></tr></table></figure>
<h3 id="9-2-文件头部-尾部查看">9.2 文件头部/尾部查看</h3>
<h4 id="head-命令">head 命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">head</span> -n 10 file.txt    <span class="comment"># 显示前10行</span></span><br><span class="line"><span class="built_in">head</span> -10 file.txt      <span class="comment"># 同上</span></span><br><span class="line"><span class="built_in">head</span> -c 100 file.txt   <span class="comment"># 显示前100字节</span></span><br></pre></td></tr></table></figure>
<h4 id="tail-命令">tail 命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -n 10 file.txt    <span class="comment"># 显示最后10行</span></span><br><span class="line"><span class="built_in">tail</span> -10 file.txt      <span class="comment"># 同上</span></span><br><span class="line"><span class="built_in">tail</span> -c 100 file.txt   <span class="comment"># 显示最后100字节</span></span><br><span class="line"><span class="built_in">tail</span> -f log.txt        <span class="comment"># 实时监控日志文件</span></span><br></pre></td></tr></table></figure>
<h3 id="9-3-文本提取与转换">9.3 文本提取与转换</h3>
<h4 id="cut-命令">cut 命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cut</span> -c 1-5 file.txt      <span class="comment"># 提取每行第1-5个字符</span></span><br><span class="line"><span class="built_in">cut</span> -d: -f1 /etc/passwd  <span class="comment"># 以冒号分隔，提取第一个字段</span></span><br></pre></td></tr></table></figure>
<h4 id="join-命令（合并文件）">join 命令（合并文件）</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">join</span> -j 1 file1.txt file2.txt  <span class="comment"># 按第一个字段合并两个文件</span></span><br></pre></td></tr></table></figure>
<h4 id="paste-命令">paste 命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">paste</span> -d<span class="string">&quot;;&quot;</span> file1.txt file2.txt  <span class="comment"># 用分号分隔合并文件</span></span><br></pre></td></tr></table></figure>
<h4 id="tr-命令（字符转换）">tr 命令（字符转换）</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tr</span> <span class="string">&#x27;a-z&#x27;</span> <span class="string">&#x27;A-Z&#x27;</span> &lt; file.txt    <span class="comment"># 小写转大写</span></span><br><span class="line"><span class="built_in">tr</span> -d <span class="string">&#x27;\r&#x27;</span> &lt; file.txt        <span class="comment"># 删除回车符</span></span><br><span class="line"><span class="built_in">tr</span> -s <span class="string">&#x27; &#x27;</span> &lt; file.txt         <span class="comment"># 压缩连续空格</span></span><br><span class="line"><span class="built_in">tr</span> -d <span class="string">&#x27;[:digit:]&#x27;</span> &lt; file.txt <span class="comment"># 删除所有数字</span></span><br></pre></td></tr></table></figure>
<h3 id="9-4-文本排序与统计">9.4 文本排序与统计</h3>
<h4 id="sort-命令">sort 命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt          <span class="comment"># 按字母顺序排序</span></span><br><span class="line"><span class="built_in">sort</span> -n file.txt       <span class="comment"># 按数值排序</span></span><br><span class="line"><span class="built_in">sort</span> -r file.txt       <span class="comment"># 反向排序</span></span><br><span class="line"><span class="built_in">sort</span> -t: -k3n /etc/passwd  <span class="comment"># 按冒号分隔的第3列数值排序</span></span><br></pre></td></tr></table></figure>
<h4 id="uniq-命令（去重）">uniq 命令（去重）</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt | <span class="built_in">uniq</span>    <span class="comment"># 去重（需先排序）</span></span><br><span class="line"><span class="built_in">uniq</span> -d file.txt        <span class="comment"># 只显示重复行</span></span><br><span class="line"><span class="built_in">uniq</span> -u file.txt        <span class="comment"># 只显示唯一行</span></span><br></pre></td></tr></table></figure>
<h4 id="wc-命令（统计）">wc 命令（统计）</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> -l file.txt    <span class="comment"># 统计行数</span></span><br><span class="line"><span class="built_in">wc</span> -w file.txt    <span class="comment"># 统计单词数</span></span><br><span class="line"><span class="built_in">wc</span> -c file.txt    <span class="comment"># 统计字节数</span></span><br></pre></td></tr></table></figure>
<h3 id="9-5-文本分割与格式化">9.5 文本分割与格式化</h3>
<h4 id="split-命令">split 命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">split</span> -l 1000 bigfile.txt part_  <span class="comment"># 每1000行分割文件</span></span><br></pre></td></tr></table></figure>
<h4 id="pr-命令（分页）">pr 命令（分页）</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">pr</span> -l 40 file.txt    <span class="comment"># 按每页40行分页显示</span></span><br></pre></td></tr></table></figure>
<h4 id="fmt-命令（格式化）">fmt 命令（格式化）</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">fmt</span> -w 80 file.txt   <span class="comment"># 设置每行80个字符</span></span><br></pre></td></tr></table></figure>
<h4 id="expand-unexpand-命令">expand/unexpand 命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expand</span> -t 4 file.txt    <span class="comment"># 将tab转为4个空格</span></span><br><span class="line"><span class="built_in">unexpand</span> -t 4 file.txt  <span class="comment"># 将4个空格转为tab</span></span><br></pre></td></tr></table></figure>
<h3 id="8-6-高级文本处理">8.6 高级文本处理</h3>
<h4 id="xargs-命令">xargs 命令</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -name <span class="string">&quot;*.log&quot;</span> | xargs <span class="built_in">rm</span>    <span class="comment"># 删除所有log文件</span></span><br><span class="line">find . -<span class="built_in">type</span> f | xargs grep <span class="string">&quot;text&quot;</span> <span class="comment"># 在所有文件中搜索文本</span></span><br></pre></td></tr></table></figure>
<h2 id="10-vi-vim-编辑器">10. vi/vim 编辑器</h2>
<h3 id="10-1-基本操作">10.1 基本操作</h3>
<h4 id="启动与退出">启动与退出</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi file.txt        <span class="comment"># 编辑文件</span></span><br><span class="line">vi -R file.txt     <span class="comment"># 只读模式</span></span><br><span class="line">:q                 <span class="comment"># 退出</span></span><br><span class="line">:q!                <span class="comment"># 强制退出</span></span><br><span class="line">:wq 或 ZZ          <span class="comment"># 保存退出</span></span><br></pre></td></tr></table></figure>
<h4 id="模式切换">模式切换</h4>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>i</td>
<td>在光标前插入</td>
</tr>
<tr>
<td>a</td>
<td>在光标后插入</td>
</tr>
<tr>
<td>I</td>
<td>在行首插入</td>
</tr>
<tr>
<td>A</td>
<td>在行尾插入</td>
</tr>
<tr>
<td>o</td>
<td>在下一行插入</td>
</tr>
<tr>
<td>O</td>
<td>在上一行插入</td>
</tr>
<tr>
<td>ESC</td>
<td>返回命令模式</td>
</tr>
</tbody>
</table>
<h3 id="10-2-光标移动">10.2 光标移动</h3>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>h/j/k/l</td>
<td>左/下/上/右</td>
</tr>
<tr>
<td>0</td>
<td>行首</td>
</tr>
<tr>
<td>$</td>
<td>行尾</td>
</tr>
<tr>
<td>gg</td>
<td>文件开头</td>
</tr>
<tr>
<td>G</td>
<td>文件末尾</td>
</tr>
<tr>
<td>50G</td>
<td>跳转到第50行</td>
</tr>
<tr>
<td>Ctrl+b</td>
<td>上一页</td>
</tr>
<tr>
<td>Ctrl+f</td>
<td>下一页</td>
</tr>
</tbody>
</table>
<h3 id="10-3-编辑命令">10.3 编辑命令</h3>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td>删除当前字符</td>
</tr>
<tr>
<td>X</td>
<td>删除前一个字符</td>
</tr>
<tr>
<td>dd</td>
<td>删除当前行</td>
</tr>
<tr>
<td>dw</td>
<td>删除下一个单词</td>
</tr>
<tr>
<td>yy</td>
<td>复制当前行</td>
</tr>
<tr>
<td>p</td>
<td>粘贴到光标后</td>
</tr>
<tr>
<td>P</td>
<td>粘贴到光标前</td>
</tr>
<tr>
<td>u</td>
<td>撤销</td>
</tr>
<tr>
<td>Ctrl+r</td>
<td>重做</td>
</tr>
</tbody>
</table>
<h3 id="10-4-搜索与替换">10.4 搜索与替换</h3>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>/pattern</td>
<td>向前搜索</td>
</tr>
<tr>
<td>?pattern</td>
<td>向后搜索</td>
</tr>
<tr>
<td>n</td>
<td>下一个匹配项</td>
</tr>
<tr>
<td>N</td>
<td>上一个匹配项</td>
</tr>
<tr>
<td>:%s/old/new/g</td>
<td>全局替换</td>
</tr>
<tr>
<td>:1,10s/old/new/g</td>
<td>替换1-10行的内容</td>
</tr>
</tbody>
</table>
<h3 id="10-5-设置选项">10.5 设置选项</h3>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">:<span class="keyword">set</span> <span class="keyword">nu</span>        # 显示行号</span><br><span class="line">:<span class="keyword">set</span> nonu      # 隐藏行号</span><br><span class="line">:<span class="keyword">set</span> <span class="keyword">ts</span>=<span class="number">4</span>      # 设置<span class="keyword">tab</span>为<span class="number">4</span>个空格</span><br><span class="line">:<span class="keyword">set</span> <span class="keyword">list</span>      # 显示不可见字符</span><br></pre></td></tr></table></figure>
<h2 id="11-正则表达式与文本搜索">11. 正则表达式与文本搜索</h2>
<h3 id="11-1-基本元字符">11.1 基本元字符</h3>
<table>
<thead>
<tr>
<th>元字符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>匹配任意单个字符</td>
</tr>
<tr>
<td>*</td>
<td>前一个字符0次或多次</td>
</tr>
<tr>
<td>[]</td>
<td>匹配括号内任意一个字符</td>
</tr>
<tr>
<td>[^]</td>
<td>不匹配括号内的字符</td>
</tr>
<tr>
<td>^</td>
<td>行首</td>
</tr>
<tr>
<td>$</td>
<td>行尾</td>
</tr>
<tr>
<td>\</td>
<td>转义特殊字符</td>
</tr>
</tbody>
</table>
<h3 id="11-2-grep-命令">11.2 grep 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&quot;pattern&quot;</span> file.txt      <span class="comment"># 基本搜索</span></span><br><span class="line">grep -i <span class="string">&quot;pattern&quot;</span> file.txt   <span class="comment"># 忽略大小写</span></span><br><span class="line">grep -v <span class="string">&quot;pattern&quot;</span> file.txt   <span class="comment"># 反向匹配</span></span><br><span class="line">grep -n <span class="string">&quot;pattern&quot;</span> file.txt   <span class="comment"># 显示行号</span></span><br><span class="line">grep -E <span class="string">&quot;regex&quot;</span> file.txt     <span class="comment"># 使用扩展正则</span></span><br><span class="line">grep -r <span class="string">&quot;pattern&quot;</span> /dir       <span class="comment"># 递归搜索目录</span></span><br></pre></td></tr></table></figure>
<h4 id="特殊变体">特殊变体</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">egrep = grep -E       <span class="comment"># 扩展正则表达式</span></span><br><span class="line">fgrep = grep -F       <span class="comment"># 不解析正则，快速搜索</span></span><br><span class="line">pgrep -u root         <span class="comment"># 搜索root用户的进程</span></span><br></pre></td></tr></table></figure>
<h3 id="11-3-sed-流编辑器">11.3 sed 流编辑器</h3>
<h4 id="基本用法-2">基本用法</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;s/old/new/&#x27;</span> file.txt       <span class="comment"># 替换第一个匹配</span></span><br><span class="line">sed <span class="string">&#x27;s/old/new/g&#x27;</span> file.txt      <span class="comment"># 替换所有匹配</span></span><br><span class="line">sed <span class="string">&#x27;1,5d&#x27;</span> file.txt             <span class="comment"># 删除1-5行</span></span><br><span class="line">sed <span class="string">&#x27;/pattern/d&#x27;</span> file.txt       <span class="comment"># 删除匹配行</span></span><br></pre></td></tr></table></figure>
<h4 id="高级用法">高级用法</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">&#x27;10,20p&#x27;</span> file.txt       <span class="comment"># 只打印10-20行</span></span><br><span class="line">sed <span class="string">&#x27;y/abc/ABC/&#x27;</span> file.txt      <span class="comment"># 字符转换</span></span><br><span class="line">sed -i.bak <span class="string">&#x27;s/old/new/&#x27;</span> file   <span class="comment"># 直接修改文件并备份</span></span><br><span class="line">sed -e <span class="string">&#x27;cmd1&#x27;</span> -e <span class="string">&#x27;cmd2&#x27;</span> file   <span class="comment"># 执行多个命令</span></span><br></pre></td></tr></table></figure>
<h4 id="脚本示例">脚本示例</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将1-5行行首添加&gt;字符</span></span><br><span class="line">sed <span class="string">&#x27;1,5s/^/&gt;/&#x27;</span> file.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将每行的第一个数字替换为#</span></span><br><span class="line">sed <span class="string">&#x27;s/[0-9]/#/&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
<h3 id="11-4-正则表达式示例">11.4 正则表达式示例</h3>
<ol>
<li>匹配IP地址：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&#x27;([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>匹配邮箱地址：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&#x27;[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]&#123;2,&#125;&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>提取HTML标签内容：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">&#x27;s/&lt;title&gt;\(.*\)&lt;\/title&gt;/\1/p&#x27;</span> file.html</span><br></pre></td></tr></table></figure>
                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../2020/05/07/linux/3-bash/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../2020/05/07/linux/2-linux%E5%AE%89%E8%A3%85%E4%B8%8E%E5%8C%85%E7%AE%A1%E7%90%86/"
                            aria-label=": 2.linux安装与包管理"
                        >
                            2.linux安装与包管理
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-07T16:29:52+08:00">
	
		    2020 年 5 月 7 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1>Linux 安装与软件包管理</h1>
<h2 id="1-硬盘分区布局">1. 硬盘分区布局</h2>
<h3 id="1-1-标准目录结构">1.1 标准目录结构</h3>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/home     # 普通用户文件存储目录</span><br><span class="line">/var      # 存放日志文件、邮件队列等可变数据</span><br><span class="line">/usr      # 存放程序、库文件、文档等(通常占用空间最大)</span><br><span class="line">/boot     # 引导分区，通常100MB左右足够</span><br><span class="line">/swap     # 交换分区(建议大小为物理内存的1-2倍)</span><br></pre></td></tr></table></figure>
<h2 id="2-引导加载程序-GRUB">2. 引导加载程序(GRUB)</h2>
<h3 id="2-1-传统GRUB-GRUB-Legacy">2.1 传统GRUB (GRUB Legacy)</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grub-install /dev/sda   <span class="comment"># 安装GRUB到指定设备</span></span><br><span class="line">grub-install -v         <span class="comment"># 显示详细安装信息</span></span><br></pre></td></tr></table></figure>
<h4 id="配置文件关键参数-boot-grub-menu-lst">配置文件关键参数(/boot/grub/menu.lst):</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">timeout      # 等待用户选择的时间(秒)</span><br><span class="line">default      # 默认启动项序号</span><br><span class="line">title        # 启动项标题</span><br><span class="line">root         # 指定根分区</span><br><span class="line">kernel       # 指定内核文件</span><br><span class="line">makeactive   # 激活分区</span><br><span class="line">chainloader  # 链式加载其他引导程序</span><br><span class="line">hiddenmenu   # 是否隐藏菜单</span><br></pre></td></tr></table></figure>
<h3 id="2-2-GRUB2-现代Linux默认使用">2.2 GRUB2 (现代Linux默认使用)</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update-grub2   <span class="comment"># 更新GRUB2配置</span></span><br></pre></td></tr></table></figure>
<h4 id="配置文件-etc-default-grub">配置文件(/etc/default/grub):</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GRUB_DEFAULT                  # 默认启动项</span><br><span class="line">GRUB_HIDDEN_TIMEOUT           # 隐藏菜单超时</span><br><span class="line">GRUB_HIDDEN_TIMEOUT_QUIET     # 是否静默隐藏</span><br><span class="line">GRUB_TIMEOUT                  # 菜单显示时间</span><br><span class="line">GRUB_CMDLINE_LINUX_DEFAULT    # 默认内核参数</span><br><span class="line">GRUB_CMDLINE_LINUX            # 附加内核参数</span><br></pre></td></tr></table></figure>
<h2 id="3-共享库管理">3. 共享库管理</h2>
<h3 id="3-1-基本概念">3.1 基本概念</h3>
<ul>
<li><strong>共享库(Shared Library)</strong>: 通过动态链接方式被多个程序共同使用的库文件</li>
<li>命名规则: <code>lib*.so*</code> (如 <code>libc.so.6</code>)</li>
</ul>
<h3 id="3-2-常用命令">3.2 常用命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ldd /bin/ls      <span class="comment"># 查看二进制文件依赖的共享库</span></span><br><span class="line">ldconfig         <span class="comment"># 重建共享库缓存</span></span><br><span class="line">ldconfig -p      <span class="comment"># 打印当前缓存内容</span></span><br></pre></td></tr></table></figure>
<h3 id="3-3-共享库搜索顺序">3.3 共享库搜索顺序</h3>
<ol>
<li>可执行文件中的DT_RPATH或DT_RUNPATH段</li>
<li>环境变量<code>LD_LIBRARY_PATH</code>指定的路径</li>
<li><code>/etc/ld.so.cache</code>缓存中的路径(除非使用<code>-z nodeflib</code>选项)</li>
<li>默认路径<code>/lib</code>和<code>/usr/lib</code>(除非使用<code>-z nodeflib</code>选项)</li>
</ol>
<h3 id="3-4-添加自定义库路径">3.4 添加自定义库路径</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 临时添加(当前会话有效)</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:/path/to/library</span><br><span class="line"></span><br><span class="line"><span class="comment"># 永久添加(需修改配置文件)</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;/path/to/library&quot;</span> &gt;&gt; /etc/ld.so.conf</span><br><span class="line">ldconfig</span><br></pre></td></tr></table></figure>
<h2 id="4-Debian系包管理-Debian-Ubuntu等">4. Debian系包管理(Debian/Ubuntu等)</h2>
<h3 id="4-1-包命名格式">4.1 包命名格式</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tree_1.5.3-1_i386.deb</span><br><span class="line">├── 包名(tree)</span><br><span class="line">├── 版本号(1.5.3)</span><br><span class="line">├── 发布号(1)</span><br><span class="line">├── 架构(i386)</span><br><span class="line">└── 扩展名(.deb)</span><br></pre></td></tr></table></figure>
<h3 id="4-2-dpkg命令-底层工具">4.2 dpkg命令(底层工具)</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">dpkg -i package.deb       <span class="comment"># 安装包</span></span><br><span class="line">dpkg -r package           <span class="comment"># 移除包(保留配置)</span></span><br><span class="line">dpkg -P package           <span class="comment"># 完全清除包(包括配置)</span></span><br><span class="line">dpkg -l                   <span class="comment"># 列出已安装包</span></span><br><span class="line">dpkg -L package           <span class="comment"># 列出包安装的文件</span></span><br><span class="line">dpkg -s package           <span class="comment"># 显示包状态信息</span></span><br><span class="line">dpkg -S /path/to/file     <span class="comment"># 查找文件属于哪个包</span></span><br><span class="line">dpkg --configure package  <span class="comment"># 配置已解压的包</span></span><br><span class="line">dpkg --unpack package.deb <span class="comment"># 仅解压不配置</span></span><br></pre></td></tr></table></figure>
<h3 id="4-3-apt-get命令-高级工具">4.3 apt-get命令(高级工具)</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">apt-get update            <span class="comment"># 更新包数据库</span></span><br><span class="line">apt-get upgrade           <span class="comment"># 升级所有可升级包</span></span><br><span class="line">apt-get dist-upgrade      <span class="comment"># 智能升级(处理依赖变化)</span></span><br><span class="line">apt-get install package   <span class="comment"># 安装包</span></span><br><span class="line">apt-get remove package    <span class="comment"># 移除包</span></span><br><span class="line">apt-get clean             <span class="comment"># 清理下载的包文件</span></span><br><span class="line">apt-get -d install package <span class="comment"># 仅下载不安装</span></span><br><span class="line">apt-get -s install package <span class="comment"># 模拟安装(不实际执行)</span></span><br></pre></td></tr></table></figure>
<h3 id="4-4-软件源配置-etc-apt-sources-list">4.4 软件源配置(/etc/apt/sources.list)</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class="line">↑         ↑                          ↑       ↑</span><br><span class="line">类型     镜像地址                    发行版   组件</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>类型</strong>: <code>deb</code>(二进制包)或<code>deb-src</code>(源代码包)</li>
<li><strong>组件</strong>:
<ul>
<li><code>main</code>: 官方支持的免费软件</li>
<li><code>contrib</code>: 非自由软件但有自由依赖</li>
<li><code>non-free</code>: 有分发限制的软件</li>
</ul>
</li>
</ul>
<h3 id="4-5-apt-cache命令-查询工具">4.5 apt-cache命令(查询工具)</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-cache search keyword    <span class="comment"># 搜索包</span></span><br><span class="line">apt-cache show package      <span class="comment"># 显示包详细信息</span></span><br><span class="line">apt-cache depends package   <span class="comment"># 显示包依赖</span></span><br></pre></td></tr></table></figure>
<h3 id="4-6-aptitude命令-交互式工具">4.6 aptitude命令(交互式工具)</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">aptitude update          <span class="comment"># 更新包列表</span></span><br><span class="line">aptitude install package <span class="comment"># 安装包</span></span><br><span class="line">aptitude remove package  <span class="comment"># 移除包</span></span><br><span class="line">aptitude purge package   <span class="comment"># 完全清除包</span></span><br><span class="line">aptitude upgrade         <span class="comment"># 升级包</span></span><br><span class="line">aptitude dist-upgrade    <span class="comment"># 智能升级</span></span><br></pre></td></tr></table></figure>
<h2 id="5-RedHat系包管理-RHEL-CentOS-Fedora">5. RedHat系包管理(RHEL/CentOS/Fedora)</h2>
<h3 id="5-1-rpm命令-底层工具">5.1 rpm命令(底层工具)</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh package.rpm     <span class="comment"># 安装包(-v:详细,-h:进度条)</span></span><br><span class="line">rpm -Uvh package.rpm     <span class="comment"># 升级包</span></span><br><span class="line">rpm -Fvh *.rpm           <span class="comment"># 仅升级已安装的包</span></span><br><span class="line">rpm -e package           <span class="comment"># 卸载包</span></span><br><span class="line">rpm -qa                  <span class="comment"># 查询所有已安装包</span></span><br><span class="line">rpm -qf /path/to/file    <span class="comment"># 查询文件属于哪个包</span></span><br><span class="line">rpm -qi package          <span class="comment"># 查询包信息</span></span><br><span class="line">rpm -ql package          <span class="comment"># 列出包安装的文件</span></span><br><span class="line">rpm -qc package          <span class="comment"># 列出包配置文件</span></span><br><span class="line">rpm -qd package          <span class="comment"># 列出包文档文件</span></span><br><span class="line">rpm --nodeps             <span class="comment"># 忽略依赖关系(不推荐)</span></span><br><span class="line">rpm --<span class="built_in">test</span>               <span class="comment"># 测试模式(不实际执行)</span></span><br></pre></td></tr></table></figure>
<h3 id="5-2-rpm文件提取">5.2 rpm文件提取</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm2cpio package.rpm | cpio -idv  <span class="comment"># 提取rpm包内容</span></span><br><span class="line">rpm2cpio package.rpm | cpio -t    <span class="comment"># 列出rpm包内容</span></span><br></pre></td></tr></table></figure>
<h3 id="5-3-yum命令-高级工具">5.3 yum命令(高级工具)</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">yum install package      <span class="comment"># 安装包</span></span><br><span class="line">yum remove package       <span class="comment"># 移除包</span></span><br><span class="line">yum update               <span class="comment"># 更新所有包</span></span><br><span class="line">yum update package       <span class="comment"># 更新指定包</span></span><br><span class="line">yum check-update         <span class="comment"># 检查可用更新</span></span><br><span class="line">yum info package         <span class="comment"># 显示包信息</span></span><br><span class="line">yum list                 <span class="comment"># 列出包</span></span><br><span class="line">yum search keyword       <span class="comment"># 搜索包</span></span><br><span class="line">yum groupinstall <span class="string">&quot;Development Tools&quot;</span> <span class="comment"># 安装软件组</span></span><br><span class="line">yum repolist             <span class="comment"># 列出已配置的仓库</span></span><br></pre></td></tr></table></figure>
<h3 id="5-4-下载rpm包">5.4 下载rpm包</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yumdownloader package    <span class="comment"># 下载rpm包不安装</span></span><br></pre></td></tr></table></figure>
<h3 id="5-5-zypper命令-SUSE系统">5.5 zypper命令(SUSE系统)</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">zypper install package   <span class="comment"># 安装包</span></span><br><span class="line">zypper remove package    <span class="comment"># 移除包</span></span><br><span class="line">zypper update            <span class="comment"># 更新系统</span></span><br></pre></td></tr></table></figure>
<h2 id="6-软件包管理对比">6. 软件包管理对比</h2>
<table>
<thead>
<tr>
<th>功能</th>
<th>Debian系(apt)</th>
<th>RedHat系(yum)</th>
<th>SUSE系(zypper)</th>
</tr>
</thead>
<tbody>
<tr>
<td>安装包</td>
<td>apt-get install</td>
<td>yum install</td>
<td>zypper install</td>
</tr>
<tr>
<td>移除包</td>
<td>apt-get remove</td>
<td>yum remove</td>
<td>zypper remove</td>
</tr>
<tr>
<td>更新系统</td>
<td>apt-get upgrade</td>
<td>yum update</td>
<td>zypper update</td>
</tr>
<tr>
<td>搜索包</td>
<td>apt-cache search</td>
<td>yum search</td>
<td>zypper search</td>
</tr>
<tr>
<td>显示包信息</td>
<td>apt-cache show</td>
<td>yum info</td>
<td>zypper info</td>
</tr>
<tr>
<td>清理缓存</td>
<td>apt-get clean</td>
<td>yum clean</td>
<td>zypper clean</td>
</tr>
</tbody>
</table>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../2020/05/07/linux/2-linux%E5%AE%89%E8%A3%85%E4%B8%8E%E5%8C%85%E7%AE%A1%E7%90%86/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../2020/05/06/linux/1-%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/"
                            aria-label=": 1.系统架构"
                        >
                            1.系统架构
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-06T16:06:24+08:00">
	
		    2020 年 5 月 6 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="1-系统架构">1. 系统架构</h2>
<h3 id="1-1-PCI架构">1.1 PCI架构</h3>
<ul>
<li><strong>PCI(外围组件互连)</strong>: Intel Core系统的主要总线架构</li>
<li><strong>组件</strong>:
<ul>
<li><strong>CPU</strong>:
<ul>
<li>显示: eDP(支持i7 CPU和DDR4内存)</li>
<li>显示: HDMI(支持i7 CPU和DDR4内存)</li>
</ul>
</li>
<li><strong>PCH(平台控制器中枢)</strong>:
<ul>
<li>USB 3.0接口</li>
<li>PCI总线</li>
<li>音频输出</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-2-lspci命令">1.2 lspci命令</h3>
<ul>
<li>显示PCI总线和连接设备的信息</li>
<li>可以查看:
<ul>
<li>中断请求(IRQ)信息</li>
<li>设备路径和速度</li>
<li>制造商ID</li>
</ul>
</li>
</ul>
<h3 id="1-3-ACPI-高级配置与电源接口">1.3 ACPI(高级配置与电源接口)</h3>
<ul>
<li>电源管理规范标准</li>
<li>管理功能包括:
<ul>
<li>电源按钮操作</li>
<li>笔记本开合盖检测</li>
<li>电池充电状态</li>
<li>CPU速度调节</li>
</ul>
</li>
<li><strong>重要说明</strong>:
<ul>
<li>不直接管理硬件，而是处理电源事件</li>
<li>配置文件位置:
<ul>
<li><code>/etc/acpi/</code>目录</li>
<li><code>/proc/acpi/</code>目录</li>
</ul>
</li>
</ul>
</li>
<li><strong>守护进程</strong>:
<ul>
<li><code>acpid</code>:
<ul>
<li>配置目录: <code>/etc/acpi/</code></li>
<li>示例: 查看电源配置<code>cat /etc/acpi/events/power.conf</code></li>
</ul>
</li>
<li><code>systemd-logind</code>:
<ul>
<li>配置文件: <code>/etc/systemd/logind.conf</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="2-启动流程">2. 启动流程</h2>
<h3 id="2-1-传统SysV-Init启动">2.1 传统SysV Init启动</h3>
<ol>
<li>电源启动</li>
<li>BIOS初始化</li>
<li>引导加载程序(GRUB)</li>
<li>加载内核(<code>vmlinuz</code>, <code>initramfs</code>)</li>
<li>执行内核</li>
<li>执行initramfs</li>
<li>init进程启动并挂载根文件系统</li>
<li>init启动各种服务</li>
</ol>
<h3 id="2-2-现代systemd启动">2.2 现代systemd启动</h3>
<ol>
<li>电源启动</li>
<li>UEFI初始化</li>
<li>引导加载程序(GRUB2)</li>
<li>加载内核(<code>vmlinuz</code>, <code>initramfs</code>)</li>
<li>执行内核</li>
<li>执行initramfs</li>
<li>systemd启动并挂载根文件系统</li>
<li>systemd启动各种服务</li>
</ol>
<h3 id="2-3-Init进程详情">2.3 Init进程详情</h3>
<ul>
<li>第一个用户空间进程路径: <code>/sbin/init</code></li>
<li>传统init流程:
<ol>
<li>init读取<code>/etc/inittab</code></li>
<li>init执行<code>/etc/rc.sysinit</code>脚本</li>
<li>init执行<code>/etc/rc</code>脚本</li>
<li><code>/etc/rc</code>执行<code>/etc/rc&lt;运行级别&gt;.d/</code>目录下的脚本</li>
</ol>
</li>
</ul>
<h2 id="3-分区表">3. 分区表</h2>
<h3 id="3-1-GPT-GUID分区表">3.1 GPT(GUID分区表)</h3>
<ul>
<li>EFI规范的一部分</li>
<li>支持最大9.4TB分区</li>
<li>使用GUID标识:
<ul>
<li>设备标识</li>
<li>分区标识</li>
</ul>
</li>
</ul>
<h3 id="3-2-MBR-主引导记录">3.2 MBR(主引导记录)</h3>
<ul>
<li>使用CHS(柱面/磁头/扇区)寻址</li>
<li>最大只支持2TB分区</li>
</ul>
<h2 id="4-系统信息命令">4. 系统信息命令</h2>
<h3 id="4-1-uname命令">4.1 uname命令</h3>
<p>显示系统信息:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uname</span> -m  <span class="comment"># 显示硬件架构类型</span></span><br><span class="line"><span class="built_in">uname</span> -n  <span class="comment"># 显示网络节点主机名</span></span><br><span class="line"><span class="built_in">uname</span> -r  <span class="comment"># 显示内核发行版本</span></span><br><span class="line"><span class="built_in">uname</span> -s  <span class="comment"># 显示操作系统名称</span></span><br><span class="line"><span class="built_in">uname</span> -v  <span class="comment"># 显示内核版本</span></span><br><span class="line"><span class="built_in">uname</span> -a  <span class="comment"># 显示所有信息</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2-wall命令">4.2 wall命令</h3>
<p>向所有用户广播消息:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wall <span class="string">&quot;消息内容&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-3-dmesg命令">4.3 dmesg命令</h3>
<p>显示内核环形缓冲区消息(启动日志):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg</span><br></pre></td></tr></table></figure>
<h3 id="4-4-lsmod命令">4.4 lsmod命令</h3>
<p>列出已加载的内核模块:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod</span><br></pre></td></tr></table></figure>
<h3 id="4-5-modprobe命令">4.5 modprobe命令</h3>
<p>手动加载设备驱动:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modprobe &lt;设备名称&gt;</span><br></pre></td></tr></table></figure>
<h2 id="5-proc文件系统">5. /proc文件系统</h2>
<p>/proc目录下的重要文件:</p>
<ul>
<li><code>/proc/bus/usb/*</code> - USB设备信息</li>
<li><code>/proc/cpuinfo</code> - CPU信息</li>
<li><code>/proc/interrupts</code> - 中断请求信息</li>
<li><code>/proc/pci</code> - PCI设备信息</li>
<li><code>/proc/scsi/scsi</code> - SCSI设备信息</li>
<li><code>/proc/version</code> - 内核版本信息</li>
<li><code>/proc/meminfo</code> - 内存信息</li>
</ul>
<h2 id="6-运行级别">6. 运行级别</h2>
<p>运行级别配置文件:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/inittab</span><br></pre></td></tr></table></figure>
<h2 id="7-模拟器">7. 模拟器</h2>
<p>通过软件模拟硬件环境来运行不同操作系统的工具</p>
<h2 id="8-启动顺序图示">8. 启动顺序图示</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[BIOS/UEFI固件] --&gt; B[引导加载程序]</span><br><span class="line">    B --&gt; C[Linux内核]</span><br><span class="line">    C --&gt; D[Init/Systemd]</span><br><span class="line">    D --&gt; E[系统服务]</span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../2020/05/06/linux/1-%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../2019/12/07/%E7%90%86%E8%A7%A3RESTful%E6%9E%B6%E6%9E%84/"
                            aria-label=": 理解RESTful架构"
                        >
                            理解RESTful架构
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-12-07T15:52:22+08:00">
	
		    2019 年 12 月 7 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a>, <a class="category-link" href="../../../categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/RESTful%E6%9E%B6%E6%9E%84/">RESTful架构</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>越来越多的人开始意识到，<strong>网站即软件</strong>，而且是一种新型的软件。</p>
<p>这种&quot;互联网软件&quot;采用客户端/服务器模式，建立在分布式体系上，通过互联网通信，具有高延时（high latency）、高并发等特点。</p>
<p>网站开发，完全可以采用软件开发的模式。但是传统上，软件和网络是两个不同的领域，很少有交集；软件开发主要针对单机环境，网络则主要研究系统之间的通信。互联网的兴起，使得这两个领域开始融合，<strong>现在我们必须考虑，如何开发在互联网环境中使用的软件。</strong></p>
<p><img src="https://www.ruanyifeng.com/blogimg/asset/201109/bg2011091202.jpg" alt=""></p>
<p>RESTful架构，就是目前最流行的一种互联网软件架构。它结构清晰、符合标准、易于理解、扩展方便，所以正得到越来越多网站的采用。</p>
<p>但是，到底什么是RESTful架构，并不是一个容易说清楚的问题。下面，我就谈谈我理解的RESTful架构。</p>
<p><strong>一、起源</strong></p>
<p>REST这个词，是<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Roy_Fielding">Roy Thomas Fielding</a>在他2000年的<a target="_blank" rel="noopener" href="http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm">博士论文</a>中提出的。</p>
<p><img src="https://www.ruanyifeng.com/blogimg/asset/201109/bg2011091201.jpg" alt=""></p>
<p>Fielding是一个非常重要的人，他是HTTP协议（1.0版和1.1版）的主要设计者、Apache服务器软件的作者之一、Apache基金会的第一任主席。所以，他的这篇论文一经发表，就引起了关注，并且立即对互联网开发产生了深远的影响。</p>
<p>他这样介绍论文的写作目的：</p>
<blockquote>
<p>“本文研究计算机科学两大前沿----软件和网络----的交叉点。长期以来，软件研究主要关注软件设计的分类、设计方法的演化，很少客观地评估不同的设计选择对系统行为的影响。而相反地，网络研究主要关注系统之间通信行为的细节、如何改进特定通信机制的表现，常常忽视了一个事实，那就是改变应用程序的互动风格比改变互动协议，对整体表现有更大的影响。<strong>我这篇文章的写作目的，就是想在符合架构原理的前提下，理解和评估以网络为基础的应用软件的架构设计，得到一个功能强、性能好、适宜通信的架构。</strong>”</p>
<p>(This dissertation explores a junction on the frontiers of two research disciplines in computer science: software and networking. Software research has long been concerned with the categorization of software designs and the development of design methodologies, but has rarely been able to objectively evaluate the impact of various design choices on system behavior. Networking research, in contrast, is focused on the details of generic communication behavior between systems and improving the performance of particular communication techniques, often ignoring the fact that changing the interaction style of an application can have more impact on performance than the communication protocols used for that interaction. My work is motivated by the desire to understand and evaluate the architectural design of network-based application software through principled use of architectural constraints, thereby obtaining the functional, performance, and social properties desired of an architecture. )</p>
</blockquote>
<p><strong>二、名称</strong></p>
<p>Fielding将他对互联网软件的架构原则，定名为REST，即Representational State Transfer的缩写。我对这个词组的翻译是&quot;表现层状态转化&quot;。</p>
<p>如果一个架构符合REST原则，就称它为RESTful架构。</p>
<p>**要理解RESTful架构，最好的方法就是去理解Representational State Transfer这个词组到底是什么意思，它的每一个词代表了什么涵义。**如果你把这个名称搞懂了，也就不难体会REST是一种什么样的设计。</p>
<p><strong>三、资源（Resources）</strong></p>
<p>REST的名称&quot;表现层状态转化&quot;中，省略了主语。“表现层&quot;其实指的是&quot;资源”（Resources）的&quot;表现层&quot;。</p>
<p>**所谓&quot;资源&quot;，就是网络上的一个实体，或者说是网络上的一个具体信息。**它可以是一段文本、一张图片、一首歌曲、一种服务，总之就是一个具体的实在。你可以用一个URI（统一资源定位符）指向它，每种资源对应一个特定的URI。要获取这个资源，访问它的URI就可以，因此URI就成了每一个资源的地址或独一无二的识别符。</p>
<p>所谓&quot;上网&quot;，就是与互联网上一系列的&quot;资源&quot;互动，调用它的URI。</p>
<p><strong>四、表现层（Representation）</strong></p>
<p>&quot;资源&quot;是一种信息实体，它可以有多种外在表现形式。<strong>我们把&quot;资源&quot;具体呈现出来的形式，叫做它的&quot;表现层&quot;（Representation）。</strong></p>
<p>比如，文本可以用txt格式表现，也可以用HTML格式、XML格式、JSON格式表现，甚至可以采用二进制格式；图片可以用JPG格式表现，也可以用PNG格式表现。</p>
<p>URI只代表资源的实体，不代表它的形式。严格地说，有些网址最后的&quot;.html&quot;后缀名是不必要的，因为这个后缀名表示格式，属于&quot;表现层&quot;范畴，而URI应该只代表&quot;资源&quot;的位置。它的具体表现形式，应该在HTTP请求的头信息中用Accept和Content-Type字段指定，这两个字段才是对&quot;表现层&quot;的描述。</p>
<p><strong>五、状态转化（State Transfer）</strong></p>
<p>访问一个网站，就代表了客户端和服务器的一个互动过程。在这个过程中，势必涉及到数据和状态的变化。</p>
<p>互联网通信协议HTTP协议，是一个无状态协议。这意味着，所有的状态都保存在服务器端。因此，<strong>如果客户端想要操作服务器，必须通过某种手段，让服务器端发生&quot;状态转化&quot;（State Transfer）。而这种转化是建立在表现层之上的，所以就是&quot;表现层状态转化&quot;。</strong></p>
<p>客户端用到的手段，只能是HTTP协议。具体来说，就是HTTP协议里面，四个表示操作方式的动词：GET、POST、PUT、DELETE。它们分别对应四种基本操作：<strong>GET用来获取资源，POST用来新建资源（也可以用于更新资源），PUT用来更新资源，DELETE用来删除资源。</strong></p>
<p><strong>六、综述</strong></p>
<p>综合上面的解释，我们总结一下什么是RESTful架构：</p>
<p>（1）每一个URI代表一种资源；</p>
<p>（2）客户端和服务器之间，传递这种资源的某种表现层；</p>
<p>（3）客户端通过四个HTTP动词，对服务器端资源进行操作，实现&quot;表现层状态转化&quot;。</p>
<p><strong>七、误区</strong></p>
<p>RESTful架构有一些典型的设计误区。</p>
<p>**最常见的一种设计错误，就是URI包含动词。**因为&quot;资源&quot;表示一种实体，所以应该是名词，URI不应该有动词，动词应该放在HTTP协议中。</p>
<p>举例来说，某个URI是/posts/show/1，其中show是动词，这个URI就设计错了，正确的写法应该是/posts/1，然后用GET方法表示show。</p>
<p>如果某些动作是HTTP动词表示不了的，你就应该把动作做成一种资源。比如网上汇款，从账户1向账户2汇款500元，错误的URI是：</p>
<blockquote>
<p>POST /accounts/1/transfer/500/to/2</p>
</blockquote>
<p>正确的写法是把动词transfer改成名词transaction，资源不能是动词，但是可以是一种服务：</p>
<blockquote>
<p>POST /transaction HTTP/1.1<br>
　　Host: 127.0.0.1</p>
<p>from=1&amp;to=2&amp;amount=500.00</p>
</blockquote>
<p><strong>另一个设计误区，就是在URI中加入版本号</strong>：</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://www.example.com/app/1.0/foo">http://www.example.com/app/1.0/foo</a></p>
<p><a target="_blank" rel="noopener" href="http://www.example.com/app/1.1/foo">http://www.example.com/app/1.1/foo</a></p>
<p><a target="_blank" rel="noopener" href="http://www.example.com/app/2.0/foo">http://www.example.com/app/2.0/foo</a></p>
</blockquote>
<p>因为不同的版本，可以理解成同一种资源的不同表现形式，所以应该采用同一个URI。版本号可以在HTTP请求头信息的Accept字段中进行区分（参见<a target="_blank" rel="noopener" href="http://www.informit.com/articles/article.aspx?p=1566460">Versioning REST Services</a>）：</p>
<blockquote>
<p>Accept: vnd.example-com.foo+json; version=1.0</p>
<p>Accept: vnd.example-com.foo+json; version=1.1</p>
<p>Accept: vnd.example-com.foo+json; version=2.0</p>
</blockquote>
<p>（完）</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../2019/12/07/%E7%90%86%E8%A7%A3RESTful%E6%9E%B6%E6%9E%84/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../2019/10/28/%E6%95%B0%E5%AD%A6/%E6%A6%82%E7%8E%872-%E8%BF%9E%E7%BB%AD%E5%9E%8B%E9%9A%8F%E6%9C%BA%E5%88%86%E5%B8%83%E5%BE%8B/"
                            aria-label=": 概率2-连续型随机分布律"
                        >
                            概率2-连续型随机分布律
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-10-28T23:11:58+08:00">
	
		    2019 年 10 月 28 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../categories/%E5%9F%BA%E7%A1%80/">基础</a>, <a class="category-link" href="../../../categories/%E5%9F%BA%E7%A1%80/%E6%95%B0%E5%AD%A6/">数学</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h5 id="1-均匀分布">1,均匀分布</h5>
<p>若连续型随机变量X具有概率密度</p>
\begin{align*}
f(x)= \begin{cases}{1 \over {b-a}} ,a < x < b,\\0\end{cases}
\end{align*}

<p>则称X在区间(a,b)上服从均匀分布，记为X〜U(a,b)</p>
<p>分布函数：</p>
\begin{align*}
F(x)= 
\begin{cases} 
0, & x < a \\
\frac{x-a}{b-a}, & a \leq x < b \\
1, & x \geq b 
\end{cases}
\end{align*}

<hr>
<h3 id="2-指数分布">2. 指数分布</h3>
<p>若连续型随机变量X具有概率密度：</p>
\begin{align*}
f(x)= \begin{cases}
\frac{1}{\theta} e^{-x/\theta}, & x > 0 \\
0, & \text{其他}
\end{cases}
\end{align*}

<p>其中θ&gt;0为常数，则称X服从参数为θ的指数分布。</p>
<p>易知f(x)≥0，且：</p>
\begin{align*}
\int^\infty_{-\infty}f(x)dx = \left[-e^{-x/\theta}\right]^\infty_0 = 1
\end{align*}

<p>分布函数：</p>
\begin{align*}
F(x)= \begin{cases}
1-e^{-x/\theta}, & x > 0 \\
0, & \text{其他}
\end{cases}
\end{align*}

<p>服从指数分布的随机变量X具有无记忆性：<br>
对于任意s,t&gt;0，有</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>{</mo><mi>X</mi><mo>&gt;</mo><mi>s</mi><mo>+</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>X</mi><mo>&gt;</mo><mi>s</mi><mo>}</mo><mo>=</mo><mi>P</mi><mo>(</mo><mi>X</mi><mo>&gt;</mo><mi>t</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">P\{X&gt;s+t|X&gt;s\} = P(X&gt;t)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">{</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mrel">&gt;</span><span class="mord mathit">s</span><span class="mbin">+</span><span class="mord mathit">t</span><span class="mord mathrm">∣</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mrel">&gt;</span><span class="mord mathit">s</span><span class="mclose">}</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mrel">&gt;</span><span class="mord mathit">t</span><span class="mclose">)</span></span></span></span></span></p>
<p>证明：</p>
\begin{align*}
P\{X>s+t|X>s\} 
&= \frac{P\{X>s+t\} \cap P\{X>s\}}{P\{X>s\}} \\
&= \frac{P\{X>s+t\}}{P\{X>s\}} \\
&= \frac{1-F(s+t)}{1-F(s)} \\
&= \frac{e^{-(s+t)/\theta}}{e^{-s/\theta}} \\
&= e^{-t/\theta} \\
&= P\{X>t\}
\end{align*}

<hr>
<h3 id="3-正态分布">3. 正态分布</h3>
<p>若连续型随机变量X具有概率密度：</p>
\begin{align*}
f(x) = \frac{1}{\sqrt{2\pi}\sigma}e^{-\frac{(x-\mu)^2}{2\sigma^2}}
\end{align*}

<p>其中μ,σ(σ&gt;0)为常数，则称X服从参数为μ,σ的正态分布，记为X～N(μ,σ²)。</p>
<p>显然f(x)≥0，下面证明：</p>
\begin{align*}
\int^\infty_{-\infty}f(x)dx = 1
\end{align*}

<p>令<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mo>=</mo><mfrac><mrow><mi>x</mi><mo>−</mo><mi>μ</mi></mrow><mrow><mi>σ</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">t = \frac{x-\mu}{\sigma}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.854439em;"></span><span class="strut bottom" style="height:1.199439em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">σ</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.44610799999999995em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">x</span><span class="mbin">−</span><span class="mord mathit">μ</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>，则：</p>
\begin{align*}
σ=(x-μ)/t,

t'(x)=1/σ
\end{align*}

<p>得到:</p>
\begin{align*}
\int^\infty_{-\infty}\frac{1}{\sqrt{2\pi}\sigma}e^{-\frac{(x-\mu)^2}{2\sigma^2}}dx &=\int^\infty_{-\infty}{1 \over {\sqrt{2 \pi}}(x-μ)/t}e^{-t^2 \over 2}dt \\
&= \frac{1}{\sqrt{2\pi}}\int^\infty_{-\infty}e^{-\frac{t^2}{2}}dt
\end{align*}

<p>记：</p>
\begin{align*}
I = \int^\infty_{-\infty}e^{-\frac{t^2}{2}}dt
\end{align*}

<p>则有：</p>
\begin{align*}
I^2 = \int^\infty_{-\infty}\int^\infty_{-\infty}e^{-\frac{t^2+u^2}{2}}dtdu
\end{align*}

<p>利用极坐标变换：</p>
\begin{align*}
I^2 = \int^{2\pi}_0\int^\infty_0 re^{-\frac{r^2}{2}}drd\theta = 2\pi
\end{align*}

<p>（p55）</p>
<hr>
<h3 id="附：">附：</h3>
<p>计算：</p>
\begin{align*}
\iint_D^\infty e^{-\frac{x^2+y^2}{2}}dxdy
\end{align*}


                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../2019/10/28/%E6%95%B0%E5%AD%A6/%E6%A6%82%E7%8E%872-%E8%BF%9E%E7%BB%AD%E5%9E%8B%E9%9A%8F%E6%9C%BA%E5%88%86%E5%B8%83%E5%BE%8B/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
          <li class="pagination-prev">
            <a
                class="btn btn--default btn--small"
                href="../9/"
                aria-label="上一頁"
            >
              <i class="fa fa-angle-left text-base icon-mr"></i>
              <span>上一頁</span>
            </a>
          </li>
        
        
          <li class="pagination-next">
            <a
                class="btn btn--default btn--small"
                href="../11/"
                aria-label="下一頁"
            >
              <span>下一頁</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">第 10 頁 共 24 頁</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2025 Kein Chan. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="../../../assets/images/profile.jpg" alt="作者的圖片"/>
        
            <h4 id="about-card-name">Kein Chan</h4>
        
            <div id="about-card-bio"><p>這是獨立全棧工程師Kein Chan的技術博客</br>分享一些技術教程,命令備忘(cheat-sheet)等</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>全棧工程師</br>資深技術顧問</br>數據科學家</br>Hit廣島觀光大使</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Tokyo/Macau
            </div>
        
    </div>
</div>

        
            <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-times"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="../assets/images/logo-algolia-nebula-blue-full.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    />
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">沒有找到文章</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2013/04/27/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85/"
                            aria-label=": R语言-环境安装"
                        >
                            <h3 class="media-heading">R语言-环境安装</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年4月27日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2013/04/28/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E5%9F%BA%E7%A1%80/"
                            aria-label=": R语言-基础"
                        >
                            <h3 class="media-heading">R语言-基础</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年4月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2013/05/01/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE/"
                            aria-label=": R语言-读取数据"
                        >
                            <h3 class="media-heading">R语言-读取数据</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月1日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2013/05/02/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E7%BB%98%E5%9B%BE/"
                            aria-label=": R语言-绘图"
                        >
                            <h3 class="media-heading">R语言-绘图</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月2日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2013/05/03/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/"
                            aria-label=": R语言-线性回归"
                        >
                            <h3 class="media-heading">R语言-线性回归</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月3日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2015/02/22/Algorithms/1.%E7%AE%97%E6%B3%95%E5%9C%A8%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8/"
                            aria-label=": 1. 算法在计算中的作用"
                        >
                            <h3 class="media-heading">1. 算法在计算中的作用</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月22日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2015/02/23/Algorithms/2.%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/"
                            aria-label=": 2. 算法基础"
                        >
                            <h3 class="media-heading">2. 算法基础</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月23日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2015/02/24/Algorithms/3.%E5%87%BD%E6%95%B0%E7%9A%84%E5%A2%9E%E9%95%BF/"
                            aria-label=": 3. 函数的增长"
                        >
                            <h3 class="media-heading">3. 函数的增长</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月24日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2015/02/25/Algorithms/4.%E5%88%86%E6%B2%BB%E7%AD%96%E7%95%A5/"
                            aria-label=": 4. 分治策略"
                        >
                            <h3 class="media-heading">4. 分治策略</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月25日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2015/02/26/Algorithms/5.%E6%A6%82%E7%8E%87%E5%88%86%E6%9E%90%E5%92%8C%E9%9A%8F%E6%9C%BA%E7%AE%97%E6%B3%95/"
                            aria-label=": 5. 概率分析和随机算法"
                        >
                            <h3 class="media-heading">5. 概率分析和随机算法</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月26日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="沒有找到文章"
                data-message-one="找到 1 篇文章"
                data-message-other="找到 {n} 篇文章">
                找到 235 篇文章
            </p>
        </div>
    </div>
</div>

        
        
<div id="cover" style="background-image:url('../../../assets/images/cover.jpeg');"></div>
        <!--SCRIPTS-->

<script src="../../../assets/js/script-qtzvvb63gamuirvfphht7lytrxkfllzng1escnm2phjtlt4tvvxi5gl0wx4o.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
