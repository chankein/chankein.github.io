
<!DOCTYPE html>
<html lang="zh-tw">
    
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css">

    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/min/moment.min.js"></script>
    
      <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/locale/zh-tw.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
    <script>
      window.algoliaConfig = {
        appId: 'AWFC86Q51O',
        apiKey: 'c9d952906eb1b154d75cf863e75c1ede',
        indexName: 'MyBlog'
      };
      var algoliaIndex = algoliasearch(
        algoliaConfig.appId,
        algoliaConfig.apiKey
      ).initIndex(algoliaConfig.indexName);
    </script>


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Kein&#39;s blog">
    <title>JAVA-正则表达式 - Kein&#39;s blog</title>
    <meta name="author" content="Kein Chan">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Kein Chan","sameAs":["https://github.com/chankein/","https://www.linkedin.com/profile/","mailto:kein.chan85@gmail.com"],"image":"profile.jpg"},"articleBody":"正则表达式简介\n在了解正则表达式之前，我们先看几个非常常见的问题：\n\n如何判断字符串是否是有效的电话号码？例如：010-1234567，123ABC456，13510001000等；\n如何判断字符串是否是有效的电子邮件地址？例如：test@example.com，test#example等；\n如何判断字符串是否是有效的时间？例如：12:34，09:60，99:99等。\n\n一种直观的想法是通过程序判断，这种方法需要为每种用例创建规则，然后用代码实现。下面是判断手机号的代码：\n1234567891011121314boolean isValidMobileNumber(String s) &#123;    // 是否是11位？    if (s.length() != 11) &#123;        return false;    &#125;    // 每一位都是0~9：    for (int i=0; i&lt;s.length(); i++) &#123;        char c = s.charAt(i);        if (c &lt; &#x27;0&#x27; || c &gt; &#x27;9&#x27;) &#123;            return false;        &#125;    &#125;    return true;&#125;\n上述代码仅仅做了非常粗略的判断，并未考虑首位数字不能为0等更详细的情况。\n除了判断手机号，我们还需要判断电子邮件地址、电话、邮编等等：\n\nboolean isValidMobileNumber(String s) { … }\nboolean isValidEmail(String s) { … }\nboolean isValidPhoneNumber(String s) { … }\nboolean isValidZipCode(String s) { … }\n…\n\n为每一种判断逻辑编写代码实在是太繁琐了。有没有更简单的方法？\n有！用正则表达式！\n正则表达式可以用字符串来描述规则，并用来匹配字符串。例如，判断手机号，我们用正则表达式\\d&#123;11&#125;：\n123boolean isValidMobileNumber(String s) &#123;    return s.matches(&quot;\\\\d&#123;11&#125;&quot;);&#125;\n使用正则表达式的好处有哪些？一个正则表达式就是一个描述规则的字符串，所以，只需要编写正确的规则，我们就可以让正则表达式引擎去判断目标字符串是否符合规则。\n正则表达式是一套标准，它可以用于任何语言。Java标准库的java.util.regex包内置了正则表达式引擎，在Java程序中使用正则表达式非常简单。\n举个例子：要判断用户输入的年份是否是20##年，我们先写出规则如下：\n一共有4个字符，分别是：2，0，0~9任意数字，0~9任意数字。\n对应的正则表达式就是：20\\d\\d，其中\\d表示任意一个数字。\n把正则表达式转换为Java字符串就变成了20\\\\d\\\\d，注意Java字符串用\\\\表示\\。\n最后，用正则表达式匹配一个字符串的代码如下：\n12345678// regexpublic class Main &#123;    public static void main(String[] args) &#123;        String regex = &quot;20\\\\d\\\\d&quot;;        System.out.println(&quot;2019&quot;.matches(regex)); // true        System.out.println(&quot;2100&quot;.matches(regex)); // false    &#125;&#125;\n可见，使用正则表达式，不必编写复杂的代码来判断，只需给出一个字符串表达的正则规则即可。\n小结\n正则表达式是用字符串描述的一个匹配规则，使用正则表达式可以快速判断给定的字符串是否符合匹配规则；\nJava标准库java.util.regex内建了正则表达式引擎。\n\n\n正则表达式的匹配规则是从左到右按规则匹配。我们首先来看如何使用正则表达式来做精确匹配。\n对于正则表达式abc来说，它只能精确地匹配字符串&quot;abc&quot;，不能匹配&quot;ab&quot;，&quot;Abc&quot;，&quot;abcd&quot;等其他任何字符串。\n如果正则表达式有特殊字符，那就需要用\\转义。例如，正则表达式a\\&amp;c，其中\\&amp;是用来匹配特殊字符&amp;的，它能精确匹配字符串&quot;a&amp;c&quot;，但不能匹配&quot;ac&quot;、&quot;a-c&quot;、&quot;a&amp;&amp;c&quot;等。\n要注意正则表达式在Java代码中也是一个字符串，所以，对于正则表达式a\\&amp;c来说，对应的Java字符串是&quot;a\\\\&amp;c&quot;，因为\\也是Java字符串的转义字符，两个\\\\实际上表示的是一个\\：\n1234567891011121314// regexpublic class Main &#123;    public static void main(String[] args) &#123;        String re1 = &quot;abc&quot;;        System.out.println(&quot;abc&quot;.matches(re1));        System.out.println(&quot;Abc&quot;.matches(re1));        System.out.println(&quot;abcd&quot;.matches(re1));        String re2 = &quot;a\\\\&amp;c&quot;; // 对应的正则是a\\&amp;c        System.out.println(&quot;a&amp;c&quot;.matches(re2));        System.out.println(&quot;a-c&quot;.matches(re2));        System.out.println(&quot;a&amp;&amp;c&quot;.matches(re2));    &#125;&#125;\n如果想匹配非ASCII字符，例如中文，那就用\\u####的十六进制表示，例如：a\\u548cc匹配字符串&quot;a和c&quot;，中文字符和的Unicode编码是548c。\n匹配任意字符\n精确匹配实际上用处不大，因为我们直接用String.equals()就可以做到。大多数情况下，我们想要的匹配规则更多的是模糊匹配。我们可以用.匹配一个任意字符。\n例如，正则表达式a.c中间的.可以匹配一个任意字符，例如，下面的字符串都可以被匹配：\n\n&quot;abc&quot;，因为.可以匹配字符b；\n&quot;a&amp;c&quot;，因为.可以匹配字符&amp;；\n&quot;acc&quot;，因为.可以匹配字符c。\n\n但它不能匹配&quot;ac&quot;、&quot;a&amp;&amp;c&quot;，因为.匹配一个字符且仅限一个字符。\n匹配数字\n用.可以匹配任意字符，这个口子开得有点大。如果我们只想匹配0~9这样的数字，可以用\\d匹配。例如，正则表达式00\\d可以匹配：\n\n&quot;007&quot;，因为\\d可以匹配字符7；\n&quot;008&quot;，因为\\d可以匹配字符8。\n\n它不能匹配&quot;00A&quot;，&quot;0077&quot;，因为\\d仅限单个数字字符。\n匹配常用字符\n用\\w可以匹配一个字母、数字或下划线，w的意思是word。例如，java\\w可以匹配：\n\n&quot;javac&quot;，因为\\w可以匹配英文字符c；\n&quot;java9&quot;，因为\\w可以匹配数字字符9；。\n&quot;java_&quot;，因为\\w可以匹配下划线_。\n\n它不能匹配&quot;java#&quot;，&quot;java &quot;，因为\\w不能匹配#、空格等字符。\n匹配空格字符\n用\\s可以匹配一个空格字符，注意空格字符不但包括空格 ，还包括tab字符（在Java中用\\t表示）。例如，a\\sc可以匹配：\n\n&quot;a c&quot;，因为\\s可以匹配空格字符 ；\n&quot;a c&quot;，因为\\s可以匹配tab字符\\t。\n\n它不能匹配&quot;ac&quot;，&quot;abc&quot;等。\n匹配非数字\n用\\d可以匹配一个数字，而\\D则匹配一个非数字。例如，00\\D可以匹配：\n\n&quot;00A&quot;，因为\\D可以匹配非数字字符A；\n&quot;00#&quot;，因为\\D可以匹配非数字字符#。\n\n00\\d可以匹配的字符串&quot;007&quot;，&quot;008&quot;等，00\\D是不能匹配的。\n类似的，\\W可以匹配\\w不能匹配的字符，\\S可以匹配\\s不能匹配的字符，这几个正好是反着来的。\n1234567891011121314// regexpublic class Main &#123;    public static void main(String[] args) &#123;        String re1 = &quot;java\\\\d&quot;; // 对应的正则是java\\d        System.out.println(&quot;java9&quot;.matches(re1));        System.out.println(&quot;java10&quot;.matches(re1));        System.out.println(&quot;javac&quot;.matches(re1));        String re2 = &quot;java\\\\D&quot;;        System.out.println(&quot;javax&quot;.matches(re2));        System.out.println(&quot;java#&quot;.matches(re2));        System.out.println(&quot;java5&quot;.matches(re2));    &#125;&#125;\n重复匹配\n我们用\\d可以匹配一个数字，例如，A\\d可以匹配&quot;A0&quot;，&quot;A1&quot;，如果要匹配多个数字，比如&quot;A380&quot;，怎么办？\n修饰符*可以匹配任意个字符，包括0个字符。我们用A\\d*可以匹配：\n\nA：因为\\d*可以匹配0个数字；\nA0：因为\\d*可以匹配1个数字0；\nA380：因为\\d*可以匹配多个数字380。\n\n修饰符+可以匹配至少一个字符。我们用A\\d+可以匹配：\n\nA0：因为\\d+可以匹配1个数字0；\nA380：因为\\d+可以匹配多个数字380。\n\n但它无法匹配&quot;A&quot;，因为修饰符+要求至少一个字符。\n修饰符?可以匹配0个或一个字符。我们用A\\d?可以匹配：\n\nA：因为\\d?可以匹配0个数字；\nA0：因为\\d?可以匹配1个数字0。\n\n但它无法匹配&quot;A380&quot;，因为修饰符?超过1个字符就不能匹配了。\n如果我们想精确指定n个字符怎么办？用修饰符&#123;n&#125;就可以。A\\d&#123;3&#125;可以精确匹配：\n\nA380：因为\\d&#123;3&#125;可以匹配3个数字380。\n\n如果我们想指定匹配n~m个字符怎么办？用修饰符&#123;n,m&#125;就可以。A\\d&#123;3,5&#125;可以精确匹配：\n\nA380：因为\\d&#123;3,5&#125;可以匹配3个数字380；\nA3800：因为\\d&#123;3,5&#125;可以匹配4个数字3800；\nA38000：因为\\d&#123;3,5&#125;可以匹配5个数字38000。\n\n如果没有上限，那么修饰符&#123;n,&#125;就可以匹配至少n个字符。\n练习\n请编写一个正则表达式匹配国内的电话号码规则：3~4位区号加7~8位电话，中间用-连接，例如：010-12345678。\n123456789101112131415161718192021// regeximport java.util.*;public class Main &#123;    public static void main(String[] args) throws Exception &#123;        String re = &quot;\\\\d&quot;;        for (String s : List.of(&quot;010-12345678&quot;, &quot;020-9999999&quot;, &quot;0755-7654321&quot;)) &#123;            if (!s.matches(re)) &#123;                System.out.println(&quot;测试失败: &quot; + s);                return;            &#125;        &#125;        for (String s : List.of(&quot;010 12345678&quot;, &quot;A20-9999999&quot;, &quot;0755-7654.321&quot;)) &#123;            if (s.matches(re)) &#123;                System.out.println(&quot;测试失败: &quot; + s);                return;            &#125;        &#125;        System.out.println(&quot;测试成功!&quot;);    &#125;&#125;\n下载练习\n进阶：国内区号必须以0开头，而电话号码不能以0开头，试修改正则表达式，使之能更精确地匹配。\n提示：\\d和\\D这种简单的规则暂时做不到，我们需要更复杂规则，后面会详细讲解。\n小结\n单个字符的匹配规则如下：\n\n\n\n正则表达式\n规则\n可以匹配\n\n\n\n\nA\n指定字符\nA\n\n\n\\u548c\n指定Unicode字符\n和\n\n\n.\n任意字符\na，b，&amp;，0\n\n\n\\d\n数字0~9\n0~9\n\n\n\\w\n大小写字母，数字和下划线\na~z，A~Z，0~9，_\n\n\n\\s\n空格、Tab键\n空格，Tab\n\n\n\\D\n非数字\na，A，&amp;，_，……\n\n\n\\W\n非\\w\n&amp;，@，中，……\n\n\n\\S\n非\\s\na，A，&amp;，_，……\n\n\n\n多个字符的匹配规则如下：\n\n\n\n正则表达式\n规则\n可以匹配\n\n\n\n\nA*\n任意个数字符\n空，A，AA，AAA，……\n\n\nA+\n至少1个字符\nA，AA，AAA，……\n\n\nA?\n0个或1个字符\n空，A\n\n\nA&#123;3&#125;\n指定个数字符\nAAA\n\n\nA&#123;2,3&#125;\n指定范围个数字符\nAA，AAA\n\n\nA&#123;2,&#125;\n至少n个字符\nAA，AAA，AAAA，……\n\n\nA&#123;0,3&#125;\n最多n个字符\n空，A，AA，AAA\n\n\n\n复杂匹配规则\n匹配开头和结尾\n用正则表达式进行多行匹配时，我们用^表示开头，$表示结尾。例如，^A\\d&#123;3&#125;$，可以匹配&quot;A001&quot;、&quot;A380&quot;。\n匹配指定范围\n如果我们规定一个7~8位数字的电话号码不能以0开头，应该怎么写匹配规则呢？\\d&#123;7,8&#125;是不行的，因为第一个\\d可以匹配到0。\n使用[...]可以匹配范围内的字符，例如，[123456789]可以匹配1~9，这样就可以写出上述电话号码的规则：[123456789]\\d&#123;6,7&#125;。\n把所有字符全列出来太麻烦，[...]还有一种写法，直接写[1-9]就可以。\n要匹配大小写不限的十六进制数，比如1A2b3c，我们可以这样写：[0-9a-fA-F]，它表示一共可以匹配以下任意范围的字符：\n\n0-9：字符0~9；\na-f：字符a~f；\nA-F：字符A~F。\n\n如果要匹配6位十六进制数，前面讲过的&#123;n&#125;仍然可以继续配合使用：[0-9a-fA-F]&#123;6&#125;。\n[...]还有一种排除法，即不包含指定范围的字符。假设我们要匹配任意字符，但不包括数字，可以写[^1-9]&#123;3&#125;：\n\n可以匹配&quot;ABC&quot;，因为不包含字符1~9；\n可以匹配&quot;A00&quot;，因为不包含字符1~9；\n不能匹配&quot;A01&quot;，因为包含字符1；\n不能匹配&quot;A05&quot;，因为包含字符5。\n\n或规则匹配\n用|连接的两个正则规则是或规则，例如，AB|CD表示可以匹配AB或CD。\n我们来看这个正则表达式java|php：\n123456789// regexpublic class Main &#123;    public static void main(String[] args) &#123;        String re = &quot;java|php&quot;;        System.out.println(&quot;java&quot;.matches(re));        System.out.println(&quot;php&quot;.matches(re));        System.out.println(&quot;go&quot;.matches(re));    &#125;&#125;\n它可以匹配&quot;java&quot;或&quot;php&quot;，但无法匹配&quot;go&quot;。\n要把go也加进来匹配，可以改写为java|php|go。\n使用括号\n现在我们想要匹配字符串learn java、learn php和learn go怎么办？一个最简单的规则是learn\\sjava|learn\\sphp|learn\\sgo，但是这个规则太复杂了，可以把公共部分提出来，然后用(...)把子规则括起来表示成learn\\s(java|php|go)。\n12345678910// regexpublic class Main &#123;    public static void main(String[] args) &#123;        String re = &quot;learn\\\\s(java|php|go)&quot;;        System.out.println(&quot;learn java&quot;.matches(re));        System.out.println(&quot;learn Java&quot;.matches(re));        System.out.println(&quot;learn php&quot;.matches(re));        System.out.println(&quot;learn Go&quot;.matches(re));    &#125;&#125;\n上面的规则仍然不能匹配learn Java、learn Go这样的字符串。试修改正则，使之能匹配大写字母开头的learn Java、learn Php、learn Go。\n小结\n复杂匹配规则主要有：\n\n\n\n正则表达式\n规则\n可以匹配\n\n\n\n\n^\n开头\n字符串开头\n\n\n$\n结尾\n字符串结束\n\n\n[ABC]\n[…]内任意字符\nA，B，C\n\n\n[A-F0-9xy]\n指定范围的字符\nA，……，F，0，……，9，x，y\n\n\n[^A-F]\n指定范围外的任意字符\n非A~F\n\n\nAB\nCD\nEF\n\n\n\n\n\n我们前面讲到的(...)可以用来把一个子规则括起来，这样写learn\\s(java|php|go)就可以更方便地匹配长字符串了。\n实际上(...)还有一个重要作用，就是分组匹配。\n我们来看一下如何用正则匹配区号-电话号码这个规则。利用前面讲到的匹配规则，写出来很容易：\n1\\d&#123;3,4&#125;\\-\\d&#123;6,8&#125;\n虽然这个正则匹配规则很简单，但是往往匹配成功后，下一步是提取区号和电话号码，分别存入数据库。于是问题来了：如何提取匹配的子串？\n当然可以用String提供的indexOf()和substring()这些方法，但它们从正则匹配的字符串中提取子串没有通用性，下一次要提取learn\\s(java|php)还得改代码。\n正确的方法是用(...)先把要提取的规则分组，把上述正则表达式变为(\\d&#123;3,4&#125;)\\-(\\d&#123;6,8&#125;)。\n现在问题又来了：匹配后，如何按括号提取子串？\n现在我们没办法用String.matches()这样简单的判断方法了，必须引入java.util.regex包，用Pattern对象匹配，匹配后获得一个Matcher对象，如果匹配成功，就可以直接从Matcher.group(index)返回子串：\n12345678910111213141516import java.util.regex.*;public class Main &#123;    public static void main(String[] args) &#123;        Pattern p = Pattern.compile(&quot;(\\\\d&#123;3,4&#125;)\\\\-(\\\\d&#123;7,8&#125;)&quot;);        Matcher m = p.matcher(&quot;010-12345678&quot;);        if (m.matches()) &#123;            String g1 = m.group(1);            String g2 = m.group(2);            System.out.println(g1); // 010            System.out.println(g2); // 12345678        &#125; else &#123;            System.out.println(&quot;匹配失败!&quot;);        &#125;    &#125;&#125;\n运行上述代码，会得到两个匹配上的子串010和12345678。\n要特别注意，Matcher.group(index)方法的参数用1表示第一个子串，2表示第二个子串。如果我们传入0会得到什么呢？答案是010-12345678，即整个正则匹配到的字符串。\nPattern\n我们在前面的代码中用到的正则表达式代码是String.matches()方法，而我们在分组提取的代码中用的是java.util.regex包里面的Pattern类和Matcher类。实际上这两种代码本质上是一样的，因为String.matches()方法内部调用的就是Pattern和Matcher类的方法。\n但是反复使用String.matches()对同一个正则表达式进行多次匹配效率较低，因为每次都会创建出一样的Pattern对象。完全可以先创建出一个Pattern对象，然后反复使用，就可以实现编译一次，多次匹配：\n12345678910111213141516171819import java.util.regex.*;public class Main &#123;    public static void main(String[] args) &#123;        Pattern pattern = Pattern.compile(&quot;(\\\\d&#123;3,4&#125;)\\\\-(\\\\d&#123;7,8&#125;)&quot;);        pattern.matcher(&quot;010-12345678&quot;).matches(); // true        pattern.matcher(&quot;021-123456&quot;).matches(); // false        pattern.matcher(&quot;022#1234567&quot;).matches(); // false        // 获得Matcher对象:        Matcher matcher = pattern.matcher(&quot;010-12345678&quot;);        if (matcher.matches()) &#123;            String whole = matcher.group(0); // &quot;010-12345678&quot;, 0表示匹配的整个字符串            String area = matcher.group(1); // &quot;010&quot;, 1表示匹配的第1个子串            String tel = matcher.group(2); // &quot;12345678&quot;, 2表示匹配的第2个子串            System.out.println(area);            System.out.println(tel);        &#125;    &#125;&#125;\n使用Matcher时，必须首先调用matches()判断是否匹配成功，匹配成功后，才能调用group()提取子串。\n利用提取子串的功能，我们轻松获得了区号和号码两部分。\n练习\n利用分组匹配，从字符串&quot;23:01:59&quot;提取时、分、秒。\n下载练习\n小结\n正则表达式用(...)分组可以通过Matcher对象快速提取子串：\n\ngroup(0)表示匹配的整个字符串；\ngroup(1)表示第1个子串，group(2)表示第2个子串，以此类推。\n\n非贪婪匹配\n在介绍非贪婪匹配前，我们先看一个简单的问题：\n给定一个字符串表示的数字，判断该数字末尾0的个数。例如：\n\n&quot;123000&quot;：3个0\n&quot;10100&quot;：2个0\n&quot;1001&quot;：0个0\n\n可以很容易地写出该正则表达式：(\\d+)(0*)，Java代码如下：\n123456789101112import java.util.regex.*;public class Main &#123;    public static void main(String[] args) &#123;        Pattern pattern = Pattern.compile(&quot;(\\\\d+)(0*)&quot;);        Matcher matcher = pattern.matcher(&quot;1230000&quot;);        if (matcher.matches()) &#123;            System.out.println(&quot;group1=&quot; + matcher.group(1)); // &quot;1230000&quot;            System.out.println(&quot;group2=&quot; + matcher.group(2)); // &quot;&quot;        &#125;    &#125;&#125;\n然而打印的第二个子串是空字符串&quot;&quot;。\n实际上，我们期望分组匹配结果是：\n\n\n\ninput\n\\d+\n0*\n\n\n\n\n123000\n“123”\n“000”\n\n\n10100\n“101”\n“00”\n\n\n1001\n“1001”\n“”\n\n\n\n但实际的分组匹配结果是这样的：\n\n\n\ninput\n\\d+\n0*\n\n\n\n\n123000\n“123000”\n“”\n\n\n10100\n“10100”\n“”\n\n\n1001\n“1001”\n“”\n\n\n\n仔细观察上述实际匹配结果，实际上它是完全合理的，因为\\d+确实可以匹配后面任意个0。\n这是因为正则表达式默认使用贪婪匹配：任何一个规则，它总是尽可能多地向后匹配，因此，\\d+总是会把后面的0包含进来。\n要让\\d+尽量少匹配，让0*尽量多匹配，我们就必须让\\d+使用非贪婪匹配。在规则\\d+后面加个?即可表示非贪婪匹配。我们改写正则表达式如下：\n123456789101112import java.util.regex.*;public class Main &#123;    public static void main(String[] args) &#123;        Pattern pattern = Pattern.compile(&quot;(\\\\d+?)(0*)&quot;);        Matcher matcher = pattern.matcher(&quot;1230000&quot;);        if (matcher.matches()) &#123;            System.out.println(&quot;group1=&quot; + matcher.group(1)); // &quot;123&quot;            System.out.println(&quot;group2=&quot; + matcher.group(2)); // &quot;0000&quot;        &#125;    &#125;&#125;\n因此，给定一个匹配规则，加上?后就变成了非贪婪匹配。\n我们再来看这个正则表达式(\\d??)(9*)，注意\\d?表示匹配0个或1个数字，后面第二个?表示非贪婪匹配，因此，给定字符串&quot;9999&quot;，匹配到的两个子串分别是&quot;&quot;和&quot;9999&quot;，因为对于\\d?来说，可以匹配1个9，也可以匹配0个9，但是因为后面的?表示非贪婪匹配，它就会尽可能少的匹配，结果是匹配了0个9。\n小结\n正则表达式匹配默认使用贪婪匹配，可以使用?表示对某一规则进行非贪婪匹配；\n注意区分?的含义：\\d??。\n\n\n分割字符串\n使用正则表达式分割字符串可以实现更加灵活的功能。String.split()方法传入的正是正则表达式。我们来看下面的代码：\n123&quot;a b c&quot;.split(&quot;\\\\s&quot;); // &#123; &quot;a&quot;, &quot;b&quot;, &quot;c&quot; &#125;&quot;a b  c&quot;.split(&quot;\\\\s&quot;); // &#123; &quot;a&quot;, &quot;b&quot;, &quot;&quot;, &quot;c&quot; &#125;&quot;a, b ;; c&quot;.split(&quot;[\\\\,\\\\;\\\\s]+&quot;); // &#123; &quot;a&quot;, &quot;b&quot;, &quot;c&quot; &#125;\n如果我们想让用户输入一组标签，然后把标签提取出来，因为用户的输入往往是不规范的，这时，使用合适的正则表达式，就可以消除多个空格、混合,和;这些不规范的输入，直接提取出规范的字符串。\n搜索字符串\n使用正则表达式还可以搜索字符串，我们来看例子：\n12345678910111213import java.util.regex.*;public class Main &#123;    public static void main(String[] args) &#123;        String s = &quot;the quick brown fox jumps over the lazy dog.&quot;;        Pattern p = Pattern.compile(&quot;\\\\wo\\\\w&quot;);        Matcher m = p.matcher(s);        while (m.find()) &#123;            String sub = s.substring(m.start(), m.end());            System.out.println(sub);        &#125;    &#125;&#125;\n我们获取到Matcher对象后，不需要调用matches()方法（因为匹配整个串肯定返回false），而是反复调用find()方法，在整个串中搜索能匹配上\\\\wo\\\\w规则的子串，并打印出来。这种方式比String.indexOf()要灵活得多，因为我们搜索的规则是3个字符：中间必须是o，前后两个必须是字符[A-Za-z0-9_]。\n替换字符串\n使用正则表达式替换字符串可以直接调用String.replaceAll()，它的第一个参数是正则表达式，第二个参数是待替换的字符串。我们还是来看例子：\n12345678// regexpublic class Main &#123;    public static void main(String[] args) &#123;        String s = &quot;The     quick\\t\\t brown   fox  jumps   over the  lazy dog.&quot;;        String r = s.replaceAll(&quot;\\\\s+&quot;, &quot; &quot;);        System.out.println(r); // &quot;The quick brown fox jumps over the lazy dog.&quot;    &#125;&#125;\n上面的代码把不规范的连续空格分隔的句子变成了规范的句子。可见，灵活使用正则表达式可以大大降低代码量。\n反向引用\n如果我们要把搜索到的指定字符串按规则替换，比如前后各加一个&lt;b&gt;xxxx&lt;/b&gt;，这个时候，使用replaceAll()的时候，我们传入的第二个参数可以使用$1、$2来反向引用匹配到的子串。例如：\n12345678// regexpublic class Main &#123;    public static void main(String[] args) &#123;        String s = &quot;the quick brown fox jumps over the lazy dog.&quot;;        String r = s.replaceAll(&quot;\\\\s([a-z]&#123;4&#125;)\\\\s&quot;, &quot; &lt;b&gt;$1&lt;/b&gt; &quot;);        System.out.println(r);    &#125;&#125;\n上述代码的运行结果是：\n1the quick brown fox jumps &lt;b&gt;over&lt;/b&gt; the &lt;b&gt;lazy&lt;/b&gt; dog.\n它实际上把任何4字符单词的前后用&lt;b&gt;xxxx&lt;/b&gt;括起来。实现替换的关键就在于&quot; &lt;b&gt;$1&lt;/b&gt; &quot;，它用匹配的分组子串([a-z]&#123;4&#125;)替换了$1。\n练习\n模板引擎是指，定义一个字符串作为模板：\n1Hello, $&#123;name&#125;! You are learning $&#123;lang&#125;!\n其中，以$&#123;key&#125;表示的是变量，也就是将要被替换的内容。\n当传入一个Map&lt;String, String&gt;给模板后，需要把对应的key替换为Map的value。\n例如，传入Map为：\n1234&#123;    &quot;name&quot;: &quot;Bob&quot;,    &quot;lang&quot;: &quot;Java&quot;&#125;\n然后，$&#123;name&#125;被替换为Map对应的值Bob，$&#123;lang&#125;被替换为Map对应的值Java，最终输出的结果为：\n1Hello, Bob! You are learning Java!\n请编写一个简单的模板引擎，利用正则表达式实现这个功能。\n提示：参考Matcher.appendReplacement()方法。\n下载练习\n小结\n使用正则表达式可以：\n\n分割字符串：String.split()\n搜索子串：Matcher.find()\n替换字符串：String.replaceAll()\n\n","dateCreated":"2025-05-24T15:45:59+08:00","dateModified":"2025-05-24T15:48:34+08:00","datePublished":"2025-05-24T15:45:59+08:00","description":"","headline":"JAVA-正则表达式","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://chankein.github.io/2025/05/24/JAVA/JAVA-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},"publisher":{"@type":"Organization","name":"Kein Chan","sameAs":["https://github.com/chankein/","https://www.linkedin.com/profile/","mailto:kein.chan85@gmail.com"],"image":"profile.jpg","logo":{"@type":"ImageObject","url":"profile.jpg"}},"url":"https://chankein.github.io/2025/05/24/JAVA/JAVA-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/","keywords":"Java"}</script>
    <meta name="description" content="正则表达式简介 在了解正则表达式之前，我们先看几个非常常见的问题：  如何判断字符串是否是有效的电话号码？例如：010-1234567，123ABC456，13510001000等； 如何判断字符串是否是有效的电子邮件地址？例如：test@example.com，test#example等； 如何判断字符串是否是有效的时间？例如：12:34，09:60，99:99等。  一种直观的想法是通过程序判">
<meta property="og:type" content="blog">
<meta property="og:title" content="JAVA-正则表达式">
<meta property="og:url" content="https://chankein.github.io/2025/05/24/JAVA/JAVA-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/index.html">
<meta property="og:site_name" content="Kein&#39;s blog">
<meta property="og:description" content="正则表达式简介 在了解正则表达式之前，我们先看几个非常常见的问题：  如何判断字符串是否是有效的电话号码？例如：010-1234567，123ABC456，13510001000等； 如何判断字符串是否是有效的电子邮件地址？例如：test@example.com，test#example等； 如何判断字符串是否是有效的时间？例如：12:34，09:60，99:99等。  一种直观的想法是通过程序判">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2025-05-24T07:45:59.000Z">
<meta property="article:modified_time" content="2025-05-24T07:48:34.609Z">
<meta property="article:author" content="Kein Chan">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://chankein.github.io../../../../../assets/images/profile.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="../../../../../assets/css/style-l9zwheso7r7pnk98nvirovsz9dl7fhkrc9mlb5vmuxw7tk5movrk0eevsrpr.min.css">

    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="../../../../../index.html"
            aria-label=""
        >
            Kein&#39;s blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打開鏈接: ../../../../../#about"
            >
        
        
            <img class="header-picture" src="../../../../../assets/images/profile.jpg" alt="作者的圖片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="../../../../../#about"
                    aria-label="閱讀有關作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="../../../../../assets/images/profile.jpg" alt="作者的圖片"/>
                </a>
                <h4 class="sidebar-profile-name">Kein Chan</h4>
                
                    <h5 class="sidebar-profile-bio"><p>這是獨立全棧工程師Kein Chan的技術博客</br>Kein目前居住在東京和澳門.</br>熱愛旅遊.已探訪日本40多個都道府縣.曾自駕環繞日本半個本州.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../../index.html"
                            
                            rel="noopener"
                            title="首頁"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首頁</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../../all-categories"
                            
                            rel="noopener"
                            title="分類"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分類</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../../all-tags"
                            
                            rel="noopener"
                            title="標籤"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">標籤</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../../all-archives"
                            
                            rel="noopener"
                            title="所有文章"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">所有文章</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="搜尋"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜尋</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="關於"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">關於</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/chankein/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../../mailto:kein.chan85@gmail.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Email"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Email</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../../atom.xml"
                            
                            rel="noopener"
                            title="Atom"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Atom</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            JAVA-正则表达式
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2025-05-24T15:45:59+08:00">
	
		    2025 年 5 月 24 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../../../categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a>, <a class="category-link" href="../../../../../categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/">Java</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <h2 id="正则表达式简介">正则表达式简介</h2>
<p>在了解正则表达式之前，我们先看几个非常常见的问题：</p>
<ul>
<li>如何判断字符串是否是有效的电话号码？例如：<code>010-1234567</code>，<code>123ABC456</code>，<code>13510001000</code>等；</li>
<li>如何判断字符串是否是有效的电子邮件地址？例如：<code>test@example.com</code>，<code>test#example</code>等；</li>
<li>如何判断字符串是否是有效的时间？例如：<code>12:34</code>，<code>09:60</code>，<code>99:99</code>等。</li>
</ul>
<p>一种直观的想法是通过程序判断，这种方法需要为每种用例创建规则，然后用代码实现。下面是判断手机号的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="title function_">isValidMobileNumber</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="comment">// 是否是11位？</span></span><br><span class="line">    <span class="keyword">if</span> (s.length() != <span class="number">11</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 每一位都是0~9：</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;s.length(); i++) &#123;</span><br><span class="line">        <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> s.charAt(i);</span><br><span class="line">        <span class="keyword">if</span> (c &lt; <span class="string">&#x27;0&#x27;</span> || c &gt; <span class="string">&#x27;9&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述代码仅仅做了非常粗略的判断，并未考虑首位数字不能为<code>0</code>等更详细的情况。</p>
<p>除了判断手机号，我们还需要判断电子邮件地址、电话、邮编等等：</p>
<ul>
<li>boolean isValidMobileNumber(String s) { … }</li>
<li>boolean isValidEmail(String s) { … }</li>
<li>boolean isValidPhoneNumber(String s) { … }</li>
<li>boolean isValidZipCode(String s) { … }</li>
<li>…</li>
</ul>
<p>为每一种判断逻辑编写代码实在是太繁琐了。有没有更简单的方法？</p>
<p>有！用正则表达式！</p>
<p>正则表达式可以用字符串来描述规则，并用来匹配字符串。例如，判断手机号，我们用正则表达式<code>\d&#123;11&#125;</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="title function_">isValidMobileNumber</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> s.matches(<span class="string">&quot;\\d&#123;11&#125;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用正则表达式的好处有哪些？一个正则表达式就是一个描述规则的字符串，所以，只需要编写正确的规则，我们就可以让正则表达式引擎去判断目标字符串是否符合规则。</p>
<p>正则表达式是一套标准，它可以用于任何语言。Java标准库的<code>java.util.regex</code>包内置了正则表达式引擎，在Java程序中使用正则表达式非常简单。</p>
<p>举个例子：要判断用户输入的年份是否是<code>20##</code>年，我们先写出规则如下：</p>
<p>一共有4个字符，分别是：<code>2</code>，<code>0</code>，<code>0~9任意数字</code>，<code>0~9任意数字</code>。</p>
<p>对应的正则表达式就是：<code>20\d\d</code>，其中<code>\d</code>表示任意一个数字。</p>
<p>把正则表达式转换为Java字符串就变成了<code>20\\d\\d</code>，注意Java字符串用<code>\\</code>表示<code>\</code>。</p>
<p>最后，用正则表达式匹配一个字符串的代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// regex</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">regex</span> <span class="operator">=</span> <span class="string">&quot;20\\d\\d&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;2019&quot;</span>.matches(regex)); <span class="comment">// true</span></span><br><span class="line">        System.out.println(<span class="string">&quot;2100&quot;</span>.matches(regex)); <span class="comment">// false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可见，使用正则表达式，不必编写复杂的代码来判断，只需给出一个字符串表达的正则规则即可。</p>
<h3 id="小结">小结</h3>
<p>正则表达式是用字符串描述的一个匹配规则，使用正则表达式可以快速判断给定的字符串是否符合匹配规则；</p>
<p>Java标准库<code>java.util.regex</code>内建了正则表达式引擎。</p>
<hr>
<hr>
<p>正则表达式的匹配规则是从左到右按规则匹配。我们首先来看如何使用正则表达式来做精确匹配。</p>
<p>对于正则表达式<code>abc</code>来说，它只能精确地匹配字符串<code>&quot;abc&quot;</code>，不能匹配<code>&quot;ab&quot;</code>，<code>&quot;Abc&quot;</code>，<code>&quot;abcd&quot;</code>等其他任何字符串。</p>
<p>如果正则表达式有特殊字符，那就需要用<code>\</code>转义。例如，正则表达式<code>a\&amp;c</code>，其中<code>\&amp;</code>是用来匹配特殊字符<code>&amp;</code>的，它能精确匹配字符串<code>&quot;a&amp;c&quot;</code>，但不能匹配<code>&quot;ac&quot;</code>、<code>&quot;a-c&quot;</code>、<code>&quot;a&amp;&amp;c&quot;</code>等。</p>
<p>要注意正则表达式在Java代码中也是一个字符串，所以，对于正则表达式<code>a\&amp;c</code>来说，对应的Java字符串是<code>&quot;a\\&amp;c&quot;</code>，因为<code>\</code>也是Java字符串的转义字符，两个<code>\\</code>实际上表示的是一个<code>\</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// regex</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">re1</span> <span class="operator">=</span> <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;abc&quot;</span>.matches(re1));</span><br><span class="line">        System.out.println(<span class="string">&quot;Abc&quot;</span>.matches(re1));</span><br><span class="line">        System.out.println(<span class="string">&quot;abcd&quot;</span>.matches(re1));</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">re2</span> <span class="operator">=</span> <span class="string">&quot;a\\&amp;c&quot;</span>; <span class="comment">// 对应的正则是a\&amp;c</span></span><br><span class="line">        System.out.println(<span class="string">&quot;a&amp;c&quot;</span>.matches(re2));</span><br><span class="line">        System.out.println(<span class="string">&quot;a-c&quot;</span>.matches(re2));</span><br><span class="line">        System.out.println(<span class="string">&quot;a&amp;&amp;c&quot;</span>.matches(re2));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果想匹配非ASCII字符，例如中文，那就用<code>\u####</code>的十六进制表示，例如：<code>a\u548cc</code>匹配字符串<code>&quot;a和c&quot;</code>，中文字符<code>和</code>的Unicode编码是<code>548c</code>。</p>
<h3 id="匹配任意字符">匹配任意字符</h3>
<p>精确匹配实际上用处不大，因为我们直接用<code>String.equals()</code>就可以做到。大多数情况下，我们想要的匹配规则更多的是模糊匹配。我们可以用<code>.</code>匹配一个任意字符。</p>
<p>例如，正则表达式<code>a.c</code>中间的<code>.</code>可以匹配一个任意字符，例如，下面的字符串都可以被匹配：</p>
<ul>
<li><code>&quot;abc&quot;</code>，因为<code>.</code>可以匹配字符<code>b</code>；</li>
<li><code>&quot;a&amp;c&quot;</code>，因为<code>.</code>可以匹配字符<code>&amp;</code>；</li>
<li><code>&quot;acc&quot;</code>，因为<code>.</code>可以匹配字符<code>c</code>。</li>
</ul>
<p>但它不能匹配<code>&quot;ac&quot;</code>、<code>&quot;a&amp;&amp;c&quot;</code>，因为<code>.</code>匹配一个字符且仅限一个字符。</p>
<h3 id="匹配数字">匹配数字</h3>
<p>用<code>.</code>可以匹配任意字符，这个口子开得有点大。如果我们只想匹配<code>0</code>~<code>9</code>这样的数字，可以用<code>\d</code>匹配。例如，正则表达式<code>00\d</code>可以匹配：</p>
<ul>
<li><code>&quot;007&quot;</code>，因为<code>\d</code>可以匹配字符<code>7</code>；</li>
<li><code>&quot;008&quot;</code>，因为<code>\d</code>可以匹配字符<code>8</code>。</li>
</ul>
<p>它不能匹配<code>&quot;00A&quot;</code>，<code>&quot;0077&quot;</code>，因为<code>\d</code>仅限单个数字字符。</p>
<h3 id="匹配常用字符">匹配常用字符</h3>
<p>用<code>\w</code>可以匹配一个字母、数字或下划线，w的意思是word。例如，<code>java\w</code>可以匹配：</p>
<ul>
<li><code>&quot;javac&quot;</code>，因为<code>\w</code>可以匹配英文字符<code>c</code>；</li>
<li><code>&quot;java9&quot;</code>，因为<code>\w</code>可以匹配数字字符<code>9</code>；。</li>
<li><code>&quot;java_&quot;</code>，因为<code>\w</code>可以匹配下划线<code>_</code>。</li>
</ul>
<p>它不能匹配<code>&quot;java#&quot;</code>，<code>&quot;java &quot;</code>，因为<code>\w</code>不能匹配<code>#</code>、空格等字符。</p>
<h3 id="匹配空格字符">匹配空格字符</h3>
<p>用<code>\s</code>可以匹配一个空格字符，注意空格字符不但包括空格 ，还包括tab字符（在Java中用<code>\t</code>表示）。例如，<code>a\sc</code>可以匹配：</p>
<ul>
<li><code>&quot;a c&quot;</code>，因为<code>\s</code>可以匹配空格字符 ；</li>
<li><code>&quot;a c&quot;</code>，因为<code>\s</code>可以匹配tab字符<code>\t</code>。</li>
</ul>
<p>它不能匹配<code>&quot;ac&quot;</code>，<code>&quot;abc&quot;</code>等。</p>
<h3 id="匹配非数字">匹配非数字</h3>
<p>用<code>\d</code>可以匹配一个数字，而<code>\D</code>则匹配一个非数字。例如，<code>00\D</code>可以匹配：</p>
<ul>
<li><code>&quot;00A&quot;</code>，因为<code>\D</code>可以匹配非数字字符<code>A</code>；</li>
<li><code>&quot;00#&quot;</code>，因为<code>\D</code>可以匹配非数字字符<code>#</code>。</li>
</ul>
<p><code>00\d</code>可以匹配的字符串<code>&quot;007&quot;</code>，<code>&quot;008&quot;</code>等，<code>00\D</code>是不能匹配的。</p>
<p>类似的，<code>\W</code>可以匹配<code>\w</code>不能匹配的字符，<code>\S</code>可以匹配<code>\s</code>不能匹配的字符，这几个正好是反着来的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// regex</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">re1</span> <span class="operator">=</span> <span class="string">&quot;java\\d&quot;</span>; <span class="comment">// 对应的正则是java\d</span></span><br><span class="line">        System.out.println(<span class="string">&quot;java9&quot;</span>.matches(re1));</span><br><span class="line">        System.out.println(<span class="string">&quot;java10&quot;</span>.matches(re1));</span><br><span class="line">        System.out.println(<span class="string">&quot;javac&quot;</span>.matches(re1));</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">re2</span> <span class="operator">=</span> <span class="string">&quot;java\\D&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;javax&quot;</span>.matches(re2));</span><br><span class="line">        System.out.println(<span class="string">&quot;java#&quot;</span>.matches(re2));</span><br><span class="line">        System.out.println(<span class="string">&quot;java5&quot;</span>.matches(re2));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="重复匹配">重复匹配</h3>
<p>我们用<code>\d</code>可以匹配一个数字，例如，<code>A\d</code>可以匹配<code>&quot;A0&quot;</code>，<code>&quot;A1&quot;</code>，如果要匹配多个数字，比如<code>&quot;A380&quot;</code>，怎么办？</p>
<p>修饰符<code>*</code>可以匹配任意个字符，包括0个字符。我们用<code>A\d*</code>可以匹配：</p>
<ul>
<li><code>A</code>：因为<code>\d*</code>可以匹配0个数字；</li>
<li><code>A0</code>：因为<code>\d*</code>可以匹配1个数字<code>0</code>；</li>
<li><code>A380</code>：因为<code>\d*</code>可以匹配多个数字<code>380</code>。</li>
</ul>
<p>修饰符<code>+</code>可以匹配至少一个字符。我们用<code>A\d+</code>可以匹配：</p>
<ul>
<li><code>A0</code>：因为<code>\d+</code>可以匹配1个数字<code>0</code>；</li>
<li><code>A380</code>：因为<code>\d+</code>可以匹配多个数字<code>380</code>。</li>
</ul>
<p>但它无法匹配<code>&quot;A&quot;</code>，因为修饰符<code>+</code>要求至少一个字符。</p>
<p>修饰符<code>?</code>可以匹配0个或一个字符。我们用<code>A\d?</code>可以匹配：</p>
<ul>
<li><code>A</code>：因为<code>\d?</code>可以匹配0个数字；</li>
<li><code>A0</code>：因为<code>\d?</code>可以匹配1个数字<code>0</code>。</li>
</ul>
<p>但它无法匹配<code>&quot;A380&quot;</code>，因为修饰符<code>?</code>超过1个字符就不能匹配了。</p>
<p>如果我们想精确指定n个字符怎么办？用修饰符<code>&#123;n&#125;</code>就可以。<code>A\d&#123;3&#125;</code>可以精确匹配：</p>
<ul>
<li><code>A380</code>：因为<code>\d&#123;3&#125;</code>可以匹配3个数字<code>380</code>。</li>
</ul>
<p>如果我们想指定匹配n~m个字符怎么办？用修饰符<code>&#123;n,m&#125;</code>就可以。<code>A\d&#123;3,5&#125;</code>可以精确匹配：</p>
<ul>
<li><code>A380</code>：因为<code>\d&#123;3,5&#125;</code>可以匹配3个数字<code>380</code>；</li>
<li><code>A3800</code>：因为<code>\d&#123;3,5&#125;</code>可以匹配4个数字<code>3800</code>；</li>
<li><code>A38000</code>：因为<code>\d&#123;3,5&#125;</code>可以匹配5个数字<code>38000</code>。</li>
</ul>
<p>如果没有上限，那么修饰符<code>&#123;n,&#125;</code>就可以匹配至少n个字符。</p>
<h3 id="练习">练习</h3>
<p>请编写一个正则表达式匹配国内的电话号码规则：3~4位区号加7~8位电话，中间用<code>-</code>连接，例如：<code>010-12345678</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// regex</span></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">re</span> <span class="operator">=</span> <span class="string">&quot;\\d&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (String s : List.of(<span class="string">&quot;010-12345678&quot;</span>, <span class="string">&quot;020-9999999&quot;</span>, <span class="string">&quot;0755-7654321&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!s.matches(re)) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;测试失败: &quot;</span> + s);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (String s : List.of(<span class="string">&quot;010 12345678&quot;</span>, <span class="string">&quot;A20-9999999&quot;</span>, <span class="string">&quot;0755-7654.321&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.matches(re)) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;测试失败: &quot;</span> + s);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;测试成功!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://liaoxuefeng.com/books/java/reg-exp/match-rules/regex-tel.zip">下载练习</a></p>
<p>进阶：国内区号必须以0开头，而电话号码不能以0开头，试修改正则表达式，使之能更精确地匹配。</p>
<p>提示：<code>\d</code>和<code>\D</code>这种简单的规则暂时做不到，我们需要更复杂规则，后面会详细讲解。</p>
<h3 id="小结-2">小结</h3>
<p>单个字符的匹配规则如下：</p>
<table>
<thead>
<tr>
<th>正则表达式</th>
<th>规则</th>
<th>可以匹配</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A</code></td>
<td>指定字符</td>
<td><code>A</code></td>
</tr>
<tr>
<td><code>\u548c</code></td>
<td>指定Unicode字符</td>
<td><code>和</code></td>
</tr>
<tr>
<td><code>.</code></td>
<td>任意字符</td>
<td><code>a</code>，<code>b</code>，<code>&amp;</code>，<code>0</code></td>
</tr>
<tr>
<td><code>\d</code></td>
<td>数字0~9</td>
<td><code>0</code>~<code>9</code></td>
</tr>
<tr>
<td><code>\w</code></td>
<td>大小写字母，数字和下划线</td>
<td><code>a</code>~<code>z</code>，<code>A</code>~<code>Z</code>，<code>0</code>~<code>9</code>，<code>_</code></td>
</tr>
<tr>
<td><code>\s</code></td>
<td>空格、Tab键</td>
<td>空格，Tab</td>
</tr>
<tr>
<td><code>\D</code></td>
<td>非数字</td>
<td><code>a</code>，<code>A</code>，<code>&amp;</code>，<code>_</code>，……</td>
</tr>
<tr>
<td><code>\W</code></td>
<td>非\w</td>
<td><code>&amp;</code>，<code>@</code>，<code>中</code>，……</td>
</tr>
<tr>
<td><code>\S</code></td>
<td>非\s</td>
<td><code>a</code>，<code>A</code>，<code>&amp;</code>，<code>_</code>，……</td>
</tr>
</tbody>
</table>
<p>多个字符的匹配规则如下：</p>
<table>
<thead>
<tr>
<th>正则表达式</th>
<th>规则</th>
<th>可以匹配</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>A*</code></td>
<td>任意个数字符</td>
<td>空，<code>A</code>，<code>AA</code>，<code>AAA</code>，……</td>
</tr>
<tr>
<td><code>A+</code></td>
<td>至少1个字符</td>
<td><code>A</code>，<code>AA</code>，<code>AAA</code>，……</td>
</tr>
<tr>
<td><code>A?</code></td>
<td>0个或1个字符</td>
<td>空，<code>A</code></td>
</tr>
<tr>
<td><code>A&#123;3&#125;</code></td>
<td>指定个数字符</td>
<td><code>AAA</code></td>
</tr>
<tr>
<td><code>A&#123;2,3&#125;</code></td>
<td>指定范围个数字符</td>
<td><code>AA</code>，<code>AAA</code></td>
</tr>
<tr>
<td><code>A&#123;2,&#125;</code></td>
<td>至少n个字符</td>
<td><code>AA</code>，<code>AAA</code>，<code>AAAA</code>，……</td>
</tr>
<tr>
<td><code>A&#123;0,3&#125;</code></td>
<td>最多n个字符</td>
<td>空，<code>A</code>，<code>AA</code>，<code>AAA</code></td>
</tr>
</tbody>
</table>
<h2 id="复杂匹配规则">复杂匹配规则</h2>
<h3 id="匹配开头和结尾">匹配开头和结尾</h3>
<p>用正则表达式进行多行匹配时，我们用<code>^</code>表示开头，<code>$</code>表示结尾。例如，<code>^A\d&#123;3&#125;$</code>，可以匹配<code>&quot;A001&quot;</code>、<code>&quot;A380&quot;</code>。</p>
<h3 id="匹配指定范围">匹配指定范围</h3>
<p>如果我们规定一个7~8位数字的电话号码不能以<code>0</code>开头，应该怎么写匹配规则呢？<code>\d&#123;7,8&#125;</code>是不行的，因为第一个<code>\d</code>可以匹配到<code>0</code>。</p>
<p>使用<code>[...]</code>可以匹配范围内的字符，例如，<code>[123456789]</code>可以匹配<code>1</code>~<code>9</code>，这样就可以写出上述电话号码的规则：<code>[123456789]\d&#123;6,7&#125;</code>。</p>
<p>把所有字符全列出来太麻烦，<code>[...]</code>还有一种写法，直接写<code>[1-9]</code>就可以。</p>
<p>要匹配大小写不限的十六进制数，比如<code>1A2b3c</code>，我们可以这样写：<code>[0-9a-fA-F]</code>，它表示一共可以匹配以下任意范围的字符：</p>
<ul>
<li><code>0-9</code>：字符<code>0</code>~<code>9</code>；</li>
<li><code>a-f</code>：字符<code>a</code>~<code>f</code>；</li>
<li><code>A-F</code>：字符<code>A</code>~<code>F</code>。</li>
</ul>
<p>如果要匹配6位十六进制数，前面讲过的<code>&#123;n&#125;</code>仍然可以继续配合使用：<code>[0-9a-fA-F]&#123;6&#125;</code>。</p>
<p><code>[...]</code>还有一种排除法，即不包含指定范围的字符。假设我们要匹配任意字符，但不包括数字，可以写<code>[^1-9]&#123;3&#125;</code>：</p>
<ul>
<li>可以匹配<code>&quot;ABC&quot;</code>，因为不包含字符<code>1</code>~<code>9</code>；</li>
<li>可以匹配<code>&quot;A00&quot;</code>，因为不包含字符<code>1</code>~<code>9</code>；</li>
<li>不能匹配<code>&quot;A01&quot;</code>，因为包含字符<code>1</code>；</li>
<li>不能匹配<code>&quot;A05&quot;</code>，因为包含字符<code>5</code>。</li>
</ul>
<h3 id="或规则匹配">或规则匹配</h3>
<p>用<code>|</code>连接的两个正则规则是<em>或</em>规则，例如，<code>AB|CD</code>表示可以匹配<code>AB</code>或<code>CD</code>。</p>
<p>我们来看这个正则表达式<code>java|php</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// regex</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">re</span> <span class="operator">=</span> <span class="string">&quot;java|php&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;java&quot;</span>.matches(re));</span><br><span class="line">        System.out.println(<span class="string">&quot;php&quot;</span>.matches(re));</span><br><span class="line">        System.out.println(<span class="string">&quot;go&quot;</span>.matches(re));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>它可以匹配<code>&quot;java&quot;</code>或<code>&quot;php&quot;</code>，但无法匹配<code>&quot;go&quot;</code>。</p>
<p>要把<code>go</code>也加进来匹配，可以改写为<code>java|php|go</code>。</p>
<h3 id="使用括号">使用括号</h3>
<p>现在我们想要匹配字符串<code>learn java</code>、<code>learn php</code>和<code>learn go</code>怎么办？一个最简单的规则是<code>learn\sjava|learn\sphp|learn\sgo</code>，但是这个规则太复杂了，可以把公共部分提出来，然后用<code>(...)</code>把子规则括起来表示成<code>learn\s(java|php|go)</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// regex</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">re</span> <span class="operator">=</span> <span class="string">&quot;learn\\s(java|php|go)&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;learn java&quot;</span>.matches(re));</span><br><span class="line">        System.out.println(<span class="string">&quot;learn Java&quot;</span>.matches(re));</span><br><span class="line">        System.out.println(<span class="string">&quot;learn php&quot;</span>.matches(re));</span><br><span class="line">        System.out.println(<span class="string">&quot;learn Go&quot;</span>.matches(re));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的规则仍然不能匹配<code>learn Java</code>、<code>learn Go</code>这样的字符串。试修改正则，使之能匹配大写字母开头的<code>learn Java</code>、<code>learn Php</code>、<code>learn Go</code>。</p>
<h3 id="小结-3">小结</h3>
<p>复杂匹配规则主要有：</p>
<table>
<thead>
<tr>
<th>正则表达式</th>
<th>规则</th>
<th>可以匹配</th>
</tr>
</thead>
<tbody>
<tr>
<td>^</td>
<td>开头</td>
<td>字符串开头</td>
</tr>
<tr>
<td>$</td>
<td>结尾</td>
<td>字符串结束</td>
</tr>
<tr>
<td>[ABC]</td>
<td>[…]内任意字符</td>
<td>A，B，C</td>
</tr>
<tr>
<td>[A-F0-9xy]</td>
<td>指定范围的字符</td>
<td><code>A</code>，……，<code>F</code>，<code>0</code>，……，<code>9</code>，<code>x</code>，<code>y</code></td>
</tr>
<tr>
<td>[^A-F]</td>
<td>指定范围外的任意字符</td>
<td>非<code>A</code>~<code>F</code></td>
</tr>
<tr>
<td>AB</td>
<td>CD</td>
<td>EF</td>
</tr>
</tbody>
</table>
<hr>
<hr>
<p>我们前面讲到的<code>(...)</code>可以用来把一个子规则括起来，这样写<code>learn\s(java|php|go)</code>就可以更方便地匹配长字符串了。</p>
<p>实际上<code>(...)</code>还有一个重要作用，就是分组匹配。</p>
<p>我们来看一下如何用正则匹配<code>区号-电话号</code>码这个规则。利用前面讲到的匹配规则，写出来很容易：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\d&#123;3,4&#125;\-\d&#123;6,8&#125;</span><br></pre></td></tr></table></figure>
<p>虽然这个正则匹配规则很简单，但是往往匹配成功后，下一步是提取区号和电话号码，分别存入数据库。于是问题来了：如何提取匹配的子串？</p>
<p>当然可以用<code>String</code>提供的<code>indexOf()</code>和<code>substring()</code>这些方法，但它们从正则匹配的字符串中提取子串没有通用性，下一次要提取<code>learn\s(java|php)</code>还得改代码。</p>
<p>正确的方法是用<code>(...)</code>先把要提取的规则分组，把上述正则表达式变为<code>(\d&#123;3,4&#125;)\-(\d&#123;6,8&#125;)</code>。</p>
<p>现在问题又来了：匹配后，如何按括号提取子串？</p>
<p>现在我们没办法用<code>String.matches()</code>这样简单的判断方法了，必须引入<code>java.util.regex</code>包，用<code>Pattern</code>对象匹配，匹配后获得一个<code>Matcher</code>对象，如果匹配成功，就可以直接从<code>Matcher.group(index)</code>返回子串：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;(\\d&#123;3,4&#125;)\\-(\\d&#123;7,8&#125;)&quot;</span>);</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(<span class="string">&quot;010-12345678&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (m.matches()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">g1</span> <span class="operator">=</span> m.group(<span class="number">1</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">g2</span> <span class="operator">=</span> m.group(<span class="number">2</span>);</span><br><span class="line">            System.out.println(g1); <span class="comment">// 010</span></span><br><span class="line">            System.out.println(g2); <span class="comment">// 12345678</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;匹配失败!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行上述代码，会得到两个匹配上的子串<code>010</code>和<code>12345678</code>。</p>
<p>要特别注意，<code>Matcher.group(index)</code>方法的参数用1表示第一个子串，2表示第二个子串。如果我们传入0会得到什么呢？答案是<code>010-12345678</code>，即整个正则匹配到的字符串。</p>
<h3 id="Pattern">Pattern</h3>
<p>我们在前面的代码中用到的正则表达式代码是<code>String.matches()</code>方法，而我们在分组提取的代码中用的是<code>java.util.regex</code>包里面的<code>Pattern</code>类和<code>Matcher</code>类。实际上这两种代码本质上是一样的，因为<code>String.matches()</code>方法内部调用的就是<code>Pattern</code>和<code>Matcher</code>类的方法。</p>
<p>但是反复使用<code>String.matches()</code>对同一个正则表达式进行多次匹配效率较低，因为每次都会创建出一样的<code>Pattern</code>对象。完全可以先创建出一个<code>Pattern</code>对象，然后反复使用，就可以实现编译一次，多次匹配：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;(\\d&#123;3,4&#125;)\\-(\\d&#123;7,8&#125;)&quot;</span>);</span><br><span class="line">        pattern.matcher(<span class="string">&quot;010-12345678&quot;</span>).matches(); <span class="comment">// true</span></span><br><span class="line">        pattern.matcher(<span class="string">&quot;021-123456&quot;</span>).matches(); <span class="comment">// false</span></span><br><span class="line">        pattern.matcher(<span class="string">&quot;022#1234567&quot;</span>).matches(); <span class="comment">// false</span></span><br><span class="line">        <span class="comment">// 获得Matcher对象:</span></span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(<span class="string">&quot;010-12345678&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (matcher.matches()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">whole</span> <span class="operator">=</span> matcher.group(<span class="number">0</span>); <span class="comment">// &quot;010-12345678&quot;, 0表示匹配的整个字符串</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">area</span> <span class="operator">=</span> matcher.group(<span class="number">1</span>); <span class="comment">// &quot;010&quot;, 1表示匹配的第1个子串</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">tel</span> <span class="operator">=</span> matcher.group(<span class="number">2</span>); <span class="comment">// &quot;12345678&quot;, 2表示匹配的第2个子串</span></span><br><span class="line">            System.out.println(area);</span><br><span class="line">            System.out.println(tel);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用<code>Matcher</code>时，必须首先调用<code>matches()</code>判断是否匹配成功，匹配成功后，才能调用<code>group()</code>提取子串。</p>
<p>利用提取子串的功能，我们轻松获得了区号和号码两部分。</p>
<h3 id="练习-2">练习</h3>
<p>利用分组匹配，从字符串<code>&quot;23:01:59&quot;</code>提取时、分、秒。</p>
<p><a target="_blank" rel="noopener" href="https://liaoxuefeng.com/books/java/reg-exp/group/regex-time.zip">下载练习</a></p>
<h3 id="小结-4">小结</h3>
<p>正则表达式用<code>(...)</code>分组可以通过<code>Matcher</code>对象快速提取子串：</p>
<ul>
<li><code>group(0)</code>表示匹配的整个字符串；</li>
<li><code>group(1)</code>表示第1个子串，<code>group(2)</code>表示第2个子串，以此类推。</li>
</ul>
<h2 id="非贪婪匹配">非贪婪匹配</h2>
<p>在介绍非贪婪匹配前，我们先看一个简单的问题：</p>
<p>给定一个字符串表示的数字，判断该数字末尾<code>0</code>的个数。例如：</p>
<ul>
<li><code>&quot;123000&quot;</code>：3个<code>0</code></li>
<li><code>&quot;10100&quot;</code>：2个<code>0</code></li>
<li><code>&quot;1001&quot;</code>：0个<code>0</code></li>
</ul>
<p>可以很容易地写出该正则表达式：<code>(\d+)(0*)</code>，Java代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;(\\d+)(0*)&quot;</span>);</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(<span class="string">&quot;1230000&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (matcher.matches()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;group1=&quot;</span> + matcher.group(<span class="number">1</span>)); <span class="comment">// &quot;1230000&quot;</span></span><br><span class="line">            System.out.println(<span class="string">&quot;group2=&quot;</span> + matcher.group(<span class="number">2</span>)); <span class="comment">// &quot;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然而打印的第二个子串是空字符串<code>&quot;&quot;</code>。</p>
<p>实际上，我们期望分组匹配结果是：</p>
<table>
<thead>
<tr>
<th>input</th>
<th><code>\d+</code></th>
<th><code>0*</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>123000</td>
<td>“123”</td>
<td>“000”</td>
</tr>
<tr>
<td>10100</td>
<td>“101”</td>
<td>“00”</td>
</tr>
<tr>
<td>1001</td>
<td>“1001”</td>
<td>“”</td>
</tr>
</tbody>
</table>
<p>但实际的分组匹配结果是这样的：</p>
<table>
<thead>
<tr>
<th>input</th>
<th><code>\d+</code></th>
<th><code>0*</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>123000</td>
<td>“123000”</td>
<td>“”</td>
</tr>
<tr>
<td>10100</td>
<td>“10100”</td>
<td>“”</td>
</tr>
<tr>
<td>1001</td>
<td>“1001”</td>
<td>“”</td>
</tr>
</tbody>
</table>
<p>仔细观察上述实际匹配结果，实际上它是完全合理的，因为<code>\d+</code>确实可以匹配后面任意个<code>0</code>。</p>
<p>这是因为正则表达式默认使用贪婪匹配：任何一个规则，它总是尽可能多地向后匹配，因此，<code>\d+</code>总是会把后面的<code>0</code>包含进来。</p>
<p>要让<code>\d+</code>尽量少匹配，让<code>0*</code>尽量多匹配，我们就必须让<code>\d+</code>使用非贪婪匹配。在规则<code>\d+</code>后面加个<code>?</code>即可表示非贪婪匹配。我们改写正则表达式如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;(\\d+?)(0*)&quot;</span>);</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(<span class="string">&quot;1230000&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (matcher.matches()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;group1=&quot;</span> + matcher.group(<span class="number">1</span>)); <span class="comment">// &quot;123&quot;</span></span><br><span class="line">            System.out.println(<span class="string">&quot;group2=&quot;</span> + matcher.group(<span class="number">2</span>)); <span class="comment">// &quot;0000&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因此，给定一个匹配规则，加上<code>?</code>后就变成了非贪婪匹配。</p>
<p>我们再来看这个正则表达式<code>(\d??)(9*)</code>，注意<code>\d?</code>表示匹配0个或1个数字，后面第二个<code>?</code>表示非贪婪匹配，因此，给定字符串<code>&quot;9999&quot;</code>，匹配到的两个子串分别是<code>&quot;&quot;</code>和<code>&quot;9999&quot;</code>，因为对于<code>\d?</code>来说，可以匹配1个<code>9</code>，也可以匹配0个<code>9</code>，但是因为后面的<code>?</code>表示非贪婪匹配，它就会尽可能少的匹配，结果是匹配了0个<code>9</code>。</p>
<h3 id="小结-5">小结</h3>
<p>正则表达式匹配默认使用贪婪匹配，可以使用<code>?</code>表示对某一规则进行非贪婪匹配；</p>
<p>注意区分<code>?</code>的含义：<code>\d??</code>。</p>
<hr>
<hr>
<h3 id="分割字符串">分割字符串</h3>
<p>使用正则表达式分割字符串可以实现更加灵活的功能。<code>String.split()</code>方法传入的正是正则表达式。我们来看下面的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;a b c&quot;</span>.split(<span class="string">&quot;\\s&quot;</span>); <span class="comment">// &#123; &quot;a&quot;, &quot;b&quot;, &quot;c&quot; &#125;</span></span><br><span class="line"><span class="string">&quot;a b  c&quot;</span>.split(<span class="string">&quot;\\s&quot;</span>); <span class="comment">// &#123; &quot;a&quot;, &quot;b&quot;, &quot;&quot;, &quot;c&quot; &#125;</span></span><br><span class="line"><span class="string">&quot;a, b ;; c&quot;</span>.split(<span class="string">&quot;[\\,\\;\\s]+&quot;</span>); <span class="comment">// &#123; &quot;a&quot;, &quot;b&quot;, &quot;c&quot; &#125;</span></span><br></pre></td></tr></table></figure>
<p>如果我们想让用户输入一组标签，然后把标签提取出来，因为用户的输入往往是不规范的，这时，使用合适的正则表达式，就可以消除多个空格、混合<code>,</code>和<code>;</code>这些不规范的输入，直接提取出规范的字符串。</p>
<h3 id="搜索字符串">搜索字符串</h3>
<p>使用正则表达式还可以搜索字符串，我们来看例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.regex.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;the quick brown fox jumps over the lazy dog.&quot;</span>;</span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;\\wo\\w&quot;</span>);</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(s);</span><br><span class="line">        <span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sub</span> <span class="operator">=</span> s.substring(m.start(), m.end());</span><br><span class="line">            System.out.println(sub);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们获取到<code>Matcher</code>对象后，不需要调用<code>matches()</code>方法（因为匹配整个串肯定返回false），而是反复调用<code>find()</code>方法，在整个串中搜索能匹配上<code>\\wo\\w</code>规则的子串，并打印出来。这种方式比<code>String.indexOf()</code>要灵活得多，因为我们搜索的规则是3个字符：中间必须是<code>o</code>，前后两个必须是字符<code>[A-Za-z0-9_]</code>。</p>
<h3 id="替换字符串">替换字符串</h3>
<p>使用正则表达式替换字符串可以直接调用<code>String.replaceAll()</code>，它的第一个参数是正则表达式，第二个参数是待替换的字符串。我们还是来看例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// regex</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;The     quick\t\t brown   fox  jumps   over the  lazy dog.&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">r</span> <span class="operator">=</span> s.replaceAll(<span class="string">&quot;\\s+&quot;</span>, <span class="string">&quot; &quot;</span>);</span><br><span class="line">        System.out.println(r); <span class="comment">// &quot;The quick brown fox jumps over the lazy dog.&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的代码把不规范的连续空格分隔的句子变成了规范的句子。可见，灵活使用正则表达式可以大大降低代码量。</p>
<h3 id="反向引用">反向引用</h3>
<p>如果我们要把搜索到的指定字符串按规则替换，比如前后各加一个<code>&lt;b&gt;xxxx&lt;/b&gt;</code>，这个时候，使用<code>replaceAll()</code>的时候，我们传入的第二个参数可以使用<code>$1</code>、<code>$2</code>来反向引用匹配到的子串。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// regex</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;the quick brown fox jumps over the lazy dog.&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">r</span> <span class="operator">=</span> s.replaceAll(<span class="string">&quot;\\s([a-z]&#123;4&#125;)\\s&quot;</span>, <span class="string">&quot; &lt;b&gt;$1&lt;/b&gt; &quot;</span>);</span><br><span class="line">        System.out.println(r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述代码的运行结果是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">the quick brown fox jumps &lt;b&gt;over&lt;/b&gt; the &lt;b&gt;lazy&lt;/b&gt; dog.</span><br></pre></td></tr></table></figure>
<p>它实际上把任何4字符单词的前后用<code>&lt;b&gt;xxxx&lt;/b&gt;</code>括起来。实现替换的关键就在于<code>&quot; &lt;b&gt;$1&lt;/b&gt; &quot;</code>，它用匹配的分组子串<code>([a-z]&#123;4&#125;)</code>替换了<code>$1</code>。</p>
<h3 id="练习-3">练习</h3>
<p>模板引擎是指，定义一个字符串作为模板：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello, $&#123;name&#125;! You are learning $&#123;lang&#125;!</span><br></pre></td></tr></table></figure>
<p>其中，以<code>$&#123;key&#125;</code>表示的是变量，也就是将要被替换的内容。</p>
<p>当传入一个<code>Map&lt;String, String&gt;</code>给模板后，需要把对应的key替换为Map的value。</p>
<p>例如，传入<code>Map</code>为：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bob&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lang&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Java&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>然后，<code>$&#123;name&#125;</code>被替换为<code>Map</code>对应的值<code>Bob</code>，<code>$&#123;lang&#125;</code>被替换为<code>Map</code>对应的值<code>Java</code>，最终输出的结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello, Bob! You are learning Java!</span><br></pre></td></tr></table></figure>
<p>请编写一个简单的模板引擎，利用正则表达式实现这个功能。</p>
<p>提示：参考<a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/regex/Matcher.html#appendReplacement%28java.lang.StringBuilder%2Cjava.lang.String%29">Matcher.appendReplacement()</a>方法。</p>
<p><a target="_blank" rel="noopener" href="https://liaoxuefeng.com/books/java/reg-exp/search-replace/regex-template.zip">下载练习</a></p>
<h3 id="小结-6">小结</h3>
<p>使用正则表达式可以：</p>
<ul>
<li>分割字符串：<code>String.split()</code></li>
<li>搜索子串：<code>Matcher.find()</code></li>
<li>替换字符串：<code>String.replaceAll()</code></li>
</ul>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">標籤</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="../../../../../tags/Java/" rel="tag">Java</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="../JAVA-%E5%8A%A0%E5%AF%86%E4%B8%8E%E5%AE%89%E5%85%A8/"
                    data-tooltip="JAVA-加密与安全"
                    aria-label="上一篇: JAVA-加密与安全"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="../JAVA-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"
                    data-tooltip="JAVA-单元测试"
                    aria-label="下一篇: JAVA-单元测试"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://chankein.github.io/2025/05/24/JAVA/JAVA-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://chankein.github.io/2025/05/24/JAVA/JAVA-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://chankein.github.io/2025/05/24/JAVA/JAVA-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
                    title="global.share_on_linkedin"
                    aria-label="global.share_on_linkedin"
                >
                    <i class="fab fa-linkedin" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://chankein.github.io/2025/05/24/JAVA/JAVA-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
                    title="分享到 Weibo"
                    aria-label="分享到 Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2025 Kein Chan. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="../JAVA-%E5%8A%A0%E5%AF%86%E4%B8%8E%E5%AE%89%E5%85%A8/"
                    data-tooltip="JAVA-加密与安全"
                    aria-label="上一篇: JAVA-加密与安全"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="../JAVA-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"
                    data-tooltip="JAVA-单元测试"
                    aria-label="下一篇: JAVA-单元测试"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://chankein.github.io/2025/05/24/JAVA/JAVA-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://chankein.github.io/2025/05/24/JAVA/JAVA-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://chankein.github.io/2025/05/24/JAVA/JAVA-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
                    title="global.share_on_linkedin"
                    aria-label="global.share_on_linkedin"
                >
                    <i class="fab fa-linkedin" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://chankein.github.io/2025/05/24/JAVA/JAVA-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
                    title="分享到 Weibo"
                    aria-label="分享到 Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://chankein.github.io/2025/05/24/JAVA/JAVA-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
                        aria-label="分享到 Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>分享到 Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://chankein.github.io/2025/05/24/JAVA/JAVA-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
                        aria-label="分享到 Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://chankein.github.io/2025/05/24/JAVA/JAVA-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
                        aria-label="global.share_on_linkedin"
                    >
                        <i class="fab fa-linkedin" aria-hidden="true"></i><span>global.share_on_linkedin</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://service.weibo.com/share/share.php?&amp;title=https://chankein.github.io/2025/05/24/JAVA/JAVA-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
                        aria-label="分享到 Weibo"
                    >
                        <i class="fab fa-weibo" aria-hidden="true"></i><span>分享到 Weibo</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="../../../../../assets/images/profile.jpg" alt="作者的圖片"/>
        
            <h4 id="about-card-name">Kein Chan</h4>
        
            <div id="about-card-bio"><p>這是獨立全棧工程師Kein Chan的技術博客</br>Kein目前居住在東京和澳門.</br>熱愛旅遊.已探訪日本40多個都道府縣.曾自駕環繞日本半個本州.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>全棧工程師</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Tokyo/Macao
            </div>
        
    </div>
</div>

        
            <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-times"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="../assets/images/logo-algolia-nebula-blue-full.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    />
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">沒有找到文章</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2013/04/27/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85/"
                            aria-label=": R语言-环境安装"
                        >
                            <h3 class="media-heading">R语言-环境安装</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年4月27日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2013/04/28/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E5%9F%BA%E7%A1%80/"
                            aria-label=": R语言-基础"
                        >
                            <h3 class="media-heading">R语言-基础</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年4月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2013/05/01/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE/"
                            aria-label=": R语言-读取数据"
                        >
                            <h3 class="media-heading">R语言-读取数据</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月1日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2013/05/02/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E7%BB%98%E5%9B%BE/"
                            aria-label=": R语言-绘图"
                        >
                            <h3 class="media-heading">R语言-绘图</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月2日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2013/05/03/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/"
                            aria-label=": R语言-线性回归"
                        >
                            <h3 class="media-heading">R语言-线性回归</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月3日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2015/02/22/Algorithms/1.%E7%AE%97%E6%B3%95%E5%9C%A8%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8/"
                            aria-label=": 1. 算法在计算中的作用"
                        >
                            <h3 class="media-heading">1. 算法在计算中的作用</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月22日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2015/02/23/Algorithms/2.%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/"
                            aria-label=": 2. 算法基础"
                        >
                            <h3 class="media-heading">2. 算法基础</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月23日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2015/02/24/Algorithms/3.%E5%87%BD%E6%95%B0%E7%9A%84%E5%A2%9E%E9%95%BF/"
                            aria-label=": 3. 函数的增长"
                        >
                            <h3 class="media-heading">3. 函数的增长</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月24日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2015/02/25/Algorithms/4.%E5%88%86%E6%B2%BB%E7%AD%96%E7%95%A5/"
                            aria-label=": 4. 分治策略"
                        >
                            <h3 class="media-heading">4. 分治策略</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月25日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2015/02/26/Algorithms/5.%E6%A6%82%E7%8E%87%E5%88%86%E6%9E%90%E5%92%8C%E9%9A%8F%E6%9C%BA%E7%AE%97%E6%B3%95/"
                            aria-label=": 5. 概率分析和随机算法"
                        >
                            <h3 class="media-heading">5. 概率分析和随机算法</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月26日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="沒有找到文章"
                data-message-one="找到 1 篇文章"
                data-message-other="找到 {n} 篇文章">
                找到 134 篇文章
            </p>
        </div>
    </div>
</div>

        
        
<div id="cover" style="background-image:url('../../../../../assets/images/cover.jpeg');"></div>
        <!--SCRIPTS-->

<script src="../../../../../assets/js/script-qtzvvb63gamuirvfphht7lytrxkfllzng1escnm2phjtlt4tvvxi5gl0wx4o.min.js"></script>

<!--SCRIPTS END-->


    




    </body>
</html>
