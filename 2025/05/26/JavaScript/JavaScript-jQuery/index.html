
<!DOCTYPE html>
<html lang="zh-tw">
    
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css">

    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/min/moment.min.js"></script>
    
      <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/locale/zh-tw.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
    <script>
      window.algoliaConfig = {
        appId: 'AWFC86Q51O',
        apiKey: 'c9d952906eb1b154d75cf863e75c1ede',
        indexName: 'MyBlog'
      };
      var algoliaIndex = algoliasearch(
        algoliaConfig.appId,
        algoliaConfig.apiKey
      ).initIndex(algoliaConfig.indexName);
    </script>


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Kein&#39;s blog">
    <title>JavaScript-jQuery - Kein&#39;s blog</title>
    <meta name="author" content="Kein Chan">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Kein Chan","sameAs":["https://github.com/chankein/","https://www.linkedin.com/profile/","mailto:kein.chan85@gmail.com"],"image":"profile.jpg"},"articleBody":"jQuery\n你可能听说过jQuery，它名字起得很土，但却是JavaScript世界中使用最广泛的一个库。\n江湖传言，全世界大约有80~90%的网站直接或间接地使用了jQuery。鉴于它如此流行，又如此好用，所以每一个入门JavaScript的前端工程师都应该了解和学习它。\njQuery这么流行，肯定是因为它解决了一些很重要的问题。实际上，jQuery能帮我们干这些事情：\n\n消除浏览器差异：你不需要自己写冗长的代码来针对不同的浏览器来绑定事件，编写AJAX等代码；\n简洁的操作DOM的方法：写$('#test')肯定比document.getElementById('test')来得简洁；\n轻松实现动画、修改CSS等各种操作。\n\njQuery的理念“Write Less, Do More“，让你写更少的代码，完成更多的工作！\njQuery版本\n从jQuery官网可以下载最新版本。jQuery只是一个jquery-xxx.js文件，但你会看到有compressed（已压缩）和uncompressed（未压缩）两种版本，使用时完全一样，但如果你想深入研究jQuery源码，那就用uncompressed版本。\n使用jQuery\n使用jQuery只需要在页面的&lt;head&gt;引入jQuery文件即可：\n123456789&lt;html&gt;&lt;head&gt;    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;\t...&lt;/head&gt;&lt;body&gt;    ...&lt;/body&gt;&lt;/html&gt;\n好消息是，当你在学习这个教程时，已经引用了jQuery，所以你可以直接使用：\n1console.log(&#x27;jQuery版本：&#x27; + $.fn.jquery);\n$符号\n$是著名的jQuery符号。实际上，jQuery把所有功能全部封装在一个全局变量jQuery中，而$也是一个合法的变量名，它是变量jQuery的别名：\n1234window.jQuery; // jQuery(selector, context)window.$; // jQuery(selector, context)$ === jQuery; // truetypeof($); // &#x27;function&#x27;\n$本质上就是一个函数，但是函数也是对象，于是$除了可以直接调用外，也可以有很多其他属性。\n注意，你看到的$函数名可能不是jQuery(selector, context)，因为很多JavaScript压缩工具可以对函数名和参数改名，所以压缩过的jQuery源码$函数可能变成a(b,c)。\n绝大多数时候，我们都直接用$（因为写起来更简单嘛）。但是，如果$这个变量不幸地被占用了，而且还不能改，那我们就只能让jQuery把$变量交出来，然后就只能使用jQuery这个变量：\n1234$; // jQuery(selector, context)jQuery.noConflict();$; // undefinedjQuery; // jQuery(selector, context)\n这种黑魔法的原理是jQuery在占用$之前，先在内部保存了原来的$,调用jQuery.noConflict()时会把原来保存的变量还原。\n\n\n选择器是jQuery的核心。一个选择器写出来类似$('#dom-id')。\n为什么jQuery要发明选择器？回顾一下DOM操作中我们经常使用的代码：\n12345678910111213141516// 按ID查找：let a = document.getElementById(&#x27;dom-id&#x27;);// 按tag查找：let divs = document.getElementsByTagName(&#x27;div&#x27;);// 查找&lt;p class=&quot;red&quot;&gt;：let ps = document.getElementsByTagName(&#x27;p&#x27;);// 过滤出class=&quot;red&quot;:// TODO:// 查找&lt;table class=&quot;green&quot;&gt;里面的所有&lt;tr&gt;：let table = ...for (let i=0; i&lt;table.children; i++) &#123;    // TODO: 过滤出&lt;tr&gt;&#125;\n这些代码实在太繁琐了，并且，在层级关系中，例如，查找&lt;table class=&quot;green&quot;&gt;里面的所有&lt;tr&gt;，一层循环实际上是错的，因为&lt;table&gt;的标准写法是：\n123456&lt;table&gt;    &lt;tbody&gt;        &lt;tr&gt;...&lt;/tr&gt;        &lt;tr&gt;...&lt;/tr&gt;    &lt;/tbody&gt;&lt;/table&gt;\n很多时候，需要递归查找所有子节点。\njQuery的选择器就是帮助我们快速定位到一个或多个DOM节点。\n按ID查找\n如果某个DOM节点有id属性，利用jQuery查找如下：\n12// 查找&lt;div id=&quot;abc&quot;&gt;:let div = $(&#x27;#abc&#x27;);\n注意，#abc以#开头。返回的对象是jQuery对象。\n什么是jQuery对象？jQuery对象类似数组，它的每个元素都是一个引用了DOM节点的对象。\n以上面的查找为例，如果id为abc的&lt;div&gt;存在，返回的jQuery对象如下：\n1[&lt;div id=&quot;abc&quot;&gt;...&lt;/div&gt;]\n如果id为abc的&lt;div&gt;不存在，返回的jQuery对象如下：\n1[]\n总之jQuery的选择器不会返回undefined或者null，这样的好处是你不必在下一行判断if (div === undefined)。\njQuery对象和DOM对象之间可以互相转化：\n123let div = $(&#x27;#abc&#x27;); // jQuery对象let divDom = div.get(0); // 假设存在div，获取第1个DOM元素let another = $(divDom); // 重新把DOM包装为jQuery对象\n通常情况下你不需要获取DOM对象，直接使用jQuery对象更加方便。如果你拿到了一个DOM对象，那可以简单地调用$(aDomObject)把它变成jQuery对象，这样就可以方便地使用jQuery的API了。\n按tag查找\n按tag查找只需要写上tag名称就可以了：\n12let ps = $(&#x27;p&#x27;); // 返回所有&lt;p&gt;节点ps.length; // 数一数页面有多少个&lt;p&gt;节点\n按class查找\n按class查找注意在class名称前加一个.：\n1234let a = $(&#x27;.red&#x27;); // 所有节点包含`class=&quot;red&quot;`都将返回// 例如:// &lt;div class=&quot;red&quot;&gt;...&lt;/div&gt;// &lt;p class=&quot;green red&quot;&gt;...&lt;/p&gt;\n通常很多节点有多个class，我们可以查找同时包含red和green的节点：\n1234let a = $(&#x27;.red.green&#x27;); // 注意没有空格！// 符合条件的节点：// &lt;div class=&quot;red green&quot;&gt;...&lt;/div&gt;// &lt;div class=&quot;blue green red&quot;&gt;...&lt;/div&gt;\n按属性查找\n一个DOM节点除了id和class外还可以有很多属性，很多时候按属性查找会非常方便，比如在一个表单中按属性来查找：\n123let email = $(&#x27;[name=email]&#x27;); // 找出&lt;??? name=&quot;email&quot;&gt;let passwordInput = $(&#x27;[type=password]&#x27;); // 找出&lt;??? type=&quot;password&quot;&gt;let a = $(&#x27;[items=&quot;A B&quot;]&#x27;); // 找出&lt;??? items=&quot;A B&quot;&gt;\n当属性的值包含空格等特殊字符时，需要用双引号括起来。\n按属性查找还可以使用前缀查找或者后缀查找：\n1234let icons = $(&#x27;[name^=icon]&#x27;); // 找出所有name属性值以icon开头的DOM// 例如: name=&quot;icon-1&quot;, name=&quot;icon-2&quot;let names = $(&#x27;[name$=with]&#x27;); // 找出所有name属性值以with结尾的DOM// 例如: name=&quot;startswith&quot;, name=&quot;endswith&quot;\n这个方法尤其适合通过class属性查找，且不受class包含多个名称的影响：\n12let icons = $(&#x27;[class^=&quot;icon-&quot;]&#x27;); // 找出所有class包含至少一个以`icon-`开头的DOM// 例如: class=&quot;icon-clock&quot;, class=&quot;abc icon-home&quot;\n组合查找\n组合查找就是把上述简单选择器组合起来使用。如果我们查找$('[name=email]')，很可能把表单外的&lt;div name=&quot;email&quot;&gt;也找出来，但我们只希望查找&lt;input&gt;，就可以这么写：\n1let emailInput = $(&#x27;input[name=email]&#x27;); // 不会找出&lt;div name=&quot;email&quot;&gt;\n同样的，根据tag和class来组合查找也很常见：\n1let tr = $(&#x27;tr.red&#x27;); // 找出&lt;tr class=&quot;red ...&quot;&gt;...&lt;/tr&gt;\n多项选择器\n多项选择器就是把多个选择器用,组合起来一块选：\n12$(&#x27;p,div&#x27;); // 把&lt;p&gt;和&lt;div&gt;都选出来$(&#x27;p.red,p.green&#x27;); // 把&lt;p class=&quot;red&quot;&gt;和&lt;p class=&quot;green&quot;&gt;都选出来\n要注意的是，选出来的元素是按照它们在HTML中出现的顺序排列的，而且不会有重复元素。例如，&lt;p class=&quot;red green&quot;&gt;不会被上面的$('p.red,p.green')选择两次。\n练习\n使用jQuery选择器分别选出指定元素：\n\n仅选择JavaScript\n仅选择Erlang\n选择JavaScript和Erlang\n选择所有编程语言\n选择名字input\n选择邮件和名字input\n\n12345678910111213141516&lt;!-- HTML结构 --&gt;&lt;div id=&quot;test-jquery&quot;&gt;    &lt;p id=&quot;para-1&quot; class=&quot;color-red&quot;&gt;JavaScript&lt;/p&gt;    &lt;p id=&quot;para-2&quot; class=&quot;color-green&quot;&gt;Haskell&lt;/p&gt;    &lt;p class=&quot;color-red color-green&quot;&gt;Erlang&lt;/p&gt;    &lt;p name=&quot;name&quot; class=&quot;color-black&quot;&gt;Python&lt;/p&gt;    &lt;form class=&quot;test-form&quot; target=&quot;_blank&quot; action=&quot;#0&quot; onsubmit=&quot;return false;&quot;&gt;        &lt;legend&gt;注册新用户&lt;/legend&gt;        &lt;fieldset&gt;            &lt;p&gt;&lt;label&gt;名字: &lt;input name=&quot;name&quot;&gt;&lt;/label&gt;&lt;/p&gt;            &lt;p&gt;&lt;label&gt;邮件: &lt;input name=&quot;email&quot;&gt;&lt;/label&gt;&lt;/p&gt;            &lt;p&gt;&lt;label&gt;口令: &lt;input name=&quot;password&quot; type=&quot;password&quot;&gt;&lt;/label&gt;&lt;/p&gt;            &lt;p&gt;&lt;button type=&quot;submit&quot;&gt;注册&lt;/button&gt;&lt;/p&gt;        &lt;/fieldset&gt;    &lt;/form&gt;&lt;/div&gt;\nJavaScript\nHaskell\nErlang\nPython\n运行查看结果：\n12345678910let selected = null;selected = ???;// 高亮结果:if (!(selected instanceof jQuery)) &#123;    return console.log(&#x27;不是有效的jQuery对象!&#x27;);&#125;$(&#x27;#test-jquery&#x27;).find(&#x27;*&#x27;).css(&#x27;background-color&#x27;, &#x27;&#x27;);selected.css(&#x27;background-color&#x27;, &#x27;#ff8000&#x27;);\n除了基本的选择器外，jQuery的层级选择器更加灵活，也更强大。\n因为DOM的结构就是层级结构，所以我们经常要根据层级关系进行选择。\n层级选择器（Descendant Selector）\n如果两个DOM元素具有层级关系，就可以用$('ancestor descendant')来选择，层级之间用空格隔开。例如：\n12345678&lt;!-- HTML结构 --&gt;&lt;div class=&quot;testing&quot;&gt;    &lt;ul class=&quot;lang&quot;&gt;        &lt;li class=&quot;lang-javascript&quot;&gt;JavaScript&lt;/li&gt;        &lt;li class=&quot;lang-python&quot;&gt;Python&lt;/li&gt;        &lt;li class=&quot;lang-lua&quot;&gt;Lua&lt;/li&gt;    &lt;/ul&gt;&lt;/div&gt;\n要选出JavaScript，可以用层级选择器：\n12$(&#x27;ul.lang li.lang-javascript&#x27;); // [&lt;li class=&quot;lang-javascript&quot;&gt;JavaScript&lt;/li&gt;]$(&#x27;div.testing li.lang-javascript&#x27;); // [&lt;li class=&quot;lang-javascript&quot;&gt;JavaScript&lt;/li&gt;]\n因为&lt;div&gt;和&lt;ul&gt;都是&lt;li&gt;的祖先节点，所以上面两种方式都可以选出相应的&lt;li&gt;节点。\n要选择所有的&lt;li&gt;节点，用：\n1$(&#x27;ul.lang li&#x27;);\n这种层级选择器相比单个的选择器好处在于，它缩小了选择范围，因为首先要定位父节点，才能选择相应的子节点，这样避免了页面其他不相关的元素。\n例如：\n1$(&#x27;form[name=upload] input&#x27;);\n就把选择范围限定在name属性为upload的表单里。如果页面有很多表单，其他表单的&lt;input&gt;不会被选择。\n多层选择也是允许的：\n1$(&#x27;form.test p input&#x27;); // 在form表单选择被&lt;p&gt;包含的&lt;input&gt;\n子选择器（Child Selector）\n子选择器$('parent&gt;child')类似层级选择器，但是限定了层级关系必须是父子关系，就是&lt;child&gt;节点必须是&lt;parent&gt;节点的直属子节点。还是以上面的例子：\n12$(&#x27;ul.lang&gt;li.lang-javascript&#x27;); // 可以选出[&lt;li class=&quot;lang-javascript&quot;&gt;JavaScript&lt;/li&gt;]$(&#x27;div.testing&gt;li.lang-javascript&#x27;); // [], 无法选出，因为&lt;div&gt;和&lt;li&gt;不构成父子关系\n过滤器（Filter）\n过滤器一般不单独使用，它通常附加在选择器上，帮助我们更精确地定位元素。观察过滤器的效果：\n123456$(&#x27;ul.lang li&#x27;); // 选出JavaScript、Python和Lua 3个节点$(&#x27;ul.lang li:first-child&#x27;); // 仅选出JavaScript$(&#x27;ul.lang li:last-child&#x27;); // 仅选出Lua$(&#x27;ul.lang li:nth-child(2)&#x27;); // 选出第N个元素，N从1开始$(&#x27;ul.lang li:nth-child(even)&#x27;); // 选出序号为偶数的元素$(&#x27;ul.lang li:nth-child(odd)&#x27;); // 选出序号为奇数的元素\n表单相关\n针对表单元素，jQuery还有一组特殊的选择器：\n\n:input：可以选择&lt;input&gt;，&lt;textarea&gt;，&lt;select&gt;和&lt;button&gt;；\n:file：可以选择&lt;input type=&quot;file&quot;&gt;，和input[type=file]一样；\n:checkbox：可以选择复选框，和input[type=checkbox]一样；\n:radio：可以选择单选框，和input[type=radio]一样；\n:focus：可以选择当前输入焦点的元素，例如把光标放到一个&lt;input&gt;上，用$('input:focus')就可以选出；\n:checked：选择当前勾上的单选框和复选框，用这个选择器可以立刻获得用户选择的项目，如$('input[type=radio]:checked')；\n:enabled：可以选择可以正常输入的&lt;input&gt;、&lt;select&gt; 等，也就是没有灰掉的输入；\n:disabled：和:enabled正好相反，选择那些不能输入的。\n\n此外，jQuery还有很多有用的选择器，例如，选出可见的或隐藏的元素：\n12$(&#x27;div:visible&#x27;); // 所有可见的div$(&#x27;div:hidden&#x27;); // 所有隐藏的div\n练习\n针对如下HTML结构：\n12345678910111213&lt;!-- HTML结构 --&gt;&lt;div class=&quot;test-selector&quot;&gt;    &lt;ul class=&quot;test-lang&quot;&gt;        &lt;li class=&quot;lang-javascript&quot;&gt;JavaScript&lt;/li&gt;        &lt;li class=&quot;lang-python&quot;&gt;Python&lt;/li&gt;        &lt;li class=&quot;lang-lua&quot;&gt;Lua&lt;/li&gt;    &lt;/ul&gt;    &lt;ol class=&quot;test-lang&quot;&gt;        &lt;li class=&quot;lang-swift&quot;&gt;Swift&lt;/li&gt;        &lt;li class=&quot;lang-java&quot;&gt;Java&lt;/li&gt;        &lt;li class=&quot;lang-c&quot;&gt;C&lt;/li&gt;    &lt;/ol&gt;&lt;/div&gt;\n\nJavaScript\nPython\nLua\n\n\nSwift\nJava\nC\n\n选出相应的内容并观察效果：\n123456789// 分别选择所有语言，所有动态语言，所有静态语言，JavaScript，Lua，C等:let selected = ???// 高亮结果:if (!(selected instanceof jQuery)) &#123;    return console.log(&#x27;不是有效的jQuery对象!&#x27;);&#125;$(&#x27;#test-jquery&#x27;).find(&#x27;*&#x27;).css(&#x27;background-color&#x27;, &#x27;&#x27;);selected.css(&#x27;background-color&#x27;, &#x27;#ff8000&#x27;);\n通常情况下选择器可以直接定位到我们想要的元素，但是，当我们拿到一个jQuery对象后，还可以以这个对象为基准，进行查找和过滤。\n最常见的查找是在某个节点的所有子节点中查找，使用find()方法，它本身又接收一个任意的选择器。例如如下的HTML结构：\n12345678&lt;!-- HTML结构 --&gt;&lt;ul class=&quot;lang&quot;&gt;    &lt;li class=&quot;js dy&quot;&gt;JavaScript&lt;/li&gt;    &lt;li class=&quot;dy&quot;&gt;Python&lt;/li&gt;    &lt;li id=&quot;swift&quot;&gt;Swift&lt;/li&gt;    &lt;li class=&quot;dy&quot;&gt;Scheme&lt;/li&gt;    &lt;li name=&quot;haskell&quot;&gt;Haskell&lt;/li&gt;&lt;/ul&gt;\n\nJavaScript\nPython\nSwift\nScheme\nHaskell\n\n用find()查找：\n1234let ul = $(&#x27;ul.lang&#x27;); // 获得&lt;ul&gt;let dy = ul.find(&#x27;.dy&#x27;); // 获得JavaScript, Python, Schemelet swf = ul.find(&#x27;#swift&#x27;); // 获得Swiftlet hsk = ul.find(&#x27;[name=haskell]&#x27;); // 获得Haskell\n如果要从当前节点开始向上查找，使用parent()方法：\n123let swf = $(&#x27;#swift&#x27;); // 获得Swiftlet parent = swf.parent(); // 获得Swift的上层节点&lt;ul&gt;let a = swf.parent(&#x27;.red&#x27;); // 获得Swift的上层节点&lt;ul&gt;，同时传入过滤条件。如果ul不符合条件，返回空jQuery对象\n对于位于同一层级的节点，可以通过next()和prev()方法，例如：\n当我们已经拿到Swift节点后：\n1234567let swift = $(&#x27;#swift&#x27;);swift.next(); // Schemeswift.next(&#x27;[name=haskell]&#x27;); // 空的jQuery对象，因为Swift的下一个元素Scheme不符合条件[name=haskell]swift.prev(); // Pythonswift.prev(&#x27;.dy&#x27;); // Python，因为Python同时符合过滤器条件.dy\n过滤\n和函数式编程的map、filter类似，jQuery对象也有类似的方法。\nfilter()方法可以过滤掉不符合选择器条件的节点：\n12let langs = $(&#x27;ul.lang li&#x27;); // 拿到JavaScript, Python, Swift, Scheme和Haskelllet a = langs.filter(&#x27;.dy&#x27;); // 拿到JavaScript, Python, Scheme\n或者传入一个函数，要特别注意函数内部的this被绑定为DOM对象，不是jQuery对象：\n1234let langs = $(&#x27;ul.lang li&#x27;); // 拿到JavaScript, Python, Swift, Scheme和Haskelllangs.filter(function () &#123;    return this.innerHTML.indexOf(&#x27;S&#x27;) === 0; // 返回S开头的节点&#125;); // 拿到Swift, Scheme\nmap()方法把一个jQuery对象包含的若干DOM节点转化为其他对象：\n1234let langs = $(&#x27;ul.lang li&#x27;); // 拿到JavaScript, Python, Swift, Scheme和Haskelllet arr = langs.map(function () &#123;    return this.innerHTML;&#125;).get(); // 用get()拿到包含string的Array：[&#x27;JavaScript&#x27;, &#x27;Python&#x27;, &#x27;Swift&#x27;, &#x27;Scheme&#x27;, &#x27;Haskell&#x27;]\n此外，一个jQuery对象如果包含了不止一个DOM节点，first()、last()和slice()方法可以返回一个新的jQuery对象，把不需要的DOM节点去掉：\n1234let langs = $(&#x27;ul.lang li&#x27;); // 拿到JavaScript, Python, Swift, Scheme和Haskelllet js = langs.first(); // JavaScript，相当于$(&#x27;ul.lang li:first-child&#x27;)let haskell = langs.last(); // Haskell, 相当于$(&#x27;ul.lang li:last-child&#x27;)let sub = langs.slice(2, 4); // Swift, Scheme, 参数和数组的slice()方法一致\n练习\n对于下面的表单：\n12345678910111213&lt;form id=&quot;test-form&quot; action=&quot;#0&quot; onsubmit=&quot;return false;&quot;&gt;    &lt;p&gt;&lt;label&gt;Name: &lt;input name=&quot;name&quot;&gt;&lt;/label&gt;&lt;/p&gt;    &lt;p&gt;&lt;label&gt;Email: &lt;input name=&quot;email&quot;&gt;&lt;/label&gt;&lt;/p&gt;    &lt;p&gt;&lt;label&gt;Password: &lt;input name=&quot;password&quot; type=&quot;password&quot;&gt;&lt;/label&gt;&lt;/p&gt;    &lt;p&gt;Gender: &lt;label&gt;&lt;input name=&quot;gender&quot; type=&quot;radio&quot; value=&quot;m&quot; checked&gt; Male&lt;/label&gt; &lt;label&gt;&lt;input name=&quot;gender&quot; type=&quot;radio&quot; value=&quot;f&quot;&gt; Female&lt;/label&gt;&lt;/p&gt;    &lt;p&gt;&lt;label&gt;City: &lt;select name=&quot;city&quot;&gt;    \t&lt;option value=&quot;BJ&quot; selected&gt;Beijing&lt;/option&gt;    \t&lt;option value=&quot;SH&quot;&gt;Shanghai&lt;/option&gt;    \t&lt;option value=&quot;CD&quot;&gt;Chengdu&lt;/option&gt;    \t&lt;option value=&quot;XM&quot;&gt;Xiamen&lt;/option&gt;    &lt;/select&gt;&lt;/label&gt;&lt;/p&gt;    &lt;p&gt;&lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;&lt;/p&gt;&lt;/form&gt;\n输入值后，用jQuery获取表单的JSON字符串，key和value分别对应每个输入的name和相应的value，例如：&#123;&quot;name&quot;:&quot;Michael&quot;,&quot;email&quot;:...&#125;\n123456789let json = ???;// 显示结果:if (typeof(json) === &#x27;string&#x27;) &#123;    console.log(json);&#125;else &#123;    console.log(&#x27;json变量不是string!&#x27;);&#125;\njQuery的选择器很强大，用起来又简单又灵活，但是搞了这么久，我拿到了jQuery对象，到底要干什么？\n答案当然是操作对应的DOM节点啦！\n回顾一下修改DOM的CSS、文本、设置HTML有多么麻烦，而且有的浏览器只有innerHTML，有的浏览器支持innerText，有了jQuery对象，不需要考虑浏览器差异了，全部统一操作！\n修改Text和HTML\njQuery对象的text()和html()方法分别获取节点的文本和原始HTML文本，例如，如下的HTML结构：\n12345&lt;!-- HTML结构 --&gt;&lt;ul id=&quot;test-ul&quot;&gt;    &lt;li class=&quot;js&quot;&gt;JavaScript&lt;/li&gt;    &lt;li name=&quot;book&quot;&gt;Java &amp;amp; JavaScript&lt;/li&gt;&lt;/ul&gt;\n分别获取文本和HTML：\n12$(&#x27;#test-ul li[name=book]&#x27;).text(); // &#x27;Java &amp; JavaScript&#x27;$(&#x27;#test-ul li[name=book]&#x27;).html(); // &#x27;Java &amp;amp; JavaScript&#x27;\n如何设置文本或HTML？jQuery的API设计非常巧妙：无参数调用text()是获取文本，传入参数就变成设置文本，HTML也是类似操作，自己动手试试：\n\nJavaScript\nJava &amp; JavaScript\n\n12345let j1 = $(&#x27;#test-ul li.js&#x27;);let j2 = $(&#x27;#test-ul li[name=book]&#x27;);j1.html(&#x27;&lt;span style=&quot;color: #c00&quot;&gt;JavaScript&lt;/span&gt;&#x27;);j2.text(&#x27;JavaScript &amp; ECMAScript&#x27;);\n一个jQuery对象可以包含0个或任意个DOM对象，它的方法实际上会作用在对应的每个DOM节点上。在上面的例子中试试：\n1$(&#x27;#test-ul li&#x27;).text(&#x27;JS&#x27;); // 是不是两个节点都变成了JS？\n所以jQuery对象的另一个好处是我们可以执行一个操作，作用在对应的一组DOM节点上。即使选择器没有返回任何DOM节点，调用jQuery对象的方法仍然不会报错：\n12// 如果不存在id为not-exist的节点：$(&#x27;#not-exist&#x27;).text(&#x27;Hello&#x27;); // 代码不报错，没有节点被设置为&#x27;Hello&#x27;\n这意味着jQuery帮你免去了许多if语句。\n修改CSS\njQuery对象有“批量操作”的特点，这用于修改CSS实在是太方便了。考虑下面的HTML结构：\n12345678&lt;!-- HTML结构 --&gt;&lt;ul id=&quot;test-css&quot;&gt;    &lt;li class=&quot;lang dy&quot;&gt;&lt;span&gt;JavaScript&lt;/span&gt;&lt;/li&gt;    &lt;li class=&quot;lang&quot;&gt;&lt;span&gt;Java&lt;/span&gt;&lt;/li&gt;    &lt;li class=&quot;lang dy&quot;&gt;&lt;span&gt;Python&lt;/span&gt;&lt;/li&gt;    &lt;li class=&quot;lang&quot;&gt;&lt;span&gt;Swift&lt;/span&gt;&lt;/li&gt;    &lt;li class=&quot;lang dy&quot;&gt;&lt;span&gt;Scheme&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;\n要高亮显示动态语言，调用jQuery对象的css('name', 'value')方法，我们用一行语句实现：\n\nJavaScript\nJava\nPython\nSwift\nScheme\n\n1$(&#x27;#test-css li.dy&gt;span&#x27;).css(&#x27;background-color&#x27;, &#x27;#ff0&#x27;).css(&#x27;color&#x27;, &#x27;#c00&#x27;);\n注意，jQuery对象的所有方法都返回一个jQuery对象（可能是新的也可能是自身），这样我们可以进行链式调用，非常方便。\njQuery对象的css()方法可以这么用：\n1234let div = $(&#x27;#test-div&#x27;);div.css(&#x27;color&#x27;); // &#x27;#000033&#x27;, 获取CSS属性div.css(&#x27;color&#x27;, &#x27;#336699&#x27;); // 设置CSS属性div.css(&#x27;color&#x27;, &#x27;&#x27;); // 清除CSS属性\n为了和JavaScript保持一致，CSS属性可以用'background-color'和'backgroundColor'两种格式。\ncss()方法将作用于DOM节点的style属性，具有最高优先级。如果要修改class属性，可以用jQuery提供的下列方法：\n1234let div = $(&#x27;#test-div&#x27;);div.hasClass(&#x27;highlight&#x27;); // false， class是否包含highlightdiv.addClass(&#x27;highlight&#x27;); // 添加highlight这个classdiv.removeClass(&#x27;highlight&#x27;); // 删除highlight这个class\n练习：分别用css()方法和addClass()方法高亮显示JavaScript：\n12345678910111213141516&lt;!-- HTML结构 --&gt;&lt;style&gt;.highlight &#123;    color: #c00;    background-color: #ff0;&#125;&lt;/style&gt;&lt;div id=&quot;test-highlight-css&quot;&gt;    &lt;ul&gt;        &lt;li class=&quot;py&quot;&gt;&lt;span&gt;Python&lt;/span&gt;&lt;/li&gt;        &lt;li class=&quot;js&quot;&gt;&lt;span&gt;JavaScript&lt;/span&gt;&lt;/li&gt;        &lt;li class=&quot;sw&quot;&gt;&lt;span&gt;Swift&lt;/span&gt;&lt;/li&gt;        &lt;li class=&quot;hk&quot;&gt;&lt;span&gt;Haskell&lt;/span&gt;&lt;/li&gt;    &lt;/ul&gt;&lt;/div&gt;\n\nPython\nJavaScript\nSwift\nHaskell\n\n12let div = $(&#x27;#test-highlight-css&#x27;);// TODO:\n显示和隐藏DOM\n要隐藏一个DOM，我们可以设置CSS的display属性为none，利用css()方法就可以实现。不过，要显示这个DOM就需要恢复原有的display属性，这就得先记下来原有的display属性到底是block还是inline还是别的值。\n考虑到显示和隐藏DOM元素使用非常普遍，jQuery直接提供show()和hide()方法，我们不用关心它是如何修改display属性的，总之它能正常工作：\n123let a = $(&#x27;a[target=_blank]&#x27;);a.hide(); // 隐藏a.show(); // 显示\n注意，隐藏DOM节点并未改变DOM树的结构，它只影响DOM节点的显示。这和删除DOM节点是不同的。\n获取DOM信息\n利用jQuery对象的若干方法，我们直接可以获取DOM的高宽等信息，而无需针对不同浏览器编写特定代码：\n1234567891011121314// 浏览器可视窗口大小:$(window).width(); // 800$(window).height(); // 600// HTML文档大小:$(document).width(); // 800$(document).height(); // 3500// 某个div的大小:let div = $(&#x27;#test-div&#x27;);div.width(); // 600div.height(); // 300div.width(400); // 设置CSS属性 width: 400px，是否生效要看CSS是否有效div.height(&#x27;200px&#x27;); // 设置CSS属性 height: 200px，是否生效要看CSS是否有效\nattr()和removeAttr()方法用于操作DOM节点的属性：\n1234567// &lt;div id=&quot;test-div&quot; name=&quot;Test&quot; start=&quot;1&quot;&gt;...&lt;/div&gt;let div = $(&#x27;#test-div&#x27;);div.attr(&#x27;data&#x27;); // undefined, 属性不存在div.attr(&#x27;name&#x27;); // &#x27;Test&#x27;div.attr(&#x27;name&#x27;, &#x27;Hello&#x27;); // div的name属性变为&#x27;Hello&#x27;div.removeAttr(&#x27;name&#x27;); // 删除name属性div.attr(&#x27;name&#x27;); // undefined\nprop()方法和attr()类似，但是HTML5规定有一种属性在DOM节点中可以没有值，只有出现与不出现两种，例如：\n1&lt;input id=&quot;test-radio&quot; type=&quot;radio&quot; name=&quot;test&quot; checked value=&quot;1&quot;&gt;\n等价于：\n1&lt;input id=&quot;test-radio&quot; type=&quot;radio&quot; name=&quot;test&quot; checked=&quot;checked&quot; value=&quot;1&quot;&gt;\nattr()和prop()对于属性checked处理有所不同：\n123let radio = $(&#x27;#test-radio&#x27;);radio.attr(&#x27;checked&#x27;); // &#x27;checked&#x27;radio.prop(&#x27;checked&#x27;); // true\nprop()返回值更合理一些。不过，用is()方法判断更好：\n12let radio = $(&#x27;#test-radio&#x27;);radio.is(&#x27;:checked&#x27;); // true\n类似的属性还有selected，处理时最好用is(':selected')。\n操作表单\n对于表单元素，jQuery对象统一提供val()方法获取和设置对应的value属性：\n12345678910111213141516171819202122/*    &lt;input id=&quot;test-input&quot; name=&quot;email&quot; value=&quot;test&quot;&gt;    &lt;select id=&quot;test-select&quot; name=&quot;city&quot;&gt;        &lt;option value=&quot;BJ&quot; selected&gt;Beijing&lt;/option&gt;        &lt;option value=&quot;SH&quot;&gt;Shanghai&lt;/option&gt;        &lt;option value=&quot;SZ&quot;&gt;Shenzhen&lt;/option&gt;    &lt;/select&gt;    &lt;textarea id=&quot;test-textarea&quot;&gt;Hello&lt;/textarea&gt;*/let    input = $(&#x27;#test-input&#x27;),    select = $(&#x27;#test-select&#x27;),    textarea = $(&#x27;#test-textarea&#x27;);input.val(); // &#x27;test&#x27;input.val(&#x27;abc@example.com&#x27;); // 文本框的内容已变为abc@example.comselect.val(); // &#x27;BJ&#x27;select.val(&#x27;SH&#x27;); // 选择框已变为Shanghaitextarea.val(); // &#x27;Hello&#x27;textarea.val(&#x27;Hi&#x27;); // 文本区域已更新为&#x27;Hi&#x27;\n可见，一个val()就统一了各种输入框的取值和赋值的问题。\n直接使用浏览器提供的API对DOM结构进行修改，不但代码复杂，而且要针对浏览器写不同的代码。\n有了jQuery，我们就专注于操作jQuery对象本身，底层的DOM操作由jQuery完成就可以了，这样一来，修改DOM也大大简化了。\n添加DOM\n要添加新的DOM节点，除了通过jQuery的html()这种暴力方法外，还可以用append()方法，例如：\n1234567&lt;div id=&quot;test-div&quot;&gt;    &lt;ul&gt;        &lt;li&gt;&lt;span&gt;JavaScript&lt;/span&gt;&lt;/li&gt;        &lt;li&gt;&lt;span&gt;Python&lt;/span&gt;&lt;/li&gt;        &lt;li&gt;&lt;span&gt;Swift&lt;/span&gt;&lt;/li&gt;    &lt;/ul&gt;&lt;/div&gt;\n如何向列表新增一个语言？首先要拿到&lt;ul&gt;节点：\n1let ul = $(&#x27;#test-div&gt;ul&#x27;);\n然后，调用append()传入HTML片段：\n1ul.append(&#x27;&lt;li&gt;&lt;span&gt;Haskell&lt;/span&gt;&lt;/li&gt;&#x27;);\n除了接受字符串，append()还可以传入原始的DOM对象，jQuery对象和函数对象：\n12345678910111213// 创建DOM对象:let ps = document.createElement(&#x27;li&#x27;);ps.innerHTML = &#x27;&lt;span&gt;Pascal&lt;/span&gt;&#x27;;// 添加DOM对象:ul.append(ps);// 添加jQuery对象:ul.append($(&#x27;#scheme&#x27;));// 添加函数对象:ul.append(function (index, html) &#123;    return &#x27;&lt;li&gt;&lt;span&gt;Language - &#x27; + index + &#x27;&lt;/span&gt;&lt;/li&gt;&#x27;;&#125;);\n传入函数时，要求返回一个字符串、DOM对象或者jQuery对象。因为jQuery的append()可能作用于一组DOM节点，只有传入函数才能针对每个DOM生成不同的子节点。\nappend()把DOM添加到最后，prepend()则把DOM添加到最前。\n另外注意，如果要添加的DOM节点已经存在于HTML文档中，它会首先从文档移除，然后再添加，也就是说，用append()，你可以移动一个DOM节点。\n如果要把新节点插入到指定位置，例如，JavaScript和Python之间，那么，可以先定位到JavaScript，然后用after()方法：\n12let js = $(&#x27;#test-div&gt;ul&gt;li:first-child&#x27;);js.after(&#x27;&lt;li&gt;&lt;span&gt;Lua&lt;/span&gt;&lt;/li&gt;&#x27;);\n也就是说，同级节点可以用after()或者before()方法。\n删除节点\n要删除DOM节点，拿到jQuery对象后直接调用remove()方法就可以了。如果jQuery对象包含若干DOM节点，实际上可以一次删除多个DOM节点：\n12let li = $(&#x27;#test-div&gt;ul&gt;li&#x27;);li.remove(); // 所有&lt;li&gt;全被删除\n练习\n除了列出的3种语言外，请再添加Pascal、Lua和Ruby，然后按字母顺序排序节点：\n12345678&lt;!-- HTML结构 --&gt;&lt;div id=&quot;test-div&quot;&gt;    &lt;ul&gt;        &lt;li&gt;&lt;span&gt;JavaScript&lt;/span&gt;&lt;/li&gt;        &lt;li&gt;&lt;span&gt;Python&lt;/span&gt;&lt;/li&gt;        &lt;li&gt;&lt;span&gt;Swift&lt;/span&gt;&lt;/li&gt;    &lt;/ul&gt;&lt;/div&gt;\n\nJavaScript\nPython\nSwift\n\n12345678910111213// TODO:// 测试:(function () &#123;    let s = $(&#x27;#test-div&gt;ul&gt;li&#x27;).map(function () &#123;        return $(this).text();    &#125;).get().join(&#x27;,&#x27;);    if (s === &#x27;JavaScript,Lua,Pascal,Python,Ruby,Swift&#x27;) &#123;        console.log(&#x27;测试通过!&#x27;);    &#125; else &#123;        console.log(&#x27;测试失败: &#x27; + s);    &#125;&#125;)();\n因为JavaScript在浏览器中以单线程模式运行，页面加载后，一旦页面上所有的JavaScript代码被执行完后，就只能依赖触发事件来执行JavaScript代码。\n浏览器在接收到用户的鼠标或键盘输入后，会自动在对应的DOM节点上触发相应的事件。如果该节点已经绑定了对应的JavaScript处理函数，该函数就会自动调用。\n由于不同的浏览器绑定事件的代码都不太一样，所以用jQuery来写代码，就屏蔽了不同浏览器的差异，我们总是编写相同的代码。\n举个例子，假设要在用户点击了超链接时弹出提示框，我们用jQuery这样绑定一个click事件：\n12345678910/* HTML: * * &lt;a id=&quot;test-link&quot; href=&quot;#0&quot;&gt;点我试试&lt;/a&gt; * */// 获取超链接的jQuery对象:let a = $(&#x27;#test-link&#x27;);a.on(&#x27;click&#x27;, function () &#123;    alert(&#x27;Hello!&#x27;);&#125;);\n实测：点我试试\non方法用来绑定一个事件，我们需要传入事件名称和对应的处理函数。\n另一种更简化的写法是直接调用click()方法：\n123a.click(function () &#123;    alert(&#x27;Hello!&#x27;);&#125;);\n两者完全等价。我们通常用后面的写法。\njQuery能够绑定的事件主要包括：\n鼠标事件\n\nclick: 鼠标单击时触发；\ndblclick：鼠标双击时触发；\nmouseenter：鼠标进入时触发；\nmouseleave：鼠标移出时触发；\nmousemove：鼠标在DOM内部移动时触发；\nhover：鼠标进入和退出时触发两个函数，相当于mouseenter加上mouseleave。\n\n键盘事件\n键盘事件仅作用在当前焦点的DOM上，通常是&lt;input&gt;和&lt;textarea&gt;。\n\nkeydown：键盘按下时触发；\nkeyup：键盘松开时触发；\nkeypress：按一次键后触发。\n\n其他事件\n\nfocus：当DOM获得焦点时触发；\nblur：当DOM失去焦点时触发；\nchange：当&lt;input&gt;、&lt;select&gt;或&lt;textarea&gt;的内容改变时触发；\nsubmit：当&lt;form&gt;提交时触发；\nready：当页面被载入并且DOM树完成初始化后触发。\n\n其中，ready仅作用于document对象。由于ready事件在DOM完成初始化后触发，且只触发一次，所以非常适合用来写其他的初始化代码。假设我们想给一个&lt;form&gt;表单绑定submit事件，下面的代码没有预期的效果：\n1234567891011121314&lt;html&gt;&lt;head&gt;    &lt;script&gt;        // 代码有误:        $(&#x27;#testForm&#x27;).on(&#x27;submit&#x27;, function () &#123;            alert(&#x27;submit!&#x27;);        &#125;);    &lt;/script&gt;&lt;/head&gt;&lt;body&gt;    &lt;form id=&quot;testForm&quot;&gt;        ...    &lt;/form&gt;&lt;/body&gt;\n因为JavaScript在此执行的时候，&lt;form&gt;尚未载入浏览器，所以$('#testForm)返回[]，并没有绑定事件到任何DOM上。\n所以我们自己的初始化代码必须放到document对象的ready事件中，保证DOM已完成初始化：\n123456789101112131415&lt;html&gt;&lt;head&gt;    &lt;script&gt;        $(document).on(&#x27;ready&#x27;, function () &#123;            $(&#x27;#testForm).on(&#x27;submit&#x27;, function () &#123;                alert(&#x27;submit!&#x27;);            &#125;);        &#125;);    &lt;/script&gt;&lt;/head&gt;&lt;body&gt;    &lt;form id=&quot;testForm&quot;&gt;        ...    &lt;/form&gt;&lt;/body&gt;\n这样写就没有问题了。因为相关代码会在DOM树初始化后再执行。\n由于ready事件使用非常普遍，所以可以这样简化：\n123456$(document).ready(function () &#123;    // on(&#x27;submit&#x27;, function)也可以简化:    $(&#x27;#testForm).submit(function () &#123;        alert(&#x27;submit!&#x27;);    &#125;);&#125;);\n甚至还可以再简化为：\n123$(function () &#123;    // init...&#125;);\n上面的这种写法最为常见。如果你遇到$(function () &#123;...&#125;)的形式，牢记这是document对象的ready事件处理函数。\n完全可以反复绑定事件处理函数，它们会依次执行：\n123456789$(function () &#123;    console.log(&#x27;init A...&#x27;);&#125;);$(function () &#123;    console.log(&#x27;init B...&#x27;);&#125;);$(function () &#123;    console.log(&#x27;init C...&#x27;);&#125;);\n事件参数\n有些事件，如mousemove和keypress，我们需要获取鼠标位置和按键的值，否则监听这些事件就没什么意义了。所有事件都会传入Event对象作为参数，可以从Event对象上获取到更多的信息：\n12345$(function () &#123;    $(&#x27;#testMouseMoveDiv&#x27;).mousemove(function (e) &#123;        $(&#x27;#testMouseMoveSpan&#x27;).text(&#x27;pageX = &#x27; + e.pageX + &#x27;, pageY = &#x27; + e.pageY);    &#125;);&#125;);\n取消绑定\n一个已被绑定的事件可以解除绑定，通过off('click', function)实现：\n12345678910function hello() &#123;    alert(&#x27;hello!&#x27;);&#125;a.click(hello); // 绑定事件// 10秒钟后解除绑定:setTimeout(function () &#123;    a.off(&#x27;click&#x27;, hello);&#125;, 10000);\n需要特别注意的是，下面这种写法是无效的：\n123456789// 绑定事件:a.click(function () &#123;    alert(&#x27;hello!&#x27;);&#125;);// 解除绑定:a.off(&#x27;click&#x27;, function () &#123;    alert(&#x27;hello!&#x27;);&#125;);\n这是因为两个匿名函数虽然长得一模一样，但是它们是两个不同的函数对象，off('click', function () &#123;...&#125;)无法移除已绑定的第一个匿名函数。\n为了实现移除效果，可以使用off('click')一次性移除已绑定的click事件的所有处理函数。\n同理，无参数调用off()一次性移除已绑定的所有类型的事件处理函数。\n事件触发条件\n一个需要注意的问题是，事件的触发总是由用户操作引发的。例如，我们监控文本框的内容改动：\n1234let input = $(&#x27;#test-input&#x27;);input.change(function () &#123;    console.log(&#x27;changed...&#x27;);&#125;);\n当用户在文本框中输入时，就会触发change事件。但是，如果用JavaScript代码去改动文本框的值，将不会触发change事件：\n12let input = $(&#x27;#test-input&#x27;);input.val(&#x27;change it!&#x27;); // 无法触发change事件\n有些时候，我们希望用代码触发change事件，可以直接调用无参数的change()方法来触发该事件：\n123let input = $(&#x27;#test-input&#x27;);input.val(&#x27;change it!&#x27;);input.change(); // 触发change事件\ninput.change()相当于input.trigger('change')，它是trigger()方法的简写。\n为什么我们希望手动触发一个事件呢？如果不这么做，很多时候，我们就得写两份一模一样的代码。\n练习\n对如下的Form表单：\n12345678910111213&lt;!-- HTML结构 --&gt;&lt;form id=&quot;test-form&quot; action=&quot;test&quot;&gt;    &lt;legend&gt;请选择想要学习的编程语言：&lt;/legend&gt;    &lt;fieldset&gt;        &lt;p&gt;&lt;label class=&quot;selectAll&quot;&gt;&lt;input type=&quot;checkbox&quot;&gt; &lt;span class=&quot;selectAll&quot;&gt;全选&lt;/span&gt;&lt;span class=&quot;deselectAll&quot;&gt;全不选&lt;/span&gt;&lt;/label&gt; &lt;a href=&quot;#0&quot; class=&quot;invertSelect&quot;&gt;反选&lt;/a&gt;&lt;/p&gt;        &lt;p&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;lang&quot; value=&quot;javascript&quot;&gt; JavaScript&lt;/label&gt;&lt;/p&gt;        &lt;p&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;lang&quot; value=&quot;python&quot;&gt; Python&lt;/label&gt;&lt;/p&gt;        &lt;p&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;lang&quot; value=&quot;ruby&quot;&gt; Ruby&lt;/label&gt;&lt;/p&gt;        &lt;p&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;lang&quot; value=&quot;haskell&quot;&gt; Haskell&lt;/label&gt;&lt;/p&gt;        &lt;p&gt;&lt;label&gt;&lt;input type=&quot;checkbox&quot; name=&quot;lang&quot; value=&quot;scheme&quot;&gt; Scheme&lt;/label&gt;&lt;/p&gt;\t\t&lt;p&gt;&lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;&lt;/p&gt;    &lt;/fieldset&gt;&lt;/form&gt;\n绑定合适的事件处理函数，实现以下逻辑：\n当用户勾上“全选”时，自动选中所有语言，并把“全选”变成“全不选”；\n当用户去掉“全不选”时，自动不选中所有语言；\n当用户点击“反选”时，自动把所有语言状态反转（选中的变为未选，未选的变为选中）；\n当用户把所有语言都手动勾上时，“全选”被自动勾上，并变为“全不选”；\n当用户手动去掉选中至少一种语言时，“全不选”自动被去掉选中，并变为“全选”。\n123456789101112131415161718192021let    form = $(&#x27;#test-form&#x27;),    langs = form.find(&#x27;[name=lang]&#x27;),    selectAll = form.find(&#x27;label.selectAll :checkbox&#x27;),    selectAllLabel = form.find(&#x27;label.selectAll span.selectAll&#x27;),    deselectAllLabel = form.find(&#x27;label.selectAll span.deselectAll&#x27;),    invertSelect = form.find(&#x27;a.invertSelect&#x27;);// 重置初始化状态:form.find(&#x27;*&#x27;).show().off();form.find(&#x27;:checkbox&#x27;).prop(&#x27;checked&#x27;, false).off();deselectAllLabel.hide();// 拦截form提交事件:form.off().submit(function (e) &#123;    e.preventDefault();    alert(form.serialize());&#125;);// TODO:绑定事件// 测试:console.log(&#x27;请测试功能是否正常。&#x27;);\n用JavaScript实现动画，原理非常简单：我们只需要以固定的时间间隔（例如，0.1秒），每次把DOM元素的CSS样式修改一点（例如，高宽各增加10%），看起来就像动画了。\n但是要用JavaScript手动实现动画效果，需要编写非常复杂的代码。如果想要把动画效果用函数封装起来便于复用，那考虑的事情就更多了。\n使用jQuery实现动画，代码已经简单得不能再简化了：只需要一行代码！\n让我们先来看看jQuery内置的几种动画样式：\nshow / hide\n直接以无参数形式调用show()和hide()，会显示和隐藏DOM元素。但是，只要传递一个时间参数进去，就变成了动画：\n12let div = $(&#x27;#test-show-hide&#x27;);div.hide(3000); // 在3秒钟内逐渐消失\n时间以毫秒为单位，但也可以是'slow'，'fast'这些字符串：\n12let div = $(&#x27;#test-show-hide&#x27;);div.show(&#x27;slow&#x27;); // 在0.6秒钟内逐渐显示\ntoggle()方法则根据当前状态决定是show()还是hide()。\n效果实测：\nslideUp / slideDown\n你可能已经看出来了，show()和hide()是从左上角逐渐展开或收缩的，而slideUp()和slideDown()则是在垂直方向逐渐展开或收缩的。\nslideUp()把一个可见的DOM元素收起来，效果跟拉上窗帘似的，slideDown()相反，而slideToggle()则根据元素是否可见来决定下一步动作：\n12let div = $(&#x27;#test-slide&#x27;);div.slideUp(3000); // 在3秒钟内逐渐向上消失\n效果实测：\nfadeIn / fadeOut\nfadeIn()和fadeOut()的动画效果是淡入淡出，也就是通过不断设置DOM元素的opacity属性来实现，而fadeToggle()则根据元素是否可见来决定下一步动作：\n12let div = $(&#x27;#test-fade&#x27;);div.fadeOut(&#x27;slow&#x27;); // 在0.6秒内淡出\n自定义动画\n如果上述动画效果还不能满足你的要求，那就祭出最后大招：animate()，它可以实现任意动画效果，我们需要传入的参数就是DOM元素最终的CSS状态和时间，jQuery在时间段内不断调整CSS直到达到我们设定的值：\n123456let div = $(&#x27;#test-animate&#x27;);div.animate(&#123;    opacity: 0.25,    width: &#x27;256px&#x27;,    height: &#x27;256px&#x27;&#125;, 3000); // 在3秒钟内CSS过渡到设定值\nanimate()还可以再传入一个函数，当动画结束时，该函数将被调用：\n12345678910let div = $(&#x27;#test-animate&#x27;);div.animate(&#123;    opacity: 0.25,    width: &#x27;256px&#x27;,    height: &#x27;256px&#x27;&#125;, 3000, function () &#123;    console.log(&#x27;动画已结束&#x27;);    // 恢复至初始状态:    $(this).css(&#x27;opacity&#x27;, &#x27;1.0&#x27;).css(&#x27;width&#x27;, &#x27;128px&#x27;).css(&#x27;height&#x27;, &#x27;128px&#x27;);&#125;);\n实际上这个回调函数参数对于基本动画也是适用的。\n有了animate()，你就可以实现各种自定义动画效果了：\n串行动画\njQuery的动画效果还可以串行执行，通过delay()方法还可以实现暂停，这样，我们可以实现更复杂的动画效果，而代码却相当简单：\n123456789101112131415let div = $(&#x27;#test-animates&#x27;);// 动画效果：slideDown - 暂停 - 放大 - 暂停 - 缩小div.slideDown(2000)   .delay(1000)   .animate(&#123;       width: &#x27;256px&#x27;,       height: &#x27;256px&#x27;   &#125;, 2000)   .delay(1000)   .animate(&#123;       width: &#x27;128px&#x27;,       height: &#x27;128px&#x27;   &#125;, 2000);&#125;&lt;/script&gt;\n因为动画需要执行一段时间，所以jQuery必须不断返回新的Promise对象才能后续执行操作。简单地把动画封装在函数中是不够的。\n效果实测：\n为什么有的动画没有效果\n你可能会遇到，有的动画如slideUp()根本没有效果。这是因为jQuery动画的原理是逐渐改变CSS的值，如height从100px逐渐变为0。但是很多不是block性质的DOM元素，对它们设置height根本就不起作用，所以动画也就没有效果。\n此外，jQuery也没有实现对background-color的动画效果，用animate()设置background-color也没有效果。这种情况下可以使用CSS3的transition实现动画效果。\n练习\n在执行删除操作时，给用户显示一个动画比直接调用remove()要更好。请在表格删除一行的时候添加一个淡出的动画效果：\n\n\n\nName\nEmail\nAddress\nStatus\n\n\n\n\nBart Simpson\nbart.s@primary.school\nSpringfield\nActive\n\n\nMichael Scofield\nm.scofield@escape.org\nFox River\nLocked\n\n\nOptimus Prime\nprime@cybertron.org\nCybertron\nActive\n\n\nPeter Parker\nspider@movie.org\nNew York\nActive\n\n\nThor Odinson\nthor@asgard.org\nAsgard\nActive\n\n\n\n1234567function deleteFirstTR() &#123;    let tr = $(&#x27;#test-table&gt;tbody&gt;tr:visible&#x27;).first();    // TODO:    tr.remove();&#125;deleteFirstTR();\n","dateCreated":"2025-05-26T21:51:07+08:00","dateModified":"2025-05-26T22:14:41+08:00","datePublished":"2025-05-26T21:51:07+08:00","description":"","headline":"JavaScript-jQuery","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://chankein.github.io/2025/05/26/JavaScript/JavaScript-jQuery/"},"publisher":{"@type":"Organization","name":"Kein Chan","sameAs":["https://github.com/chankein/","https://www.linkedin.com/profile/","mailto:kein.chan85@gmail.com"],"image":"profile.jpg","logo":{"@type":"ImageObject","url":"profile.jpg"}},"url":"https://chankein.github.io/2025/05/26/JavaScript/JavaScript-jQuery/","keywords":"JavaScript, 前端"}</script>
    <meta name="description" content="jQuery 你可能听说过jQuery，它名字起得很土，但却是JavaScript世界中使用最广泛的一个库。 江湖传言，全世界大约有80~90%的网站直接或间接地使用了jQuery。鉴于它如此流行，又如此好用，所以每一个入门JavaScript的前端工程师都应该了解和学习它。 jQuery这么流行，肯定是因为它解决了一些很重要的问题。实际上，jQuery能帮我们干这些事情：  消除浏览器差异：你不">
<meta property="og:type" content="blog">
<meta property="og:title" content="JavaScript-jQuery">
<meta property="og:url" content="https://chankein.github.io/2025/05/26/JavaScript/JavaScript-jQuery/index.html">
<meta property="og:site_name" content="Kein&#39;s blog">
<meta property="og:description" content="jQuery 你可能听说过jQuery，它名字起得很土，但却是JavaScript世界中使用最广泛的一个库。 江湖传言，全世界大约有80~90%的网站直接或间接地使用了jQuery。鉴于它如此流行，又如此好用，所以每一个入门JavaScript的前端工程师都应该了解和学习它。 jQuery这么流行，肯定是因为它解决了一些很重要的问题。实际上，jQuery能帮我们干这些事情：  消除浏览器差异：你不">
<meta property="og:locale" content="zh_TW">
<meta property="article:published_time" content="2025-05-26T13:51:07.000Z">
<meta property="article:modified_time" content="2025-05-26T14:14:41.326Z">
<meta property="article:author" content="Kein Chan">
<meta property="article:tag" content="JavaScript">
<meta property="article:tag" content="前端">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://chankein.github.io../../../../../assets/images/profile.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="../../../../../assets/css/style-l9zwheso7r7pnk98nvirovsz9dl7fhkrc9mlb5vmuxw7tk5movrk0eevsrpr.min.css">

    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="../../../../../index.html"
            aria-label=""
        >
            Kein&#39;s blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打開鏈接: ../../../../../#about"
            >
        
        
            <img class="header-picture" src="../../../../../assets/images/profile.jpg" alt="作者的圖片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="../../../../../#about"
                    aria-label="閱讀有關作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="../../../../../assets/images/profile.jpg" alt="作者的圖片"/>
                </a>
                <h4 class="sidebar-profile-name">Kein Chan</h4>
                
                    <h5 class="sidebar-profile-bio"><p>這是獨立全棧工程師Kein Chan的技術博客</br>分享一些技術教程,命令備忘(cheat-sheet)等</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../../index.html"
                            
                            rel="noopener"
                            title="首頁"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首頁</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../../all-categories"
                            
                            rel="noopener"
                            title="分類"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分類</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../../all-tags"
                            
                            rel="noopener"
                            title="標籤"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">標籤</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../../all-archives"
                            
                            rel="noopener"
                            title="所有文章"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">所有文章</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="搜尋"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜尋</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="關於"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">關於</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/chankein/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../../mailto:kein.chan85@gmail.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Email"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Email</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../../atom.xml"
                            
                            rel="noopener"
                            title="Atom"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Atom</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            JavaScript-jQuery
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2025-05-26T21:51:07+08:00">
	
		    2025 年 5 月 26 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../../../categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a>, <a class="category-link" href="../../../../../categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/JavaScript/">JavaScript</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <h2 id="jQuery">jQuery</h2>
<p>你可能听说过jQuery，它名字起得很土，但却是JavaScript世界中使用最广泛的一个库。</p>
<p>江湖传言，全世界大约有80~90%的网站直接或间接地使用了jQuery。鉴于它如此流行，又如此好用，所以每一个入门JavaScript的前端工程师都应该了解和学习它。</p>
<p>jQuery这么流行，肯定是因为它解决了一些很重要的问题。实际上，jQuery能帮我们干这些事情：</p>
<ul>
<li>消除浏览器差异：你不需要自己写冗长的代码来针对不同的浏览器来绑定事件，编写AJAX等代码；</li>
<li>简洁的操作DOM的方法：写<code>$('#test')</code>肯定比<code>document.getElementById('test')</code>来得简洁；</li>
<li>轻松实现动画、修改CSS等各种操作。</li>
</ul>
<p>jQuery的理念“Write Less, Do More“，让你写更少的代码，完成更多的工作！</p>
<h3 id="jQuery版本">jQuery版本</h3>
<p>从<a target="_blank" rel="noopener" href="https://jquery.com/download/">jQuery官网</a>可以下载最新版本。jQuery只是一个<code>jquery-xxx.js</code>文件，但你会看到有compressed（已压缩）和uncompressed（未压缩）两种版本，使用时完全一样，但如果你想深入研究jQuery源码，那就用uncompressed版本。</p>
<h3 id="使用jQuery">使用jQuery</h3>
<p>使用jQuery只需要在页面的<code>&lt;head&gt;</code>引入jQuery文件即可：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	...</span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>好消息是，当你在学习这个教程时，已经引用了jQuery，所以你可以直接使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(&#x27;jQuery版本：&#x27; + $.fn.jquery);</span><br></pre></td></tr></table></figure>
<h3 id="符号">$符号</h3>
<p><code>$</code>是著名的jQuery符号。实际上，jQuery把所有功能全部封装在一个全局变量<code>jQuery</code>中，而<code>$</code>也是一个合法的变量名，它是变量<code>jQuery</code>的别名：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">jQuery</span>; <span class="comment">// jQuery(selector, context)</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">$</span>; <span class="comment">// jQuery(selector, context)</span></span><br><span class="line">$ === jQuery; <span class="comment">// true</span></span><br><span class="line"><span class="title function_">typeof</span>($); <span class="comment">// &#x27;function&#x27;</span></span><br></pre></td></tr></table></figure>
<p><code>$</code>本质上就是一个函数，但是函数也是对象，于是<code>$</code>除了可以直接调用外，也可以有很多其他属性。</p>
<p><em>注意</em>，你看到的<code>$</code>函数名可能不是<code>jQuery(selector, context)</code>，因为很多JavaScript压缩工具可以对函数名和参数改名，所以压缩过的jQuery源码<code>$</code>函数可能变成<code>a(b,c)</code>。</p>
<p>绝大多数时候，我们都直接用<code>$</code>（因为写起来更简单嘛）。但是，如果<code>$</code>这个变量不幸地被占用了，而且还不能改，那我们就只能让<code>jQuery</code>把<code>$</code>变量交出来，然后就只能使用<code>jQuery</code>这个变量：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$; <span class="comment">// jQuery(selector, context)</span></span><br><span class="line">jQuery.<span class="title function_">noConflict</span>();</span><br><span class="line">$; <span class="comment">// undefined</span></span><br><span class="line">jQuery; <span class="comment">// jQuery(selector, context)</span></span><br></pre></td></tr></table></figure>
<p>这种黑魔法的原理是jQuery在占用<code>$</code>之前，先在内部保存了原来的<code>$</code>,调用<code>jQuery.noConflict()</code>时会把原来保存的变量还原。</p>
<hr>
<hr>
<p>选择器是jQuery的核心。一个选择器写出来类似<code>$('#dom-id')</code>。</p>
<p>为什么jQuery要发明选择器？回顾一下DOM操作中我们经常使用的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 按ID查找：</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;dom-id&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按tag查找：</span></span><br><span class="line"><span class="keyword">let</span> divs = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找&lt;p class=&quot;red&quot;&gt;：</span></span><br><span class="line"><span class="keyword">let</span> ps = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;p&#x27;</span>);</span><br><span class="line"><span class="comment">// 过滤出class=&quot;red&quot;:</span></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找&lt;table class=&quot;green&quot;&gt;里面的所有&lt;tr&gt;：</span></span><br><span class="line"><span class="keyword">let</span> table = ...</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;table.<span class="property">children</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 过滤出&lt;tr&gt;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这些代码实在太繁琐了，并且，在层级关系中，例如，查找<code>&lt;table class=&quot;green&quot;&gt;</code>里面的所有<code>&lt;tr&gt;</code>，一层循环实际上是错的，因为<code>&lt;table&gt;</code>的标准写法是：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span>...<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span>...<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>很多时候，需要递归查找所有子节点。</p>
<p>jQuery的选择器就是帮助我们快速定位到一个或多个DOM节点。</p>
<h3 id="按ID查找">按ID查找</h3>
<p>如果某个DOM节点有<code>id</code>属性，利用jQuery查找如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查找&lt;div id=&quot;abc&quot;&gt;:</span></span><br><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;#abc&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p><em>注意</em>，<code>#abc</code>以<code>#</code>开头。返回的对象是jQuery对象。</p>
<p>什么是jQuery对象？jQuery对象类似数组，它的每个元素都是一个引用了DOM节点的对象。</p>
<p>以上面的查找为例，如果<code>id</code>为<code>abc</code>的<code>&lt;div&gt;</code>存在，返回的jQuery对象如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;abc&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>]</span><br></pre></td></tr></table></figure>
<p>如果<code>id</code>为<code>abc</code>的<code>&lt;div&gt;</code>不存在，返回的jQuery对象如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[]</span><br></pre></td></tr></table></figure>
<p>总之jQuery的选择器不会返回<code>undefined</code>或者<code>null</code>，这样的好处是你不必在下一行判断<code>if (div === undefined)</code>。</p>
<p>jQuery对象和DOM对象之间可以互相转化：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;#abc&#x27;</span>); <span class="comment">// jQuery对象</span></span><br><span class="line"><span class="keyword">let</span> divDom = div.<span class="title function_">get</span>(<span class="number">0</span>); <span class="comment">// 假设存在div，获取第1个DOM元素</span></span><br><span class="line"><span class="keyword">let</span> another = $(divDom); <span class="comment">// 重新把DOM包装为jQuery对象</span></span><br></pre></td></tr></table></figure>
<p>通常情况下你不需要获取DOM对象，直接使用jQuery对象更加方便。如果你拿到了一个DOM对象，那可以简单地调用<code>$(aDomObject)</code>把它变成jQuery对象，这样就可以方便地使用jQuery的API了。</p>
<h3 id="按tag查找">按tag查找</h3>
<p>按tag查找只需要写上tag名称就可以了：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ps = $(<span class="string">&#x27;p&#x27;</span>); <span class="comment">// 返回所有&lt;p&gt;节点</span></span><br><span class="line">ps.<span class="property">length</span>; <span class="comment">// 数一数页面有多少个&lt;p&gt;节点</span></span><br></pre></td></tr></table></figure>
<h3 id="按class查找">按class查找</h3>
<p>按class查找注意在class名称前加一个<code>.</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = $(<span class="string">&#x27;.red&#x27;</span>); <span class="comment">// 所有节点包含`class=&quot;red&quot;`都将返回</span></span><br><span class="line"><span class="comment">// 例如:</span></span><br><span class="line"><span class="comment">// &lt;div class=&quot;red&quot;&gt;...&lt;/div&gt;</span></span><br><span class="line"><span class="comment">// &lt;p class=&quot;green red&quot;&gt;...&lt;/p&gt;</span></span><br></pre></td></tr></table></figure>
<p>通常很多节点有多个class，我们可以查找同时包含<code>red</code>和<code>green</code>的节点：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = $(<span class="string">&#x27;.red.green&#x27;</span>); <span class="comment">// 注意没有空格！</span></span><br><span class="line"><span class="comment">// 符合条件的节点：</span></span><br><span class="line"><span class="comment">// &lt;div class=&quot;red green&quot;&gt;...&lt;/div&gt;</span></span><br><span class="line"><span class="comment">// &lt;div class=&quot;blue green red&quot;&gt;...&lt;/div&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="按属性查找">按属性查找</h3>
<p>一个DOM节点除了<code>id</code>和<code>class</code>外还可以有很多属性，很多时候按属性查找会非常方便，比如在一个表单中按属性来查找：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> email = $(<span class="string">&#x27;[name=email]&#x27;</span>); <span class="comment">// 找出&lt;??? name=&quot;email&quot;&gt;</span></span><br><span class="line"><span class="keyword">let</span> passwordInput = $(<span class="string">&#x27;[type=password]&#x27;</span>); <span class="comment">// 找出&lt;??? type=&quot;password&quot;&gt;</span></span><br><span class="line"><span class="keyword">let</span> a = $(<span class="string">&#x27;[items=&quot;A B&quot;]&#x27;</span>); <span class="comment">// 找出&lt;??? items=&quot;A B&quot;&gt;</span></span><br></pre></td></tr></table></figure>
<p>当属性的值包含空格等特殊字符时，需要用双引号括起来。</p>
<p>按属性查找还可以使用前缀查找或者后缀查找：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> icons = $(<span class="string">&#x27;[name^=icon]&#x27;</span>); <span class="comment">// 找出所有name属性值以icon开头的DOM</span></span><br><span class="line"><span class="comment">// 例如: name=&quot;icon-1&quot;, name=&quot;icon-2&quot;</span></span><br><span class="line"><span class="keyword">let</span> names = $(<span class="string">&#x27;[name$=with]&#x27;</span>); <span class="comment">// 找出所有name属性值以with结尾的DOM</span></span><br><span class="line"><span class="comment">// 例如: name=&quot;startswith&quot;, name=&quot;endswith&quot;</span></span><br></pre></td></tr></table></figure>
<p>这个方法尤其适合通过class属性查找，且不受class包含多个名称的影响：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> icons = $(<span class="string">&#x27;[class^=&quot;icon-&quot;]&#x27;</span>); <span class="comment">// 找出所有class包含至少一个以`icon-`开头的DOM</span></span><br><span class="line"><span class="comment">// 例如: class=&quot;icon-clock&quot;, class=&quot;abc icon-home&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="组合查找">组合查找</h3>
<p>组合查找就是把上述简单选择器组合起来使用。如果我们查找<code>$('[name=email]')</code>，很可能把表单外的<code>&lt;div name=&quot;email&quot;&gt;</code>也找出来，但我们只希望查找<code>&lt;input&gt;</code>，就可以这么写：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> emailInput = $(<span class="string">&#x27;input[name=email]&#x27;</span>); <span class="comment">// 不会找出&lt;div name=&quot;email&quot;&gt;</span></span><br></pre></td></tr></table></figure>
<p>同样的，根据tag和class来组合查找也很常见：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> tr = $(<span class="string">&#x27;tr.red&#x27;</span>); <span class="comment">// 找出&lt;tr class=&quot;red ...&quot;&gt;...&lt;/tr&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="多项选择器">多项选择器</h3>
<p>多项选择器就是把多个选择器用<code>,</code>组合起来一块选：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;p,div&#x27;</span>); <span class="comment">// 把&lt;p&gt;和&lt;div&gt;都选出来</span></span><br><span class="line">$(<span class="string">&#x27;p.red,p.green&#x27;</span>); <span class="comment">// 把&lt;p class=&quot;red&quot;&gt;和&lt;p class=&quot;green&quot;&gt;都选出来</span></span><br></pre></td></tr></table></figure>
<p>要注意的是，选出来的元素是按照它们在HTML中出现的顺序排列的，而且不会有重复元素。例如，<code>&lt;p class=&quot;red green&quot;&gt;</code>不会被上面的<code>$('p.red,p.green')</code>选择两次。</p>
<h3 id="练习">练习</h3>
<p>使用jQuery选择器分别选出指定元素：</p>
<ul>
<li>仅选择JavaScript</li>
<li>仅选择Erlang</li>
<li>选择JavaScript和Erlang</li>
<li>选择所有编程语言</li>
<li>选择名字input</li>
<li>选择邮件和名字input</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML结构 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test-jquery&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;para-1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;color-red&quot;</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;para-2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;color-green&quot;</span>&gt;</span>Haskell<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;color-red color-green&quot;</span>&gt;</span>Erlang<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">class</span>=<span class="string">&quot;color-black&quot;</span>&gt;</span>Python<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;test-form&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">action</span>=<span class="string">&quot;#0&quot;</span> <span class="attr">onsubmit</span>=<span class="string">&quot;return false;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">legend</span>&gt;</span>注册新用户<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span>名字: <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span>邮件: <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span>口令: <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>JavaScript</p>
<p>Haskell</p>
<p>Erlang</p>
<p>Python</p>
<p>运行查看结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let selected = null;</span><br><span class="line"></span><br><span class="line">selected = ???;</span><br><span class="line"></span><br><span class="line">// 高亮结果:</span><br><span class="line">if (!(selected instanceof jQuery)) &#123;</span><br><span class="line">    return console.log(&#x27;不是有效的jQuery对象!&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">$(&#x27;#test-jquery&#x27;).find(&#x27;*&#x27;).css(&#x27;background-color&#x27;, &#x27;&#x27;);</span><br><span class="line">selected.css(&#x27;background-color&#x27;, &#x27;#ff8000&#x27;);</span><br></pre></td></tr></table></figure>
<p>除了基本的选择器外，jQuery的层级选择器更加灵活，也更强大。</p>
<p>因为DOM的结构就是层级结构，所以我们经常要根据层级关系进行选择。</p>
<h3 id="层级选择器（Descendant-Selector）">层级选择器（Descendant Selector）</h3>
<p>如果两个DOM元素具有层级关系，就可以用<code>$('ancestor descendant')</code>来选择，层级之间用空格隔开。例如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML结构 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;testing&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;lang&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;lang-javascript&quot;</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;lang-python&quot;</span>&gt;</span>Python<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;lang-lua&quot;</span>&gt;</span>Lua<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>要选出JavaScript，可以用层级选择器：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;ul.lang li.lang-javascript&#x27;</span>); <span class="comment">// [&lt;li class=&quot;lang-javascript&quot;&gt;JavaScript&lt;/li&gt;]</span></span><br><span class="line">$(<span class="string">&#x27;div.testing li.lang-javascript&#x27;</span>); <span class="comment">// [&lt;li class=&quot;lang-javascript&quot;&gt;JavaScript&lt;/li&gt;]</span></span><br></pre></td></tr></table></figure>
<p>因为<code>&lt;div&gt;</code>和<code>&lt;ul&gt;</code>都是<code>&lt;li&gt;</code>的祖先节点，所以上面两种方式都可以选出相应的<code>&lt;li&gt;</code>节点。</p>
<p>要选择所有的<code>&lt;li&gt;</code>节点，用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;ul.lang li&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>这种层级选择器相比单个的选择器好处在于，它缩小了选择范围，因为首先要定位父节点，才能选择相应的子节点，这样避免了页面其他不相关的元素。</p>
<p>例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;form[name=upload] input&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>就把选择范围限定在<code>name</code>属性为<code>upload</code>的表单里。如果页面有很多表单，其他表单的<code>&lt;input&gt;</code>不会被选择。</p>
<p>多层选择也是允许的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;form.test p input&#x27;</span>); <span class="comment">// 在form表单选择被&lt;p&gt;包含的&lt;input&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="子选择器（Child-Selector）">子选择器（Child Selector）</h3>
<p>子选择器<code>$('parent&gt;child')</code>类似层级选择器，但是限定了层级关系必须是父子关系，就是<code>&lt;child&gt;</code>节点必须是<code>&lt;parent&gt;</code>节点的直属子节点。还是以上面的例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;ul.lang&gt;li.lang-javascript&#x27;</span>); <span class="comment">// 可以选出[&lt;li class=&quot;lang-javascript&quot;&gt;JavaScript&lt;/li&gt;]</span></span><br><span class="line">$(<span class="string">&#x27;div.testing&gt;li.lang-javascript&#x27;</span>); <span class="comment">// [], 无法选出，因为&lt;div&gt;和&lt;li&gt;不构成父子关系</span></span><br></pre></td></tr></table></figure>
<h3 id="过滤器（Filter）">过滤器（Filter）</h3>
<p>过滤器一般不单独使用，它通常附加在选择器上，帮助我们更精确地定位元素。观察过滤器的效果：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;ul.lang li&#x27;</span>); <span class="comment">// 选出JavaScript、Python和Lua 3个节点</span></span><br><span class="line">$(<span class="string">&#x27;ul.lang li:first-child&#x27;</span>); <span class="comment">// 仅选出JavaScript</span></span><br><span class="line">$(<span class="string">&#x27;ul.lang li:last-child&#x27;</span>); <span class="comment">// 仅选出Lua</span></span><br><span class="line">$(<span class="string">&#x27;ul.lang li:nth-child(2)&#x27;</span>); <span class="comment">// 选出第N个元素，N从1开始</span></span><br><span class="line">$(<span class="string">&#x27;ul.lang li:nth-child(even)&#x27;</span>); <span class="comment">// 选出序号为偶数的元素</span></span><br><span class="line">$(<span class="string">&#x27;ul.lang li:nth-child(odd)&#x27;</span>); <span class="comment">// 选出序号为奇数的元素</span></span><br></pre></td></tr></table></figure>
<h3 id="表单相关">表单相关</h3>
<p>针对表单元素，jQuery还有一组特殊的选择器：</p>
<ul>
<li><code>:input</code>：可以选择<code>&lt;input&gt;</code>，<code>&lt;textarea&gt;</code>，<code>&lt;select&gt;</code>和<code>&lt;button&gt;</code>；</li>
<li><code>:file</code>：可以选择<code>&lt;input type=&quot;file&quot;&gt;</code>，和<code>input[type=file]</code>一样；</li>
<li><code>:checkbox</code>：可以选择复选框，和<code>input[type=checkbox]</code>一样；</li>
<li><code>:radio</code>：可以选择单选框，和<code>input[type=radio]</code>一样；</li>
<li><code>:focus</code>：可以选择当前输入焦点的元素，例如把光标放到一个<code>&lt;input&gt;</code>上，用<code>$('input:focus')</code>就可以选出；</li>
<li><code>:checked</code>：选择当前勾上的单选框和复选框，用这个选择器可以立刻获得用户选择的项目，如<code>$('input[type=radio]:checked')</code>；</li>
<li><code>:enabled</code>：可以选择可以正常输入的<code>&lt;input&gt;</code>、<code>&lt;select&gt;</code> 等，也就是没有灰掉的输入；</li>
<li><code>:disabled</code>：和<code>:enabled</code>正好相反，选择那些不能输入的。</li>
</ul>
<p>此外，jQuery还有很多有用的选择器，例如，选出可见的或隐藏的元素：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;div:visible&#x27;</span>); <span class="comment">// 所有可见的div</span></span><br><span class="line">$(<span class="string">&#x27;div:hidden&#x27;</span>); <span class="comment">// 所有隐藏的div</span></span><br></pre></td></tr></table></figure>
<h3 id="练习-2">练习</h3>
<p>针对如下HTML结构：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML结构 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;test-selector&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;test-lang&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;lang-javascript&quot;</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;lang-python&quot;</span>&gt;</span>Python<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;lang-lua&quot;</span>&gt;</span>Lua<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">&quot;test-lang&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;lang-swift&quot;</span>&gt;</span>Swift<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;lang-java&quot;</span>&gt;</span>Java<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;lang-c&quot;</span>&gt;</span>C<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>JavaScript</li>
<li>Python</li>
<li>Lua</li>
</ul>
<ol>
<li>Swift</li>
<li>Java</li>
<li>C</li>
</ol>
<p>选出相应的内容并观察效果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 分别选择所有语言，所有动态语言，所有静态语言，JavaScript，Lua，C等:</span><br><span class="line">let selected = ???</span><br><span class="line"></span><br><span class="line">// 高亮结果:</span><br><span class="line">if (!(selected instanceof jQuery)) &#123;</span><br><span class="line">    return console.log(&#x27;不是有效的jQuery对象!&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">$(&#x27;#test-jquery&#x27;).find(&#x27;*&#x27;).css(&#x27;background-color&#x27;, &#x27;&#x27;);</span><br><span class="line">selected.css(&#x27;background-color&#x27;, &#x27;#ff8000&#x27;);</span><br></pre></td></tr></table></figure>
<p>通常情况下选择器可以直接定位到我们想要的元素，但是，当我们拿到一个jQuery对象后，还可以以这个对象为基准，进行查找和过滤。</p>
<p>最常见的查找是在某个节点的所有子节点中查找，使用<code>find()</code>方法，它本身又接收一个任意的选择器。例如如下的HTML结构：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- HTML结构 --&gt;</span><br><span class="line">&lt;ul class=&quot;lang&quot;&gt;</span><br><span class="line">    &lt;li class=&quot;js dy&quot;&gt;JavaScript&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;dy&quot;&gt;Python&lt;/li&gt;</span><br><span class="line">    &lt;li id=&quot;swift&quot;&gt;Swift&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;dy&quot;&gt;Scheme&lt;/li&gt;</span><br><span class="line">    &lt;li name=&quot;haskell&quot;&gt;Haskell&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>JavaScript</li>
<li>Python</li>
<li>Swift</li>
<li>Scheme</li>
<li>Haskell</li>
</ul>
<p>用<code>find()</code>查找：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ul = $(<span class="string">&#x27;ul.lang&#x27;</span>); <span class="comment">// 获得&lt;ul&gt;</span></span><br><span class="line"><span class="keyword">let</span> dy = ul.<span class="title function_">find</span>(<span class="string">&#x27;.dy&#x27;</span>); <span class="comment">// 获得JavaScript, Python, Scheme</span></span><br><span class="line"><span class="keyword">let</span> swf = ul.<span class="title function_">find</span>(<span class="string">&#x27;#swift&#x27;</span>); <span class="comment">// 获得Swift</span></span><br><span class="line"><span class="keyword">let</span> hsk = ul.<span class="title function_">find</span>(<span class="string">&#x27;[name=haskell]&#x27;</span>); <span class="comment">// 获得Haskell</span></span><br></pre></td></tr></table></figure>
<p>如果要从当前节点开始向上查找，使用<code>parent()</code>方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> swf = $(<span class="string">&#x27;#swift&#x27;</span>); <span class="comment">// 获得Swift</span></span><br><span class="line"><span class="keyword">let</span> parent = swf.<span class="title function_">parent</span>(); <span class="comment">// 获得Swift的上层节点&lt;ul&gt;</span></span><br><span class="line"><span class="keyword">let</span> a = swf.<span class="title function_">parent</span>(<span class="string">&#x27;.red&#x27;</span>); <span class="comment">// 获得Swift的上层节点&lt;ul&gt;，同时传入过滤条件。如果ul不符合条件，返回空jQuery对象</span></span><br></pre></td></tr></table></figure>
<p>对于位于同一层级的节点，可以通过<code>next()</code>和<code>prev()</code>方法，例如：</p>
<p>当我们已经拿到<code>Swift</code>节点后：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> swift = $(<span class="string">&#x27;#swift&#x27;</span>);</span><br><span class="line"></span><br><span class="line">swift.<span class="title function_">next</span>(); <span class="comment">// Scheme</span></span><br><span class="line">swift.<span class="title function_">next</span>(<span class="string">&#x27;[name=haskell]&#x27;</span>); <span class="comment">// 空的jQuery对象，因为Swift的下一个元素Scheme不符合条件[name=haskell]</span></span><br><span class="line"></span><br><span class="line">swift.<span class="title function_">prev</span>(); <span class="comment">// Python</span></span><br><span class="line">swift.<span class="title function_">prev</span>(<span class="string">&#x27;.dy&#x27;</span>); <span class="comment">// Python，因为Python同时符合过滤器条件.dy</span></span><br></pre></td></tr></table></figure>
<h3 id="过滤">过滤</h3>
<p>和函数式编程的map、filter类似，jQuery对象也有类似的方法。</p>
<p><code>filter()</code>方法可以过滤掉不符合选择器条件的节点：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> langs = $(<span class="string">&#x27;ul.lang li&#x27;</span>); <span class="comment">// 拿到JavaScript, Python, Swift, Scheme和Haskell</span></span><br><span class="line"><span class="keyword">let</span> a = langs.<span class="title function_">filter</span>(<span class="string">&#x27;.dy&#x27;</span>); <span class="comment">// 拿到JavaScript, Python, Scheme</span></span><br></pre></td></tr></table></figure>
<p>或者传入一个函数，要特别注意函数内部的<code>this</code>被绑定为DOM对象，不是jQuery对象：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> langs = $(<span class="string">&#x27;ul.lang li&#x27;</span>); <span class="comment">// 拿到JavaScript, Python, Swift, Scheme和Haskell</span></span><br><span class="line">langs.<span class="title function_">filter</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">innerHTML</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;S&#x27;</span>) === <span class="number">0</span>; <span class="comment">// 返回S开头的节点</span></span><br><span class="line">&#125;); <span class="comment">// 拿到Swift, Scheme</span></span><br></pre></td></tr></table></figure>
<p><code>map()</code>方法把一个jQuery对象包含的若干DOM节点转化为其他对象：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> langs = $(<span class="string">&#x27;ul.lang li&#x27;</span>); <span class="comment">// 拿到JavaScript, Python, Swift, Scheme和Haskell</span></span><br><span class="line"><span class="keyword">let</span> arr = langs.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">innerHTML</span>;</span><br><span class="line">&#125;).<span class="title function_">get</span>(); <span class="comment">// 用get()拿到包含string的Array：[&#x27;JavaScript&#x27;, &#x27;Python&#x27;, &#x27;Swift&#x27;, &#x27;Scheme&#x27;, &#x27;Haskell&#x27;]</span></span><br></pre></td></tr></table></figure>
<p>此外，一个jQuery对象如果包含了不止一个DOM节点，<code>first()</code>、<code>last()</code>和<code>slice()</code>方法可以返回一个新的jQuery对象，把不需要的DOM节点去掉：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> langs = $(<span class="string">&#x27;ul.lang li&#x27;</span>); <span class="comment">// 拿到JavaScript, Python, Swift, Scheme和Haskell</span></span><br><span class="line"><span class="keyword">let</span> js = langs.<span class="title function_">first</span>(); <span class="comment">// JavaScript，相当于$(&#x27;ul.lang li:first-child&#x27;)</span></span><br><span class="line"><span class="keyword">let</span> haskell = langs.<span class="title function_">last</span>(); <span class="comment">// Haskell, 相当于$(&#x27;ul.lang li:last-child&#x27;)</span></span><br><span class="line"><span class="keyword">let</span> sub = langs.<span class="title function_">slice</span>(<span class="number">2</span>, <span class="number">4</span>); <span class="comment">// Swift, Scheme, 参数和数组的slice()方法一致</span></span><br></pre></td></tr></table></figure>
<h3 id="练习-3">练习</h3>
<p>对于下面的表单：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;test-form&quot;</span> <span class="attr">action</span>=<span class="string">&quot;#0&quot;</span> <span class="attr">onsubmit</span>=<span class="string">&quot;return false;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span>Name: <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span>Email: <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span>Password: <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Gender: <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">value</span>=<span class="string">&quot;m&quot;</span> <span class="attr">checked</span>&gt;</span> Male<span class="tag">&lt;/<span class="name">label</span>&gt;</span> <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">value</span>=<span class="string">&quot;f&quot;</span>&gt;</span> Female<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span>City: <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;city&quot;</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;BJ&quot;</span> <span class="attr">selected</span>&gt;</span>Beijing<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;SH&quot;</span>&gt;</span>Shanghai<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;CD&quot;</span>&gt;</span>Chengdu<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;XM&quot;</span>&gt;</span>Xiamen<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>输入值后，用jQuery获取表单的JSON字符串，key和value分别对应每个输入的name和相应的value，例如：<code>&#123;&quot;name&quot;:&quot;Michael&quot;,&quot;email&quot;:...&#125;</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let json = ???;</span><br><span class="line"></span><br><span class="line">// 显示结果:</span><br><span class="line">if (typeof(json) === &#x27;string&#x27;) &#123;</span><br><span class="line">    console.log(json);</span><br><span class="line">&#125;</span><br><span class="line">else &#123;</span><br><span class="line">    console.log(&#x27;json变量不是string!&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>jQuery的选择器很强大，用起来又简单又灵活，但是搞了这么久，我拿到了jQuery对象，到底要干什么？</p>
<p>答案当然是操作对应的DOM节点啦！</p>
<p>回顾一下修改DOM的CSS、文本、设置HTML有多么麻烦，而且有的浏览器只有innerHTML，有的浏览器支持innerText，有了jQuery对象，不需要考虑浏览器差异了，全部统一操作！</p>
<h3 id="修改Text和HTML">修改Text和HTML</h3>
<p>jQuery对象的<code>text()</code>和<code>html()</code>方法分别获取节点的文本和原始HTML文本，例如，如下的HTML结构：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML结构 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;test-ul&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;js&quot;</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">name</span>=<span class="string">&quot;book&quot;</span>&gt;</span>Java <span class="symbol">&amp;amp;</span> JavaScript<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>分别获取文本和HTML：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#test-ul li[name=book]&#x27;</span>).<span class="title function_">text</span>(); <span class="comment">// &#x27;Java &amp; JavaScript&#x27;</span></span><br><span class="line">$(<span class="string">&#x27;#test-ul li[name=book]&#x27;</span>).<span class="title function_">html</span>(); <span class="comment">// &#x27;Java &amp;amp; JavaScript&#x27;</span></span><br></pre></td></tr></table></figure>
<p>如何设置文本或HTML？jQuery的API设计非常巧妙：无参数调用<code>text()</code>是获取文本，传入参数就变成设置文本，HTML也是类似操作，自己动手试试：</p>
<ul>
<li>JavaScript</li>
<li>Java &amp; JavaScript</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let j1 = $(&#x27;#test-ul li.js&#x27;);</span><br><span class="line">let j2 = $(&#x27;#test-ul li[name=book]&#x27;);</span><br><span class="line"></span><br><span class="line">j1.html(&#x27;&lt;span style=&quot;color: #c00&quot;&gt;JavaScript&lt;/span&gt;&#x27;);</span><br><span class="line">j2.text(&#x27;JavaScript &amp; ECMAScript&#x27;);</span><br></pre></td></tr></table></figure>
<p>一个jQuery对象可以包含0个或任意个DOM对象，它的方法实际上会作用在对应的每个DOM节点上。在上面的例子中试试：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#test-ul li&#x27;</span>).<span class="title function_">text</span>(<span class="string">&#x27;JS&#x27;</span>); <span class="comment">// 是不是两个节点都变成了JS？</span></span><br></pre></td></tr></table></figure>
<p>所以jQuery对象的另一个好处是我们可以执行一个操作，作用在对应的一组DOM节点上。即使选择器没有返回任何DOM节点，调用jQuery对象的方法仍然不会报错：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果不存在id为not-exist的节点：</span></span><br><span class="line">$(<span class="string">&#x27;#not-exist&#x27;</span>).<span class="title function_">text</span>(<span class="string">&#x27;Hello&#x27;</span>); <span class="comment">// 代码不报错，没有节点被设置为&#x27;Hello&#x27;</span></span><br></pre></td></tr></table></figure>
<p>这意味着jQuery帮你免去了许多<code>if</code>语句。</p>
<h3 id="修改CSS">修改CSS</h3>
<p>jQuery对象有“批量操作”的特点，这用于修改CSS实在是太方便了。考虑下面的HTML结构：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML结构 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;test-css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;lang dy&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;lang&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>Java<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;lang dy&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>Python<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;lang&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>Swift<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;lang dy&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>Scheme<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>要高亮显示动态语言，调用jQuery对象的<code>css('name', 'value')</code>方法，我们用一行语句实现：</p>
<ul>
<li>JavaScript</li>
<li>Java</li>
<li>Python</li>
<li>Swift</li>
<li>Scheme</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(&#x27;#test-css li.dy&gt;span&#x27;).css(&#x27;background-color&#x27;, &#x27;#ff0&#x27;).css(&#x27;color&#x27;, &#x27;#c00&#x27;);</span><br></pre></td></tr></table></figure>
<p><em>注意</em>，jQuery对象的所有方法都返回一个jQuery对象（可能是新的也可能是自身），这样我们可以进行链式调用，非常方便。</p>
<p>jQuery对象的<code>css()</code>方法可以这么用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;#test-div&#x27;</span>);</span><br><span class="line">div.<span class="title function_">css</span>(<span class="string">&#x27;color&#x27;</span>); <span class="comment">// &#x27;#000033&#x27;, 获取CSS属性</span></span><br><span class="line">div.<span class="title function_">css</span>(<span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;#336699&#x27;</span>); <span class="comment">// 设置CSS属性</span></span><br><span class="line">div.<span class="title function_">css</span>(<span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;&#x27;</span>); <span class="comment">// 清除CSS属性</span></span><br></pre></td></tr></table></figure>
<p>为了和JavaScript保持一致，CSS属性可以用<code>'background-color'</code>和<code>'backgroundColor'</code>两种格式。</p>
<p><code>css()</code>方法将作用于DOM节点的<code>style</code>属性，具有最高优先级。如果要修改<code>class</code>属性，可以用jQuery提供的下列方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;#test-div&#x27;</span>);</span><br><span class="line">div.<span class="title function_">hasClass</span>(<span class="string">&#x27;highlight&#x27;</span>); <span class="comment">// false， class是否包含highlight</span></span><br><span class="line">div.<span class="title function_">addClass</span>(<span class="string">&#x27;highlight&#x27;</span>); <span class="comment">// 添加highlight这个class</span></span><br><span class="line">div.<span class="title function_">removeClass</span>(<span class="string">&#x27;highlight&#x27;</span>); <span class="comment">// 删除highlight这个class</span></span><br></pre></td></tr></table></figure>
<p>练习：分别用<code>css()</code>方法和<code>addClass()</code>方法高亮显示JavaScript：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML结构 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.highlight</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="number">#c00</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="number">#ff0</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test-highlight-css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;py&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>Python<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;js&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;sw&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>Swift<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;hk&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>Haskell<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Python</li>
<li>JavaScript</li>
<li>Swift</li>
<li>Haskell</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let div = $(&#x27;#test-highlight-css&#x27;);</span><br><span class="line">// TODO:</span><br></pre></td></tr></table></figure>
<h3 id="显示和隐藏DOM">显示和隐藏DOM</h3>
<p>要隐藏一个DOM，我们可以设置CSS的<code>display</code>属性为<code>none</code>，利用<code>css()</code>方法就可以实现。不过，要显示这个DOM就需要恢复原有的<code>display</code>属性，这就得先记下来原有的<code>display</code>属性到底是<code>block</code>还是<code>inline</code>还是别的值。</p>
<p>考虑到显示和隐藏DOM元素使用非常普遍，jQuery直接提供<code>show()</code>和<code>hide()</code>方法，我们不用关心它是如何修改<code>display</code>属性的，总之它能正常工作：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = $(<span class="string">&#x27;a[target=_blank]&#x27;</span>);</span><br><span class="line">a.<span class="title function_">hide</span>(); <span class="comment">// 隐藏</span></span><br><span class="line">a.<span class="title function_">show</span>(); <span class="comment">// 显示</span></span><br></pre></td></tr></table></figure>
<p><em>注意</em>，隐藏DOM节点并未改变DOM树的结构，它只影响DOM节点的显示。这和删除DOM节点是不同的。</p>
<h3 id="获取DOM信息">获取DOM信息</h3>
<p>利用jQuery对象的若干方法，我们直接可以获取DOM的高宽等信息，而无需针对不同浏览器编写特定代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 浏览器可视窗口大小:</span></span><br><span class="line">$(<span class="variable language_">window</span>).<span class="title function_">width</span>(); <span class="comment">// 800</span></span><br><span class="line">$(<span class="variable language_">window</span>).<span class="title function_">height</span>(); <span class="comment">// 600</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// HTML文档大小:</span></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">width</span>(); <span class="comment">// 800</span></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">height</span>(); <span class="comment">// 3500</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 某个div的大小:</span></span><br><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;#test-div&#x27;</span>);</span><br><span class="line">div.<span class="title function_">width</span>(); <span class="comment">// 600</span></span><br><span class="line">div.<span class="title function_">height</span>(); <span class="comment">// 300</span></span><br><span class="line">div.<span class="title function_">width</span>(<span class="number">400</span>); <span class="comment">// 设置CSS属性 width: 400px，是否生效要看CSS是否有效</span></span><br><span class="line">div.<span class="title function_">height</span>(<span class="string">&#x27;200px&#x27;</span>); <span class="comment">// 设置CSS属性 height: 200px，是否生效要看CSS是否有效</span></span><br></pre></td></tr></table></figure>
<p><code>attr()</code>和<code>removeAttr()</code>方法用于操作DOM节点的属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;div id=&quot;test-div&quot; name=&quot;Test&quot; start=&quot;1&quot;&gt;...&lt;/div&gt;</span></span><br><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;#test-div&#x27;</span>);</span><br><span class="line">div.<span class="title function_">attr</span>(<span class="string">&#x27;data&#x27;</span>); <span class="comment">// undefined, 属性不存在</span></span><br><span class="line">div.<span class="title function_">attr</span>(<span class="string">&#x27;name&#x27;</span>); <span class="comment">// &#x27;Test&#x27;</span></span><br><span class="line">div.<span class="title function_">attr</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;Hello&#x27;</span>); <span class="comment">// div的name属性变为&#x27;Hello&#x27;</span></span><br><span class="line">div.<span class="title function_">removeAttr</span>(<span class="string">&#x27;name&#x27;</span>); <span class="comment">// 删除name属性</span></span><br><span class="line">div.<span class="title function_">attr</span>(<span class="string">&#x27;name&#x27;</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<p><code>prop()</code>方法和<code>attr()</code>类似，但是HTML5规定有一种属性在DOM节点中可以没有值，只有出现与不出现两种，例如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;test-radio&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;test&quot;</span> <span class="attr">checked</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>等价于：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;test-radio&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;test&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>attr()</code>和<code>prop()</code>对于属性<code>checked</code>处理有所不同：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> radio = $(<span class="string">&#x27;#test-radio&#x27;</span>);</span><br><span class="line">radio.<span class="title function_">attr</span>(<span class="string">&#x27;checked&#x27;</span>); <span class="comment">// &#x27;checked&#x27;</span></span><br><span class="line">radio.<span class="title function_">prop</span>(<span class="string">&#x27;checked&#x27;</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p><code>prop()</code>返回值更合理一些。不过，用<code>is()</code>方法判断更好：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> radio = $(<span class="string">&#x27;#test-radio&#x27;</span>);</span><br><span class="line">radio.<span class="title function_">is</span>(<span class="string">&#x27;:checked&#x27;</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>类似的属性还有<code>selected</code>，处理时最好用<code>is(':selected')</code>。</p>
<h3 id="操作表单">操作表单</h3>
<p>对于表单元素，jQuery对象统一提供<code>val()</code>方法获取和设置对应的<code>value</code>属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    &lt;input id=&quot;test-input&quot; name=&quot;email&quot; value=&quot;test&quot;&gt;</span></span><br><span class="line"><span class="comment">    &lt;select id=&quot;test-select&quot; name=&quot;city&quot;&gt;</span></span><br><span class="line"><span class="comment">        &lt;option value=&quot;BJ&quot; selected&gt;Beijing&lt;/option&gt;</span></span><br><span class="line"><span class="comment">        &lt;option value=&quot;SH&quot;&gt;Shanghai&lt;/option&gt;</span></span><br><span class="line"><span class="comment">        &lt;option value=&quot;SZ&quot;&gt;Shenzhen&lt;/option&gt;</span></span><br><span class="line"><span class="comment">    &lt;/select&gt;</span></span><br><span class="line"><span class="comment">    &lt;textarea id=&quot;test-textarea&quot;&gt;Hello&lt;/textarea&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">let</span></span><br><span class="line">    input = $(<span class="string">&#x27;#test-input&#x27;</span>),</span><br><span class="line">    select = $(<span class="string">&#x27;#test-select&#x27;</span>),</span><br><span class="line">    textarea = $(<span class="string">&#x27;#test-textarea&#x27;</span>);</span><br><span class="line"></span><br><span class="line">input.<span class="title function_">val</span>(); <span class="comment">// &#x27;test&#x27;</span></span><br><span class="line">input.<span class="title function_">val</span>(<span class="string">&#x27;abc@example.com&#x27;</span>); <span class="comment">// 文本框的内容已变为abc@example.com</span></span><br><span class="line"></span><br><span class="line">select.<span class="title function_">val</span>(); <span class="comment">// &#x27;BJ&#x27;</span></span><br><span class="line">select.<span class="title function_">val</span>(<span class="string">&#x27;SH&#x27;</span>); <span class="comment">// 选择框已变为Shanghai</span></span><br><span class="line"></span><br><span class="line">textarea.<span class="title function_">val</span>(); <span class="comment">// &#x27;Hello&#x27;</span></span><br><span class="line">textarea.<span class="title function_">val</span>(<span class="string">&#x27;Hi&#x27;</span>); <span class="comment">// 文本区域已更新为&#x27;Hi&#x27;</span></span><br></pre></td></tr></table></figure>
<p>可见，一个<code>val()</code>就统一了各种输入框的取值和赋值的问题。</p>
<p>直接使用浏览器提供的API对DOM结构进行修改，不但代码复杂，而且要针对浏览器写不同的代码。</p>
<p>有了jQuery，我们就专注于操作jQuery对象本身，底层的DOM操作由jQuery完成就可以了，这样一来，修改DOM也大大简化了。</p>
<h3 id="添加DOM">添加DOM</h3>
<p>要添加新的DOM节点，除了通过jQuery的<code>html()</code>这种暴力方法外，还可以用<code>append()</code>方法，例如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test-div&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>Python<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>Swift<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如何向列表新增一个语言？首先要拿到<code>&lt;ul&gt;</code>节点：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ul = $(<span class="string">&#x27;#test-div&gt;ul&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>然后，调用<code>append()</code>传入HTML片段：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ul.<span class="title function_">append</span>(<span class="string">&#x27;&lt;li&gt;&lt;span&gt;Haskell&lt;/span&gt;&lt;/li&gt;&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>除了接受字符串，<code>append()</code>还可以传入原始的DOM对象，jQuery对象和函数对象：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建DOM对象:</span></span><br><span class="line"><span class="keyword">let</span> ps = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line">ps.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;span&gt;Pascal&lt;/span&gt;&#x27;</span>;</span><br><span class="line"><span class="comment">// 添加DOM对象:</span></span><br><span class="line">ul.<span class="title function_">append</span>(ps);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加jQuery对象:</span></span><br><span class="line">ul.<span class="title function_">append</span>($(<span class="string">&#x27;#scheme&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加函数对象:</span></span><br><span class="line">ul.<span class="title function_">append</span>(<span class="keyword">function</span> (<span class="params">index, html</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&lt;li&gt;&lt;span&gt;Language - &#x27;</span> + index + <span class="string">&#x27;&lt;/span&gt;&lt;/li&gt;&#x27;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>传入函数时，要求返回一个字符串、DOM对象或者jQuery对象。因为jQuery的<code>append()</code>可能作用于一组DOM节点，只有传入函数才能针对每个DOM生成不同的子节点。</p>
<p><code>append()</code>把DOM添加到最后，<code>prepend()</code>则把DOM添加到最前。</p>
<p>另外注意，如果要添加的DOM节点已经存在于HTML文档中，它会首先从文档移除，然后再添加，也就是说，用<code>append()</code>，你可以移动一个DOM节点。</p>
<p>如果要把新节点插入到指定位置，例如，JavaScript和Python之间，那么，可以先定位到JavaScript，然后用<code>after()</code>方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> js = $(<span class="string">&#x27;#test-div&gt;ul&gt;li:first-child&#x27;</span>);</span><br><span class="line">js.<span class="title function_">after</span>(<span class="string">&#x27;&lt;li&gt;&lt;span&gt;Lua&lt;/span&gt;&lt;/li&gt;&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>也就是说，同级节点可以用<code>after()</code>或者<code>before()</code>方法。</p>
<h3 id="删除节点">删除节点</h3>
<p>要删除DOM节点，拿到jQuery对象后直接调用<code>remove()</code>方法就可以了。如果jQuery对象包含若干DOM节点，实际上可以一次删除多个DOM节点：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> li = $(<span class="string">&#x27;#test-div&gt;ul&gt;li&#x27;</span>);</span><br><span class="line">li.<span class="title function_">remove</span>(); <span class="comment">// 所有&lt;li&gt;全被删除</span></span><br></pre></td></tr></table></figure>
<h3 id="练习-4">练习</h3>
<p>除了列出的3种语言外，请再添加Pascal、Lua和Ruby，然后按字母顺序排序节点：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML结构 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test-div&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>Python<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>Swift<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>JavaScript</li>
<li>Python</li>
<li>Swift</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// TODO:</span><br><span class="line"></span><br><span class="line">// 测试:</span><br><span class="line">(function () &#123;</span><br><span class="line">    let s = $(&#x27;#test-div&gt;ul&gt;li&#x27;).map(function () &#123;</span><br><span class="line">        return $(this).text();</span><br><span class="line">    &#125;).get().join(&#x27;,&#x27;);</span><br><span class="line">    if (s === &#x27;JavaScript,Lua,Pascal,Python,Ruby,Swift&#x27;) &#123;</span><br><span class="line">        console.log(&#x27;测试通过!&#x27;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.log(&#x27;测试失败: &#x27; + s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>因为JavaScript在浏览器中以单线程模式运行，页面加载后，一旦页面上所有的JavaScript代码被执行完后，就只能依赖触发事件来执行JavaScript代码。</p>
<p>浏览器在接收到用户的鼠标或键盘输入后，会自动在对应的DOM节点上触发相应的事件。如果该节点已经绑定了对应的JavaScript处理函数，该函数就会自动调用。</p>
<p>由于不同的浏览器绑定事件的代码都不太一样，所以用jQuery来写代码，就屏蔽了不同浏览器的差异，我们总是编写相同的代码。</p>
<p>举个例子，假设要在用户点击了超链接时弹出提示框，我们用jQuery这样绑定一个<code>click</code>事件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/* HTML:</span><br><span class="line"> *</span><br><span class="line"> * &lt;a id=&quot;test-link&quot; href=&quot;#0&quot;&gt;点我试试&lt;/a&gt;</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">// 获取超链接的jQuery对象:</span><br><span class="line">let a = $(&#x27;#test-link&#x27;);</span><br><span class="line">a.on(&#x27;click&#x27;, function () &#123;</span><br><span class="line">    alert(&#x27;Hello!&#x27;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>实测：<a href="#0">点我试试</a></p>
<p><code>on</code>方法用来绑定一个事件，我们需要传入事件名称和对应的处理函数。</p>
<p>另一种更简化的写法是直接调用<code>click()</code>方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;Hello!&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>两者完全等价。我们通常用后面的写法。</p>
<p>jQuery能够绑定的事件主要包括：</p>
<h3 id="鼠标事件">鼠标事件</h3>
<ul>
<li>click: 鼠标单击时触发；</li>
<li>dblclick：鼠标双击时触发；</li>
<li>mouseenter：鼠标进入时触发；</li>
<li>mouseleave：鼠标移出时触发；</li>
<li>mousemove：鼠标在DOM内部移动时触发；</li>
<li>hover：鼠标进入和退出时触发两个函数，相当于mouseenter加上mouseleave。</li>
</ul>
<h3 id="键盘事件">键盘事件</h3>
<p>键盘事件仅作用在当前焦点的DOM上，通常是<code>&lt;input&gt;</code>和<code>&lt;textarea&gt;</code>。</p>
<ul>
<li>keydown：键盘按下时触发；</li>
<li>keyup：键盘松开时触发；</li>
<li>keypress：按一次键后触发。</li>
</ul>
<h3 id="其他事件">其他事件</h3>
<ul>
<li>focus：当DOM获得焦点时触发；</li>
<li>blur：当DOM失去焦点时触发；</li>
<li>change：当<code>&lt;input&gt;</code>、<code>&lt;select&gt;</code>或<code>&lt;textarea&gt;</code>的内容改变时触发；</li>
<li>submit：当<code>&lt;form&gt;</code>提交时触发；</li>
<li>ready：当页面被载入并且DOM树完成初始化后触发。</li>
</ul>
<p>其中，<code>ready</code>仅作用于<code>document</code>对象。由于<code>ready</code>事件在DOM完成初始化后触发，且只触发一次，所以非常适合用来写其他的初始化代码。假设我们想给一个<code>&lt;form&gt;</code>表单绑定<code>submit</code>事件，下面的代码没有预期的效果：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 代码有误:</span></span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&#x27;#testForm&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;submit&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&#x27;submit!&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;testForm&quot;</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>因为JavaScript在此执行的时候，<code>&lt;form&gt;</code>尚未载入浏览器，所以<code>$('#testForm)</code>返回<code>[]</code>，并没有绑定事件到任何DOM上。</p>
<p>所以我们自己的初始化代码必须放到<code>document</code>对象的<code>ready</code>事件中，保证DOM已完成初始化：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">        $(document).on(&#x27;ready&#x27;, function () &#123;</span><br><span class="line">            $(&#x27;#testForm).on(&#x27;submit&#x27;, function () &#123;</span><br><span class="line">                alert(&#x27;submit!&#x27;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;testForm&quot;</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这样写就没有问题了。因为相关代码会在DOM树初始化后再执行。</p>
<p>由于<code>ready</code>事件使用非常普遍，所以可以这样简化：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// on(&#x27;submit&#x27;, function)也可以简化:</span></span><br><span class="line">    $(<span class="string">&#x27;#testForm).submit(function () &#123;</span></span><br><span class="line"><span class="string">        alert(&#x27;</span>submit!<span class="string">&#x27;);</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">&#125;);</span></span><br></pre></td></tr></table></figure>
<p>甚至还可以再简化为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// init...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>上面的这种写法最为常见。如果你遇到<code>$(function () &#123;...&#125;)</code>的形式，牢记这是<code>document</code>对象的<code>ready</code>事件处理函数。</p>
<p>完全可以反复绑定事件处理函数，它们会依次执行：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;init A...&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;init B...&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;init C...&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="事件参数">事件参数</h3>
<p>有些事件，如<code>mousemove</code>和<code>keypress</code>，我们需要获取鼠标位置和按键的值，否则监听这些事件就没什么意义了。所有事件都会传入<code>Event</code>对象作为参数，可以从<code>Event</code>对象上获取到更多的信息：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&#x27;#testMouseMoveDiv&#x27;</span>).<span class="title function_">mousemove</span>(<span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">        $(<span class="string">&#x27;#testMouseMoveSpan&#x27;</span>).<span class="title function_">text</span>(<span class="string">&#x27;pageX = &#x27;</span> + e.<span class="property">pageX</span> + <span class="string">&#x27;, pageY = &#x27;</span> + e.<span class="property">pageY</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="取消绑定">取消绑定</h3>
<p>一个已被绑定的事件可以解除绑定，通过<code>off('click', function)</code>实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hello</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;hello!&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a.<span class="title function_">click</span>(hello); <span class="comment">// 绑定事件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 10秒钟后解除绑定:</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    a.<span class="title function_">off</span>(<span class="string">&#x27;click&#x27;</span>, hello);</span><br><span class="line">&#125;, <span class="number">10000</span>);</span><br></pre></td></tr></table></figure>
<p>需要特别注意的是，下面这种写法是无效的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 绑定事件:</span></span><br><span class="line">a.<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;hello!&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解除绑定:</span></span><br><span class="line">a.<span class="title function_">off</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;hello!&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这是因为两个匿名函数虽然长得一模一样，但是它们是两个<em>不同</em>的函数对象，<code>off('click', function () &#123;...&#125;)</code>无法移除已绑定的第一个匿名函数。</p>
<p>为了实现移除效果，可以使用<code>off('click')</code>一次性移除已绑定的<code>click</code>事件的所有处理函数。</p>
<p>同理，无参数调用<code>off()</code>一次性移除已绑定的所有类型的事件处理函数。</p>
<h3 id="事件触发条件">事件触发条件</h3>
<p>一个需要注意的问题是，事件的触发总是由用户操作引发的。例如，我们监控文本框的内容改动：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> input = $(<span class="string">&#x27;#test-input&#x27;</span>);</span><br><span class="line">input.<span class="title function_">change</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;changed...&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>当用户在文本框中输入时，就会触发<code>change</code>事件。但是，如果用JavaScript代码去改动文本框的值，将<em>不会</em>触发<code>change</code>事件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> input = $(<span class="string">&#x27;#test-input&#x27;</span>);</span><br><span class="line">input.<span class="title function_">val</span>(<span class="string">&#x27;change it!&#x27;</span>); <span class="comment">// 无法触发change事件</span></span><br></pre></td></tr></table></figure>
<p>有些时候，我们希望用代码触发<code>change</code>事件，可以直接调用无参数的<code>change()</code>方法来触发该事件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> input = $(<span class="string">&#x27;#test-input&#x27;</span>);</span><br><span class="line">input.<span class="title function_">val</span>(<span class="string">&#x27;change it!&#x27;</span>);</span><br><span class="line">input.<span class="title function_">change</span>(); <span class="comment">// 触发change事件</span></span><br></pre></td></tr></table></figure>
<p><code>input.change()</code>相当于<code>input.trigger('change')</code>，它是<code>trigger()</code>方法的简写。</p>
<p>为什么我们希望手动触发一个事件呢？如果不这么做，很多时候，我们就得写两份一模一样的代码。</p>
<h3 id="练习-5">练习</h3>
<p>对如下的Form表单：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML结构 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;test-form&quot;</span> <span class="attr">action</span>=<span class="string">&quot;test&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">legend</span>&gt;</span>请选择想要学习的编程语言：<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;selectAll&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;selectAll&quot;</span>&gt;</span>全选<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;deselectAll&quot;</span>&gt;</span>全不选<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#0&quot;</span> <span class="attr">class</span>=<span class="string">&quot;invertSelect&quot;</span>&gt;</span>反选<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lang&quot;</span> <span class="attr">value</span>=<span class="string">&quot;javascript&quot;</span>&gt;</span> JavaScript<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lang&quot;</span> <span class="attr">value</span>=<span class="string">&quot;python&quot;</span>&gt;</span> Python<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lang&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ruby&quot;</span>&gt;</span> Ruby<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lang&quot;</span> <span class="attr">value</span>=<span class="string">&quot;haskell&quot;</span>&gt;</span> Haskell<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lang&quot;</span> <span class="attr">value</span>=<span class="string">&quot;scheme&quot;</span>&gt;</span> Scheme<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>绑定合适的事件处理函数，实现以下逻辑：</p>
<p>当用户勾上“全选”时，自动选中所有语言，并把“全选”变成“全不选”；</p>
<p>当用户去掉“全不选”时，自动不选中所有语言；</p>
<p>当用户点击“反选”时，自动把所有语言状态反转（选中的变为未选，未选的变为选中）；</p>
<p>当用户把所有语言都手动勾上时，“全选”被自动勾上，并变为“全不选”；</p>
<p>当用户手动去掉选中至少一种语言时，“全不选”自动被去掉选中，并变为“全选”。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">let</span><br><span class="line">    form = $(&#x27;#test-form&#x27;),</span><br><span class="line">    langs = form.find(&#x27;[name=lang]&#x27;),</span><br><span class="line">    selectAll = form.find(&#x27;label.selectAll :checkbox&#x27;),</span><br><span class="line">    selectAllLabel = form.find(&#x27;label.selectAll span.selectAll&#x27;),</span><br><span class="line">    deselectAllLabel = form.find(&#x27;label.selectAll span.deselectAll&#x27;),</span><br><span class="line">    invertSelect = form.find(&#x27;a.invertSelect&#x27;);</span><br><span class="line"></span><br><span class="line">// 重置初始化状态:</span><br><span class="line">form.find(&#x27;*&#x27;).show().off();</span><br><span class="line">form.find(&#x27;:checkbox&#x27;).prop(&#x27;checked&#x27;, false).off();</span><br><span class="line">deselectAllLabel.hide();</span><br><span class="line">// 拦截form提交事件:</span><br><span class="line">form.off().submit(function (e) &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    alert(form.serialize());</span><br><span class="line">&#125;);</span><br><span class="line">// TODO:绑定事件</span><br><span class="line"></span><br><span class="line">// 测试:</span><br><span class="line">console.log(&#x27;请测试功能是否正常。&#x27;);</span><br></pre></td></tr></table></figure>
<p>用JavaScript实现动画，原理非常简单：我们只需要以固定的时间间隔（例如，0.1秒），每次把DOM元素的CSS样式修改一点（例如，高宽各增加10%），看起来就像动画了。</p>
<p>但是要用JavaScript手动实现动画效果，需要编写非常复杂的代码。如果想要把动画效果用函数封装起来便于复用，那考虑的事情就更多了。</p>
<p>使用jQuery实现动画，代码已经简单得不能再简化了：只需要一行代码！</p>
<p>让我们先来看看jQuery内置的几种动画样式：</p>
<h3 id="show-hide">show / hide</h3>
<p>直接以无参数形式调用<code>show()</code>和<code>hide()</code>，会显示和隐藏DOM元素。但是，只要传递一个时间参数进去，就变成了动画：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;#test-show-hide&#x27;</span>);</span><br><span class="line">div.<span class="title function_">hide</span>(<span class="number">3000</span>); <span class="comment">// 在3秒钟内逐渐消失</span></span><br></pre></td></tr></table></figure>
<p>时间以毫秒为单位，但也可以是<code>'slow'</code>，<code>'fast'</code>这些字符串：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;#test-show-hide&#x27;</span>);</span><br><span class="line">div.<span class="title function_">show</span>(<span class="string">&#x27;slow&#x27;</span>); <span class="comment">// 在0.6秒钟内逐渐显示</span></span><br></pre></td></tr></table></figure>
<p><code>toggle()</code>方法则根据当前状态决定是<code>show()</code>还是<code>hide()</code>。</p>
<p>效果实测：</p>
<h3 id="slideUp-slideDown">slideUp / slideDown</h3>
<p>你可能已经看出来了，<code>show()</code>和<code>hide()</code>是从左上角逐渐展开或收缩的，而<code>slideUp()</code>和<code>slideDown()</code>则是在垂直方向逐渐展开或收缩的。</p>
<p><code>slideUp()</code>把一个可见的DOM元素收起来，效果跟拉上窗帘似的，<code>slideDown()</code>相反，而<code>slideToggle()</code>则根据元素是否可见来决定下一步动作：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;#test-slide&#x27;</span>);</span><br><span class="line">div.<span class="title function_">slideUp</span>(<span class="number">3000</span>); <span class="comment">// 在3秒钟内逐渐向上消失</span></span><br></pre></td></tr></table></figure>
<p>效果实测：</p>
<h3 id="fadeIn-fadeOut">fadeIn / fadeOut</h3>
<p><code>fadeIn()</code>和<code>fadeOut()</code>的动画效果是淡入淡出，也就是通过不断设置DOM元素的<code>opacity</code>属性来实现，而<code>fadeToggle()</code>则根据元素是否可见来决定下一步动作：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;#test-fade&#x27;</span>);</span><br><span class="line">div.<span class="title function_">fadeOut</span>(<span class="string">&#x27;slow&#x27;</span>); <span class="comment">// 在0.6秒内淡出</span></span><br></pre></td></tr></table></figure>
<h3 id="自定义动画">自定义动画</h3>
<p>如果上述动画效果还不能满足你的要求，那就祭出最后大招：<code>animate()</code>，它可以实现任意动画效果，我们需要传入的参数就是DOM元素最终的CSS状态和时间，jQuery在时间段内不断调整CSS直到达到我们设定的值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;#test-animate&#x27;</span>);</span><br><span class="line">div.<span class="title function_">animate</span>(&#123;</span><br><span class="line">    <span class="attr">opacity</span>: <span class="number">0.25</span>,</span><br><span class="line">    <span class="attr">width</span>: <span class="string">&#x27;256px&#x27;</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="string">&#x27;256px&#x27;</span></span><br><span class="line">&#125;, <span class="number">3000</span>); <span class="comment">// 在3秒钟内CSS过渡到设定值</span></span><br></pre></td></tr></table></figure>
<p><code>animate()</code>还可以再传入一个函数，当动画结束时，该函数将被调用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;#test-animate&#x27;</span>);</span><br><span class="line">div.<span class="title function_">animate</span>(&#123;</span><br><span class="line">    <span class="attr">opacity</span>: <span class="number">0.25</span>,</span><br><span class="line">    <span class="attr">width</span>: <span class="string">&#x27;256px&#x27;</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="string">&#x27;256px&#x27;</span></span><br><span class="line">&#125;, <span class="number">3000</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;动画已结束&#x27;</span>);</span><br><span class="line">    <span class="comment">// 恢复至初始状态:</span></span><br><span class="line">    $(<span class="variable language_">this</span>).<span class="title function_">css</span>(<span class="string">&#x27;opacity&#x27;</span>, <span class="string">&#x27;1.0&#x27;</span>).<span class="title function_">css</span>(<span class="string">&#x27;width&#x27;</span>, <span class="string">&#x27;128px&#x27;</span>).<span class="title function_">css</span>(<span class="string">&#x27;height&#x27;</span>, <span class="string">&#x27;128px&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>实际上这个回调函数参数对于基本动画也是适用的。</p>
<p>有了<code>animate()</code>，你就可以实现各种自定义动画效果了：</p>
<h3 id="串行动画">串行动画</h3>
<p>jQuery的动画效果还可以串行执行，通过<code>delay()</code>方法还可以实现暂停，这样，我们可以实现更复杂的动画效果，而代码却相当简单：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> div = $(<span class="string">&#x27;#test-animates&#x27;</span>);</span><br><span class="line"><span class="comment">// 动画效果：slideDown - 暂停 - 放大 - 暂停 - 缩小</span></span><br><span class="line">div.<span class="title function_">slideDown</span>(<span class="number">2000</span>)</span><br><span class="line">   .<span class="title function_">delay</span>(<span class="number">1000</span>)</span><br><span class="line">   .<span class="title function_">animate</span>(&#123;</span><br><span class="line">       <span class="attr">width</span>: <span class="string">&#x27;256px&#x27;</span>,</span><br><span class="line">       <span class="attr">height</span>: <span class="string">&#x27;256px&#x27;</span></span><br><span class="line">   &#125;, <span class="number">2000</span>)</span><br><span class="line">   .<span class="title function_">delay</span>(<span class="number">1000</span>)</span><br><span class="line">   .<span class="title function_">animate</span>(&#123;</span><br><span class="line">       <span class="attr">width</span>: <span class="string">&#x27;128px&#x27;</span>,</span><br><span class="line">       <span class="attr">height</span>: <span class="string">&#x27;128px&#x27;</span></span><br><span class="line">   &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>因为动画需要执行一段时间，所以jQuery必须不断返回新的Promise对象才能后续执行操作。简单地把动画封装在函数中是不够的。</p>
<p>效果实测：</p>
<h3 id="为什么有的动画没有效果">为什么有的动画没有效果</h3>
<p>你可能会遇到，有的动画如<code>slideUp()</code>根本没有效果。这是因为jQuery动画的原理是逐渐改变CSS的值，如<code>height</code>从<code>100px</code>逐渐变为<code>0</code>。但是很多不是block性质的DOM元素，对它们设置<code>height</code>根本就不起作用，所以动画也就没有效果。</p>
<p>此外，jQuery也没有实现对<code>background-color</code>的动画效果，用<code>animate()</code>设置<code>background-color</code>也没有效果。这种情况下可以使用CSS3的<code>transition</code>实现动画效果。</p>
<h3 id="练习-6">练习</h3>
<p>在执行删除操作时，给用户显示一个动画比直接调用<code>remove()</code>要更好。请在表格删除一行的时候添加一个淡出的动画效果：</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Email</th>
<th>Address</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>Bart Simpson</td>
<td>bart.s@primary.school</td>
<td>Springfield</td>
<td>Active</td>
</tr>
<tr>
<td>Michael Scofield</td>
<td><a href="mailto:m.scofield@escape.org">m.scofield@escape.org</a></td>
<td>Fox River</td>
<td>Locked</td>
</tr>
<tr>
<td>Optimus Prime</td>
<td><a href="mailto:prime@cybertron.org">prime@cybertron.org</a></td>
<td>Cybertron</td>
<td>Active</td>
</tr>
<tr>
<td>Peter Parker</td>
<td><a href="mailto:spider@movie.org">spider@movie.org</a></td>
<td>New York</td>
<td>Active</td>
</tr>
<tr>
<td>Thor Odinson</td>
<td><a href="mailto:thor@asgard.org">thor@asgard.org</a></td>
<td>Asgard</td>
<td>Active</td>
</tr>
</tbody>
</table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function deleteFirstTR() &#123;</span><br><span class="line">    let tr = $(&#x27;#test-table&gt;tbody&gt;tr:visible&#x27;).first();</span><br><span class="line">    // TODO:</span><br><span class="line">    tr.remove();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">deleteFirstTR();</span><br></pre></td></tr></table></figure>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">標籤</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="../../../../../tags/JavaScript/" rel="tag">JavaScript</a> <a class="tag tag--primary tag--small t-none-link" href="../../../../../tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="../JavaScript-underscore/"
                    data-tooltip="JavaScript-underscore"
                    aria-label="上一篇: JavaScript-underscore"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="../JavaScript-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"
                    data-tooltip="JavaScript-错误处理"
                    aria-label="下一篇: JavaScript-错误处理"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://chankein.github.io/2025/05/26/JavaScript/JavaScript-jQuery/"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://chankein.github.io/2025/05/26/JavaScript/JavaScript-jQuery/"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://chankein.github.io/2025/05/26/JavaScript/JavaScript-jQuery/"
                    title="global.share_on_linkedin"
                    aria-label="global.share_on_linkedin"
                >
                    <i class="fab fa-linkedin" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://chankein.github.io/2025/05/26/JavaScript/JavaScript-jQuery/"
                    title="分享到 Weibo"
                    aria-label="分享到 Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2025 Kein Chan. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="../JavaScript-underscore/"
                    data-tooltip="JavaScript-underscore"
                    aria-label="上一篇: JavaScript-underscore"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="../JavaScript-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"
                    data-tooltip="JavaScript-错误处理"
                    aria-label="下一篇: JavaScript-错误处理"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://chankein.github.io/2025/05/26/JavaScript/JavaScript-jQuery/"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://chankein.github.io/2025/05/26/JavaScript/JavaScript-jQuery/"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://chankein.github.io/2025/05/26/JavaScript/JavaScript-jQuery/"
                    title="global.share_on_linkedin"
                    aria-label="global.share_on_linkedin"
                >
                    <i class="fab fa-linkedin" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://chankein.github.io/2025/05/26/JavaScript/JavaScript-jQuery/"
                    title="分享到 Weibo"
                    aria-label="分享到 Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://chankein.github.io/2025/05/26/JavaScript/JavaScript-jQuery/"
                        aria-label="分享到 Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>分享到 Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://chankein.github.io/2025/05/26/JavaScript/JavaScript-jQuery/"
                        aria-label="分享到 Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://chankein.github.io/2025/05/26/JavaScript/JavaScript-jQuery/"
                        aria-label="global.share_on_linkedin"
                    >
                        <i class="fab fa-linkedin" aria-hidden="true"></i><span>global.share_on_linkedin</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://service.weibo.com/share/share.php?&amp;title=https://chankein.github.io/2025/05/26/JavaScript/JavaScript-jQuery/"
                        aria-label="分享到 Weibo"
                    >
                        <i class="fab fa-weibo" aria-hidden="true"></i><span>分享到 Weibo</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="../../../../../assets/images/profile.jpg" alt="作者的圖片"/>
        
            <h4 id="about-card-name">Kein Chan</h4>
        
            <div id="about-card-bio"><p>這是獨立全棧工程師Kein Chan的技術博客</br>分享一些技術教程,命令備忘(cheat-sheet)等</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>全棧工程師</br>資深技術顧問</br>數據科學家</br>Hit廣島觀光大使</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Tokyo/Macau
            </div>
        
    </div>
</div>

        
            <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-times"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="../assets/images/logo-algolia-nebula-blue-full.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    />
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">沒有找到文章</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2013/04/27/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85/"
                            aria-label=": R语言-环境安装"
                        >
                            <h3 class="media-heading">R语言-环境安装</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年4月27日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2013/04/28/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E5%9F%BA%E7%A1%80/"
                            aria-label=": R语言-基础"
                        >
                            <h3 class="media-heading">R语言-基础</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年4月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2013/05/01/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE/"
                            aria-label=": R语言-读取数据"
                        >
                            <h3 class="media-heading">R语言-读取数据</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月1日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2013/05/02/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E7%BB%98%E5%9B%BE/"
                            aria-label=": R语言-绘图"
                        >
                            <h3 class="media-heading">R语言-绘图</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月2日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2013/05/03/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/"
                            aria-label=": R语言-线性回归"
                        >
                            <h3 class="media-heading">R语言-线性回归</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月3日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2015/02/22/Algorithms/1.%E7%AE%97%E6%B3%95%E5%9C%A8%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8/"
                            aria-label=": 1. 算法在计算中的作用"
                        >
                            <h3 class="media-heading">1. 算法在计算中的作用</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月22日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2015/02/23/Algorithms/2.%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/"
                            aria-label=": 2. 算法基础"
                        >
                            <h3 class="media-heading">2. 算法基础</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月23日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2015/02/24/Algorithms/3.%E5%87%BD%E6%95%B0%E7%9A%84%E5%A2%9E%E9%95%BF/"
                            aria-label=": 3. 函数的增长"
                        >
                            <h3 class="media-heading">3. 函数的增长</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月24日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2015/02/25/Algorithms/4.%E5%88%86%E6%B2%BB%E7%AD%96%E7%95%A5/"
                            aria-label=": 4. 分治策略"
                        >
                            <h3 class="media-heading">4. 分治策略</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月25日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2015/02/26/Algorithms/5.%E6%A6%82%E7%8E%87%E5%88%86%E6%9E%90%E5%92%8C%E9%9A%8F%E6%9C%BA%E7%AE%97%E6%B3%95/"
                            aria-label=": 5. 概率分析和随机算法"
                        >
                            <h3 class="media-heading">5. 概率分析和随机算法</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月26日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="沒有找到文章"
                data-message-one="找到 1 篇文章"
                data-message-other="找到 {n} 篇文章">
                找到 198 篇文章
            </p>
        </div>
    </div>
</div>

        
        
<div id="cover" style="background-image:url('../../../../../assets/images/cover.jpeg');"></div>
        <!--SCRIPTS-->

<script src="../../../../../assets/js/script-qtzvvb63gamuirvfphht7lytrxkfllzng1escnm2phjtlt4tvvxi5gl0wx4o.min.js"></script>

<!--SCRIPTS END-->


    




    </body>
</html>
