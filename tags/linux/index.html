
<!DOCTYPE html>
<html lang="zh-tw">
    
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css">

    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/min/moment.min.js"></script>
    
      <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/locale/zh-tw.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
    <script>
      window.algoliaConfig = {
        appId: 'AWFC86Q51O',
        apiKey: 'c9d952906eb1b154d75cf863e75c1ede',
        indexName: 'MyBlog'
      };
      var algoliaIndex = algoliasearch(
        algoliaConfig.appId,
        algoliaConfig.apiKey
      ).initIndex(algoliaConfig.indexName);
    </script>


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Kein&#39;s blog">
    <title>標籤: linux - Kein&#39;s blog</title>
    <meta name="author" content="Kein Chan">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Kein&#39;s blog">
<meta property="og:url" content="https://keinchan.com/tags/linux/index.html">
<meta property="og:site_name" content="Kein&#39;s blog">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Kein Chan">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://keinchan.com../../assets/images/profile.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="../../assets/css/style-l9zwheso7r7pnk98nvirovsz9dl7fhkrc9mlb5vmuxw7tk5movrk0eevsrpr.min.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="../../index.html"
            aria-label=""
        >
            Kein&#39;s blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打開鏈接: ../../#about"
            >
        
        
            <img class="header-picture" src="../../assets/images/profile.jpg" alt="作者的圖片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="../../#about"
                    aria-label="閱讀有關作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="../../assets/images/profile.jpg" alt="作者的圖片"/>
                </a>
                <h4 class="sidebar-profile-name">Kein Chan</h4>
                
                    <h5 class="sidebar-profile-bio"><p>這是獨立全棧工程師Kein Chan的技術博客</br>分享一些技術教程,命令備忘(cheat-sheet)等</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../index.html"
                            
                            rel="noopener"
                            title="首頁"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首頁</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../all-categories"
                            
                            rel="noopener"
                            title="分類"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分類</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../all-tags"
                            
                            rel="noopener"
                            title="標籤"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">標籤</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../all-archives"
                            
                            rel="noopener"
                            title="所有文章"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">所有文章</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="搜尋"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜尋</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="關於"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">關於</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/chankein/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../mailto:kein.chan85@gmail.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Email"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Email</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../atom.xml"
                            
                            rel="noopener"
                            title="Atom"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Atom</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../2025/05/15/cheat-sheet/Linux-cheat-sheet/"
                            aria-label=": Linux cheat sheet"
                        >
                            Linux cheat sheet
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2025-05-15T21:37:03+08:00">
	
		    2025 年 5 月 15 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h3 id="linux">linux:</h3>
<p><img src="/assets/images/Linux-Commands_Cheat-Sheet.png" alt="image"></p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../2025/05/15/cheat-sheet/Linux-cheat-sheet/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../2020/11/17/linux/17-%E7%B3%BB%E7%BB%9F%E7%BB%B4%E6%8A%A4/"
                            aria-label=": 17.系统维护"
                        >
                            17.系统维护
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-11-17T14:01:48+08:00">
	
		    2020 年 11 月 17 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1>从源代码安装软件笔记整理</h1>
<h2 id="1-安装C语言开源软件的三个主要步骤">1. 安装C语言开源软件的三个主要步骤</h2>
<ol>
<li>解压源代码</li>
<li>编译成二进制文件</li>
<li>将二进制文件安装到适当的文件夹</li>
</ol>
<h2 id="2-解压源代码">2. 解压源代码</h2>
<h3 id="常用解压命令">常用解压命令</h3>
<table>
<thead>
<tr>
<th>命令格式</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gunzip [文件名]</code></td>
<td>解压.gz文件</td>
</tr>
<tr>
<td><code>gzip [option] [文件名]</code></td>
<td>压缩/解压文件</td>
</tr>
<tr>
<td><code>bunzip [文件名]</code></td>
<td>解压.bz2文件</td>
</tr>
<tr>
<td><code>bzip [option] [文件名]</code></td>
<td>压缩/解压文件</td>
</tr>
</tbody>
</table>
<h3 id="gzip-bzip-选项说明">gzip/bzip 选项说明</h3>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-d</code></td>
<td>解压压缩文件</td>
</tr>
<tr>
<td><code>-c</code></td>
<td>解压压缩文件到标准输出</td>
</tr>
</tbody>
</table>
<h2 id="3-patch命令">3. patch命令</h2>
<p>用于应用补丁文件</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-d 文件夹</code></td>
<td>移动到指定文件夹后处理</td>
</tr>
<tr>
<td><code>-p</code></td>
<td>修正patch文件内的path: <br><code>-p0</code>: 不修正path <br><code>-p1</code>: 删除最初的’/’ <br><code>-p2</code>: 删除下一级文件夹</td>
</tr>
<tr>
<td><code>patch</code></td>
<td>应用补丁</td>
</tr>
<tr>
<td><code>-C</code></td>
<td>测试(不实际应用补丁)</td>
</tr>
<tr>
<td><code>-R</code></td>
<td>取消补丁，恢复到补丁前状态</td>
</tr>
</tbody>
</table>
<h2 id="4-生成Makefile">4. 生成Makefile</h2>
<p>运行config脚本根据环境配置config文件:</p>
<h3 id="config脚本主要选项">config脚本主要选项</h3>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--help</code></td>
<td>显示帮助说明</td>
</tr>
<tr>
<td><code>--prefix=文件夹</code></td>
<td>指定安装目标的top路径</td>
</tr>
</tbody>
</table>
<h2 id="5-编译和安装">5. 编译和安装</h2>
<h3 id="make命令">make命令</h3>
<p>根据当前文件夹内的Makefile编译源代码</p>
<p>基本格式：</p>
<pre><code class="language-bash">make [option] [目标]</code></pre>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../2020/11/17/linux/17-%E7%B3%BB%E7%BB%9F%E7%BB%B4%E6%8A%A4/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../2020/11/16/linux/16-%E7%BD%91%E7%BB%9C/"
                            aria-label=": 16.网络"
                        >
                            16.网络
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-11-16T14:01:40+08:00">
	
		    2020 年 11 月 16 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="1-网络设备管理">1. 网络设备管理</h2>
<h3 id="1-1-网络接口命名规则">1.1 网络接口命名规则</h3>
<table>
<thead>
<tr>
<th>接口名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>eth0</code></td>
<td>第一个 Ethernet 接口</td>
</tr>
<tr>
<td><code>eth1</code></td>
<td>第二个 Ethernet 接口</td>
</tr>
<tr>
<td><code>ppp0</code></td>
<td>第一个 PPP 接口</td>
</tr>
<tr>
<td><code>lo</code></td>
<td>Loopback 接口</td>
</tr>
</tbody>
</table>
<h3 id="1-2-网络设备识别命令">1.2 网络设备识别命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg | grep eth  <span class="comment"># 查看内核识别的网络设备</span></span><br></pre></td></tr></table></figure>
<h3 id="1-3-网络接口配置命令">1.3 网络接口配置命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig [-a] [IF名] [参数]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-a</code></td>
<td>显示所有接口</td>
</tr>
<tr>
<td><code>IF名</code></td>
<td>指定接口名称</td>
</tr>
<tr>
<td><code>IP地址</code></td>
<td>设置 IP 地址</td>
</tr>
<tr>
<td><code>netmask</code></td>
<td>设置子网掩码</td>
</tr>
<tr>
<td><code>up</code></td>
<td>激活接口（等价于 <code>ifup</code>）</td>
</tr>
<tr>
<td><code>down</code></td>
<td>停止接口（等价于 <code>ifdown</code>）</td>
</tr>
</tbody>
</table>
<p><strong>示例</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth0 192.168.120.27 netmask 255.255.255.0 up</span><br></pre></td></tr></table></figure>
<h3 id="1-4-NIC-组合与虚拟网络接口">1.4 NIC 组合与虚拟网络接口</h3>
<ul>
<li><strong>NIC 组合</strong>：允许将多个物理以太网适配器分组为虚拟网络适配器，提高性能和容错能力。</li>
<li><strong>MAC 地址设置</strong>：在 “交换机独立” 模式下，团队会将 MAC 地址设置为出站流量。</li>
<li><strong>IP 别名</strong>：在同一个网卡上分配不同 IP 地址。<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth0:0 192.168.0.1 netmask 255.255.255.0 up</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="2-ARP-协议管理">2. ARP 协议管理</h2>
<h3 id="2-1-ARP-协议简介">2.1 ARP 协议简介</h3>
<p>ARP (Address Resolution Protocol) 用于将 IP 地址解析为 MAC 地址。</p>
<h3 id="2-2-ARP-命令">2.2 ARP 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arp [option]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-a [host]</code></td>
<td>显示指定主机或全部 ARP 表</td>
</tr>
<tr>
<td><code>-f 文件名</code></td>
<td>从文件读取主机:MAC 对应表</td>
</tr>
<tr>
<td><code>-n</code></td>
<td>显示 IP 地址而非主机名</td>
</tr>
<tr>
<td><code>-d [host]</code></td>
<td>删除指定主机的 ARP 记录</td>
</tr>
<tr>
<td><code>-i [IF名]</code></td>
<td>指定接口</td>
</tr>
<tr>
<td><code>-s [host] [MAC地址]</code></td>
<td>添加主机和 MAC 地址的对应关系</td>
</tr>
</tbody>
</table>
<p><strong>示例</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arp -s h001.example.com 00:01:02:03:04:05</span><br></pre></td></tr></table></figure>
<h3 id="2-3-ARP-监视工具">2.3 ARP 监视工具</h3>
<ul>
<li><code>arpwatch</code>：监视网络中的 ARP 活动。</li>
</ul>
<h2 id="3-网络管理命令">3. 网络管理命令</h2>
<h3 id="3-1-Ping-命令">3.1 Ping 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping [host名或IP] [option]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-n</code></td>
<td>不解析主机名，显示 IP 地址</td>
</tr>
<tr>
<td><code>-c 次数</code></td>
<td>发送指定次数的 ICMP 包</td>
</tr>
<tr>
<td><code>-i 间隔</code></td>
<td>按指定间隔发送 ICMP 包</td>
</tr>
</tbody>
</table>
<p><strong>示例</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping -c 4 192.168.1.1</span><br></pre></td></tr></table></figure>
<h3 id="3-2-Traceroute-命令">3.2 Traceroute 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">traceroute [option] [host名或IP]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-i [IF]</code></td>
<td>指定接口</td>
</tr>
<tr>
<td><code>-n</code></td>
<td>显示 IP 地址而非主机名</td>
</tr>
</tbody>
</table>
<h3 id="3-3-Tcpdump-命令">3.3 Tcpdump 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump [option] [条件式]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-i IF名</code></td>
<td>指定监视的接口</td>
</tr>
<tr>
<td><code>-s 比特数</code></td>
<td>指定从包中提取的比特数</td>
</tr>
<tr>
<td><code>-X</code></td>
<td>显示十六进制和 ASCII 文本</td>
</tr>
<tr>
<td><code>-n</code></td>
<td>不解析 ARP 地址</td>
</tr>
<tr>
<td><code>-l</code></td>
<td>缓存标准输出</td>
</tr>
<tr>
<td><code>-t</code></td>
<td>不显示时间</td>
</tr>
<tr>
<td><code>-v</code></td>
<td>显示详细信息</td>
</tr>
</tbody>
</table>
<p><strong>条件式</strong>:</p>
<ul>
<li><code>port</code>：指定端口</li>
</ul>
<p><strong>示例</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -nli eth0 port 53</span><br></pre></td></tr></table></figure>
<h3 id="3-4-Wireshark">3.4 Wireshark</h3>
<ul>
<li>图形化网络监视工具。</li>
</ul>
<h3 id="3-5-Netstat-命令">3.5 Netstat 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat [option]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-a</code></td>
<td>显示所有 socket</td>
</tr>
<tr>
<td><code>-c</code></td>
<td>每秒刷新</td>
</tr>
<tr>
<td><code>-i</code></td>
<td>显示接口状态</td>
</tr>
<tr>
<td><code>-l</code></td>
<td>只显示监听状态的端口</td>
</tr>
<tr>
<td><code>-n</code></td>
<td>显示地址和端口</td>
</tr>
<tr>
<td><code>-p</code></td>
<td>显示 PID 和进程</td>
</tr>
<tr>
<td><code>-r</code></td>
<td>显示路由表</td>
</tr>
<tr>
<td><code>-t</code></td>
<td>显示 TCP 连接</td>
</tr>
<tr>
<td><code>-u</code></td>
<td>显示 UDP 连接</td>
</tr>
</tbody>
</table>
<h3 id="3-6-IP-命令">3.6 IP 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip [option] 操作对象 [命令] [设备]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-s</code></td>
<td>显示状态</td>
</tr>
<tr>
<td><code>-r</code></td>
<td>解析名称</td>
</tr>
</tbody>
</table>
<p><strong>操作对象</strong>:</p>
<ul>
<li><code>link</code>：接口详细信息</li>
<li><code>addr</code>：IP 地址</li>
<li><code>route</code>：路由表</li>
<li><code>neigh</code>：ARP 缓存</li>
</ul>
<p><strong>命令</strong>:</p>
<ul>
<li><code>show</code>：显示指定对象</li>
<li><code>add</code>：设置指定对象的参数</li>
</ul>
<p><strong>示例</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="built_in">link</span> show eth0</span><br></pre></td></tr></table></figure>
<h2 id="4-路由设置">4. 路由设置</h2>
<h3 id="4-1-Route-命令">4.1 Route 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">route [option]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-n</code></td>
<td>不解析主机名</td>
</tr>
<tr>
<td><code>-F</code></td>
<td>显示内核路由表</td>
</tr>
<tr>
<td><code>-C</code></td>
<td>显示内核路由缓存</td>
</tr>
</tbody>
</table>
<p><strong>路由表项目</strong>:</p>
<ul>
<li><code>Destination</code>：目标网络或主机</li>
<li><code>Gateway</code>：网关</li>
<li><code>Genmask</code>：目标子网掩码</li>
<li><code>Flags</code>：路由状态（U:有效, H:目标主机, G:使用网关, !:无效）</li>
<li><code>Metric</code>：到达目标的距离</li>
<li><code>Ref</code>：路由引用数</li>
<li><code>Use</code>：路径引用次数</li>
<li><code>Iface</code>：使用的接口</li>
</ul>
<p><strong>示例</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">route add -net 192.168.100.0 netmask 255.255.255.0 gw 172.16.0.1</span><br><span class="line">route add default gw 192.168.0.50</span><br><span class="line">route del -net 192.168.100.0 netmask 255.255.255.0 gw 172.16.0.1</span><br></pre></td></tr></table></figure>
<h2 id="5-无线网络设置">5. 无线网络设置</h2>
<h3 id="5-1-无线规格与安全标准">5.1 无线规格与安全标准</h3>
<table>
<thead>
<tr>
<th>规格</th>
<th>频率</th>
<th>传送速度</th>
</tr>
</thead>
<tbody>
<tr>
<td>IEEE 802.11a</td>
<td>5.2GHz</td>
<td>54Mbps</td>
</tr>
<tr>
<td>IEEE 802.11b</td>
<td>2.4GHz</td>
<td>11Mbps</td>
</tr>
<tr>
<td>IEEE 802.11g</td>
<td>2.4GHz</td>
<td>54Mbps</td>
</tr>
<tr>
<td>IEEE 802.11n</td>
<td>2.4GHz/5GHz</td>
<td>600Mbps</td>
</tr>
<tr>
<td>IEEE 802.11ac</td>
<td>5GHz</td>
<td>433Mbps~7Gbps</td>
</tr>
</tbody>
</table>
<p><strong>安全标准</strong>:</p>
<ul>
<li><strong>WEP</strong>：使用 RC4 算法，存在漏洞。</li>
<li><strong>WPA</strong>：多种加密技术（TKIP, AES），用户认证由 IEEE 802.1x 等实现。WPA-AES 比 WPA-TKIP 更安全。</li>
</ul>
<h3 id="5-2-无线接口状态确认">5.2 无线接口状态确认</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iwconfig [wlanN] [essid ESSID] [key [s:]WEP key]</span><br></pre></td></tr></table></figure>
<p><strong>示例</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iwconfig wlan0 essid <span class="string">&quot;windsor&quot;</span></span><br><span class="line">iwconfig wlan0 key s:abc12345</span><br></pre></td></tr></table></figure>
<h3 id="5-3-获取无线接口信息">5.3 获取无线接口信息</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iwlist [无线IF] [参数]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>scanning [essid ID]</code></td>
<td>显示可接入的热点列表</td>
</tr>
<tr>
<td><code>channel</code></td>
<td>显示可设置的频道</td>
</tr>
<tr>
<td><code>rate</code></td>
<td>显示传送速度</td>
</tr>
</tbody>
</table>
<h2 id="6-高级网络设置">6. 高级网络设置</h2>
<h3 id="6-1-网络相关文件">6.1 网络相关文件</h3>
<table>
<thead>
<tr>
<th>文件</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/etc/hostname</code></td>
<td>记录主机名</td>
</tr>
<tr>
<td><code>/etc/hosts</code></td>
<td>记录主机名、别名和 IP 的对应关系</td>
</tr>
<tr>
<td><code>/etc/networks</code></td>
<td>记录网络和 IP 的对应关系</td>
</tr>
<tr>
<td><code>/etc/nsswitch.conf</code></td>
<td>规定信息查找顺序</td>
</tr>
<tr>
<td><code>/etc/resolv.conf</code></td>
<td>记录 DNS 服务器和域名</td>
</tr>
<tr>
<td><code>/etc/sysconfig/network</code></td>
<td>网络功能、主机名、默认网关等设置</td>
</tr>
<tr>
<td><code>/etc/sysconfig/network-scripts/</code></td>
<td>存放网络接口设置文件</td>
</tr>
<tr>
<td><code>/etc/network/interfaces</code></td>
<td>Debian 系统的网络接口设置文件</td>
</tr>
</tbody>
</table>
<h3 id="6-2-配置文件示例">6.2 配置文件示例</h3>
<p><strong>/etc/sysconfig/network-scripts/ifcfg-eth0</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DEVICE=eth0</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">IPADDR=192.168.0.6</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">NETWORK=192.168.0.0</span><br><span class="line">BROADCAST=192.168.0.255</span><br><span class="line">ONBOOT=<span class="built_in">yes</span></span><br></pre></td></tr></table></figure>
<p><strong>/etc/network/interfaces (Debian)</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">auto lo</span><br><span class="line">iface lo inet loopback</span><br><span class="line">allow-hotplug eth0</span><br><span class="line">iface eth0 inet static </span><br><span class="line">    address 192.168.0.6</span><br><span class="line">    netmask 255.255.255.0</span><br><span class="line">    gateway 192.168.0.1</span><br><span class="line">    dns-domain example.com</span><br><span class="line">    dns-nameservers 192.168.1.1</span><br></pre></td></tr></table></figure>
<h2 id="7-网络问题排查">7. 网络问题排查</h2>
<h3 id="7-1-排查步骤">7.1 排查步骤</h3>
<ol>
<li>
<p><strong>Ping 测试</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ping 172.16.0.1</span><br><span class="line">ping h001.s16.la.net</span><br></pre></td></tr></table></figure>
<ul>
<li>如果 IP 能 Ping 通，但主机名失败，可能是 DNS 问题，检查 <code>/etc/resolv.conf</code>。</li>
</ul>
</li>
<li>
<p><strong>局域网连通但无法访问互联网</strong>：</p>
<ul>
<li>检查默认网关或路由表：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">route</span><br></pre></td></tr></table></figure>
</li>
<li>如果没有默认路由，添加默认网关：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">route add default gw 172.16.0.1</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>网络连接不通</strong>：</p>
<ul>
<li>使用 <code>traceroute</code> 或 <code>tracepath</code> 查看路径：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">traceroute www.lpi.jp</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>网络接口问题</strong>：</p>
<ul>
<li>检查网卡状态：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig</span><br></pre></td></tr></table></figure>
</li>
<li>如果只显示 <code>lo</code>，启动接口：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ifup eth0</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">ifconfig eth0 up</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h3 id="7-2-需要确认的配置文件">7.2 需要确认的配置文件</h3>
<table>
<thead>
<tr>
<th>文件</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/etc/resolv.conf</code></td>
<td>DNS 服务器设置</td>
</tr>
<tr>
<td><code>/etc/sysconfig/network-scripts/*</code></td>
<td>网络接口设置（RHEL/CentOS）</td>
</tr>
<tr>
<td><code>/etc/network/interfaces</code></td>
<td>网络接口设置（Debian）</td>
</tr>
<tr>
<td><code>/etc/hosts.allow</code>, <code>/etc/hosts.deny</code></td>
<td>连接控制</td>
</tr>
</tbody>
</table>
<hr>
<p><strong>补充说明</strong>：</p>
<ul>
<li><strong>IP 别名</strong>：允许在同一个网卡上分配多个 IP 地址，常用于服务器提供多种服务。</li>
<li><strong>ARP 缓存</strong>：存储 IP 地址与 MAC 地址的映射关系，可通过 <code>arp -d</code> 手动清除缓存。</li>
<li><strong>无线安全</strong>：建议使用 WPA2 或 WPA3 加密方式，避免使用不安全的 WEP。</li>
<li><strong>路由表</strong>：理解目标网络、网关、子网掩码和接口的关系，确保数据包正确转发。</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../2020/11/16/linux/16-%E7%BD%91%E7%BB%9C/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../2020/11/15/linux/15-%E9%AB%98%E5%BA%A6%E7%9A%84%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/"
                            aria-label=": 15.高度的存储管理"
                        >
                            15.高度的存储管理
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-11-15T14:01:30+08:00">
	
		    2020 年 11 月 15 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1>1. RAID (冗余磁盘阵列)</h1>
<p>RAID（Redundant Arrays of Inexpensive Disks）是一种将多个硬盘组合以提高性能或数据冗余的技术。</p>
<h2 id="Linux-上的-RAID">Linux 上的 RAID</h2>
<p>在 Linux 上应用 RAID，有软件 RAID 和硬件 RAID 之分。通常，硬件 RAID 会被视作 SCSI 设备。</p>
<h2 id="RAID-各个等级：">RAID 各个等级：</h2>
<ul>
<li>
<p><strong>RAID 0 (条带化)</strong></p>
<ul>
<li>多个硬盘组合成一个大磁盘，没有备份，提供较好的性能但没有容灾能力。</li>
<li>示例：三台 100GB 硬盘组成一个 300GB 的 RAID 0。</li>
</ul>
</li>
<li>
<p><strong>RAID 1 (镜像)</strong></p>
<ul>
<li>多台硬盘写入相同数据，提供冗余备份。</li>
<li>示例：三个 100GB 硬盘组成一个 100GB 的 RAID 1。</li>
</ul>
</li>
<li>
<p><strong>RAID 4</strong></p>
<ul>
<li>至少需要 3 台硬盘，其中一台用作备份分区。性能瓶颈在于备份分区。</li>
<li>示例：三个 100GB 硬盘组成一个 200GB 的 RAID 4。</li>
</ul>
</li>
<li>
<p><strong>RAID 5</strong></p>
<ul>
<li>使用分布式备份技术，性能较 RAID 4 好，且不需要专门的备份硬盘。</li>
<li>示例：三个 100GB 硬盘组成一个 200GB 的 RAID 5。</li>
</ul>
</li>
<li>
<p><strong>其他 RAID 等级：</strong></p>
<ul>
<li><strong>RAID LINEAR</strong>：类似 RAID 0。</li>
<li><strong>RAID 0+1 (RAID01)</strong>：RAID 0 组成的 RAID 1。</li>
<li><strong>RAID 10 (RAID+0)</strong>：RAID 1 组成的 RAID 0。</li>
<li><strong>RAID 6</strong>：比 RAID 5 多一台备份区。</li>
</ul>
</li>
</ul>
<h2 id="mdadm-命令控制-RAID-阵列"><code>mdadm</code> 命令控制 RAID 阵列</h2>
<p><code>mdadm [option] [设备名]</code></p>
<h3 id="常用选项：">常用选项：</h3>
<table>
<thead>
<tr>
<th>选项</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-C</code>, <code>--create</code></td>
<td>创建 RAID 阵列并生成相关设备</td>
</tr>
<tr>
<td><code>-a</code></td>
<td>自动生成必要的设备文件</td>
</tr>
<tr>
<td><code>-c</code></td>
<td>指定 Chunk 大小</td>
</tr>
<tr>
<td><code>-l</code>, <code>--level</code></td>
<td>指定 RAID 级别</td>
</tr>
<tr>
<td><code>-n</code>, <code>--raid-devices</code></td>
<td>指定 RAID 阵列中的设备数量</td>
</tr>
<tr>
<td><code>-x</code>, <code>--spare-devices</code></td>
<td>指定备用设备数量</td>
</tr>
<tr>
<td><code>--manage</code></td>
<td>管理 RAID 阵列</td>
</tr>
<tr>
<td><code>-a</code>, <code>--add</code></td>
<td>添加设备</td>
</tr>
<tr>
<td><code>-r</code>, <code>--remove</code></td>
<td>删除设备</td>
</tr>
<tr>
<td><code>-f</code>, <code>--fail</code></td>
<td>标记设备为失效</td>
</tr>
<tr>
<td><code>--query</code></td>
<td>查询 RAID 状态</td>
</tr>
<tr>
<td><code>--detail</code></td>
<td>查看 RAID 详细状态</td>
</tr>
<tr>
<td><code>--stop</code></td>
<td>停止指定的 RAID 阵列</td>
</tr>
<tr>
<td><code>--stop --scan</code></td>
<td>停止所有 RAID 阵列</td>
</tr>
</tbody>
</table>
<hr>
<h1>2. LVM (逻辑卷管理)</h1>
<p>LVM 是 Linux 下的一种磁盘管理工具，可以灵活地管理硬盘、分区和逻辑卷。</p>
<h3 id="LVM-结构：">LVM 结构：</h3>
<ol>
<li><strong>PV (Physical Volume)</strong>：一个硬盘或一个分区作为物理空间。</li>
<li><strong>PE (Physical Extent)</strong>：PV 组成 PE。</li>
<li><strong>VG (Volume Group)</strong>：PE 组成 VG。</li>
<li><strong>LV (Logical Volume)</strong>：VG 内的 PE 分配为 LV。</li>
</ol>
<h3 id="创建-LVM：">创建 LVM：</h3>
<ol>
<li>
<p>准备 LVM 用的分区：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fdisk /dev/sda</span><br><span class="line">fdisk /dev/sdb</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>初始化 PV：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pvcreate /dev/sda1 /dev/sdb1</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>创建 VG：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vgcreate testvg /dev/sda1 /dev/sdb1</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>创建 LV：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lvcreate -L 1G -n lv01 testvg</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>创建文件系统并挂载：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mke2fs -j /dev/testvg/lv01</span><br><span class="line">mount /dev/testvg/lv01 /mnt</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="管理-LVM：">管理 LVM：</h3>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pvdisplay</code></td>
<td>显示物理 PV 信息</td>
</tr>
<tr>
<td><code>pvscan</code></td>
<td>显示 PV 状态</td>
</tr>
<tr>
<td><code>pvmove</code></td>
<td>移动 PV 中的 PE</td>
</tr>
<tr>
<td><code>pvremove</code></td>
<td>删除 PV</td>
</tr>
<tr>
<td><code>vgextend</code></td>
<td>扩展 VG</td>
</tr>
<tr>
<td><code>vgreduce</code></td>
<td>缩小 VG</td>
</tr>
<tr>
<td><code>vgdisplay</code></td>
<td>显示 VG 详情</td>
</tr>
<tr>
<td><code>lvdisplay</code></td>
<td>显示 LV 详情</td>
</tr>
<tr>
<td><code>lvextend</code></td>
<td>扩展 LV</td>
</tr>
<tr>
<td><code>lvreduce</code></td>
<td>缩小 LV</td>
</tr>
<tr>
<td><code>lvremove</code></td>
<td>删除 LV</td>
</tr>
<tr>
<td><code>lvcreate -s</code></td>
<td>创建快照</td>
</tr>
</tbody>
</table>
<hr>
<h1>3. 访问记忆装置</h1>
<h3 id="设备文件说明：">设备文件说明：</h3>
<table>
<thead>
<tr>
<th>设备文件</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/dev/hda</code></td>
<td>IDE 主硬盘</td>
</tr>
<tr>
<td><code>/dev/hdb</code></td>
<td>IDE 从硬盘</td>
</tr>
<tr>
<td><code>/dev/sda</code></td>
<td>第一个 SCSI/STAT/USB 硬盘</td>
</tr>
<tr>
<td><code>/dev/sdb</code></td>
<td>第二个 SCSI/STAT/USB 硬盘</td>
</tr>
<tr>
<td><code>/dev/sr0</code></td>
<td>第一个 SCSI/STAT/USB CD/DVD</td>
</tr>
<tr>
<td><code>/dev/st0</code></td>
<td>第一个 SCSI 磁带设备</td>
</tr>
</tbody>
</table>
<h3 id="硬盘管理：">硬盘管理：</h3>
<p>Linux 将 IDE 以外的硬盘识别为 SCSI 设备。硬盘的数据传送模式有 PIO（Programmed I/O）和 DMA（Direct Memory Access）模式。通常使用 DMA 模式。</p>
<h3 id="检查-DMA-模式：">检查 DMA 模式：</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdparm -i /dev/sda</span><br></pre></td></tr></table></figure>
<h3 id="硬盘控制：">硬盘控制：</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hdparm -d1 /dev/sda  <span class="comment"># 启用 DMA 模式</span></span><br></pre></td></tr></table></figure>
<h3 id="使用-SCSI-STAT-USB：">使用 SCSI/STAT/USB：</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sdparm [option] [设备文件]</span><br></pre></td></tr></table></figure>
<hr>
<h1>4. iSCSI (Internet Small Computer System Interface)</h1>
<p>iSCSI 是基于 TCP/IP 的 SCSI 协议，可以使远程存储设备像本地设备一样使用。</p>
<h2 id="iSCSI-配置步骤：">iSCSI 配置步骤：</h2>
<ol>
<li>
<p>配置 <code>targets.conf</code> 文件：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">target</span> <span class="attr">iqn.2014.01.com.example.lpic:target0</span>&gt;</span></span><br><span class="line">   backing-store /dev/sdb2</span><br><span class="line">   initiator-address 192.168.11.2</span><br><span class="line">   initiator-address 192.168.11.4</span><br><span class="line">   incominguser centuser password</span><br><span class="line"><span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>启动 iSCSI target 服务：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service tgtd start</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>使用 <code>tgtadm</code> 命令查看 target 状态：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tgtadm --mode target --op show</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>使用 <code>iscsiadm</code> 从 initiator 查询 target：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iscsiadm -m discovery -t sendtargets -p 192.168.11.3</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>配置认证方式：<br>
修改 <code>/etc/iscsi/iscid.conf</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node.session.auth.authmethod = CHAP</span><br><span class="line">node.session.auth.username = centuser</span><br><span class="line">node.session.auth.password = password</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>登录 iSCSI：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iscsiadm -m node --login</span><br></pre></td></tr></table></figure>
<p>登录后，使用 <code>cat /proc/partitions</code> 查看 iSCSI 目标是否添加成功。</p>
</li>
</ol>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../2020/11/15/linux/15-%E9%AB%98%E5%BA%A6%E7%9A%84%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../2020/11/14/linux/14-%E8%AE%BE%E5%A4%87%E5%92%8C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"
                            aria-label=": 14.设备和文件系统"
                        >
                            14.设备和文件系统
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-11-14T14:01:10+08:00">
	
		    2020 年 11 月 14 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="1-文件系统基础">1. 文件系统基础</h2>
<h3 id="etc-fstab-文件格式解析">/etc/fstab 文件格式解析</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">设备/标签/UUID  挂载点  文件系统类型  挂载选项  dump标志  fsck顺序</span><br></pre></td></tr></table></figure>
<p><strong>字段说明：</strong></p>
<table>
<thead>
<tr>
<th>字段</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>设备标识</td>
<td>/dev/sda1, UUID=xxxx, LABEL=root</td>
</tr>
<tr>
<td>2</td>
<td>挂载路径</td>
<td>/, /home, /boot</td>
</tr>
<tr>
<td>3</td>
<td>文件系统类型</td>
<td>ext4, xfs, nfs</td>
</tr>
<tr>
<td>4</td>
<td>挂载选项</td>
<td>defaults, noatime</td>
</tr>
<tr>
<td>5</td>
<td>dump备份标志</td>
<td>0(不备份), 1(备份)</td>
</tr>
<tr>
<td>6</td>
<td>fsck检查顺序</td>
<td>0(不检查), 1(优先), 2(次级)</td>
</tr>
</tbody>
</table>
<h3 id="文件系统类型对比">文件系统类型对比</h3>
<table>
<thead>
<tr>
<th>类型</th>
<th>特点</th>
<th>适用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>ext4</td>
<td>日志式, 最大16TB文件</td>
<td>通用Linux系统</td>
</tr>
<tr>
<td>XFS</td>
<td>高性能, 最大8EB文件</td>
<td>大文件处理</td>
</tr>
<tr>
<td>Btrfs</td>
<td>写时复制, 快照功能</td>
<td>高级存储需求</td>
</tr>
<tr>
<td>FAT32</td>
<td>兼容性好</td>
<td>U盘/移动设备</td>
</tr>
<tr>
<td>NTFS</td>
<td>Windows兼容</td>
<td>双系统共享分区</td>
</tr>
</tbody>
</table>
<h3 id="常用挂载选项">常用挂载选项</h3>
<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
<th>性能影响</th>
</tr>
</thead>
<tbody>
<tr>
<td>async</td>
<td>异步写入</td>
<td>提升性能</td>
</tr>
<tr>
<td>noatime</td>
<td>不更新访问时间</td>
<td>显著提升</td>
</tr>
<tr>
<td>nodiratime</td>
<td>不更新目录访问时间</td>
<td>小幅提升</td>
</tr>
<tr>
<td>discard</td>
<td>TRIM支持(SSD)</td>
<td>延长SSD寿命</td>
</tr>
<tr>
<td>data=writeback</td>
<td>ext4日志模式</td>
<td>性能最佳</td>
</tr>
</tbody>
</table>
<p><strong>查看支持的文件系统：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /proc/filesystems</span><br></pre></td></tr></table></figure>
<p><strong>查看已挂载文件系统：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/mtab   <span class="comment"># 或</span></span><br><span class="line"><span class="built_in">cat</span> /proc/mounts</span><br></pre></td></tr></table></figure>
<h2 id="2-挂载管理命令">2. 挂载管理命令</h2>
<h3 id="mount-命令详解">mount 命令详解</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount [选项] [设备] [挂载点]</span><br></pre></td></tr></table></figure>
<p><strong>常用选项：</strong></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-t</td>
<td>指定文件系统类型</td>
</tr>
<tr>
<td>-o</td>
<td>指定挂载选项(多选项用逗号分隔)</td>
</tr>
<tr>
<td>-a</td>
<td>挂载/etc/fstab中所有文件系统</td>
</tr>
<tr>
<td>–bind</td>
<td>目录绑定挂载</td>
</tr>
<tr>
<td>-l</td>
<td>显示标签</td>
</tr>
</tbody>
</table>
<p><strong>示例：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -t ext4 -o noatime /dev/sdb1 /mnt/data</span><br></pre></td></tr></table></figure>
<h3 id="umount-命令">umount 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umount [选项] [设备|挂载点]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a</td>
<td>卸载所有文件系统</td>
</tr>
<tr>
<td>-t</td>
<td>按类型卸载</td>
</tr>
<tr>
<td>-l</td>
<td>延迟卸载(强制)</td>
</tr>
<tr>
<td>-f</td>
<td>强制卸载</td>
</tr>
</tbody>
</table>
<p><strong>强制卸载流程：</strong></p>
<ol>
<li><code>fuser -vm /mountpoint</code> 查看占用进程</li>
<li><code>kill -9 PID</code> 结束进程</li>
<li><code>umount -f /mountpoint</code></li>
</ol>
<h2 id="3-SWAP-管理">3. SWAP 管理</h2>
<h3 id="创建SWAP文件">创建SWAP文件</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建1GB交换文件</span></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/zero of=/swapfile bs=1M count=1024</span><br><span class="line"><span class="built_in">chmod</span> 600 /swapfile</span><br><span class="line">mkswap /swapfile</span><br><span class="line">swapon /swapfile</span><br></pre></td></tr></table></figure>
<h3 id="SWAP管理命令">SWAP管理命令</h3>
<table>
<thead>
<tr>
<th>命令</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>swapon -a</code></td>
<td>启用所有swap</td>
</tr>
<tr>
<td><code>swapon -s</code></td>
<td>查看swap使用</td>
</tr>
<tr>
<td><code>swapoff -a</code></td>
<td>禁用所有swap</td>
</tr>
</tbody>
</table>
<p><strong>优化建议：</strong></p>
<ul>
<li>物理内存&lt;8GB时，SWAP=1.5倍内存</li>
<li>物理内存≥8GB时，SWAP=8GB</li>
</ul>
<h2 id="4-文件系统创建与维护">4. 文件系统创建与维护</h2>
<h3 id="创建工具对比">创建工具对比</h3>
<table>
<thead>
<tr>
<th>命令</th>
<th>对应文件系统</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td>mkfs.ext4</td>
<td>ext4</td>
<td>默认日志模式</td>
</tr>
<tr>
<td>mkfs.xfs</td>
<td>XFS</td>
<td>高性能大文件</td>
</tr>
<tr>
<td>mkfs.btrfs</td>
<td>Btrfs</td>
<td>高级功能支持</td>
</tr>
</tbody>
</table>
<p><strong>ext4创建示例：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.ext4 -b 4096 -m 1 -L DATA /dev/sdb1</span><br></pre></td></tr></table></figure>
<p><strong>XFS创建示例：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.xfs -f -L BIGDATA /dev/sdc1</span><br></pre></td></tr></table></figure>
<h3 id="文件系统检查">文件系统检查</h3>
<p><strong>ext系列检查：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fsck -y /dev/sda1   <span class="comment"># 自动修复</span></span><br><span class="line">e2fsck -f /dev/sda1 <span class="comment"># 强制检查</span></span><br></pre></td></tr></table></figure>
<p><strong>XFS检查：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xfs_repair /dev/sdb1</span><br></pre></td></tr></table></figure>
<p><strong>检查时机：</strong></p>
<ul>
<li>异常关机后</li>
<li>定期维护时(建议每6个月)</li>
<li>出现I/O错误时</li>
</ul>
<h2 id="5-高级文件系统特性">5. 高级文件系统特性</h2>
<h3 id="ext4-特性管理">ext4 特性管理</h3>
<p><strong>转换ext3→ext4：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tune2fs -O extent,uninit_bg,dir_index /dev/sda1</span><br><span class="line">fsck -pf /dev/sda1</span><br></pre></td></tr></table></figure>
<p><strong>调整参数：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tune2fs -c 30 -i 7d /dev/sda1  <span class="comment"># 每30次挂载或7天检查</span></span><br><span class="line">tune2fs -m 5 /dev/sda1         <span class="comment"># 保留5%空间</span></span><br></pre></td></tr></table></figure>
<h3 id="XFS-高级功能">XFS 高级功能</h3>
<p><strong>查看信息：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xfs_info /dev/sdb1</span><br><span class="line">xfs_admin -l /dev/sdb1</span><br></pre></td></tr></table></figure>
<p><strong>备份恢复：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xfsdump -l 0 -f /backup/root.xfsdump /dev/sda1</span><br><span class="line">xfsrestore -f /backup/root.xfsdump /mnt/restore</span><br></pre></td></tr></table></figure>
<h2 id="6-光盘与加密文件系统">6. 光盘与加密文件系统</h2>
<h3 id="光盘制作">光盘制作</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建ISO</span></span><br><span class="line">mkisofs -JR -V <span class="string">&quot;BACKUP_2023&quot;</span> -o backup.iso /backup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 刻录光盘</span></span><br><span class="line">cdrecord -v dev=1,0,0 speed=24 backup.iso</span><br></pre></td></tr></table></figure>
<h3 id="加密文件系统">加密文件系统</h3>
<p><strong>LUKS加密：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cryptsetup luksFormat /dev/sdb1</span><br><span class="line">cryptsetup luksOpen /dev/sdb1 secret</span><br><span class="line">mkfs.ext4 /dev/mapper/secret</span><br><span class="line">mount /dev/mapper/secret /mnt/secure</span><br></pre></td></tr></table></figure>
<p><strong>关闭加密卷：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">umount /mnt/secure</span><br><span class="line">cryptsetup luksClose secret</span><br></pre></td></tr></table></figure>
<h2 id="7-磁盘健康监控">7. 磁盘健康监控</h2>
<h3 id="S-M-A-R-T-监控">S.M.A.R.T. 监控</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">smartctl -a /dev/sda          <span class="comment"># 查看详细信息</span></span><br><span class="line">smartctl -H /dev/sda          <span class="comment"># 健康状态</span></span><br><span class="line">smartctl -t long /dev/sda     <span class="comment"># 启动长测试</span></span><br></pre></td></tr></table></figure>
<p><strong>关键监控指标：</strong></p>
<ul>
<li>Reallocated_Sector_Ct</li>
<li>Current_Pending_Sector</li>
<li>Temperature_Celsius</li>
</ul>
<h2 id="8-故障处理流程">8. 故障处理流程</h2>
<h3 id="文件系统修复步骤">文件系统修复步骤</h3>
<ol>
<li>
<p><strong>卸载文件系统</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umount /dev/sda1</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>进入单用户模式</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">init 1</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>执行检查修复</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fsck -y /dev/sda1</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><strong>严重损坏时</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">debugfs /dev/sda1</span><br><span class="line">&gt; lsdel      <span class="comment"># 查看已删除inode</span></span><br><span class="line">&gt; dump &lt;inode&gt; /tmp/recover_file</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="应急恢复方案">应急恢复方案</h3>
<table>
<thead>
<tr>
<th>问题现象</th>
<th>解决方案</th>
</tr>
</thead>
<tbody>
<tr>
<td>无法挂载</td>
<td><code>fsck -y /dev/sdX</code></td>
</tr>
<tr>
<td>Superblock损坏</td>
<td><code>e2fsck -b 32768 /dev/sdX</code></td>
</tr>
<tr>
<td>只读文件系统</td>
<td><code>mount -o remount,rw /</code></td>
</tr>
</tbody>
</table>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../2020/11/14/linux/14-%E8%AE%BE%E5%A4%87%E5%92%8C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../2020/11/10/linux/13-%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8/"
                            aria-label=": 13.系统启动"
                        >
                            13.系统启动
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-11-10T14:01:10+08:00">
	
		    2020 年 11 月 10 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="1-系统启动流程">1. 系统启动流程</h2>
<h3 id="1-1-启动阶段详解">1.1 启动阶段详解</h3>
<table>
<thead>
<tr>
<th>阶段</th>
<th>组件</th>
<th>功能说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>BIOS</td>
<td>- 硬件自检(POST)<br>- 读取CMOS设置<br>- 检测启动设备顺序<br>- 加载MBR中的BootLoader</td>
</tr>
<tr>
<td>2</td>
<td>MBR</td>
<td>- 512字节(启动代码+分区表)<br>- 包含第一阶段BootLoader<br>- 标识活动分区</td>
</tr>
<tr>
<td>3</td>
<td>BootLoader</td>
<td>- 阶段1: MBR中的初始代码<br>- 阶段1.5: 文件系统识别<br>- 阶段2: 加载内核(/boot/grub/)</td>
</tr>
<tr>
<td>4</td>
<td>内核</td>
<td>- 硬件检测与初始化<br>- 加载驱动模块<br>- 挂载根文件系统<br>- 启动init进程(PID=1)</td>
</tr>
<tr>
<td>5</td>
<td>init进程</td>
<td>- 根据/etc/inittab初始化系统<br>- 启动运行级别对应服务<br>- 生成所有后续进程</td>
</tr>
</tbody>
</table>
<h3 id="1-2-inittab-文件格式">1.2 inittab 文件格式</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id:runlevels:action:process</span><br></pre></td></tr></table></figure>
<h4 id="主要action类型">主要action类型</h4>
<table>
<thead>
<tr>
<th>action</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>boot</td>
<td>系统启动时执行，不等待完成</td>
</tr>
<tr>
<td>bootwait</td>
<td>系统启动时执行，等待完成</td>
</tr>
<tr>
<td>ctrlaltdel</td>
<td>捕获Ctrl+Alt+Del组合键</td>
</tr>
<tr>
<td>initdefault</td>
<td>设置默认运行级别</td>
</tr>
<tr>
<td>once</td>
<td>进入运行级别时执行一次</td>
</tr>
<tr>
<td>respawn</td>
<td>进程终止后自动重启</td>
</tr>
<tr>
<td>sysinit</td>
<td>系统初始化脚本</td>
</tr>
<tr>
<td>wait</td>
<td>进入运行级别时执行并等待</td>
</tr>
</tbody>
</table>
<h3 id="1-3-运行级别管理">1.3 运行级别管理</h3>
<h4 id="标准运行级别">标准运行级别</h4>
<table>
<thead>
<tr>
<th>级别</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>关机</td>
</tr>
<tr>
<td>1/S</td>
<td>单用户模式</td>
</tr>
<tr>
<td>2</td>
<td>多用户无NFS</td>
</tr>
<tr>
<td>3</td>
<td>完整多用户模式</td>
</tr>
<tr>
<td>4</td>
<td>自定义</td>
</tr>
<tr>
<td>5</td>
<td>图形界面</td>
</tr>
<tr>
<td>6</td>
<td>重启</td>
</tr>
</tbody>
</table>
<h4 id="服务管理脚本">服务管理脚本</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/service [<span class="built_in">command</span>]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>命令</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>启动服务</td>
</tr>
<tr>
<td>stop</td>
<td>停止服务</td>
</tr>
<tr>
<td>restart</td>
<td>重启服务</td>
</tr>
<tr>
<td>reload</td>
<td>重载配置</td>
</tr>
<tr>
<td>status</td>
<td>查看状态</td>
</tr>
</tbody>
</table>
<h4 id="服务自启动管理">服务自启动管理</h4>
<p><strong>RedHat系(chkconfig):</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig [选项] 服务名 [on|off]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>–list</td>
<td>显示服务状态</td>
</tr>
<tr>
<td>–level</td>
<td>指定运行级别</td>
</tr>
<tr>
<td>–add</td>
<td>添加服务</td>
</tr>
<tr>
<td>–del</td>
<td>删除服务</td>
</tr>
</tbody>
</table>
<p><strong>Debian系(update-rc.d):</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update-rc.d [选项] 服务名 [commands]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-n</td>
<td>模拟执行</td>
</tr>
<tr>
<td>-f</td>
<td>强制操作</td>
</tr>
<tr>
<td>remove</td>
<td>删除链接</td>
</tr>
</tbody>
</table>
<h3 id="1-4-Upstart-事件驱动">1.4 Upstart 事件驱动</h3>
<p><strong>主要命令:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">initctl [<span class="built_in">command</span>] job</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>命令</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>start</td>
<td>启动作业</td>
</tr>
<tr>
<td>stop</td>
<td>停止作业</td>
</tr>
<tr>
<td>restart</td>
<td>重启作业</td>
</tr>
<tr>
<td>status</td>
<td>查看状态</td>
</tr>
<tr>
<td>list</td>
<td>列出所有作业</td>
</tr>
</tbody>
</table>
<p><strong>配置文件位置:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init/*.conf</span><br></pre></td></tr></table></figure>
<h2 id="2-GRUB-引导加载器">2. GRUB 引导加载器</h2>
<h3 id="2-1-GRUB-Legacy-vs-GRUB2">2.1 GRUB Legacy vs GRUB2</h3>
<table>
<thead>
<tr>
<th>特性</th>
<th>GRUB Legacy</th>
<th>GRUB2</th>
</tr>
</thead>
<tbody>
<tr>
<td>版本</td>
<td>0.9x</td>
<td>1.9x</td>
</tr>
<tr>
<td>配置文件</td>
<td>menu.lst</td>
<td>grub.cfg</td>
</tr>
<tr>
<td>生成方式</td>
<td>直接编辑</td>
<td>update-grub</td>
</tr>
<tr>
<td>分区表示</td>
<td>(hd0,0)</td>
<td>hd0,msdos1</td>
</tr>
</tbody>
</table>
<h3 id="2-2-GRUB-Legacy-配置">2.2 GRUB Legacy 配置</h3>
<p><strong>/boot/grub/menu.lst 示例:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">timeout 5</span><br><span class="line">default 0</span><br><span class="line">title CentOS</span><br><span class="line">root (hd0,0)</span><br><span class="line">kernel /vmlinuz ro root=/dev/sda1</span><br><span class="line">initrd /initrd.img</span><br></pre></td></tr></table></figure>
<p><strong>常用命令:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grub&gt; root (hd0,0)     <span class="comment"># 设置根分区</span></span><br><span class="line">grub&gt; setup (hd0)      <span class="comment"># 安装到MBR</span></span><br><span class="line">grub&gt; <span class="built_in">cat</span> /grub/menu.lst <span class="comment"># 查看配置</span></span><br></pre></td></tr></table></figure>
<h3 id="2-3-GRUB2-配置">2.3 GRUB2 配置</h3>
<p><strong>/etc/default/grub 关键参数:</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>GRUB_DEFAULT</td>
<td>默认启动项</td>
</tr>
<tr>
<td>GRUB_TIMEOUT</td>
<td>菜单超时</td>
</tr>
<tr>
<td>GRUB_CMDLINE_LINUX</td>
<td>内核参数</td>
</tr>
</tbody>
</table>
<p><strong>生成配置:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update-grub</span><br></pre></td></tr></table></figure>
<h3 id="2-4-内核启动参数">2.4 内核启动参数</h3>
<table>
<thead>
<tr>
<th>参数</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>root=/dev/sda1</td>
<td>指定根分区</td>
</tr>
<tr>
<td>ro/rw</td>
<td>只读/读写挂载</td>
</tr>
<tr>
<td>init=/bin/bash</td>
<td>指定初始化程序</td>
</tr>
<tr>
<td>single</td>
<td>单用户模式</td>
</tr>
<tr>
<td>mem=1024M</td>
<td>限制内存大小</td>
</tr>
</tbody>
</table>
<p><strong>查看当前参数:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /proc/cmdline</span><br></pre></td></tr></table></figure>
<h2 id="3-其他引导加载器">3. 其他引导加载器</h2>
<h3 id="3-1-LILO-配置">3.1 LILO 配置</h3>
<p><strong>/etc/lilo.conf 示例:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">boot=/dev/sda</span><br><span class="line">map=/boot/map</span><br><span class="line">default=linux</span><br><span class="line">image=/boot/vmlinuz</span><br><span class="line">label=linux</span><br><span class="line">root=/dev/sda1</span><br></pre></td></tr></table></figure>
<p><strong>应用配置:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lilo -v</span><br></pre></td></tr></table></figure>
<h3 id="3-2-SYSLINUX-系列">3.2 SYSLINUX 系列</h3>
<table>
<thead>
<tr>
<th>类型</th>
<th>文件系统</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>SYSLINUX</td>
<td>FAT</td>
<td>USB启动</td>
</tr>
<tr>
<td>ISOLINUX</td>
<td>ISO9660</td>
<td>光盘启动</td>
</tr>
<tr>
<td>EXTLINUX</td>
<td>ext2/3/4</td>
<td>硬盘启动</td>
</tr>
<tr>
<td>PXELINUX</td>
<td>网络</td>
<td>网络启动</td>
</tr>
</tbody>
</table>
<p><strong>PXE启动环境搭建:</strong></p>
<ol>
<li>安装必要服务:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install dhcp tftp-server syslinux</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>配置DHCP:</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">filename &quot;pxelinux.0&quot;;</span><br><span class="line">next-server 192.168.1.100;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>准备TFTP目录:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /usr/share/syslinux/pxelinux.0 /var/lib/tftpboot/</span><br><span class="line"><span class="built_in">mkdir</span> /var/lib/tftpboot/pxelinux.cfg</span><br></pre></td></tr></table></figure>
<h2 id="4-系统恢复方法">4. 系统恢复方法</h2>
<h3 id="4-1-救援模式操作">4.1 救援模式操作</h3>
<ol>
<li>使用安装介质启动</li>
<li>进入救援模式</li>
<li>挂载原系统:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chroot</span> /mnt/sysimage</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>修复引导:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub-install /dev/sda</span><br></pre></td></tr></table></figure>
<h3 id="4-2-常见修复场景">4.2 常见修复场景</h3>
<table>
<thead>
<tr>
<th>问题</th>
<th>解决方案</th>
</tr>
</thead>
<tbody>
<tr>
<td>MBR损坏</td>
<td><code>dd if=/usr/share/syslinux/mbr.bin of=/dev/sda</code></td>
</tr>
<tr>
<td>GRUB损坏</td>
<td><code>grub-install /dev/sda</code></td>
</tr>
<tr>
<td>文件系统错误</td>
<td><code>fsck -y /dev/sda1</code></td>
</tr>
<tr>
<td>密码重置</td>
<td><code>init=/bin/bash</code> 启动后修改密码</td>
</tr>
</tbody>
</table>
<h2 id="5-启动优化技巧">5. 启动优化技巧</h2>
<ol>
<li><strong>并行启动</strong>:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/init/rc-sysinit.conf</span><br><span class="line"><span class="comment"># 修改为:</span></span><br><span class="line"><span class="built_in">env</span> DEFAULT_RUNLEVEL=2</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><strong>禁用不需要的服务</strong>:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --list | grep 3:on</span><br><span class="line">chkconfig servicename off</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><strong>使用readahead</strong>:</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service readahead-early restart</span><br></pre></td></tr></table></figure>
<ol start="4">
<li><strong>SSD优化</strong>:<br>
在/etc/fstab添加:</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">noatime,discard</span><br></pre></td></tr></table></figure>
                    
                        


                    
                    
                        <p>
                            <a
                                href="../../2020/11/10/linux/13-%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../2020/11/08/linux/12-%E5%86%85%E6%A0%B8/"
                            aria-label=": 12.内核"
                        >
                            12.内核
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-11-08T21:06:24+08:00">
	
		    2020 年 11 月 8 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="1-内核版本管理">1. 内核版本管理</h2>
<h3 id="版本号说明">版本号说明</h3>
<ul>
<li>
<p><strong>2.X.Y 旧版本格式</strong>：</p>
<ul>
<li>X：偶数表示稳定版，奇数表示开发版</li>
<li>Y：修订版本号</li>
<li>后缀说明：
<ul>
<li><code>-rcN</code>：Release Candidate（候选版本）</li>
<li><code>-gitN</code>：开发中的Git版本</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>3.0+ 新版本分类</strong>：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Prepatch</td>
<td>稳定版前的测试版本</td>
</tr>
<tr>
<td>Mainline</td>
<td>包含新特性的主线开发版本</td>
</tr>
<tr>
<td>Stable</td>
<td>稳定版本</td>
</tr>
<tr>
<td>Longterm</td>
<td>长期支持版本(LTS)</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h3 id="版本查询命令">版本查询命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uname</span> [选项]</span><br></pre></td></tr></table></figure>
<h4 id="常用选项">常用选项</h4>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a</td>
<td>显示全部系统信息</td>
</tr>
<tr>
<td>-r</td>
<td>显示内核版本</td>
</tr>
<tr>
<td>-m</td>
<td>显示硬件架构</td>
</tr>
</tbody>
</table>
<h4 id="其他查询方式">其他查询方式</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看/proc版本信息</span></span><br><span class="line"><span class="built_in">cat</span> /proc/version</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过Makefile查看</span></span><br><span class="line"><span class="built_in">head</span> -4 /usr/src/linux/Makefile</span><br></pre></td></tr></table></figure>
<h2 id="2-内核模块管理">2. 内核模块管理</h2>
<h3 id="核心命令对比">核心命令对比</h3>
<table>
<thead>
<tr>
<th>命令</th>
<th>功能说明</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td>lsmod</td>
<td>显示已加载模块</td>
<td>读取/proc/modules</td>
</tr>
<tr>
<td>insmod</td>
<td>加载单个模块</td>
<td>不处理依赖关系</td>
</tr>
<tr>
<td>rmmod</td>
<td>卸载模块</td>
<td>需确保无依赖</td>
</tr>
<tr>
<td>modprobe</td>
<td>智能加载/卸载模块</td>
<td>自动处理依赖关系</td>
</tr>
<tr>
<td>depmod</td>
<td>生成模块依赖关系文件</td>
<td>创建modules.dep</td>
</tr>
</tbody>
</table>
<h3 id="命令详解">命令详解</h3>
<h4 id="lsmod-输出说明">lsmod 输出说明</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Module                  Size  Used by    Dependent modules</span><br></pre></td></tr></table></figure>
<ul>
<li>显示模块名、大小、引用计数和被哪些模块使用</li>
</ul>
<h4 id="modinfo-模块信息">modinfo 模块信息</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modinfo [选项] 模块名</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a</td>
<td>显示作者信息</td>
</tr>
<tr>
<td>-d</td>
<td>显示描述信息</td>
</tr>
<tr>
<td>-l</td>
<td>显示许可证信息</td>
</tr>
<tr>
<td>-n</td>
<td>显示模块文件路径</td>
</tr>
</tbody>
</table>
<h4 id="modprobe-高级用法">modprobe 高级用法</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modprobe [选项] 模块名</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a</td>
<td>加载所有匹配模块</td>
</tr>
<tr>
<td>-c</td>
<td>显示当前配置</td>
</tr>
<tr>
<td>-l</td>
<td>列出所有可用模块</td>
</tr>
<tr>
<td>-r</td>
<td>递归卸载模块及依赖</td>
</tr>
<tr>
<td>-t 类型</td>
<td>仅操作指定类型模块</td>
</tr>
<tr>
<td>–show-depends</td>
<td>显示模块依赖关系</td>
</tr>
</tbody>
</table>
<h3 id="配置文件">配置文件</h3>
<ul>
<li><code>/etc/modprobe.conf</code>：模块别名和参数配置<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alias eth0 e1000</span><br><span class="line">options e1000 speed=1000 duplex=full</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-内核编译流程">3. 内核编译流程</h2>
<h3 id="编译步骤">编译步骤</h3>
<ol>
<li><strong>准备源代码</strong></li>
<li><strong>配置内核</strong>：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">make oldconfig    <span class="comment"># 基于旧配置更新</span></span><br><span class="line">make menuconfig  <span class="comment"># 文本界面配置</span></span><br><span class="line">make xconfig     <span class="comment"># Qt图形界面配置</span></span><br><span class="line">make gconfig     <span class="comment"># GTK图形界面配置</span></span><br></pre></td></tr></table></figure>
</li>
<li><strong>编译内核</strong>：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">make           <span class="comment"># 编译内核和模块</span></span><br><span class="line">make bzImage   <span class="comment"># 仅编译内核</span></span><br><span class="line">make modules   <span class="comment"># 仅编译模块</span></span><br></pre></td></tr></table></figure>
</li>
<li><strong>安装组件</strong>：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make modules_install  <span class="comment"># 安装模块到/lib/modules/</span></span><br><span class="line">make install          <span class="comment"># 自动安装内核</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="手动安装示例">手动安装示例</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 复制内核文件</span></span><br><span class="line"><span class="built_in">cp</span> <span class="built_in">arch</span>/x86/boot/bzImage /boot/vmlinuz-2.6.32</span><br><span class="line"><span class="built_in">cp</span> System.map /boot/System.map-2.6.32</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建链接</span></span><br><span class="line"><span class="built_in">ln</span> -s /boot/vmlinuz-2.6.32 /boot/vmlinuz</span><br><span class="line"><span class="built_in">ln</span> -s /boot/System.map-2.6.32 /boot/System.map</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成initramfs</span></span><br><span class="line">mkinitramfs -o /boot/initrd-2.6.32.img 2.6.32</span><br></pre></td></tr></table></figure>
<h3 id="其他make目标">其他make目标</h3>
<table>
<thead>
<tr>
<th>目标</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>clean</td>
<td>清除编译文件</td>
</tr>
<tr>
<td>mrproper</td>
<td>彻底清除(含配置)</td>
</tr>
<tr>
<td>rpm-pkg</td>
<td>生成RPM包</td>
</tr>
<tr>
<td>deb-pkg</td>
<td>生成Debian包</td>
</tr>
</tbody>
</table>
<h2 id="4-内核参数调优">4. 内核参数调优</h2>
<h3 id="proc-sys-关键参数">/proc/sys 关键参数</h3>
<table>
<thead>
<tr>
<th>路径</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>kernel/ctrl-alt-del</td>
<td>Ctrl+Alt+Del行为</td>
</tr>
<tr>
<td>kernel/shmall</td>
<td>共享内存页数上限</td>
</tr>
<tr>
<td>kernel/shmmax</td>
<td>共享内存段最大大小</td>
</tr>
<tr>
<td>net/ipv4/ip_forward</td>
<td>IP转发开关(1/0)</td>
</tr>
<tr>
<td>fs/file-max</td>
<td>系统最大文件句柄数</td>
</tr>
</tbody>
</table>
<h3 id="sysctl-工具">sysctl 工具</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl [选项] [参数=值]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a</td>
<td>显示所有可用参数</td>
</tr>
<tr>
<td>-p</td>
<td>从/etc/sysctl.conf加载配置</td>
</tr>
<tr>
<td>-w</td>
<td>临时修改参数</td>
</tr>
</tbody>
</table>
<h3 id="initramfs-管理">initramfs 管理</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建initramfs</span></span><br><span class="line">mkinitramfs -o initrd.img 3.16.0-4-amd64</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压分析</span></span><br><span class="line"><span class="built_in">mkdir</span> initrd &amp;&amp; <span class="built_in">cd</span> initrd</span><br><span class="line">zcat ../initrd.img | cpio -<span class="built_in">id</span></span><br></pre></td></tr></table></figure>
<h2 id="5-内核调试与设备管理">5. 内核调试与设备管理</h2>
<h3 id="proc-关键文件">/proc 关键文件</h3>
<table>
<thead>
<tr>
<th>文件</th>
<th>内容说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>/proc/cpuinfo</td>
<td>CPU详细信息</td>
</tr>
<tr>
<td>/proc/meminfo</td>
<td>内存使用情况</td>
</tr>
<tr>
<td>/proc/modules</td>
<td>已加载模块列表</td>
</tr>
<tr>
<td>/proc/partitions</td>
<td>分区信息</td>
</tr>
</tbody>
</table>
<h3 id="硬件信息工具">硬件信息工具</h3>
<h4 id="lspci">lspci</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci [选项]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-vv</td>
<td>超详细输出</td>
</tr>
<tr>
<td>-t</td>
<td>树状显示设备层级</td>
</tr>
</tbody>
</table>
<h4 id="lsusb">lsusb</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsusb [选项]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-v</td>
<td>详细输出设备描述符</td>
</tr>
<tr>
<td>-t</td>
<td>树状显示USB设备拓扑</td>
</tr>
</tbody>
</table>
<h3 id="udev-设备管理">udev 设备管理</h3>
<h4 id="规则文件示例">规则文件示例</h4>
<p><code>/etc/udev/rules.d/70-persistent-net.rules</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, DRIVERS==&quot;?*&quot;, </span><br><span class="line">ATTR&#123;address&#125;==&quot;08:00:27:aa:11:3c&quot;, NAME=&quot;eth0&quot;</span><br></pre></td></tr></table></figure>
<h4 id="udevadm-工具">udevadm 工具</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">udevadm info [选项]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a</td>
<td>显示父设备属性</td>
</tr>
<tr>
<td>-n</td>
<td>指定设备节点路径</td>
</tr>
</tbody>
</table>
<h4 id="实时监控">实时监控</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">udevadm monitor</span><br></pre></td></tr></table></figure>
                    
                        


                    
                    
                        <p>
                            <a
                                href="../../2020/11/08/linux/12-%E5%86%85%E6%A0%B8/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../2020/11/07/linux/11-%E6%80%A7%E8%83%BD%E6%B5%8B%E5%AE%9A/"
                            aria-label=": 11.性能测定"
                        >
                            11.性能测定
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-11-07T21:06:24+08:00">
	
		    2020 年 11 月 7 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="1-top-命令-实时进程监控">1. top 命令 - 实时进程监控</h2>
<h3 id="基本用法">基本用法</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top [选项]</span><br></pre></td></tr></table></figure>
<h3 id="常用选项">常用选项</h3>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-b</td>
<td>批处理模式（非交互式）</td>
</tr>
<tr>
<td>-d 秒</td>
<td>设置刷新间隔时间</td>
</tr>
<tr>
<td>-n 次数</td>
<td>指定刷新次数后退出</td>
</tr>
<tr>
<td>-u 用户</td>
<td>只显示指定用户的进程</td>
</tr>
<tr>
<td>-p PID</td>
<td>只监控指定PID的进程</td>
</tr>
</tbody>
</table>
<h3 id="显示字段说明">显示字段说明</h3>
<table>
<thead>
<tr>
<th>字段</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>PID</td>
<td>进程ID</td>
</tr>
<tr>
<td>PPID</td>
<td>父进程ID</td>
</tr>
<tr>
<td>USER</td>
<td>进程所有者</td>
</tr>
<tr>
<td>RUSER</td>
<td>实际用户名</td>
</tr>
<tr>
<td>UID</td>
<td>用户ID</td>
</tr>
<tr>
<td>GROUP</td>
<td>所属组</td>
</tr>
<tr>
<td>PR</td>
<td>优先级</td>
</tr>
<tr>
<td>NI</td>
<td>nice值</td>
</tr>
<tr>
<td>VIRT</td>
<td>虚拟内存使用量(KB)</td>
</tr>
<tr>
<td>RES</td>
<td>物理内存使用量(KB)</td>
</tr>
<tr>
<td>SHR</td>
<td>共享内存大小(KB)</td>
</tr>
<tr>
<td>S</td>
<td>进程状态</td>
</tr>
<tr>
<td>TTY</td>
<td>关联终端</td>
</tr>
<tr>
<td>%CPU</td>
<td>CPU使用率</td>
</tr>
<tr>
<td>%MEM</td>
<td>内存使用率</td>
</tr>
<tr>
<td>TIME+</td>
<td>CPU占用时间累计</td>
</tr>
<tr>
<td>COMMAND</td>
<td>执行的命令</td>
</tr>
</tbody>
</table>
<h3 id="交互式操作">交互式操作</h3>
<table>
<thead>
<tr>
<th>按键</th>
<th>功能说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>空格/Enter</td>
<td>立即刷新</td>
</tr>
<tr>
<td>f</td>
<td>选择显示字段</td>
</tr>
<tr>
<td>o</td>
<td>修改排序字段</td>
</tr>
<tr>
<td>l</td>
<td>切换负载显示</td>
</tr>
<tr>
<td>m</td>
<td>切换内存显示</td>
</tr>
<tr>
<td>u</td>
<td>筛选用户进程</td>
</tr>
<tr>
<td>t</td>
<td>切换CPU状态显示</td>
</tr>
<tr>
<td>P</td>
<td>按CPU%排序</td>
</tr>
<tr>
<td>M</td>
<td>按内存%排序</td>
</tr>
<tr>
<td>N</td>
<td>按PID排序</td>
</tr>
<tr>
<td>T</td>
<td>按运行时间排序</td>
</tr>
<tr>
<td>W</td>
<td>保存当前配置</td>
</tr>
<tr>
<td>k</td>
<td>结束进程</td>
</tr>
<tr>
<td>h/?</td>
<td>帮助信息</td>
</tr>
<tr>
<td>q</td>
<td>退出程序</td>
</tr>
<tr>
<td>A</td>
<td>切换显示模式</td>
</tr>
<tr>
<td>d/s</td>
<td>修改刷新间隔</td>
</tr>
<tr>
<td>&lt;/&gt;</td>
<td>切换排序顺序</td>
</tr>
</tbody>
</table>
<h2 id="2-vmstat-系统资源监控">2. vmstat - 系统资源监控</h2>
<h3 id="基本用法-2">基本用法</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vmstat [刷新间隔(秒)] [刷新次数]</span><br></pre></td></tr></table></figure>
<h3 id="输出字段说明">输出字段说明</h3>
<table>
<thead>
<tr>
<th>类别</th>
<th>字段</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>procs</td>
<td>r</td>
<td>运行队列中的进程数（若持续超过CPU核心数表示CPU瓶颈）</td>
</tr>
<tr>
<td></td>
<td>b</td>
<td>等待I/O的进程数</td>
</tr>
<tr>
<td>memory</td>
<td>swpd</td>
<td>使用的swap空间大小</td>
</tr>
<tr>
<td></td>
<td>free</td>
<td>空闲内存</td>
</tr>
<tr>
<td></td>
<td>buff</td>
<td>用作buffer的内存</td>
</tr>
<tr>
<td></td>
<td>cache</td>
<td>用作cache的内存</td>
</tr>
<tr>
<td>swap</td>
<td>si</td>
<td>每秒从swap读入内存量</td>
</tr>
<tr>
<td></td>
<td>so</td>
<td>每秒从内存写入swap量</td>
</tr>
<tr>
<td>io</td>
<td>bi</td>
<td>块设备每秒接收的块数</td>
</tr>
<tr>
<td></td>
<td>bo</td>
<td>块设备每秒发送的块数</td>
</tr>
<tr>
<td>system</td>
<td>in</td>
<td>每秒中断数</td>
</tr>
<tr>
<td></td>
<td>cs</td>
<td>每秒上下文切换数</td>
</tr>
<tr>
<td>cpu</td>
<td>us</td>
<td>用户空间CPU时间占比</td>
</tr>
<tr>
<td></td>
<td>sy</td>
<td>内核空间CPU时间占比</td>
</tr>
<tr>
<td></td>
<td>id</td>
<td>CPU空闲时间占比</td>
</tr>
<tr>
<td></td>
<td>wa</td>
<td>I/O等待时间占比</td>
</tr>
<tr>
<td></td>
<td>st</td>
<td>虚拟机偷取时间占比</td>
</tr>
</tbody>
</table>
<h2 id="3-iostat-I-O监控">3. iostat - I/O监控</h2>
<h3 id="基本用法-3">基本用法</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat [选项] [间隔秒数] [次数]</span><br></pre></td></tr></table></figure>
<h3 id="常用选项-2">常用选项</h3>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-c</td>
<td>只显示CPU统计</td>
</tr>
<tr>
<td>-d</td>
<td>只显示磁盘统计</td>
</tr>
<tr>
<td>-k</td>
<td>以KB为单位显示</td>
</tr>
<tr>
<td>-t</td>
<td>显示时间戳</td>
</tr>
</tbody>
</table>
<h3 id="CPU统计字段">CPU统计字段</h3>
<table>
<thead>
<tr>
<th>字段</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>%user</td>
<td>用户进程CPU占比</td>
</tr>
<tr>
<td>%nice</td>
<td>调整优先级进程的CPU占比</td>
</tr>
<tr>
<td>%system</td>
<td>内核CPU占比</td>
</tr>
<tr>
<td>%iowait</td>
<td>I/O等待占比</td>
</tr>
<tr>
<td>%steal</td>
<td>虚拟机占用占比</td>
</tr>
<tr>
<td>%idle</td>
<td>空闲占比</td>
</tr>
</tbody>
</table>
<h3 id="磁盘统计字段">磁盘统计字段</h3>
<table>
<thead>
<tr>
<th>字段</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>tps</td>
<td>每秒I/O请求数</td>
</tr>
<tr>
<td>Blk_read/s</td>
<td>每秒读取块数</td>
</tr>
<tr>
<td>Blk_wrtn/s</td>
<td>每秒写入块数</td>
</tr>
<tr>
<td>Blk_read</td>
<td>总读取块数</td>
</tr>
<tr>
<td>Blk_wrtn</td>
<td>总写入块数</td>
</tr>
</tbody>
</table>
<h2 id="4-sar-系统活动报告">4. sar - 系统活动报告</h2>
<h3 id="基本用法-4">基本用法</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sar [选项] [-s 开始时间] [-e 结束时间] [-f 日志文件] [间隔] [次数]</span><br></pre></td></tr></table></figure>
<h3 id="常用选项-3">常用选项</h3>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-A</td>
<td>显示所有报告</td>
</tr>
<tr>
<td>-b</td>
<td>I/O和传输速率统计</td>
</tr>
<tr>
<td>-c</td>
<td>进程创建统计</td>
</tr>
<tr>
<td>-f 文件</td>
<td>指定日志文件</td>
</tr>
<tr>
<td>-n DEV</td>
<td>网络设备统计</td>
</tr>
<tr>
<td>-n EDEV</td>
<td>网络错误统计</td>
</tr>
<tr>
<td>-r</td>
<td>内存和swap统计</td>
</tr>
<tr>
<td>-u</td>
<td>CPU利用率</td>
</tr>
<tr>
<td>-P ALL</td>
<td>每个CPU核心统计</td>
</tr>
<tr>
<td>-R</td>
<td>内存统计</td>
</tr>
<tr>
<td>-W</td>
<td>swap统计</td>
</tr>
</tbody>
</table>
<h3 id="详细字段说明">详细字段说明</h3>
<h4 id="sar-b-I-O统计">sar -b (I/O统计)</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>tps</td>
<td>每秒I/O请求数</td>
</tr>
<tr>
<td>rtps</td>
<td>每秒读请求数</td>
</tr>
<tr>
<td>wtps</td>
<td>每秒写请求数</td>
</tr>
<tr>
<td>bread/s</td>
<td>每秒读取块数</td>
</tr>
<tr>
<td>bwrtn/s</td>
<td>每秒写入块数</td>
</tr>
</tbody>
</table>
<h4 id="sar-n-DEV-网络统计">sar -n DEV (网络统计)</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>IFACE</td>
<td>网络接口名</td>
</tr>
<tr>
<td>rxpck/s</td>
<td>每秒接收包数</td>
</tr>
<tr>
<td>txpck/s</td>
<td>每秒发送包数</td>
</tr>
<tr>
<td>rxkB/s</td>
<td>每秒接收KB数</td>
</tr>
<tr>
<td>txkB/s</td>
<td>每秒发送KB数</td>
</tr>
</tbody>
</table>
<h4 id="sar-r-内存统计">sar -r (内存统计)</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>kbmemfree</td>
<td>空闲内存(KB)</td>
</tr>
<tr>
<td>kbmemused</td>
<td>已用内存(KB)</td>
</tr>
<tr>
<td>%memused</td>
<td>内存使用率</td>
</tr>
<tr>
<td>kbbuffers</td>
<td>buffer使用量(KB)</td>
</tr>
<tr>
<td>kbcached</td>
<td>cache使用量(KB)</td>
</tr>
</tbody>
</table>
<h2 id="5-系统负载命令">5. 系统负载命令</h2>
<h3 id="uptime">uptime</h3>
<p>显示：</p>
<ol>
<li>系统运行时间</li>
<li>登录用户数</li>
<li>1/5/15分钟平均负载</li>
</ol>
<h3 id="w-命令">w 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w [选项] [用户名]</span><br></pre></td></tr></table></figure>
<h4 id="选项">选项</h4>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-h</td>
<td>不显示标题</td>
</tr>
<tr>
<td>-s</td>
<td>精简格式(不显示登录时间/JCPU/PCPU)</td>
</tr>
</tbody>
</table>
<h4 id="输出字段">输出字段</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>USER</td>
<td>用户名</td>
</tr>
<tr>
<td>TTY</td>
<td>终端名</td>
</tr>
<tr>
<td>FROM</td>
<td>远程主机</td>
</tr>
<tr>
<td>LOGIN@</td>
<td>登录时间</td>
</tr>
<tr>
<td>IDLE</td>
<td>空闲时间</td>
</tr>
<tr>
<td>JCPU</td>
<td>该终端所有进程CPU时间</td>
</tr>
<tr>
<td>PCPU</td>
<td>当前进程CPU时间</td>
</tr>
<tr>
<td>WHAT</td>
<td>正在执行的命令</td>
</tr>
</tbody>
</table>
<h2 id="6-进程监控">6. 进程监控</h2>
<h3 id="ps-命令">ps 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps [选项]</span><br></pre></td></tr></table></figure>
<h4 id="常用选项-4">常用选项</h4>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>a</td>
<td>显示所有进程</td>
</tr>
<tr>
<td>e</td>
<td>显示环境变量</td>
</tr>
<tr>
<td>x</td>
<td>包括无终端进程</td>
</tr>
<tr>
<td>u</td>
<td>显示用户信息</td>
</tr>
<tr>
<td>r</td>
<td>只显示运行中进程</td>
</tr>
<tr>
<td>l</td>
<td>长格式显示</td>
</tr>
<tr>
<td>U 用户</td>
<td>筛选指定用户</td>
</tr>
<tr>
<td>-C 命令</td>
<td>筛选指定命令</td>
</tr>
<tr>
<td>-e</td>
<td>显示所有进程</td>
</tr>
<tr>
<td>-f</td>
<td>完整格式显示</td>
</tr>
<tr>
<td>-l</td>
<td>长格式显示</td>
</tr>
<tr>
<td>-p PID</td>
<td>筛选指定PID</td>
</tr>
<tr>
<td>-t tty</td>
<td>筛选指定终端</td>
</tr>
</tbody>
</table>
<h4 id="显示字段">显示字段</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>USER</td>
<td>用户名</td>
</tr>
<tr>
<td>PID</td>
<td>进程ID</td>
</tr>
<tr>
<td>PPID</td>
<td>父进程ID</td>
</tr>
<tr>
<td>%CPU</td>
<td>CPU使用率</td>
</tr>
<tr>
<td>%MEM</td>
<td>内存使用率</td>
</tr>
<tr>
<td>VSZ</td>
<td>虚拟内存大小</td>
</tr>
<tr>
<td>RSS</td>
<td>物理内存大小</td>
</tr>
<tr>
<td>TTY</td>
<td>关联终端</td>
</tr>
<tr>
<td>STAT</td>
<td>进程状态</td>
</tr>
<tr>
<td>START</td>
<td>启动时间</td>
</tr>
<tr>
<td>TIME</td>
<td>CPU占用时间</td>
</tr>
<tr>
<td>COMMAND</td>
<td>执行的命令</td>
</tr>
</tbody>
</table>
<h3 id="其他进程工具">其他进程工具</h3>
<ul>
<li><code>pstree</code>：以树状显示进程关系</li>
<li><code>lsof</code>：列出打开的文件</li>
</ul>
<h2 id="7-内存监控">7. 内存监控</h2>
<h3 id="free-命令">free 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">free [选项]</span><br></pre></td></tr></table></figure>
<h4 id="选项-2">选项</h4>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-b</td>
<td>以字节显示</td>
</tr>
<tr>
<td>-k</td>
<td>以KB显示(默认)</td>
</tr>
<tr>
<td>-m</td>
<td>以MB显示</td>
</tr>
<tr>
<td>-t</td>
<td>显示总计行</td>
</tr>
<tr>
<td>-o</td>
<td>不显示buffer行</td>
</tr>
<tr>
<td>-s 秒</td>
<td>持续监控间隔</td>
</tr>
</tbody>
</table>
<h4 id="输出字段-2">输出字段</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>total</td>
<td>总内存量</td>
</tr>
<tr>
<td>used</td>
<td>已用量(含buffer/cache)</td>
</tr>
<tr>
<td>free</td>
<td>空闲量(含buffer/cache)</td>
</tr>
<tr>
<td>shared</td>
<td>共享内存</td>
</tr>
<tr>
<td>buffers</td>
<td>buffer缓存</td>
</tr>
<tr>
<td>cached</td>
<td>page cache</td>
</tr>
<tr>
<td>-/+ buffers/cache</td>
<td>实际内存使用</td>
</tr>
<tr>
<td>used</td>
<td>不含buffer/cache的用量</td>
</tr>
<tr>
<td>free</td>
<td>含buffer/cache的空闲量</td>
</tr>
</tbody>
</table>
<h2 id="8-磁盘与网络监控">8. 磁盘与网络监控</h2>
<h3 id="df-命令">df 命令</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> [选项] [目录]</span><br></pre></td></tr></table></figure>
<h4 id="选项-3">选项</h4>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a</td>
<td>显示所有文件系统</td>
</tr>
<tr>
<td>-h</td>
<td>人性化显示(1024进制)</td>
</tr>
<tr>
<td>-H</td>
<td>人性化显示(1000进制)</td>
</tr>
<tr>
<td>-i</td>
<td>显示inode信息</td>
</tr>
<tr>
<td>-l</td>
<td>只显示本地文件系统</td>
</tr>
<tr>
<td>-m</td>
<td>以MB为单位显示</td>
</tr>
</tbody>
</table>
<h3 id="网络测试工具">网络测试工具</h3>
<ul>
<li><code>netserver</code>：启动测试服务(监听12865端口)</li>
<li><code>netperf</code>：网络性能测试客户端</li>
</ul>
<h2 id="9-高级监控系统">9. 高级监控系统</h2>
<h3 id="collectd">collectd</h3>
<p>监控项目包括：</p>
<ul>
<li>CPU使用率</li>
<li>系统温度和风扇状态</li>
<li>进程状态</li>
<li>网络流量和延迟</li>
<li>Web服务器状态(APACHE/Nginx)</li>
<li>DNS服务器状态</li>
<li>数据库状态</li>
<li>SWAP使用情况</li>
<li>用户登录情况</li>
</ul>
<h3 id="Nagios">Nagios</h3>
<p>功能特点：</p>
<ul>
<li>网络服务监控</li>
<li>系统资源监控</li>
<li>基于Web的监控界面</li>
<li>邮件/SMS告警通知</li>
<li>自定义事件处理</li>
<li>日志自动轮转</li>
<li>支持分层主机结构</li>
</ul>
<h3 id="可视化工具">可视化工具</h3>
<ul>
<li><strong>MRTG</strong>：网络流量可视化</li>
<li><strong>Cacti</strong>：MRTG的增强替代品，提供更丰富的监控功能</li>
</ul>
<pre><code></code></pre>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../2020/11/07/linux/11-%E6%80%A7%E8%83%BD%E6%B5%8B%E5%AE%9A/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../2020/06/24/linux/10-%E5%AE%89%E5%85%A8/"
                            aria-label=": 10.安全"
                        >
                            10.安全
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-06-24T21:06:24+08:00">
	
		    2020 年 6 月 24 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1>守护进程管理与系统安全笔记整理</h1>
<h2 id="守护进程管理">守护进程管理</h2>
<h3 id="Super-Server-超级服务器">Super Server (超级服务器)</h3>
<ul>
<li><strong>作用</strong>：代替其他服务监视服务请求，建立连接后转交给实际服务处理</li>
<li><strong>优势</strong>：降低系统负载，不需要为每个服务都启动独立进程</li>
</ul>
<h3 id="inetd-Internet-Daemon">inetd (Internet Daemon)</h3>
<ul>
<li>传统的超级服务器守护进程</li>
<li>配置文件：<code>/etc/inetd.conf</code></li>
</ul>
<h4 id="inetd-conf-字段说明">inetd.conf 字段说明</h4>
<table>
<thead>
<tr>
<th>字段</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>service_name</td>
<td><code>/etc/services</code>中定义的服务名</td>
</tr>
<tr>
<td>socket_type</td>
<td>socket类型(TCP=stream, UDP=dgram)</td>
</tr>
<tr>
<td>protocol</td>
<td>协议类型(通常TCP/UDP)</td>
</tr>
<tr>
<td>flags</td>
<td>请求处理方式(wait=等待处理完成, nowait=立即处理下一个)</td>
</tr>
<tr>
<td>user</td>
<td>执行用户</td>
</tr>
<tr>
<td>program</td>
<td>程序绝对路径</td>
</tr>
<tr>
<td>args</td>
<td>转发参数</td>
</tr>
</tbody>
</table>
<h4 id="重启inetd">重启inetd</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -HUP inetd的PID</span><br><span class="line">killall -HUP inetd</span><br><span class="line">/etc/init.d/inetd restart</span><br></pre></td></tr></table></figure>
<h3 id="TCP-Wrapper">TCP Wrapper</h3>
<ul>
<li>访问控制机制，检查顺序：
<ol>
<li>先查<code>/etc/hosts.allow</code> → 匹配则允许</li>
<li>再查<code>/etc/hosts.deny</code> → 匹配则拒绝</li>
<li>都不匹配则允许</li>
</ol>
</li>
</ul>
<h4 id="通配符说明">通配符说明</h4>
<table>
<thead>
<tr>
<th>通配符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>ALL</td>
<td>所有服务和主机</td>
</tr>
<tr>
<td>A EXCEPT B</td>
<td>除B以外的A</td>
</tr>
<tr>
<td>LOCAL</td>
<td>本地主机(不含.)</td>
</tr>
<tr>
<td>PARANOID</td>
<td>主机名与DNS解析IP不一致的情况</td>
</tr>
</tbody>
</table>
<h4 id="示例配置">示例配置</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">in.telnetd: .lpic.jp  # 允许lpic.jp域访问telnet</span><br><span class="line">ALL: 192.168.2.      # 允许192.168.2.x网段所有服务</span><br></pre></td></tr></table></figure>
<h3 id="xinetd-扩展的inetd">xinetd (扩展的inetd)</h3>
<ul>
<li>更安全的超级服务器，支持分服务配置</li>
<li>主配置文件：<code>/etc/xinetd.conf</code></li>
<li>服务配置文件：<code>/etc/xinetd.d/</code></li>
</ul>
<h4 id="xinetd-conf-主要参数">xinetd.conf 主要参数</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">default</span><br><span class="line">&#123;</span><br><span class="line">    instance = 60               <span class="comment"># 最大守护进程数</span></span><br><span class="line">    log_type = SYSLOG authpriv  <span class="comment"># 日志类型</span></span><br><span class="line">    log_on_success = HOST PID   <span class="comment"># 成功日志内容</span></span><br><span class="line">    log_on_failure = HOST       <span class="comment"># 失败日志内容</span></span><br><span class="line">    cps = 25 30                 <span class="comment"># 每秒最大连接数(超限后暂停30秒)</span></span><br><span class="line">&#125;</span><br><span class="line">includedir /etc/xinetd.d        <span class="comment"># 包含服务配置目录</span></span><br></pre></td></tr></table></figure>
<h4 id="服务配置示例-telnet">服务配置示例(telnet)</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">service telnet</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">disable</span> = no</span><br><span class="line">    socket_type = stream</span><br><span class="line">    <span class="built_in">wait</span> = no</span><br><span class="line">    user = root</span><br><span class="line">    server = /usr/sbin/in.telnetd</span><br><span class="line">    log_on_failure += USERID</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="重启xinetd">重启xinetd</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/xinetd restart</span><br></pre></td></tr></table></figure>
<h2 id="端口安全">端口安全</h2>
<h3 id="检查开放端口">检查开放端口</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">netstat -atun       <span class="comment"># 显示所有TCP/UDP端口</span></span><br><span class="line">lsof -i -n          <span class="comment"># 查看网络连接</span></span><br><span class="line">lsof -i :22         <span class="comment"># 查看指定端口</span></span><br><span class="line">lsof -c ssh         <span class="comment"># 查看指定进程</span></span><br></pre></td></tr></table></figure>
<h3 id="nmap-扫描">nmap 扫描</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap 目标主机       <span class="comment"># 扫描主机开放端口</span></span><br></pre></td></tr></table></figure>
<h3 id="查找特殊权限文件">查找特殊权限文件</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">find / -perm -u+s -<span class="built_in">ls</span>   <span class="comment"># 查找SUID文件</span></span><br><span class="line">find / -perm -g+s -<span class="built_in">ls</span>   <span class="comment"># 查找SGID文件</span></span><br><span class="line">find / -perm -o+t -<span class="built_in">ls</span>   <span class="comment"># 查找sticky bit文件</span></span><br></pre></td></tr></table></figure>
<h2 id="用户安全">用户安全</h2>
<h3 id="密码有效期设置-chage">密码有效期设置(chage)</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chage [选项] 用户名</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-l</td>
<td>显示有效期</td>
</tr>
<tr>
<td>-m 天数</td>
<td>密码最小使用天数</td>
</tr>
<tr>
<td>-M 天数</td>
<td>密码最大有效期</td>
</tr>
<tr>
<td>-d 日期</td>
<td>最后修改日期</td>
</tr>
<tr>
<td>-W 天数</td>
<td>密码过期前警告天数</td>
</tr>
<tr>
<td>-I 天数</td>
<td>密码过期后锁定前天数</td>
</tr>
<tr>
<td>-E 日期</td>
<td>账号失效日期</td>
</tr>
</tbody>
</table>
<h3 id="禁止登录方法">禁止登录方法</h3>
<ol>
<li>创建<code>/etc/nologin</code>文件：禁止所有非root用户登录<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> /etc/nologin</span><br></pre></td></tr></table></figure>
</li>
<li>修改用户shell：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -s /sbin/nologin 用户名  <span class="comment"># 禁止指定用户登录</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="su-sudo">su/sudo</h3>
<h4 id="su-切换用户">su (切换用户)</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su - 用户名   <span class="comment"># 完全切换(加载环境变量)</span></span><br><span class="line">su 用户名     <span class="comment"># 部分切换(保留当前环境)</span></span><br></pre></td></tr></table></figure>
<h4 id="sudo-超级用户权限">sudo (超级用户权限)</h4>
<ul>
<li>配置文件：<code>/etc/sudoers</code> (使用<code>visudo</code>编辑)</li>
<li>示例配置：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 允许student用户执行shutdown</span></span><br><span class="line">student ALL=(ALL) /sbin/shutdown</span><br><span class="line"></span><br><span class="line"><span class="comment"># 允许wheel组成员执行所有命令且不输密码</span></span><br><span class="line">%wheel ALL=(ALL) NOPASSWD:ALL</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="资源限制-ulimit">资源限制(ulimit)</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ulimit</span> [选项] [限制值]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a</td>
<td>显示所有限制</td>
</tr>
<tr>
<td>-c size</td>
<td>核心文件大小</td>
</tr>
<tr>
<td>-f size</td>
<td>最大文件大小</td>
</tr>
<tr>
<td>-n num</td>
<td>打开文件数限制</td>
</tr>
<tr>
<td>-u num</td>
<td>用户最大进程数</td>
</tr>
<tr>
<td>-v size</td>
<td>最大虚拟内存</td>
</tr>
</tbody>
</table>
<h2 id="OpenSSH-安全">OpenSSH 安全</h2>
<h3 id="SSH密钥文件">SSH密钥文件</h3>
<table>
<thead>
<tr>
<th>文件名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>ssh_host_key</td>
<td>SSH1私钥</td>
</tr>
<tr>
<td>ssh_host_dsa_key</td>
<td>SSH2 DSA私钥</td>
</tr>
<tr>
<td>ssh_host_rsa_key</td>
<td>SSH2 RSA私钥</td>
</tr>
<tr>
<td>*.pub</td>
<td>对应公钥</td>
</tr>
</tbody>
</table>
<h3 id="sshd配置-etc-ssh-sshd-config">sshd配置(/etc/ssh/sshd_config)</h3>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Port</td>
<td>SSH端口(默认22)</td>
</tr>
<tr>
<td>Protocol</td>
<td>SSH版本(1,2)</td>
</tr>
<tr>
<td>HostKey</td>
<td>私钥文件路径</td>
</tr>
<tr>
<td>PermitRootLogin</td>
<td>是否允许root登录</td>
</tr>
<tr>
<td>RSAAuthentication</td>
<td>是否启用SSH1公钥认证</td>
</tr>
<tr>
<td>PubkeyAuthentication</td>
<td>是否启用SSH2公钥认证</td>
</tr>
<tr>
<td>AuthorizedKeysFile</td>
<td>授权公钥文件路径</td>
</tr>
<tr>
<td>PermitEmptyPasswords</td>
<td>是否允许空密码</td>
</tr>
<tr>
<td>PasswordAuthentication</td>
<td>是否启用密码认证</td>
</tr>
<tr>
<td>X11Forwarding</td>
<td>是否允许X11转发</td>
</tr>
</tbody>
</table>
<h3 id="SSH密钥认证流程">SSH密钥认证流程</h3>
<ol>
<li>客户端生成密钥对：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa   <span class="comment"># 生成RSA密钥对</span></span><br></pre></td></tr></table></figure>
</li>
<li>上传公钥到服务器：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id 用户名@服务器</span><br></pre></td></tr></table></figure>
</li>
<li>服务器端公钥存储在：<code>~/.ssh/authorized_keys</code></li>
</ol>
<h3 id="SSH实用命令">SSH实用命令</h3>
<h4 id="scp-安全复制">scp (安全复制)</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp 文件 用户@主机:路径   <span class="comment"># 上传</span></span><br><span class="line">scp -r 目录 用户@主机:路径 <span class="comment"># 递归复制目录</span></span><br></pre></td></tr></table></figure>
<h4 id="ssh-agent-密钥代理">ssh-agent (密钥代理)</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">eval</span> `ssh-agent`   <span class="comment"># 启动代理</span></span><br><span class="line">ssh-add            <span class="comment"># 添加密钥</span></span><br><span class="line">ssh-add -l         <span class="comment"># 列出已加载密钥</span></span><br></pre></td></tr></table></figure>
<h4 id="端口转发">端口转发</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 本地端口转发</span></span><br><span class="line">ssh -L 本地端口:远程主机:远程端口 用户@网关</span><br><span class="line"></span><br><span class="line"><span class="comment"># X11转发</span></span><br><span class="line">ssh -X 用户@主机</span><br></pre></td></tr></table></figure>
<h2 id="GnuPG-文件加密">GnuPG 文件加密</h2>
<h3 id="密钥管理">密钥管理</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gpg --gen-key              <span class="comment"># 生成密钥对</span></span><br><span class="line">gpg --list-keys            <span class="comment"># 列出密钥</span></span><br><span class="line">gpg --<span class="built_in">export</span> -a <span class="string">&quot;用户&quot;</span> &gt; pubkey.asc  <span class="comment"># 导出公钥</span></span><br><span class="line">gpg --import pubkey.asc    <span class="comment"># 导入公钥</span></span><br></pre></td></tr></table></figure>
<h3 id="文件加密-解密">文件加密/解密</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 加密文件(给指定用户)</span></span><br><span class="line">gpg -e -a -r 接收者邮件 文件</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解密文件</span></span><br><span class="line">gpg 加密文件.asc</span><br></pre></td></tr></table></figure>
<h3 id="密钥吊销">密钥吊销</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gpg --gen-revoke 用户邮件 &gt; revoke.asc  <span class="comment"># 生成吊销证书</span></span><br><span class="line">gpg --import revoke.asc                 <span class="comment"># 导入吊销证书</span></span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../2020/06/24/linux/10-%E5%AE%89%E5%85%A8/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../2020/06/18/linux/9-TCP-IP/"
                            aria-label=": 9.TCP-IP"
                        >
                            9.TCP-IP
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-06-18T19:06:24+08:00">
	
		    2020 年 6 月 18 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1>TCP/IP 基础笔记整理</h1>
<h2 id="IPv4-地址分类">IPv4 地址分类</h2>
<h3 id="标准分类">标准分类</h3>
<table>
<thead>
<tr>
<th>类别</th>
<th>IP 地址范围</th>
<th>子网掩码</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>0.0.0.0 ~ 127.255.255.255</td>
<td>255.0.0.0</td>
</tr>
<tr>
<td>B</td>
<td>128.0.0.0 ~ 191.255.255.255</td>
<td>255.255.0.0</td>
</tr>
<tr>
<td>C</td>
<td>192.0.0.0 ~ 223.255.255.255</td>
<td>255.255.255.0</td>
</tr>
</tbody>
</table>
<h3 id="私有地址范围">私有地址范围</h3>
<table>
<thead>
<tr>
<th>类别</th>
<th>IP 地址范围</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>10.0.0.0 ~ 10.255.255.255</td>
</tr>
<tr>
<td>B</td>
<td>172.16.0.0 ~ 172.31.255.255</td>
</tr>
<tr>
<td>C</td>
<td>192.168.0.0 ~ 192.168.255.255</td>
</tr>
</tbody>
</table>
<h2 id="CIDR-Classless-Inter-Domain-Routing">CIDR (Classless Inter-Domain Routing)</h2>
<ul>
<li>无类别域间路由</li>
<li>允许更灵活的子网划分方式，不再受传统 A/B/C 类限制</li>
</ul>
<h2 id="IPv6">IPv6</h2>
<ul>
<li>128 比特地址，用 16 进制表示，分为 8 个 block</li>
<li>表示规则：
<ol>
<li>每个 block 开头的 0 可以省略</li>
<li>连续的 0 可以用 <code>::</code> 表示，但整个地址中 <code>::</code> 只能出现一次</li>
</ol>
</li>
</ul>
<h3 id="IPv6-地址类型">IPv6 地址类型</h3>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>单播地址 (Unicast)</td>
<td>标识单个接口，类似 IPv4 单播地址</td>
</tr>
<tr>
<td>组播地址 (Multicast)</td>
<td>标识一组接口，类似 IPv4 组播地址</td>
</tr>
<tr>
<td>任播地址 (Anycast)</td>
<td>新增类型，数据包发送给最近的一个接口</td>
</tr>
</tbody>
</table>
<h2 id="端口-Port">端口 (Port)</h2>
<ul>
<li><code>/etc/services</code>：端口与服务对应关系文件</li>
<li>常用端口：</li>
</ul>
<table>
<thead>
<tr>
<th>端口</th>
<th>协议</th>
<th>服务</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>20</td>
<td>TCP</td>
<td>FTP</td>
<td>文件传输(数据)</td>
</tr>
<tr>
<td>21</td>
<td>TCP</td>
<td>FTP</td>
<td>文件传输(控制)</td>
</tr>
<tr>
<td>22</td>
<td>TCP</td>
<td>SSH</td>
<td>安全Shell</td>
</tr>
<tr>
<td>23</td>
<td>TCP</td>
<td>Telnet</td>
<td>远程登录</td>
</tr>
<tr>
<td>25</td>
<td>TCP/UDP</td>
<td>SMTP</td>
<td>邮件发送</td>
</tr>
<tr>
<td>53</td>
<td>TCP/UDP</td>
<td>DNS</td>
<td>域名解析</td>
</tr>
<tr>
<td>80</td>
<td>TCP</td>
<td>HTTP</td>
<td>Web服务</td>
</tr>
<tr>
<td>110</td>
<td>TCP</td>
<td>POP3</td>
<td>邮件接收</td>
</tr>
<tr>
<td>119</td>
<td>TCP</td>
<td>NNTP</td>
<td>网络新闻</td>
</tr>
<tr>
<td>139</td>
<td>TCP/UDP</td>
<td>NetBIOS</td>
<td>Windows网络</td>
</tr>
<tr>
<td>143</td>
<td>TCP</td>
<td>IMAP</td>
<td>邮件访问</td>
</tr>
<tr>
<td>161</td>
<td>UDP</td>
<td>SNMP</td>
<td>网络管理</td>
</tr>
<tr>
<td>443</td>
<td>TCP</td>
<td>HTTPS</td>
<td>安全Web</td>
</tr>
<tr>
<td>465</td>
<td>TCP</td>
<td>SMTPS</td>
<td>安全SMTP</td>
</tr>
<tr>
<td>993</td>
<td>TCP</td>
<td>IMAPS</td>
<td>安全IMAP</td>
</tr>
<tr>
<td>995</td>
<td>TCP</td>
<td>POP3S</td>
<td>安全POP3</td>
</tr>
</tbody>
</table>
<h2 id="nsswitch-conf-文件">nsswitch.conf 文件</h2>
<p>控制各种系统数据库的搜索顺序和方法</p>
<h3 id="1-信息类型-Info">1. 信息类型(Info)</h3>
<ul>
<li><code>automount</code>：自动挂载信息</li>
<li><code>bootparams</code>：引导选项</li>
<li><code>ethers</code>：MAC地址</li>
<li><code>group</code>：用户组信息</li>
<li><code>hosts</code>：主机名和IP</li>
<li><code>networks</code>：网络信息</li>
<li><code>passwd</code>：用户信息</li>
<li><code>protocols</code>：网络协议</li>
<li><code>publickey</code>：NIS+/NFS公钥</li>
<li><code>rpc</code>：远程过程调用</li>
<li><code>services</code>：网络服务</li>
<li><code>shadow</code>：用户密码信息</li>
<li><code>aliases</code>：邮件别名</li>
</ul>
<h3 id="2-搜索方法-method">2. 搜索方法(method)</h3>
<ul>
<li><code>files</code>：搜索本地文件</li>
<li><code>nis</code>：搜索NIS数据库</li>
<li><code>dns</code>：查询DNS</li>
<li><code>compat</code>：兼容模式(±语法)</li>
</ul>
<h3 id="3-搜索顺序">3. 搜索顺序</h3>
<p>从左到右依次尝试，先找到的结果优先</p>
<h3 id="4-动作项-action">4. 动作项([action])</h3>
<p>格式：<code>[[!]STATUS=action]</code></p>
<ul>
<li>STATUS：
<ul>
<li><code>NOTFOUND</code>：未找到</li>
<li><code>SUCCESS</code>：成功找到</li>
<li><code>UNAVAIL</code>：永久不可用</li>
<li><code>TRYAGAIN</code>：临时不可用</li>
</ul>
</li>
<li>action：
<ul>
<li><code>return</code>：返回结果</li>
<li><code>continue</code>：继续尝试下个方法</li>
</ul>
</li>
</ul>
<h3 id="5-compat方法">5. compat方法</h3>
<p>在passwd/group/shadow文件中使用<code>+</code>和<code>-</code>来合并NIS信息</p>
<h2 id="网络故障排除命令">网络故障排除命令</h2>
<h3 id="ping">ping</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ping 主机名或IP地址</span><br><span class="line">ping -c 次数 目标  <span class="comment"># 指定发送次数</span></span><br><span class="line">ping -i 间隔 目标  <span class="comment"># 指定发送间隔</span></span><br></pre></td></tr></table></figure>
<ul>
<li>TTL：ICMP包最大生存时间</li>
<li>time：响应时间</li>
</ul>
<h3 id="traceroute-tracepath">traceroute/tracepath</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">traceroute 主机名或IP地址</span><br><span class="line">tracepath 主机名或IP地址 [端口]</span><br></pre></td></tr></table></figure>
<ul>
<li>显示到达目标的路径</li>
</ul>
<h3 id="host">host</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">host [选项] 主机名或IP [DNS服务器]</span><br><span class="line">host -v 目标  <span class="comment"># 显示详细信息</span></span><br></pre></td></tr></table></figure>
<ul>
<li>查询DNS信息</li>
</ul>
<h3 id="hostname">hostname</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hostname  <span class="comment"># 显示当前主机名</span></span><br><span class="line">hostname 新主机名  <span class="comment"># 设置主机名</span></span><br></pre></td></tr></table></figure>
<h3 id="netstat">netstat</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">netstat -a  <span class="comment"># 显示所有socket</span></span><br><span class="line">netstat -c  <span class="comment"># 实时更新</span></span><br><span class="line">netstat -i  <span class="comment"># 显示接口状态</span></span><br><span class="line">netstat -n  <span class="comment"># 显示数字地址</span></span><br><span class="line">netstat -p  <span class="comment"># 显示PID/进程名</span></span><br><span class="line">netstat -r  <span class="comment"># 显示路由表</span></span><br><span class="line">netstat -t  <span class="comment"># 只显示TCP</span></span><br><span class="line">netstat -u  <span class="comment"># 只显示UDP</span></span><br></pre></td></tr></table></figure>
<h3 id="route">route</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">route  <span class="comment"># 显示路由表</span></span><br><span class="line">route add -net 目标网络 netmask 子网掩码 gw 网关</span><br><span class="line">route add default gw 默认网关</span><br><span class="line">route del -net 目标网络</span><br></pre></td></tr></table></figure>
<p>路由表字段说明：</p>
<ul>
<li>Destination：目标网络/主机</li>
<li>Gateway：网关</li>
<li>Genmask：子网掩码</li>
<li>Flags：标志(U=有效,H=主机,G=网关)</li>
<li>Metric：距离</li>
<li>Ref：引用数</li>
<li>Use：使用计数</li>
<li>Iface：接口</li>
</ul>
<h3 id="ifconfig">ifconfig</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ifconfig 接口名 IP地址 netmask 子网掩码</span><br><span class="line">ifconfig 接口名 up/down  <span class="comment"># 启用/禁用接口</span></span><br></pre></td></tr></table></figure>
<h3 id="ifup-ifdown">ifup/ifdown</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ifup 接口名  <span class="comment"># 启用接口</span></span><br><span class="line">ifdown 接口名  <span class="comment"># 禁用接口</span></span><br></pre></td></tr></table></figure>
<h2 id="网络服务命令">网络服务命令</h2>
<h3 id="telnet">telnet</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet 主机 [端口]  <span class="comment"># 默认端口23</span></span><br></pre></td></tr></table></figure>
<h3 id="ftp">ftp</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ftp 主机</span><br><span class="line"><span class="comment"># 常用命令：</span></span><br><span class="line"><span class="built_in">ls</span>      <span class="comment"># 列出远程文件</span></span><br><span class="line"><span class="built_in">pwd</span>     <span class="comment"># 显示远程当前目录</span></span><br><span class="line">get     <span class="comment"># 下载文件</span></span><br><span class="line">mget    <span class="comment"># 下载多个文件</span></span><br><span class="line">put     <span class="comment"># 上传文件</span></span><br><span class="line">ascii   <span class="comment"># ASCII传输模式</span></span><br><span class="line">binary  <span class="comment"># 二进制传输模式</span></span><br><span class="line">quit    <span class="comment"># 退出</span></span><br></pre></td></tr></table></figure>
<h3 id="dig">dig</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dig [选项] @DNS服务器 主机名 域名 [查询类型]</span><br><span class="line">dig -x IP地址  <span class="comment"># 反向查询</span></span><br><span class="line"><span class="comment"># 查询类型：</span></span><br><span class="line">a    <span class="comment"># IP地址</span></span><br><span class="line">any  <span class="comment"># 所有信息</span></span><br><span class="line">mx   <span class="comment"># 邮件服务器</span></span><br><span class="line">ns   <span class="comment"># 名称服务器</span></span><br></pre></td></tr></table></figure>
<h3 id="whois">whois</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whois 目标 [@whois服务器]</span><br></pre></td></tr></table></figure>
<ul>
<li>查询域名注册信息</li>
</ul>
<h2 id="网络配置文件">网络配置文件</h2>
<h3 id="etc-hostname">/etc/hostname</h3>
<ul>
<li>存储主机名</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">windsor.lpic.jp</span><br></pre></td></tr></table></figure>
<h3 id="etc-hosts">/etc/hosts</h3>
<ul>
<li>主机名与IP映射</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 localhost.localdomain localhost</span><br><span class="line">192.168.0.1 windsor.example.com windsor</span><br></pre></td></tr></table></figure>
<h3 id="etc-nsswitch-conf">/etc/nsswitch.conf</h3>
<ul>
<li>名称服务切换配置</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hosts: files ldap dns  # 先查本地文件，再LDAP，最后DNS</span><br></pre></td></tr></table></figure>
<h3 id="etc-resolv-conf">/etc/resolv.conf</h3>
<ul>
<li>DNS配置</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">domain lpic.jp</span><br><span class="line">search lpic.jp</span><br><span class="line">nameserver 192.168.1.253</span><br><span class="line">nameserver 192.168.1.2</span><br></pre></td></tr></table></figure>
<h3 id="etc-sysconfig-network">/etc/sysconfig/network</h3>
<ul>
<li>基本网络设置</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NETWORKING=YES</span><br><span class="line">HOSTNAME=lpic.example.net</span><br><span class="line">GATEWAY=192.168.0.254</span><br></pre></td></tr></table></figure>
<h3 id="etc-sysconfig-network-scripts">/etc/sysconfig/network-scripts/</h3>
<ul>
<li>网络接口配置文件(如ifcfg-eth0)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DEVICE=eth0</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">IPADDR=192.168.0.6</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">NETWORK=192.168.0.0</span><br><span class="line">BROADCAST=192.168.0.255</span><br><span class="line">ONBOOT=yes</span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../2020/06/18/linux/9-TCP-IP/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
          <li class="pagination-next">
            <a
                class="btn btn--default btn--small"
                href="page/2/"
                aria-label="下一頁"
            >
              <span>下一頁</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">第 1 頁 共 2 頁</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2025 Kein Chan. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="../../assets/images/profile.jpg" alt="作者的圖片"/>
        
            <h4 id="about-card-name">Kein Chan</h4>
        
            <div id="about-card-bio"><p>這是獨立全棧工程師Kein Chan的技術博客</br>分享一些技術教程,命令備忘(cheat-sheet)等</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>全棧工程師</br>資深技術顧問</br>數據科學家</br>Hit廣島觀光大使</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Tokyo/Macau
            </div>
        
    </div>
</div>

        
            <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-times"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="../assets/images/logo-algolia-nebula-blue-full.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    />
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">沒有找到文章</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2013/04/27/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85/"
                            aria-label=": R语言-环境安装"
                        >
                            <h3 class="media-heading">R语言-环境安装</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年4月27日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2013/04/28/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E5%9F%BA%E7%A1%80/"
                            aria-label=": R语言-基础"
                        >
                            <h3 class="media-heading">R语言-基础</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年4月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2013/05/01/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE/"
                            aria-label=": R语言-读取数据"
                        >
                            <h3 class="media-heading">R语言-读取数据</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月1日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2013/05/02/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E7%BB%98%E5%9B%BE/"
                            aria-label=": R语言-绘图"
                        >
                            <h3 class="media-heading">R语言-绘图</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月2日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2013/05/03/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/"
                            aria-label=": R语言-线性回归"
                        >
                            <h3 class="media-heading">R语言-线性回归</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月3日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2015/02/22/Algorithms/1.%E7%AE%97%E6%B3%95%E5%9C%A8%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8/"
                            aria-label=": 1. 算法在计算中的作用"
                        >
                            <h3 class="media-heading">1. 算法在计算中的作用</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月22日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2015/02/23/Algorithms/2.%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/"
                            aria-label=": 2. 算法基础"
                        >
                            <h3 class="media-heading">2. 算法基础</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月23日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2015/02/24/Algorithms/3.%E5%87%BD%E6%95%B0%E7%9A%84%E5%A2%9E%E9%95%BF/"
                            aria-label=": 3. 函数的增长"
                        >
                            <h3 class="media-heading">3. 函数的增长</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月24日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2015/02/25/Algorithms/4.%E5%88%86%E6%B2%BB%E7%AD%96%E7%95%A5/"
                            aria-label=": 4. 分治策略"
                        >
                            <h3 class="media-heading">4. 分治策略</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月25日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://keinchan.com/2015/02/26/Algorithms/5.%E6%A6%82%E7%8E%87%E5%88%86%E6%9E%90%E5%92%8C%E9%9A%8F%E6%9C%BA%E7%AE%97%E6%B3%95/"
                            aria-label=": 5. 概率分析和随机算法"
                        >
                            <h3 class="media-heading">5. 概率分析和随机算法</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月26日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="沒有找到文章"
                data-message-one="找到 1 篇文章"
                data-message-other="找到 {n} 篇文章">
                找到 235 篇文章
            </p>
        </div>
    </div>
</div>

        
        
<div id="cover" style="background-image:url('../../assets/images/cover.jpeg');"></div>
        <!--SCRIPTS-->

<script src="../../assets/js/script-qtzvvb63gamuirvfphht7lytrxkfllzng1escnm2phjtlt4tvvxi5gl0wx4o.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
