
<!DOCTYPE html>
<html lang="zh-tw">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Kein&#39;s blog">
    <title>標籤: linux - Kein&#39;s blog</title>
    <meta name="author" content="Kein Chan">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Kein&#39;s blog">
<meta property="og:url" content="https://chankein.github.io/tags/linux/page/2/index.html">
<meta property="og:site_name" content="Kein&#39;s blog">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Kein Chan">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://chankein.github.io../../../../assets/images/profile.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="../../../../assets/css/style-l9zwheso7r7pnk98nvirovsz9dl7fhkrc9mlb5vmuxw7tk5movrk0eevsrpr.min.css">

    <!--STYLES END-->
    

    

    
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="../../../../index.html"
            aria-label=""
        >
            Kein&#39;s blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打開鏈接: ../../../../#about"
            >
        
        
            <img class="header-picture" src="../../../../assets/images/profile.jpg" alt="作者的圖片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="../../../../#about"
                    aria-label="閱讀有關作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="../../../../assets/images/profile.jpg" alt="作者的圖片"/>
                </a>
                <h4 class="sidebar-profile-name">Kein Chan</h4>
                
                    <h5 class="sidebar-profile-bio"><p>這是獨立全棧工程師Kein Chan的技術博客</br>Kein目前居住在東京和澳門.</br>熱愛旅遊.已探訪日本40多個都道府縣.曾自駕環繞日本半個本州.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../index.html"
                            
                            rel="noopener"
                            title="首頁"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首頁</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../all-categories"
                            
                            rel="noopener"
                            title="分類"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分類</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../all-tags"
                            
                            rel="noopener"
                            title="標籤"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">標籤</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../all-archives"
                            
                            rel="noopener"
                            title="所有文章"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">所有文章</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="搜尋"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜尋</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="關於"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">關於</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/chankein/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../mailto:kein.chan85@gmail.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Email"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Email</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../../../atom.xml"
                            
                            rel="noopener"
                            title="Atom"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Atom</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../../2020/05/24/linux/8-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/"
                            aria-label=": 8.系统管理"
                        >
                            8.系统管理
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-24T20:06:24+08:00">
	
		    2020 年 5 月 24 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Linux-用户、群组与系统管理"><a href="#Linux-用户、群组与系统管理" class="headerlink" title="Linux 用户、群组与系统管理"></a>Linux 用户、群组与系统管理</h1><h2 id="1-用户和群组管理"><a href="#1-用户和群组管理" class="headerlink" title="1. 用户和群组管理"></a>1. 用户和群组管理</h2><h3 id="1-1-用户配置文件"><a href="#1-1-用户配置文件" class="headerlink" title="1.1 用户配置文件"></a>1.1 用户配置文件</h3><h4 id="etc-passwd-文件格式"><a href="#etc-passwd-文件格式" class="headerlink" title="&#x2F;etc&#x2F;passwd 文件格式"></a>&#x2F;etc&#x2F;passwd 文件格式</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">lpic:x:500:500:LPI linux:/home/lpic:/bin/bash</span><br><span class="line">↑    ↑ ↑   ↑   ↑         ↑          ↑</span><br><span class="line">│    │ │   │   │         │          └─ 默认shell</span><br><span class="line">│    │ │   │   │         └─────────── 家目录</span><br><span class="line">│    │ │   │   └───────────────────── 用户备注信息(GECOS)</span><br><span class="line">│    │ │   └───────────────────────── 主组GID</span><br><span class="line">│    │ └───────────────────────────── 用户UID</span><br><span class="line">│    └─────────────────────────────── 密码占位符(实际在/etc/shadow)</span><br><span class="line">└──────────────────────────────────── 用户名</span><br></pre></td></tr></table></figure>

<h4 id="etc-shadow-文件"><a href="#etc-shadow-文件" class="headerlink" title="&#x2F;etc&#x2F;shadow 文件"></a>&#x2F;etc&#x2F;shadow 文件</h4><ul>
<li>存储用户密码哈希值</li>
<li>只有root用户可访问</li>
<li>包含密码过期时间等安全信息</li>
</ul>
<h4 id="etc-group-文件格式"><a href="#etc-group-文件格式" class="headerlink" title="&#x2F;etc&#x2F;group 文件格式"></a>&#x2F;etc&#x2F;group 文件格式</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">staff:x:500:linux,lpic</span><br><span class="line">↑     ↑ ↑   ↑</span><br><span class="line">│     │ │   └───────────── 附加组成员</span><br><span class="line">│     │ └───────────────── 组GID</span><br><span class="line">│     └─────────────────── 组密码占位符</span><br><span class="line">└───────────────────────── 组名</span><br></pre></td></tr></table></figure>

<h3 id="1-2-用户管理命令"><a href="#1-2-用户管理命令" class="headerlink" title="1.2 用户管理命令"></a>1.2 用户管理命令</h3><h4 id="useradd-添加用户"><a href="#useradd-添加用户" class="headerlink" title="useradd - 添加用户"></a>useradd - 添加用户</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -c <span class="string">&quot;开发人员&quot;</span> -d /home/dev -g staff -G developers -s /bin/bash -m devuser</span><br></pre></td></tr></table></figure>
<p>常用选项：</p>
<ul>
<li><code>-c</code>：用户备注信息</li>
<li><code>-d</code>：指定家目录路径</li>
<li><code>-g</code>：指定主组</li>
<li><code>-G</code>：指定附加组</li>
<li><code>-s</code>：指定登录shell</li>
<li><code>-m</code>：自动创建家目录(从&#x2F;etc&#x2F;skel复制模板)</li>
</ul>
<h4 id="usermod-修改用户"><a href="#usermod-修改用户" class="headerlink" title="usermod - 修改用户"></a>usermod - 修改用户</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -c <span class="string">&quot;高级开发&quot;</span> -G managers -s /bin/zsh devuser</span><br></pre></td></tr></table></figure>
<p>常用选项：</p>
<ul>
<li><code>-c</code>：备注:指定备注</li>
<li><code>-d</code>：path:home目录</li>
<li><code>-g</code>：组名&#x2F;GID:所属主组</li>
<li><code>-G</code>：组名&#x2F;GID:其他所属组</li>
<li><code>-s</code>：path: login shell</li>
<li><code>-L</code>：锁定用户密码</li>
<li><code>-U</code>：解锁用户密码</li>
</ul>
<h4 id="userdel-删除用户"><a href="#userdel-删除用户" class="headerlink" title="userdel - 删除用户"></a>userdel - 删除用户</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel -r devuser  <span class="comment"># 删除用户并移除家目录</span></span><br></pre></td></tr></table></figure>

<h4 id="passwd-密码管理"><a href="#passwd-密码管理" class="headerlink" title="passwd - 密码管理"></a>passwd - 密码管理</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">passwd devuser      <span class="comment"># 设置密码</span></span><br><span class="line">passwd -l devuser   <span class="comment"># 锁定账户</span></span><br><span class="line">passwd -u devuser   <span class="comment"># 解锁账户</span></span><br></pre></td></tr></table></figure>

<h3 id="1-3-群组管理命令"><a href="#1-3-群组管理命令" class="headerlink" title="1.3 群组管理命令"></a>1.3 群组管理命令</h3><h4 id="groupadd-添加组"><a href="#groupadd-添加组" class="headerlink" title="groupadd - 添加组"></a>groupadd - 添加组</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd developers</span><br></pre></td></tr></table></figure>

<h4 id="groupmod-修改组"><a href="#groupmod-修改组" class="headerlink" title="groupmod - 修改组"></a>groupmod - 修改组</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupmod -g 1001 -n devgroup developers</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-g</code>：修改GID</li>
<li><code>-n</code>：修改组名</li>
</ul>
<h4 id="groupdel-删除组"><a href="#groupdel-删除组" class="headerlink" title="groupdel - 删除组"></a>groupdel - 删除组</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupdel devgroup</span><br></pre></td></tr></table></figure>

<h4 id="id-查看用户信息"><a href="#id-查看用户信息" class="headerlink" title="id - 查看用户信息"></a>id - 查看用户信息</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">id</span> devuser  <span class="comment"># 显示用户UID、GID和所属组</span></span><br></pre></td></tr></table></figure>

<h2 id="2-系统时间管理"><a href="#2-系统时间管理" class="headerlink" title="2. 系统时间管理"></a>2. 系统时间管理</h2><h3 id="2-1-date-系统时间"><a href="#2-1-date-系统时间" class="headerlink" title="2.1 date - 系统时间"></a>2.1 date - 系统时间</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">date</span> 093017002012.30    <span class="comment"># 设置为2012年9月30日17:00:30</span></span><br><span class="line"><span class="built_in">date</span> <span class="string">&quot;+%Y/%m/%d (%a)&quot;</span>   <span class="comment"># 格式化为&quot;2023/05/15 (Mon)&quot;</span></span><br></pre></td></tr></table></figure>

<p>常用格式符号：</p>
<ul>
<li><code>%Y</code>：4位年份</li>
<li><code>%m</code>：2位月份</li>
<li><code>%d</code>：2位日期</li>
<li><code>%H</code>：24小时制小时</li>
<li><code>%M</code>：分钟</li>
<li><code>%a</code>：星期缩写</li>
</ul>
<h3 id="2-2-hwclock-硬件时钟"><a href="#2-2-hwclock-硬件时钟" class="headerlink" title="2.2 hwclock - 硬件时钟"></a>2.2 hwclock - 硬件时钟</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hwclock --show          <span class="comment"># 显示硬件时钟</span></span><br><span class="line">hwclock --systohc       <span class="comment"># 系统时间同步到硬件时钟</span></span><br><span class="line">hwclock --hctosys       <span class="comment"># 硬件时钟同步到系统时间</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-NTP时间同步"><a href="#2-3-NTP时间同步" class="headerlink" title="2.3 NTP时间同步"></a>2.3 NTP时间同步</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ntpdate time.server.lpic.jp  <span class="comment"># 手动同步时间</span></span><br><span class="line">service ntpd start           <span class="comment"># 启动NTP服务</span></span><br></pre></td></tr></table></figure>

<p>NTP配置文件(<code>/etc/ntp.conf</code>)：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">driftfile /etc/ntp.drift</span><br><span class="line">logfile /var/log/ntp.log</span><br><span class="line">server ntp.server.lpic.jp</span><br></pre></td></tr></table></figure>

<h2 id="3-系统日志管理"><a href="#3-系统日志管理" class="headerlink" title="3. 系统日志管理"></a>3. 系统日志管理</h2><h3 id="3-1-syslog-配置"><a href="#3-1-syslog-配置" class="headerlink" title="3.1 syslog 配置"></a>3.1 syslog 配置</h3><p>配置文件：<code>/etc/syslog.conf</code></p>
<p>格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">facility.priority    log_location</span><br></pre></td></tr></table></figure>

<h4 id="facility-设施-类型："><a href="#facility-设施-类型：" class="headerlink" title="facility(设施)类型："></a>facility(设施)类型：</h4><ul>
<li><code>auth</code>&#x2F;<code>authpriv</code>：认证相关</li>
<li><code>cron</code>：定时任务</li>
<li><code>daemon</code>：守护进程</li>
<li><code>kern</code>：内核消息</li>
<li><code>mail</code>：邮件系统</li>
<li><code>syslog</code>：syslog自身</li>
<li><code>local0</code>-<code>local7</code>：自定义设施</li>
</ul>
<h4 id="priority-优先级-："><a href="#priority-优先级-：" class="headerlink" title="priority(优先级)："></a>priority(优先级)：</h4><ul>
<li><code>emerg</code>：紧急情况</li>
<li><code>alert</code>：需要立即处理</li>
<li><code>crit</code>：严重错误</li>
<li><code>err</code>：一般错误</li>
<li><code>warning</code>：警告</li>
<li><code>notice</code>：重要通知</li>
<li><code>info</code>：一般信息</li>
<li><code>debug</code>：调试信息</li>
</ul>
<h4 id="输出目标："><a href="#输出目标：" class="headerlink" title="输出目标："></a>输出目标：</h4><ul>
<li>文件名：如<code>/var/log/messages</code></li>
<li><code>@host</code>：远程syslog服务器</li>
<li>用户名：发送到用户终端</li>
<li><code>*</code>：所有用户终端</li>
</ul>
<h3 id="3-2-logger-命令"><a href="#3-2-logger-命令" class="headerlink" title="3.2 logger 命令"></a>3.2 logger 命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger -p syslog.info -t TEST <span class="string">&quot;测试日志消息&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-常用日志文件"><a href="#3-3-常用日志文件" class="headerlink" title="3.3 常用日志文件"></a>3.3 常用日志文件</h3><ul>
<li><code>/var/log/secure</code>：认证日志</li>
<li><code>/var/log/messages</code>：系统消息</li>
<li><code>/var/log/boot.log</code>：启动日志</li>
</ul>
<h3 id="3-4-用户登录信息"><a href="#3-4-用户登录信息" class="headerlink" title="3.4 用户登录信息"></a>3.4 用户登录信息</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">who</span>          <span class="comment"># 显示当前登录用户</span></span><br><span class="line">w            <span class="comment"># 显示详细登录信息</span></span><br><span class="line">last         <span class="comment"># 显示登录历史</span></span><br><span class="line">lastlog      <span class="comment"># 显示用户最近登录时间</span></span><br></pre></td></tr></table></figure>

<h3 id="3-5-日志轮转"><a href="#3-5-日志轮转" class="headerlink" title="3.5 日志轮转"></a>3.5 日志轮转</h3><p>配置文件：<code>/etc/logrotate.conf</code></p>
<p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">weekly</span><br><span class="line">rotate 4</span><br><span class="line">create</span><br><span class="line">compress</span><br><span class="line"></span><br><span class="line">/var/log/wtmp &#123;</span><br><span class="line">    monthly</span><br><span class="line">    create 0664 root utmp</span><br><span class="line">    rotate 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-邮件系统"><a href="#4-邮件系统" class="headerlink" title="4. 邮件系统"></a>4. 邮件系统</h2><h3 id="4-1-邮件组件"><a href="#4-1-邮件组件" class="headerlink" title="4.1 邮件组件"></a>4.1 邮件组件</h3><ul>
<li><strong>MTA</strong>(邮件传输代理)：sendmail&#x2F;postfix&#x2F;exim</li>
<li><strong>MDA</strong>(邮件投递代理)：procmail</li>
<li><strong>MUA</strong>(邮件用户代理)：mail&#x2F;mutt&#x2F;thunderbird</li>
</ul>
<h3 id="4-2-启动MTA"><a href="#4-2-启动MTA" class="headerlink" title="4.2 启动MTA"></a>4.2 启动MTA</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service sendmail start</span><br><span class="line">service postfix start</span><br><span class="line">service exim4 start</span><br></pre></td></tr></table></figure>

<h3 id="4-3-mail-命令"><a href="#4-3-mail-命令" class="headerlink" title="4.3 mail 命令"></a>4.3 mail 命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mail -s <span class="string">&quot;测试邮件&quot;</span> user@example.com</span><br><span class="line">邮件正文...</span><br><span class="line">.   <span class="comment"># 单独一行输入点结束</span></span><br><span class="line">Cc: <span class="comment"># 抄送地址(可选)</span></span><br></pre></td></tr></table></figure>

<h3 id="4-4-邮件转发"><a href="#4-4-邮件转发" class="headerlink" title="4.4 邮件转发"></a>4.4 邮件转发</h3><h4 id="etc-aliases"><a href="#etc-aliases" class="headerlink" title="&#x2F;etc&#x2F;aliases"></a>&#x2F;etc&#x2F;aliases</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root: admin,lpic</span><br></pre></td></tr></table></figure>
<p>更新别名数据库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">newaliases</span><br></pre></td></tr></table></figure>

<h4 id="用户-forward文件"><a href="#用户-forward文件" class="headerlink" title="用户.forward文件"></a>用户.forward文件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/home/user/.forward:</span><br><span class="line">user2@example.com</span><br></pre></td></tr></table></figure>

<h2 id="5-打印系统"><a href="#5-打印系统" class="headerlink" title="5. 打印系统"></a>5. 打印系统</h2><h3 id="5-1-CUPS打印系统"><a href="#5-1-CUPS打印系统" class="headerlink" title="5.1 CUPS打印系统"></a>5.1 CUPS打印系统</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service cups start  <span class="comment"># 启动CUPS服务</span></span><br></pre></td></tr></table></figure>

<p>主要配置文件：</p>
<ul>
<li><code>/etc/cups/cupsd.conf</code>：服务配置</li>
<li><code>/etc/cups/printers.conf</code>：打印机配置</li>
<li><code>/etc/cups/ppd/</code>：PPD驱动文件</li>
</ul>
<h3 id="5-2-打印命令"><a href="#5-2-打印命令" class="headerlink" title="5.2 打印命令"></a>5.2 打印命令</h3><h4 id="lpr-打印文件"><a href="#lpr-打印文件" class="headerlink" title="lpr - 打印文件"></a>lpr - 打印文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lpr -P LaserJet -#2 document.pdf</span><br></pre></td></tr></table></figure>

<h4 id="lpq-查看打印队列"><a href="#lpq-查看打印队列" class="headerlink" title="lpq - 查看打印队列"></a>lpq - 查看打印队列</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lpq -P LaserJet</span><br></pre></td></tr></table></figure>

<h4 id="lprm-删除打印任务"><a href="#lprm-删除打印任务" class="headerlink" title="lprm - 删除打印任务"></a>lprm - 删除打印任务</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lprm -P LaserJet 123  <span class="comment"># 删除指定任务</span></span><br><span class="line">lprm -P LaserJet -    <span class="comment"># 删除用户所有任务</span></span><br></pre></td></tr></table></figure>
<h3 id="5-3-Web管理界面"><a href="#5-3-Web管理界面" class="headerlink" title="5.3 Web管理界面"></a>5.3 Web管理界面</h3><p>访问：<a target="_blank" rel="noopener" href="http://localhost:631/">http://localhost:631</a></p>
<h2 id="6-定时任务管理"><a href="#6-定时任务管理" class="headerlink" title="6. 定时任务管理"></a>6. 定时任务管理</h2><h3 id="6-1-cron-定时任务系统"><a href="#6-1-cron-定时任务系统" class="headerlink" title="6.1 cron 定时任务系统"></a>6.1 cron 定时任务系统</h3><h4 id="crontab-命令"><a href="#crontab-命令" class="headerlink" title="crontab 命令"></a>crontab 命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">crontab -e            <span class="comment"># 编辑当前用户的crontab</span></span><br><span class="line">crontab -l            <span class="comment"># 列出当前用户的crontab</span></span><br><span class="line">crontab -r            <span class="comment"># 删除当前用户的crontab</span></span><br><span class="line">crontab -u user -e    <span class="comment"># 编辑指定用户的crontab(root权限)</span></span><br></pre></td></tr></table></figure>

<h4 id="crontab-文件格式"><a href="#crontab-文件格式" class="headerlink" title="crontab 文件格式"></a>crontab 文件格式</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* * * * * command_to_execute</span><br><span class="line">│ │ │ │ │</span><br><span class="line">│ │ │ │ └── 星期几 (0-6, 0=星期日)</span><br><span class="line">│ │ │ └──── 月份 (1-12)</span><br><span class="line">│ │ └────── 日 (1-31)</span><br><span class="line">│ └──────── 小时 (0-23)</span><br><span class="line">└────────── 分钟 (0-59)</span><br></pre></td></tr></table></figure>

<p>特殊字符：</p>
<ul>
<li><code>*</code>：所有有效值</li>
<li><code>,</code>：值列表分隔符(如1,3,5)</li>
<li><code>-</code>：范围(如1-5)</li>
<li><code>/</code>：步长(如*&#x2F;2表示每2个单位)</li>
</ul>
<h4 id="系统cron目录"><a href="#系统cron目录" class="headerlink" title="系统cron目录"></a>系统cron目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/etc/crontab           <span class="comment"># 系统级crontab文件</span></span><br><span class="line">/etc/cron.d/           <span class="comment"># 系统cron片段</span></span><br><span class="line">/etc/cron.hourly/      <span class="comment"># 每小时执行</span></span><br><span class="line">/etc/cron.daily/       <span class="comment"># 每天执行</span></span><br><span class="line">/etc/cron.weekly/      <span class="comment"># 每周执行</span></span><br><span class="line">/etc/cron.monthly/     <span class="comment"># 每月执行</span></span><br></pre></td></tr></table></figure>

<h4 id="anacron"><a href="#anacron" class="headerlink" title="anacron"></a>anacron</h4><ul>
<li>用于在系统停机后执行错过的定时任务</li>
<li>配置文件：<code>/etc/anacrontab</code></li>
</ul>
<h3 id="6-2-at-一次性任务"><a href="#6-2-at-一次性任务" class="headerlink" title="6.2 at 一次性任务"></a>6.2 at 一次性任务</h3><h4 id="at-命令"><a href="#at-命令" class="headerlink" title="at 命令"></a>at 命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">at 17:00 tomorrow      <span class="comment"># 创建定时任务</span></span><br><span class="line">at -f job.sh 23:00     <span class="comment"># 从文件读取任务</span></span><br><span class="line">atq                    <span class="comment"># 查看待执行任务(at -l)</span></span><br><span class="line">atrm 3                 <span class="comment"># 删除任务3(at -d 3)</span></span><br></pre></td></tr></table></figure>

<h4 id="时间格式"><a href="#时间格式" class="headerlink" title="时间格式"></a>时间格式</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HH:MM                  # 24小时制(如23:00)</span><br><span class="line">noon/midnight          # 中午12点/午夜12点</span><br><span class="line">today/tomorrow         # 今天/明天</span><br><span class="line">now + count time-units # 如now + 3 days</span><br></pre></td></tr></table></figure>

<h3 id="6-3-batch-低负荷执行"><a href="#6-3-batch-低负荷执行" class="headerlink" title="6.3 batch 低负荷执行"></a>6.3 batch 低负荷执行</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">batch                  <span class="comment"># 进入交互式输入模式</span></span><br><span class="line">batch -f job.sh        <span class="comment"># 从文件读取任务</span></span><br></pre></td></tr></table></figure>

<h3 id="6-4-访问控制"><a href="#6-4-访问控制" class="headerlink" title="6.4 访问控制"></a>6.4 访问控制</h3><h4 id="cron-访问控制"><a href="#cron-访问控制" class="headerlink" title="cron 访问控制"></a>cron 访问控制</h4><ol>
<li>如存在<code>/etc/cron.allow</code>，仅允许文件内用户</li>
<li>如无allow文件，检查<code>/etc/cron.deny</code>，拒绝文件内用户</li>
<li>如两者都不存在，默认行为取决于系统配置</li>
</ol>
<h4 id="at-访问控制"><a href="#at-访问控制" class="headerlink" title="at 访问控制"></a>at 访问控制</h4><ol>
<li>如存在<code>/etc/at.allow</code>，仅允许文件内用户</li>
<li>如无allow文件，检查<code>/etc/at.deny</code>，拒绝文件内用户</li>
<li>如两者都不存在，默认只有root可用</li>
</ol>
<h2 id="7-本地化与国际化"><a href="#7-本地化与国际化" class="headerlink" title="7. 本地化与国际化"></a>7. 本地化与国际化</h2><h3 id="7-1-本地化变量"><a href="#7-1-本地化变量" class="headerlink" title="7.1 本地化变量"></a>7.1 本地化变量</h3><table>
<thead>
<tr>
<th>变量</th>
<th>作用域</th>
</tr>
</thead>
<tbody><tr>
<td><code>LC_CTYPE</code></td>
<td>字符分类和大小写转换</td>
</tr>
<tr>
<td><code>LC_COLLATE</code></td>
<td>排序和比较规则</td>
</tr>
<tr>
<td><code>LC_MESSAGES</code></td>
<td>系统消息语言</td>
</tr>
<tr>
<td><code>LC_MONETARY</code></td>
<td>货币格式</td>
</tr>
<tr>
<td><code>LC_NUMERIC</code></td>
<td>数字格式</td>
</tr>
<tr>
<td><code>LC_TIME</code></td>
<td>日期时间格式</td>
</tr>
<tr>
<td><code>LC_ALL</code></td>
<td>覆盖所有LC_*设置</td>
</tr>
<tr>
<td><code>LANG</code></td>
<td>默认设置(未被LC_*覆盖时使用)</td>
</tr>
</tbody></table>
<h3 id="7-2-常用locale设置"><a href="#7-2-常用locale设置" class="headerlink" title="7.2 常用locale设置"></a>7.2 常用locale设置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">C/POSIX               <span class="comment"># 最小locale</span></span><br><span class="line">en_US.utf8            <span class="comment"># 英文(美国)</span></span><br><span class="line">ja_JP.utf8            <span class="comment"># 日文(UTF-8)</span></span><br><span class="line">ja_JP.eucJP           <span class="comment"># 日文(EUC-JP)</span></span><br><span class="line">zh_CN.utf8            <span class="comment"># 中文(简体)</span></span><br></pre></td></tr></table></figure>

<h3 id="7-3-locale-命令"><a href="#7-3-locale-命令" class="headerlink" title="7.3 locale 命令"></a>7.3 locale 命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">locale -a             <span class="comment"># 列出可用locale</span></span><br><span class="line">locale -m             <span class="comment"># 列出可用字符编码</span></span><br><span class="line">locale                <span class="comment"># 显示当前locale设置</span></span><br></pre></td></tr></table></figure>

<h3 id="7-4-字符编码"><a href="#7-4-字符编码" class="headerlink" title="7.4 字符编码"></a>7.4 字符编码</h3><table>
<thead>
<tr>
<th>编码</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>ASCII</td>
<td>7位英文字符</td>
</tr>
<tr>
<td>ISO-8859</td>
<td>8位扩展ASCII</td>
</tr>
<tr>
<td>UTF-8</td>
<td>Unicode编码</td>
</tr>
<tr>
<td>EUC-JP</td>
<td>Linux日文编码</td>
</tr>
<tr>
<td>Shift_JIS</td>
<td>Windows&#x2F;Mac日文编码</td>
</tr>
<tr>
<td>ISO-2022-JP</td>
<td>邮件用日文编码</td>
</tr>
</tbody></table>
<h3 id="7-5-iconv-编码转换"><a href="#7-5-iconv-编码转换" class="headerlink" title="7.5 iconv 编码转换"></a>7.5 iconv 编码转换</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iconv -f eucjp -t utf8 input.txt &gt; output.txt  <span class="comment"># EUC-JP转UTF-8</span></span><br><span class="line">iconv -l                                      <span class="comment"># 列出支持编码</span></span><br></pre></td></tr></table></figure>

<h2 id="8-时区设置"><a href="#8-时区设置" class="headerlink" title="8. 时区设置"></a>8. 时区设置</h2><h3 id="8-1-时区文件"><a href="#8-1-时区文件" class="headerlink" title="8.1 时区文件"></a>8.1 时区文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/zoneinfo/   <span class="comment"># 所有时区定义文件</span></span><br><span class="line">/etc/localtime         <span class="comment"># 系统当前时区链接</span></span><br></pre></td></tr></table></figure>

<h3 id="8-2-设置时区方法"><a href="#8-2-设置时区方法" class="headerlink" title="8.2 设置时区方法"></a>8.2 设置时区方法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法1: 复制时区文件</span></span><br><span class="line"><span class="built_in">cp</span> /usr/share/zoneinfo/Asia/Tokyo /etc/localtime</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法2: 创建符号链接</span></span><br><span class="line"><span class="built_in">ln</span> -sf /usr/share/zoneinfo/Asia/Tokyo /etc/localtime</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法3: 临时设置(当前会话有效)</span></span><br><span class="line"><span class="built_in">export</span> TZ=<span class="string">&quot;Asia/Tokyo&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-3-时区配置工具"><a href="#8-3-时区配置工具" class="headerlink" title="8.3 时区配置工具"></a>8.3 时区配置工具</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tzselect   <span class="comment"># 交互式时区选择</span></span><br><span class="line">tzconfig   <span class="comment"># 时区配置工具(部分发行版)</span></span><br><span class="line">dpkg-reconfigure tzdata  <span class="comment"># Debian系重新配置时区</span></span><br><span class="line">timedatectl set-timezone Asia/Tokyo  <span class="comment"># systemd系统设置时区</span></span><br></pre></td></tr></table></figure>

<h2 id="9-打印系统补充"><a href="#9-打印系统补充" class="headerlink" title="9. 打印系统补充"></a>9. 打印系统补充</h2><h3 id="9-1-CUPS-Web管理界面"><a href="#9-1-CUPS-Web管理界面" class="headerlink" title="9.1 CUPS Web管理界面"></a>9.1 CUPS Web管理界面</h3><p>访问：<code>http://localhost:631</code></p>
<h3 id="9-2-打印命令补充"><a href="#9-2-打印命令补充" class="headerlink" title="9.2 打印命令补充"></a>9.2 打印命令补充</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lpstat -p -d          <span class="comment"># 显示打印机状态和默认打印机</span></span><br><span class="line">lpoptions -d LaserJet <span class="comment"># 设置默认打印机</span></span><br></pre></td></tr></table></figure>

<h3 id="9-3-打印系统日志"><a href="#9-3-打印系统日志" class="headerlink" title="9.3 打印系统日志"></a>9.3 打印系统日志</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/var/log/cups/        <span class="comment"># CUPS日志目录</span></span><br></pre></td></tr></table></figure>
                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../../2020/05/24/linux/8-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../../2020/05/08/linux/7-XWindow/"
                            aria-label=": 7.XWindow"
                        >
                            7.XWindow
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-08T20:06:24+08:00">
	
		    2020 年 5 月 8 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># X Window 系统架构详解</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 基础架构</span></span><br></pre></td></tr></table></figure>
<p>localhost(X server) –X protocol– remotehost(X client)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 核心组件说明</span><br><span class="line">1. **X Server**：</span><br><span class="line">   - 负责硬件管理（显卡、显示器、输入设备等）</span><br><span class="line">   - 屏幕绘制与渲染</span><br><span class="line">   - 提供字体服务功能</span><br><span class="line">   - 典型实现：Xorg</span><br><span class="line"></span><br><span class="line">2. **X Client**：</span><br><span class="line">   - 应用程序逻辑处理</span><br><span class="line">   - 响应X Server的事件请求</span><br><span class="line">   - 例如：xterm、Firefox等GUI程序</span><br><span class="line"></span><br><span class="line">3. **X Window Manager**：</span><br><span class="line">   - 特殊的X Client</span><br><span class="line">   - 负责管理窗口布局、装饰和交互</span><br><span class="line">   - 常见WM：twm、KWin、Metacity等</span><br><span class="line"></span><br><span class="line">4. **Display Manager**：</span><br><span class="line">   - 提供图形化登录界面</span><br><span class="line">   - 负责加载用户选择的WM和语言环境</span><br><span class="line">   - 常见实现：GDM、KDM、XDM</span><br><span class="line"></span><br><span class="line">## startx 启动流程</span><br><span class="line"></span><br><span class="line">### 命令语法</span><br><span class="line">```bash</span><br><span class="line">startx [X client 参数] -- [X server 参数]</span><br></pre></td></tr></table></figure>

<h3 id="X-server-参数查找顺序"><a href="#X-server-参数查找顺序" class="headerlink" title="X server 参数查找顺序"></a>X server 参数查找顺序</h3><ol>
<li>startx 命令行参数</li>
<li>用户主目录 <code>~/.xserverrc</code></li>
<li>系统默认 <code>/etc/X11/xinit/xserverrc</code></li>
<li>最终回退 <code>/usr/bin/X</code> (X server可执行文件)</li>
</ol>
<h3 id="X-client-参数查找顺序"><a href="#X-client-参数查找顺序" class="headerlink" title="X client 参数查找顺序"></a>X client 参数查找顺序</h3><ol>
<li>startx 命令行参数</li>
<li>用户主目录 <code>~/.xinitrc</code></li>
<li>系统默认 <code>/etc/X11/xinit/xinitrc</code></li>
<li>最终回退 <code>xterm</code> (基础终端模拟器)</li>
</ol>
<h3 id="底层调用"><a href="#底层调用" class="headerlink" title="底层调用"></a>底层调用</h3><p>startx 最终调用 <code>xinit</code> 启动X系统：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xinit [client option] -- [server or display option]</span><br></pre></td></tr></table></figure>

<p>默认等效命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xinit /etc/X11/xinit/xinitrc -- /usr/bin/X</span><br></pre></td></tr></table></figure>

<p>最小化启动示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xinit xterm -geometry +1+1 -n login -display :0 -- X :0</span><br></pre></td></tr></table></figure>

<h2 id="配置文件体系"><a href="#配置文件体系" class="headerlink" title="配置文件体系"></a>配置文件体系</h2><h3 id="核心配置文件"><a href="#核心配置文件" class="headerlink" title="核心配置文件"></a>核心配置文件</h3><ul>
<li>主配置文件：<code>/etc/X11/xorg.conf</code></li>
<li>模块目录：<code>/usr/lib64/xorg/modules/</code></li>
<li>字体目录：<code>/usr/share/X11/fonts/</code></li>
<li>显卡驱动：<code>/usr/lib64/xorg/modules/drivers/</code></li>
</ul>
<h3 id="配置段落-Section"><a href="#配置段落-Section" class="headerlink" title="配置段落(Section)"></a>配置段落(Section)</h3><table>
<thead>
<tr>
<th>Section名称</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td>Module</td>
<td>X Server加载的功能模块</td>
</tr>
<tr>
<td>InputDevice</td>
<td>输入设备配置（键盘&#x2F;鼠标）</td>
</tr>
<tr>
<td>Files</td>
<td>字体和颜色资源路径</td>
</tr>
<tr>
<td>Monitor</td>
<td>显示器参数（刷新率等）</td>
</tr>
<tr>
<td>Device</td>
<td>显卡芯片组配置</td>
</tr>
<tr>
<td>Screen</td>
<td>显示分辨率和色深设置</td>
</tr>
<tr>
<td>ServerLayout</td>
<td>各模块的组合配置</td>
</tr>
</tbody></table>
<h3 id="配置生成工具"><a href="#配置生成工具" class="headerlink" title="配置生成工具"></a>配置生成工具</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Xorg -configure</span><br><span class="line"><span class="comment"># 生成测试配置文件：/root/xorg.conf.new</span></span><br><span class="line"><span class="comment"># 测试命令：X -config /root/xorg.conf.new</span></span><br></pre></td></tr></table></figure>

<h2 id="实用命令工具"><a href="#实用命令工具" class="headerlink" title="实用命令工具"></a>实用命令工具</h2><h3 id="显示调节"><a href="#显示调节" class="headerlink" title="显示调节"></a>显示调节</h3><ul>
<li><code>xvidtune</code>：GUI显示器频率调节工具</li>
<li><code>xhost</code>：X server访问控制<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xhost +hostname  <span class="comment"># 添加访问权限</span></span><br><span class="line">xhost -hostname  <span class="comment"># 移除访问权限</span></span><br><span class="line">xhost +          <span class="comment"># 允许所有主机</span></span><br><span class="line">xhost -          <span class="comment"># 禁用所有远程访问</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DISPLAY=localhost:0  <span class="comment"># 指定显示目标</span></span><br><span class="line"><span class="built_in">export</span> DISPLAY</span><br></pre></td></tr></table></figure>

<h3 id="信息查询"><a href="#信息查询" class="headerlink" title="信息查询"></a>信息查询</h3><table>
<thead>
<tr>
<th>命令</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td>showrgb</td>
<td>显示可用RGB颜色值</td>
</tr>
<tr>
<td>xlsclients</td>
<td>列出运行中的X客户端</td>
</tr>
<tr>
<td>xwininfo</td>
<td>查询窗口几何属性</td>
</tr>
<tr>
<td>xdpyinfo</td>
<td>显示X Server详细信息</td>
</tr>
</tbody></table>
<h2 id="显示管理器-XDM"><a href="#显示管理器-XDM" class="headerlink" title="显示管理器(XDM)"></a>显示管理器(XDM)</h2><h3 id="类型对比"><a href="#类型对比" class="headerlink" title="类型对比"></a>类型对比</h3><table>
<thead>
<tr>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>XDM</td>
<td>基础X Display Manager</td>
</tr>
<tr>
<td>GDM</td>
<td>GNOME显示管理器</td>
</tr>
<tr>
<td>KDM</td>
<td>KDE显示管理器</td>
</tr>
</tbody></table>
<h3 id="XDM启动流程"><a href="#XDM启动流程" class="headerlink" title="XDM启动流程"></a>XDM启动流程</h3><ol>
<li>启动XDM服务</li>
<li>加载 <code>/etc/X11/Xsession</code></li>
<li>执行 <code>/etc/X11/xinit/xinitrc.d/</code> 下脚本</li>
<li>读取用户配置 <code>~/.xsession</code></li>
<li>加载 <code>~/.Xclients</code> 或 <code>/etc/X11/xinit/Xclients</code></li>
</ol>
<h3 id="关键配置文件"><a href="#关键配置文件" class="headerlink" title="关键配置文件"></a>关键配置文件</h3><table>
<thead>
<tr>
<th>文件名</th>
<th>用途描述</th>
</tr>
</thead>
<tbody><tr>
<td>xdm-config</td>
<td>基础配置和访问控制</td>
</tr>
<tr>
<td>Xaccess</td>
<td>主机访问权限设置</td>
</tr>
<tr>
<td>Xresources</td>
<td>登录界面样式和X资源定义</td>
</tr>
<tr>
<td>Xservers</td>
<td>X Server与Display映射</td>
</tr>
<tr>
<td>Xsetup_0</td>
<td>登录前环境设置（如壁纸）</td>
</tr>
<tr>
<td>Xsession</td>
<td>会话启动流程控制</td>
</tr>
</tbody></table>
<h2 id="窗口管理器列表"><a href="#窗口管理器列表" class="headerlink" title="窗口管理器列表"></a>窗口管理器列表</h2><table>
<thead>
<tr>
<th>名称</th>
<th>特点描述</th>
</tr>
</thead>
<tbody><tr>
<td>twm</td>
<td>最基本的窗口管理器</td>
</tr>
<tr>
<td>fvwm</td>
<td>轻量级窗口管理器</td>
</tr>
<tr>
<td>sawfish</td>
<td>GNOME集成WM</td>
</tr>
<tr>
<td>enlightenment</td>
<td>高定制化WM</td>
</tr>
<tr>
<td>metacity</td>
<td>GNOME默认WM</td>
</tr>
<tr>
<td>fluxbox</td>
<td>轻量级高自由度WM</td>
</tr>
<tr>
<td>WindowMaker</td>
<td>NeXTSTEP风格WM</td>
</tr>
<tr>
<td>KWin</td>
<td>KDE标准窗口管理器</td>
</tr>
</tbody></table>
<h2 id="辅助功能技术"><a href="#辅助功能技术" class="headerlink" title="辅助功能技术"></a>辅助功能技术</h2><h3 id="AccessX-功能"><a href="#AccessX-功能" class="headerlink" title="AccessX 功能"></a>AccessX 功能</h3><table>
<thead>
<tr>
<th>功能</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>粘滞键</td>
<td>分离组合键输入</td>
</tr>
<tr>
<td>慢速键</td>
<td>调整按键响应时间</td>
</tr>
<tr>
<td>防反弹键</td>
<td>防止重复输入</td>
</tr>
<tr>
<td>切换键</td>
<td>切换状态声音反馈</td>
</tr>
<tr>
<td>鼠标键</td>
<td>键盘模拟鼠标操作</td>
</tr>
</tbody></table>
<h3 id="其他辅助工具"><a href="#其他辅助工具" class="headerlink" title="其他辅助工具"></a>其他辅助工具</h3><ul>
<li><strong>高对比度显示</strong>：增强视觉可读性</li>
<li><strong>屏幕阅读器</strong>：Orca等文本转语音工具</li>
<li><strong>盲文显示器</strong>：触觉输出设备</li>
<li><strong>屏幕放大镜</strong>：视觉辅助工具</li>
<li><strong>屏幕键盘</strong>：GOK等虚拟输入工具</li>
</ul>
<h3 id="专用软件"><a href="#专用软件" class="headerlink" title="专用软件"></a>专用软件</h3><ul>
<li><strong>Orca</strong>：GNOME屏幕阅读器和放大镜</li>
<li><strong>GOK</strong>：GNOME屏幕键盘</li>
<li><strong>emacspeak</strong>：为Emacs添加语音功能</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../../2020/05/08/linux/7-XWindow/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../../2020/05/08/linux/6-Shell%E5%8F%98%E9%87%8F%E4%B8%8EShell%E8%84%9A%E6%9C%AC/"
                            aria-label=": 6.Shell变量与Shell脚本"
                        >
                            6.Shell变量与Shell脚本
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-08T19:16:24+08:00">
	
		    2020 年 5 月 8 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Shell变量与Shell脚本"><a href="#Shell变量与Shell脚本" class="headerlink" title="Shell变量与Shell脚本"></a>Shell变量与Shell脚本</h1><h2 id="Bash设定文档"><a href="#Bash设定文档" class="headerlink" title="Bash设定文档"></a>Bash设定文档</h2><ul>
<li><strong>&#x2F;etc&#x2F;profile</strong>: 登录时执行，适用于所有用户</li>
<li><strong>~&#x2F;.bash_profile</strong>: 登录时执行</li>
<li><strong>~&#x2F;.bash_login</strong>: 当 <code>~/.bash_profile</code> 不存在时，登录时执行</li>
<li><strong>~&#x2F;.profile</strong>: 当 <code>~/.bash_profile</code> 和 <code>~/.bash_login</code> 都不存在时，登录时执行</li>
<li><strong>~&#x2F;.bashrc</strong>: 每次启动 Bash 时执行</li>
<li><strong>~&#x2F;.bash_logout</strong>: 登出时执行</li>
</ul>
<h2 id="Shell环境定制化"><a href="#Shell环境定制化" class="headerlink" title="Shell环境定制化"></a>Shell环境定制化</h2><h3 id="export命令"><a href="#export命令" class="headerlink" title="export命令"></a><code>export</code>命令</h3><p>用于将shell变量转化为环境变量，使得该变量能够被其他程序或子进程访问。</p>
<h3 id="set命令"><a href="#set命令" class="headerlink" title="set命令"></a><code>set</code>命令</h3><ul>
<li><p><code>set</code>: 显示打印当前的环境变量和Shell变量</p>
</li>
<li><p><code>set [-o] [+o] option</code>：</p>
<ul>
<li><code>-o</code>：启用该选项</li>
<li><code>+o</code>：禁用该选项</li>
<li>常用选项：<ul>
<li><code>allexport</code>: 自动将变量导出为环境变量</li>
<li><code>emacs</code>: 设置Emacs风格的键绑定</li>
<li><code>ignoreeof</code>: 禁止通过 Ctrl+D 退出Shell</li>
<li><code>noclobber</code>: 禁止文件重定向覆盖文件</li>
<li><code>noglob</code>: 禁用元字符解析</li>
<li><code>vi</code>: 设置vi风格的键绑定</li>
</ul>
</li>
</ul>
</li>
<li><p><code>set -o</code>: 显示或更改选项的状态</p>
</li>
</ul>
<h3 id="printenv命令"><a href="#printenv命令" class="headerlink" title="printenv命令"></a><code>printenv</code>命令</h3><p>用于打印当前的环境变量。</p>
<h3 id="alias-unalias"><a href="#alias-unalias" class="headerlink" title="alias&#x2F;unalias"></a><code>alias</code>&#x2F;<code>unalias</code></h3><ul>
<li><code>alias</code>: 设置命令别名</li>
<li><code>unalias</code>: 取消命令别名</li>
<li>临时解除别名：可以使用反斜杠 <code>\</code>，例如：<code>alias ls=&#39;ls -l&#39;</code> 后，<code>&#39;\ls&#39;</code> 会执行原始的 <code>ls</code> 命令。</li>
</ul>
<h2 id="定义Shell函数"><a href="#定义Shell函数" class="headerlink" title="定义Shell函数"></a>定义Shell函数</h2><ul>
<li><p>定义函数语法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> [函数名] () &#123;</span><br><span class="line">    运行内容;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意：<code>&#123;</code> 和 <code>&#125;</code> 前后需要有空格。</p>
</li>
<li><p>定义变量：<code>$变量名</code></p>
</li>
<li><p>函数名不能与变量名重名。</p>
</li>
<li><p>查看已定义的函数：<code>declare -f</code></p>
</li>
<li><p>删除函数：<code>unset</code></p>
</li>
</ul>
<h2 id="Shell脚本"><a href="#Shell脚本" class="headerlink" title="Shell脚本"></a>Shell脚本</h2><h3 id="执行Shell脚本"><a href="#执行Shell脚本" class="headerlink" title="执行Shell脚本"></a>执行Shell脚本</h3><ul>
<li>脚本命令可以分行书写，并逐行执行。</li>
<li>运行脚本时，如果没有执行权限，只需要文件的读取权限和文件夹的运行权限即可。<ul>
<li>使用 <code>source [脚本名]</code> 或简化版 <code>.[脚本名]</code> 执行脚本。</li>
<li>如果脚本有执行权限，可以省略 <code>source</code>，例如：<code>./[脚本名]</code>。</li>
<li>如果脚本不在 <code>PATH</code> 环境变量指定的文件夹中，需要显式指定脚本路径，或者在当前目录使用 <code>./</code>。</li>
</ul>
</li>
</ul>
<h3 id="传入Shell脚本的变量"><a href="#传入Shell脚本的变量" class="headerlink" title="传入Shell脚本的变量"></a>传入Shell脚本的变量</h3><ul>
<li><code>$0</code>：脚本文件名（全路径）</li>
<li><code>$1</code>：第一个传入的变量值</li>
<li><code>$2</code>：第二个传入的变量值</li>
<li><code>#$</code>：传入的变量数量</li>
<li><code>$@</code>：所有传入的变量值（空格分隔）</li>
<li><code>$*</code>：所有变量值（以系统默认的分隔符分隔）</li>
<li>脚本执行结束后的返回状态：<code>echo $?</code>。正常执行返回0，错误返回1。</li>
</ul>
<h3 id="文件检查"><a href="#文件检查" class="headerlink" title="文件检查"></a>文件检查</h3><p>使用 <code>test</code> 命令或者 <code>[</code> <code>]</code> 语法进行文件检查：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">test</span> 条件文</span><br><span class="line">[ 条件文 ]</span><br></pre></td></tr></table></figure>

<h4 id="常见条件文："><a href="#常见条件文：" class="headerlink" title="常见条件文："></a>常见条件文：</h4><ul>
<li><code>-f 文件名</code>：检查文件是否存在且为普通文件</li>
<li><code>-d 文件夹名</code>：检查文件夹是否存在</li>
<li><code>-r 文件名</code>：检查文件是否有读取权限</li>
<li><code>-w 文件名</code>：检查文件是否有写入权限</li>
<li><code>-x 文件名</code>：检查文件是否有执行权限</li>
<li><code>-s 文件名</code>：检查文件是否为空</li>
<li><code>-L 文件名</code>：检查是否为软链接</li>
<li><code>-e 文件名</code>：检查文件是否存在</li>
<li><code>文件名1 -nt 文件名2</code>：文件1是否比文件2新</li>
<li><code>文件名1 -ot 文件名2</code>：文件1是否比文件2旧</li>
<li>数值比较：<code>-eq</code>, <code>-ge</code>, <code>-gt</code>, <code>-le</code>, <code>-lt</code>, <code>-ne</code>（等于、大于等于、大于、小于等于、小于、不等于）</li>
<li>字符串比较：<code>-n</code>（字符串长度大于0），<code>-z</code>（字符串长度为0）</li>
<li>字符串相等：<code>字符串1 = 字符串2</code></li>
<li>字符串不等：<code>字符串1 != 字符串2</code></li>
<li>逻辑操作：<ul>
<li><code>!</code>：条件非</li>
<li><code>-a</code>：与（and）</li>
<li><code>-o</code>：或（or）</li>
</ul>
</li>
</ul>
<h2 id="条件分歧"><a href="#条件分歧" class="headerlink" title="条件分歧"></a>条件分歧</h2><h3 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a><code>if</code>语句</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件式</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    执行文1</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    执行文2</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>或者：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 条件式; <span class="keyword">then</span></span><br><span class="line">    执行文1</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    执行文2</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h3 id="case语句"><a href="#case语句" class="headerlink" title="case语句"></a><code>case</code>语句</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> 式 <span class="keyword">in</span></span><br><span class="line">    值1)</span><br><span class="line">        执行文1 ;;</span><br><span class="line">    值2)</span><br><span class="line">        执行文2 ;;</span><br><span class="line">    *)</span><br><span class="line">        执行其他文 ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>
<p>注意：每个 <code>执行文</code> 后面要有 <code>;;</code>，并且最后使用 <code>esac</code> 结束。</p>
<h3 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a><code>for</code>循环</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 变量名 <span class="keyword">in</span> 变量值列表</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    执行文</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> Vine SUSE Gentoo</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$var</span> Linux</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>变量值列表可以通过空格分隔，也可以使用 <code>seq</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">seq</span> 10 15`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a><code>while</code>循环</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> 条件文</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    执行文</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="read命令"><a href="#read命令" class="headerlink" title="read命令"></a><code>read</code>命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -n <span class="string">&#x27;Who are you?:&#x27;</span></span><br><span class="line"><span class="built_in">read</span> username</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Hello, <span class="variable">$username</span>!&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>如果 <code>echo</code> 后面跟 <code>-n</code>，则输入的提示信息和用户输入将在同一行显示。</li>
</ul>
<h2 id="指定执行Shell类型"><a href="#指定执行Shell类型" class="headerlink" title="指定执行Shell类型"></a>指定执行Shell类型</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br></pre></td></tr></table></figure>
<p>此行用于指定脚本执行时使用的Shell解释器。</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../../2020/05/08/linux/6-Shell%E5%8F%98%E9%87%8F%E4%B8%8EShell%E8%84%9A%E6%9C%AC/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../../2020/05/08/linux/5-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/"
                            aria-label=": 5.文件系统与存储管理"
                        >
                            5.文件系统与存储管理
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-08T19:06:24+08:00">
	
		    2020 年 5 月 8 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="1-磁盘配额管理"><a href="#1-磁盘配额管理" class="headerlink" title="1. 磁盘配额管理"></a>1. 磁盘配额管理</h2><h3 id="1-1-配额概念与类型"><a href="#1-1-配额概念与类型" class="headerlink" title="1.1 配额概念与类型"></a>1.1 配额概念与类型</h3><h4 id="配额类型说明"><a href="#配额类型说明" class="headerlink" title="配额类型说明"></a>配额类型说明</h4><ul>
<li><strong>硬限制(Hard Limit)</strong>：用户绝对不能超过的磁盘空间限制</li>
<li><strong>软限制(Soft Limit)</strong>：允许用户暂时超过的限制，系统会发出警告</li>
<li><strong>宽限期(Grace Period)</strong>：超过软限制后允许保留的时间（默认7天）</li>
</ul>
<h3 id="1-2-配额实施完整步骤"><a href="#1-2-配额实施完整步骤" class="headerlink" title="1.2 配额实施完整步骤"></a>1.2 配额实施完整步骤</h3><ol>
<li><p><strong>修改fstab文件</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在/etc/fstab中添加usrquota和/或grpquota选项</span></span><br><span class="line">/dev/sda1 /home ext4 defaults,usrquota,grpquota 0 2</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>重新挂载文件系统</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">umount /home</span><br><span class="line">mount -o remount /home</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>创建配额文件</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> /home/aquota.user /home/aquota.group</span><br><span class="line"><span class="built_in">chmod</span> 600 /home/aquota.*</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>初始化配额数据库</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quotacheck -cugm /home</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>启用配额系统</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quotaon -avug</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>为用户设置配额</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">edquota username</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="1-3-配额管理命令详解"><a href="#1-3-配额管理命令详解" class="headerlink" title="1.3 配额管理命令详解"></a>1.3 配额管理命令详解</h3><h4 id="quota-显示配额信息"><a href="#quota-显示配额信息" class="headerlink" title="quota - 显示配额信息"></a>quota - 显示配额信息</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">quota -u username  <span class="comment"># 显示用户配额</span></span><br><span class="line">quota -g groupname <span class="comment"># 显示组配额</span></span><br><span class="line">quota -v           <span class="comment"># 显示详细信息</span></span><br></pre></td></tr></table></figure>

<h4 id="quotacheck-检查配额"><a href="#quotacheck-检查配额" class="headerlink" title="quotacheck - 检查配额"></a>quotacheck - 检查配额</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">quotacheck -avug  <span class="comment"># 检查所有文件系统配额</span></span><br><span class="line">quotacheck -cug /home  <span class="comment"># 检查指定文件系统</span></span><br></pre></td></tr></table></figure>

<h4 id="quotaon-quotaoff-启用-禁用配额"><a href="#quotaon-quotaoff-启用-禁用配额" class="headerlink" title="quotaon&#x2F;quotaoff - 启用&#x2F;禁用配额"></a>quotaon&#x2F;quotaoff - 启用&#x2F;禁用配额</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">quotaon -avug     <span class="comment"># 启用所有配额</span></span><br><span class="line">quotaoff /home    <span class="comment"># 禁用指定文件系统配额</span></span><br></pre></td></tr></table></figure>

<h4 id="edquota-编辑配额"><a href="#edquota-编辑配额" class="headerlink" title="edquota - 编辑配额"></a>edquota - 编辑配额</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">edquota -u username  <span class="comment"># 编辑用户配额</span></span><br><span class="line">edquota -p template_user new_user  <span class="comment"># 复制配额设置</span></span><br><span class="line">edquota -t           <span class="comment"># 修改宽限期</span></span><br></pre></td></tr></table></figure>

<h4 id="repquota-报告配额状态"><a href="#repquota-报告配额状态" class="headerlink" title="repquota - 报告配额状态"></a>repquota - 报告配额状态</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">repquota -a       <span class="comment"># 报告所有文件系统配额状态</span></span><br><span class="line">repquota -u /home <span class="comment"># 报告/home的用户配额</span></span><br></pre></td></tr></table></figure>

<h2 id="2-文件系统层次标准-FHS"><a href="#2-文件系统层次标准-FHS" class="headerlink" title="2. 文件系统层次标准(FHS)"></a>2. 文件系统层次标准(FHS)</h2><h3 id="2-1-核心目录结构"><a href="#2-1-核心目录结构" class="headerlink" title="2.1 核心目录结构"></a>2.1 核心目录结构</h3><table>
<thead>
<tr>
<th>目录</th>
<th>完整描述</th>
<th>典型内容</th>
</tr>
</thead>
<tbody><tr>
<td><code>/bin</code></td>
<td>基础命令二进制文件</td>
<td>ls, cp, mv等基本命令</td>
</tr>
<tr>
<td><code>/sbin</code></td>
<td>系统管理二进制文件</td>
<td>fdisk, fsck, ifconfig等</td>
</tr>
<tr>
<td><code>/etc</code></td>
<td>系统配置文件</td>
<td>passwd, fstab, network等配置文件</td>
</tr>
<tr>
<td><code>/dev</code></td>
<td>设备文件</td>
<td>sda, tty, null等设备节点</td>
</tr>
<tr>
<td><code>/lib</code></td>
<td>系统库文件</td>
<td>系统运行所需共享库</td>
</tr>
<tr>
<td><code>/mnt</code></td>
<td>临时挂载点</td>
<td>临时挂载文件系统的目录</td>
</tr>
<tr>
<td><code>/opt</code></td>
<td>可选应用软件包</td>
<td>第三方应用程序</td>
</tr>
<tr>
<td><code>/proc</code></td>
<td>进程和内核信息</td>
<td>虚拟文件系统，提供系统信息</td>
</tr>
<tr>
<td><code>/root</code></td>
<td>root用户主目录</td>
<td>root用户的个人文件和配置</td>
</tr>
<tr>
<td><code>/boot</code></td>
<td>启动加载文件</td>
<td>vmlinuz, initramfs, grub等</td>
</tr>
<tr>
<td><code>/home</code></td>
<td>用户主目录</td>
<td>普通用户的个人目录</td>
</tr>
<tr>
<td><code>/tmp</code></td>
<td>临时文件</td>
<td>系统重启后通常清空</td>
</tr>
<tr>
<td><code>/var</code></td>
<td>可变数据文件</td>
<td>日志、邮件、数据库等</td>
</tr>
<tr>
<td><code>/usr</code></td>
<td>用户程序资源</td>
<td>应用程序、文档、库文件等</td>
</tr>
</tbody></table>
<h2 id="3-分区与文件系统管理"><a href="#3-分区与文件系统管理" class="headerlink" title="3. 分区与文件系统管理"></a>3. 分区与文件系统管理</h2><h3 id="3-1-分区管理"><a href="#3-1-分区管理" class="headerlink" title="3.1 分区管理"></a>3.1 分区管理</h3><h4 id="fdisk-完整操作流程"><a href="#fdisk-完整操作流程" class="headerlink" title="fdisk 完整操作流程"></a>fdisk 完整操作流程</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fdisk /dev/sdb</span><br></pre></td></tr></table></figure>
<p>交互命令列表：</p>
<ul>
<li><code>n</code>：创建新分区</li>
<li><code>d</code>：删除分区</li>
<li><code>p</code>：显示分区表</li>
<li><code>t</code>：更改分区类型</li>
<li><code>a</code>：切换启动标志</li>
<li><code>w</code>：写入并退出</li>
<li><code>q</code>：不保存退出</li>
<li><code>m</code>：显示帮助菜单</li>
</ul>
<h3 id="3-2-文件系统创建与管理"><a href="#3-2-文件系统创建与管理" class="headerlink" title="3.2 文件系统创建与管理"></a>3.2 文件系统创建与管理</h3><h4 id="mkfs-命令集"><a href="#mkfs-命令集" class="headerlink" title="mkfs 命令集"></a>mkfs 命令集</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkfs -t ext4 /dev/sdb1      <span class="comment"># 创建ext4文件系统</span></span><br><span class="line">mkfs.ext4 /dev/sdb1         <span class="comment"># 同上</span></span><br><span class="line">mkfs.xfs /dev/sdb2          <span class="comment"># 创建XFS文件系统</span></span><br><span class="line">mkfs.btrfs /dev/sdb3        <span class="comment"># 创建Btrfs文件系统</span></span><br></pre></td></tr></table></figure>

<h4 id="交换空间管理"><a href="#交换空间管理" class="headerlink" title="交换空间管理"></a>交换空间管理</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkswap /dev/sdb4            <span class="comment"># 创建交换分区</span></span><br><span class="line">swapon /dev/sdb4            <span class="comment"># 启用交换分区</span></span><br><span class="line">swapon -s                   <span class="comment"># 显示交换空间状态</span></span><br><span class="line">swapoff /dev/sdb4           <span class="comment"># 禁用交换分区</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-文件系统检查与维护"><a href="#3-3-文件系统检查与维护" class="headerlink" title="3.3 文件系统检查与维护"></a>3.3 文件系统检查与维护</h3><h4 id="fsck-系列命令"><a href="#fsck-系列命令" class="headerlink" title="fsck 系列命令"></a>fsck 系列命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fsck /dev/sdb1              <span class="comment"># 基本文件系统检查</span></span><br><span class="line">fsck -y /dev/sdb1           <span class="comment"># 自动修复错误</span></span><br><span class="line">e2fsck -p /dev/sdb1         <span class="comment"># ext文件系统自动修复</span></span><br><span class="line">xfs_repair /dev/sdb2        <span class="comment"># XFS文件系统修复</span></span><br></pre></td></tr></table></figure>

<h4 id="tune2fs-调整参数"><a href="#tune2fs-调整参数" class="headerlink" title="tune2fs 调整参数"></a>tune2fs 调整参数</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tune2fs -c 30 /dev/sdb1     <span class="comment"># 设置每30次挂载后检查</span></span><br><span class="line">tune2fs -i 15d /dev/sdb1    <span class="comment"># 设置15天间隔检查</span></span><br><span class="line">tune2fs -L DATA /dev/sdb1   <span class="comment"># 设置卷标为DATA</span></span><br></pre></td></tr></table></figure>

<h3 id="3-4-空间监控命令"><a href="#3-4-空间监控命令" class="headerlink" title="3.4 空间监控命令"></a>3.4 空间监控命令</h3><h4 id="df-详细用法"><a href="#df-详细用法" class="headerlink" title="df 详细用法"></a>df 详细用法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> -h                       <span class="comment"># 人类可读格式</span></span><br><span class="line"><span class="built_in">df</span> -i                       <span class="comment"># 显示inode使用情况</span></span><br><span class="line"><span class="built_in">df</span> -T                       <span class="comment"># 显示文件系统类型</span></span><br><span class="line"><span class="built_in">df</span> --total                  <span class="comment"># 显示总计信息</span></span><br></pre></td></tr></table></figure>

<h4 id="du-详细用法"><a href="#du-详细用法" class="headerlink" title="du 详细用法"></a>du 详细用法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">du</span> -sh /var/log             <span class="comment"># 显示目录总大小</span></span><br><span class="line"><span class="built_in">du</span> -ah /home                <span class="comment"># 显示所有文件和目录大小</span></span><br><span class="line"><span class="built_in">du</span> -csh *                   <span class="comment"># 显示当前目录各项目大小和总计</span></span><br><span class="line"><span class="built_in">du</span> --max-depth=1 /usr       <span class="comment"># 只显示一级子目录大小</span></span><br></pre></td></tr></table></figure>

<h2 id="4-文件搜索命令"><a href="#4-文件搜索命令" class="headerlink" title="4. 文件搜索命令"></a>4. 文件搜索命令</h2><h3 id="4-1-find-命令完整用法"><a href="#4-1-find-命令完整用法" class="headerlink" title="4.1 find 命令完整用法"></a>4.1 find 命令完整用法</h3><h4 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find [路径] [选项] [操作]</span><br></pre></td></tr></table></figure>

<h4 id="常用示例"><a href="#常用示例" class="headerlink" title="常用示例"></a>常用示例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">find / -name <span class="string">&quot;*.conf&quot;</span>               <span class="comment"># 按名称查找</span></span><br><span class="line">find /home -user alice              <span class="comment"># 按属主查找</span></span><br><span class="line">find /var/log -mtime -7             <span class="comment"># 查找7天内修改的文件</span></span><br><span class="line">find /tmp -size +10M                <span class="comment"># 查找大于10MB的文件</span></span><br><span class="line">find . -perm 644                    <span class="comment"># 查找权限为644的文件</span></span><br><span class="line">find /etc -<span class="built_in">type</span> f -<span class="built_in">exec</span> grep -l <span class="string">&quot;error&quot;</span> &#123;&#125; \;  <span class="comment"># 结合grep</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-locate-updatedb-系统"><a href="#4-2-locate-updatedb-系统" class="headerlink" title="4.2 locate&#x2F;updatedb 系统"></a>4.2 locate&#x2F;updatedb 系统</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">locate passwd              <span class="comment"># 快速查找文件</span></span><br><span class="line">updatedb                   <span class="comment"># 更新数据库</span></span><br><span class="line">updatedb -e /mnt           <span class="comment"># 排除/mnt目录</span></span><br></pre></td></tr></table></figure>

<h3 id="4-3-which-whereis-type"><a href="#4-3-which-whereis-type" class="headerlink" title="4.3 which&#x2F;whereis&#x2F;type"></a>4.3 which&#x2F;whereis&#x2F;type</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> <span class="built_in">ls</span>                   <span class="comment"># 查找命令路径</span></span><br><span class="line">whereis python             <span class="comment"># 查找命令相关文件</span></span><br><span class="line"><span class="built_in">type</span> -a <span class="built_in">cd</span>                 <span class="comment"># 显示命令类型</span></span><br></pre></td></tr></table></figure>

<h2 id="5-挂载管理"><a href="#5-挂载管理" class="headerlink" title="5. 挂载管理"></a>5. 挂载管理</h2><h3 id="5-1-挂载选项详解"><a href="#5-1-挂载选项详解" class="headerlink" title="5.1 挂载选项详解"></a>5.1 挂载选项详解</h3><table>
<thead>
<tr>
<th>选项</th>
<th>完整描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>async/sync</code></td>
<td>异步&#x2F;同步写入</td>
</tr>
<tr>
<td><code>auto/noauto</code></td>
<td>是否允许mount -a自动挂载</td>
</tr>
<tr>
<td><code>exec/noexec</code></td>
<td>是否允许执行二进制文件</td>
</tr>
<tr>
<td><code>ro/rw</code></td>
<td>只读&#x2F;读写模式</td>
</tr>
<tr>
<td><code>suid/nosuid</code></td>
<td>是否允许SUID&#x2F;SGID</td>
</tr>
<tr>
<td><code>user/nouser</code></td>
<td>是否允许普通用户挂载</td>
</tr>
<tr>
<td><code>defaults</code></td>
<td>默认选项(rw,suid,dev,exec,auto,nouser,async)</td>
</tr>
</tbody></table>
<h3 id="5-2-mount-umount-完整用法"><a href="#5-2-mount-umount-完整用法" class="headerlink" title="5.2 mount&#x2F;umount 完整用法"></a>5.2 mount&#x2F;umount 完整用法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/sdb1 /mnt/data           <span class="comment"># 基本挂载</span></span><br><span class="line">mount -o remount,ro /mnt/data       <span class="comment"># 重新挂载为只读</span></span><br><span class="line">mount -t nfs server:/share /mnt/nfs <span class="comment"># 挂载NFS</span></span><br><span class="line">umount /mnt/data                    <span class="comment"># 卸载</span></span><br><span class="line">umount -l /mnt/data                 <span class="comment"># 延迟卸载</span></span><br></pre></td></tr></table></figure>

<h3 id="5-3-etc-fstab-文件格式"><a href="#5-3-etc-fstab-文件格式" class="headerlink" title="5.3 &#x2F;etc&#x2F;fstab 文件格式"></a>5.3 &#x2F;etc&#x2F;fstab 文件格式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 设备文件/挂载点/文件系统类型/选项/备份标记/检查顺序</span><br><span class="line">/dev/sdb1  /data  ext4  defaults  0  2</span><br><span class="line">UUID=xxxx  /home  xfs   defaults  0  1</span><br></pre></td></tr></table></figure>

<h2 id="6-逻辑卷管理-LVM"><a href="#6-逻辑卷管理-LVM" class="headerlink" title="6. 逻辑卷管理(LVM)"></a>6. 逻辑卷管理(LVM)</h2><h3 id="6-1-LVM-基本概念"><a href="#6-1-LVM-基本概念" class="headerlink" title="6.1 LVM 基本概念"></a>6.1 LVM 基本概念</h3><ol>
<li><strong>PV(Physical Volume)</strong>：物理卷，实际存储设备</li>
<li><strong>VG(Volume Group)</strong>：卷组，由PV组成的存储池</li>
<li><strong>LV(Logical Volume)</strong>：逻辑卷，从VG划分的可挂载空间</li>
<li><strong>PE(Physical Extent)</strong>：物理块，LVM最小分配单元(默认4MB)</li>
<li><strong>LE(Logical Extent)</strong>：逻辑块，与PE一一对应</li>
</ol>
<h3 id="6-2-LVM-完整操作流程"><a href="#6-2-LVM-完整操作流程" class="headerlink" title="6.2 LVM 完整操作流程"></a>6.2 LVM 完整操作流程</h3><h4 id="物理卷-PV-管理"><a href="#物理卷-PV-管理" class="headerlink" title="物理卷(PV)管理"></a>物理卷(PV)管理</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pvcreate /dev/sdb /dev/sdc          <span class="comment"># 创建PV</span></span><br><span class="line">pvdisplay                           <span class="comment"># 显示PV信息</span></span><br><span class="line">pvmove /dev/sdb                     <span class="comment"># 迁移PV数据</span></span><br><span class="line">pvremove /dev/sdb                   <span class="comment"># 删除PV</span></span><br></pre></td></tr></table></figure>

<h4 id="卷组-VG-管理"><a href="#卷组-VG-管理" class="headerlink" title="卷组(VG)管理"></a>卷组(VG)管理</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vgcreate vg_data /dev/sdb /dev/sdc  <span class="comment"># 创建VG</span></span><br><span class="line">vgextend vg_data /dev/sdd           <span class="comment"># 扩展VG</span></span><br><span class="line">vgreduce vg_data /dev/sdb           <span class="comment"># 缩减VG</span></span><br><span class="line">vgdisplay                           <span class="comment"># 显示VG信息</span></span><br><span class="line">vgremove vg_data                    <span class="comment"># 删除VG</span></span><br></pre></td></tr></table></figure>

<h4 id="逻辑卷-LV-管理"><a href="#逻辑卷-LV-管理" class="headerlink" title="逻辑卷(LV)管理"></a>逻辑卷(LV)管理</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">lvcreate -L 50G -n lv_home vg_data  <span class="comment"># 创建50G逻辑卷</span></span><br><span class="line">lvextend -L +10G /dev/vg_data/lv_home <span class="comment"># 扩展10G</span></span><br><span class="line">lvreduce -L -5G /dev/vg_data/lv_home <span class="comment"># 缩减5G</span></span><br><span class="line">lvresize -L 60G /dev/vg_data/lv_home <span class="comment"># 调整到60G</span></span><br><span class="line">lvdisplay                           <span class="comment"># 显示LV信息</span></span><br><span class="line">lvremove /dev/vg_data/lv_home       <span class="comment"># 删除LV</span></span><br></pre></td></tr></table></figure>

<h4 id="文件系统扩展"><a href="#文件系统扩展" class="headerlink" title="文件系统扩展"></a>文件系统扩展</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对于ext2/3/4文件系统</span></span><br><span class="line">resize2fs /dev/vg_data/lv_home</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对于XFS文件系统</span></span><br><span class="line">xfs_growfs /dev/vg_data/lv_home</span><br></pre></td></tr></table></figure>

<h3 id="6-3-LVM-快照功能"><a href="#6-3-LVM-快照功能" class="headerlink" title="6.3 LVM 快照功能"></a>6.3 LVM 快照功能</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lvcreate -L 10G -s -n snap_home /dev/vg_data/lv_home  <span class="comment"># 创建快照</span></span><br><span class="line">mount /dev/vg_data/snap_home /mnt/snapshot           <span class="comment"># 挂载快照</span></span><br><span class="line">umount /mnt/snapshot                                 <span class="comment"># 卸载快照</span></span><br><span class="line">lvremove /dev/vg_data/snap_home                      <span class="comment"># 删除快照</span></span><br></pre></td></tr></table></figure>

<h3 id="6-4-LVM-信息查看命令"><a href="#6-4-LVM-信息查看命令" class="headerlink" title="6.4 LVM 信息查看命令"></a>6.4 LVM 信息查看命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pvs        <span class="comment"># 简要PV信息</span></span><br><span class="line">vgs        <span class="comment"># 简要VG信息</span></span><br><span class="line">lvs        <span class="comment"># 简要LV信息</span></span><br><span class="line">pvdisplay  <span class="comment"># 详细PV信息</span></span><br><span class="line">vgdisplay  <span class="comment"># 详细VG信息</span></span><br><span class="line">lvdisplay  <span class="comment"># 详细LV信息</span></span><br><span class="line">lsblk      <span class="comment"># 块设备层次结构</span></span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../../2020/05/08/linux/5-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../../2020/05/08/linux/4-%E6%96%87%E4%BB%B6%E5%92%8C%E7%A8%8B%E5%BA%8F%E7%AE%A1%E7%90%86/"
                            aria-label=": 4.文件和程序管理"
                        >
                            4.文件和程序管理
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-08T16:06:24+08:00">
	
		    2020 年 5 月 8 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="1-用户权限管理"><a href="#1-用户权限管理" class="headerlink" title="1. 用户权限管理"></a>1. 用户权限管理</h2><h3 id="1-1-文件权限基础"><a href="#1-1-文件权限基础" class="headerlink" title="1.1 文件权限基础"></a>1.1 文件权限基础</h3><h4 id="权限表示法"><a href="#权限表示法" class="headerlink" title="权限表示法"></a>权限表示法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">d rwx r-x r--</span><br><span class="line">↑ ↑   ↑   ↑</span><br><span class="line">│ │   │   └─ 其他用户权限(r--)</span><br><span class="line">│ │   └─── 所属组权限(r-x)</span><br><span class="line">│ └────── 所有者权限(rwx)</span><br><span class="line">└──────── 文件类型(d=目录)</span><br></pre></td></tr></table></figure>

<h4 id="权限数值"><a href="#权限数值" class="headerlink" title="权限数值"></a>权限数值</h4><ul>
<li>r(读): 4</li>
<li>w(写): 2</li>
<li>x(执行): 1</li>
</ul>
<h3 id="1-2-chmod-命令"><a href="#1-2-chmod-命令" class="headerlink" title="1.2 chmod 命令"></a>1.2 chmod 命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> [选项] 权限 文件</span><br></pre></td></tr></table></figure>

<h4 id="常用选项"><a href="#常用选项" class="headerlink" title="常用选项"></a>常用选项</h4><ul>
<li><code>-R</code>: 递归修改目录下所有文件</li>
</ul>
<h4 id="权限设置方法"><a href="#权限设置方法" class="headerlink" title="权限设置方法"></a>权限设置方法</h4><ol>
<li><p><strong>符号法</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> u+x file      <span class="comment"># 给所有者添加执行权限</span></span><br><span class="line"><span class="built_in">chmod</span> g-w file      <span class="comment"># 移除组的写权限</span></span><br><span class="line"><span class="built_in">chmod</span> o=rx file     <span class="comment"># 设置其他用户为读执行</span></span><br><span class="line"><span class="built_in">chmod</span> a+r file      <span class="comment"># 给所有用户添加读权限</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>数字法</strong>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 755 file      <span class="comment"># rwxr-xr-x</span></span><br><span class="line"><span class="built_in">chmod</span> 644 file      <span class="comment"># rw-r--r--</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="1-3-特殊权限"><a href="#1-3-特殊权限" class="headerlink" title="1.3 特殊权限"></a>1.3 特殊权限</h3><table>
<thead>
<tr>
<th>权限</th>
<th>数值</th>
<th>设置方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>SUID</td>
<td>4000</td>
<td><code>u+s</code></td>
<td>执行时以文件所有者权限运行</td>
</tr>
<tr>
<td>SGID</td>
<td>2000</td>
<td><code>g+s</code></td>
<td>执行时以文件所属组权限运行</td>
</tr>
<tr>
<td>Sticky</td>
<td>1000</td>
<td><code>o+t</code></td>
<td>目录中文件只有所有者能删除</td>
</tr>
</tbody></table>
<h3 id="1-4-umask-命令"><a href="#1-4-umask-命令" class="headerlink" title="1.4 umask 命令"></a>1.4 umask 命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">umask</span>           <span class="comment"># 查看当前umask值</span></span><br><span class="line"><span class="built_in">umask</span> 022       <span class="comment"># 设置新的umask值</span></span><br></pre></td></tr></table></figure>
<ul>
<li>文件默认权限: <code>666 - umask</code></li>
<li>目录默认权限: <code>777 - umask</code></li>
</ul>
<h3 id="1-5-ACL-高级权限控制"><a href="#1-5-ACL-高级权限控制" class="headerlink" title="1.5 ACL 高级权限控制"></a>1.5 ACL 高级权限控制</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setfacl -m u:user:rwx file   <span class="comment"># 添加用户ACL</span></span><br><span class="line">setfacl -x u:user file       <span class="comment"># 删除用户ACL</span></span><br><span class="line">getfacl file                 <span class="comment"># 查看ACL权限</span></span><br></pre></td></tr></table></figure>

<h3 id="1-6-所有权管理"><a href="#1-6-所有权管理" class="headerlink" title="1.6 所有权管理"></a>1.6 所有权管理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> user:group file        <span class="comment"># 修改所有者和组</span></span><br><span class="line"><span class="built_in">chown</span> -R user:group <span class="built_in">dir</span>      <span class="comment"># 递归修改</span></span><br><span class="line"><span class="built_in">chgrp</span> group file             <span class="comment"># 修改文件所属组</span></span><br></pre></td></tr></table></figure>

<h2 id="2-链接管理"><a href="#2-链接管理" class="headerlink" title="2. 链接管理"></a>2. 链接管理</h2><h3 id="2-1-链接类型对比"><a href="#2-1-链接类型对比" class="headerlink" title="2.1 链接类型对比"></a>2.1 链接类型对比</h3><table>
<thead>
<tr>
<th>特性</th>
<th>硬链接</th>
<th>软链接</th>
</tr>
</thead>
<tbody><tr>
<td>inode</td>
<td>相同</td>
<td>不同</td>
</tr>
<tr>
<td>跨文件系统</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>链接目录</td>
<td>不允许</td>
<td>允许</td>
</tr>
<tr>
<td>原文件删除</td>
<td>仍可访问</td>
<td>失效</td>
</tr>
</tbody></table>
<h3 id="2-2-ln-命令"><a href="#2-2-ln-命令" class="headerlink" title="2.2 ln 命令"></a>2.2 ln 命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> <span class="built_in">source</span> <span class="built_in">link</span>        <span class="comment"># 创建硬链接</span></span><br><span class="line"><span class="built_in">ln</span> -s <span class="built_in">source</span> <span class="built_in">link</span>     <span class="comment"># 创建软链接</span></span><br></pre></td></tr></table></figure>

<h2 id="3-进程管理"><a href="#3-进程管理" class="headerlink" title="3. 进程管理"></a>3. 进程管理</h2><h3 id="3-1-ps-命令"><a href="#3-1-ps-命令" class="headerlink" title="3.1 ps 命令"></a>3.1 ps 命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ps aux       <span class="comment"># 查看所有进程</span></span><br><span class="line">ps -ef       <span class="comment"># 完整格式显示</span></span><br><span class="line">ps -u user   <span class="comment"># 查看指定用户进程</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-top-命令"><a href="#3-2-top-命令" class="headerlink" title="3.2 top 命令"></a>3.2 top 命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top          <span class="comment"># 动态查看进程</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>r</code>: 调整进程优先级</li>
<li><code>k</code>: 终止进程</li>
<li><code>q</code>: 退出</li>
</ul>
<h3 id="3-3-进程控制"><a href="#3-3-进程控制" class="headerlink" title="3.3 进程控制"></a>3.3 进程控制</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -9 PID          <span class="comment"># 强制终止进程</span></span><br><span class="line">killall process      <span class="comment"># 终止同名所有进程</span></span><br><span class="line">pkill pattern        <span class="comment"># 按模式终止进程</span></span><br></pre></td></tr></table></figure>

<h4 id="常用信号"><a href="#常用信号" class="headerlink" title="常用信号"></a>常用信号</h4><table>
<thead>
<tr>
<th>信号</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>HUP</td>
<td>1</td>
<td>重新加载配置</td>
</tr>
<tr>
<td>INT</td>
<td>2</td>
<td>中断(Ctrl+C)</td>
</tr>
<tr>
<td>KILL</td>
<td>9</td>
<td>强制终止</td>
</tr>
<tr>
<td>TERM</td>
<td>15</td>
<td>正常终止</td>
</tr>
</tbody></table>
<h3 id="3-4-作业控制"><a href="#3-4-作业控制" class="headerlink" title="3.4 作业控制"></a>3.4 作业控制</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &amp;       <span class="comment"># 后台运行</span></span><br><span class="line"><span class="built_in">fg</span> %1          <span class="comment"># 前台恢复作业1</span></span><br><span class="line"><span class="built_in">bg</span> %2          <span class="comment"># 后台继续作业2</span></span><br><span class="line"><span class="built_in">jobs</span>           <span class="comment"># 查看后台作业</span></span><br></pre></td></tr></table></figure>

<h3 id="3-5-优先级管理"><a href="#3-5-优先级管理" class="headerlink" title="3.5 优先级管理"></a>3.5 优先级管理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nice</span> -n 10 <span class="built_in">command</span>   <span class="comment"># 启动低优先级进程</span></span><br><span class="line">renice 15 -p PID     <span class="comment"># 调整运行中进程优先级</span></span><br></pre></td></tr></table></figure>

<h3 id="3-6-终端复用器"><a href="#3-6-终端复用器" class="headerlink" title="3.6 终端复用器"></a>3.6 终端复用器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tmux                <span class="comment"># 启动新会话</span></span><br></pre></td></tr></table></figure>
<p>常用快捷键:</p>
<ul>
<li><code>Ctrl+b c</code>: 新建窗口</li>
<li><code>Ctrl+b %</code>: 垂直分割</li>
<li><code>Ctrl+b &quot;</code>: 水平分割</li>
<li><code>Ctrl+b d</code>: 分离会话</li>
</ul>
<h2 id="4-压缩与归档"><a href="#4-压缩与归档" class="headerlink" title="4. 压缩与归档"></a>4. 压缩与归档</h2><h3 id="4-1-单文件压缩"><a href="#4-1-单文件压缩" class="headerlink" title="4.1 单文件压缩"></a>4.1 单文件压缩</h3><h4 id="gzip"><a href="#gzip" class="headerlink" title="gzip"></a>gzip</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gzip file            <span class="comment"># 压缩为file.gz</span></span><br><span class="line">gunzip file.gz       <span class="comment"># 解压</span></span><br><span class="line">gzip -d file.gz      <span class="comment"># 解压(同上)</span></span><br></pre></td></tr></table></figure>

<h4 id="bzip2"><a href="#bzip2" class="headerlink" title="bzip2"></a>bzip2</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bzip2 file           <span class="comment"># 压缩为file.bz2</span></span><br><span class="line">bunzip2 file.bz2     <span class="comment"># 解压</span></span><br></pre></td></tr></table></figure>

<h4 id="xz"><a href="#xz" class="headerlink" title="xz"></a>xz</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xz file              <span class="comment"># 压缩为file.xz</span></span><br><span class="line">unxz file.xz         <span class="comment"># 解压</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-归档工具"><a href="#4-2-归档工具" class="headerlink" title="4.2 归档工具"></a>4.2 归档工具</h3><h4 id="tar-命令"><a href="#tar-命令" class="headerlink" title="tar 命令"></a>tar 命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打包压缩</span></span><br><span class="line">tar czvf archive.tar.gz <span class="built_in">dir</span>/     <span class="comment"># gzip压缩</span></span><br><span class="line">tar cjvf archive.tar.bz2 <span class="built_in">dir</span>/    <span class="comment"># bzip2压缩</span></span><br><span class="line">tar cJvf archive.tar.xz <span class="built_in">dir</span>/     <span class="comment"># xz压缩</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar xzvf archive.tar.gz          <span class="comment"># 解压gzip</span></span><br><span class="line">tar xjvf archive.tar.bz2         <span class="comment"># 解压bzip2</span></span><br><span class="line">tar xJvf archive.tar.xz          <span class="comment"># 解压xz</span></span><br></pre></td></tr></table></figure>

<h4 id="cpio-命令"><a href="#cpio-命令" class="headerlink" title="cpio 命令"></a>cpio 命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . | cpio -ov &gt; backup.cpio      <span class="comment"># 创建归档</span></span><br><span class="line">cpio -idv &lt; backup.cpio              <span class="comment"># 解压归档</span></span><br></pre></td></tr></table></figure>

<h4 id="dd-命令"><a href="#dd-命令" class="headerlink" title="dd 命令"></a>dd 命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/sda of=disk.img bs=1M     <span class="comment"># 创建磁盘映像</span></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=disk.img of=/dev/sdb           <span class="comment"># 恢复磁盘映像</span></span><br></pre></td></tr></table></figure>

<h2 id="5-实用技巧"><a href="#5-实用技巧" class="headerlink" title="5. 实用技巧"></a>5. 实用技巧</h2><h3 id="5-1-nohup-命令"><a href="#5-1-nohup-命令" class="headerlink" title="5.1 nohup 命令"></a>5.1 nohup 命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span> <span class="built_in">command</span> &amp;      <span class="comment"># 退出终端后继续运行</span></span><br></pre></td></tr></table></figure>

<h3 id="5-2-watch-命令"><a href="#5-2-watch-命令" class="headerlink" title="5.2 watch 命令"></a>5.2 watch 命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch -n 5 <span class="string">&#x27;ls -l&#x27;</span>   <span class="comment"># 每5秒执行一次命令</span></span><br></pre></td></tr></table></figure>

<h3 id="5-3-文件传输"><a href="#5-3-文件传输" class="headerlink" title="5.3 文件传输"></a>5.3 文件传输</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=file.iso | ssh user@host <span class="string">&quot;dd of=file.iso&quot;</span>  <span class="comment"># 通过SSH传输文件</span></span><br></pre></td></tr></table></figure>


                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../../2020/05/08/linux/4-%E6%96%87%E4%BB%B6%E5%92%8C%E7%A8%8B%E5%BA%8F%E7%AE%A1%E7%90%86/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../../2020/05/07/linux/3-bash/"
                            aria-label=": 3.bash"
                        >
                            3.bash
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-07T16:30:52+08:00">
	
		    2020 年 5 月 7 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Bash-命令与-Shell-使用指南"><a href="#Bash-命令与-Shell-使用指南" class="headerlink" title="Bash 命令与 Shell 使用指南"></a>Bash 命令与 Shell 使用指南</h1><h2 id="1-命令组合与控制"><a href="#1-命令组合与控制" class="headerlink" title="1. 命令组合与控制"></a>1. 命令组合与控制</h2><h3 id="1-1-命令组合方式"><a href="#1-1-命令组合方式" class="headerlink" title="1.1 命令组合方式"></a>1.1 命令组合方式</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">命令1 ; 命令2    <span class="comment"># 无论命令1成功与否，都会执行命令2</span></span><br><span class="line">命令1 &amp;&amp; 命令2   <span class="comment"># 只有命令1成功执行(返回0)才会执行命令2</span></span><br><span class="line">命令1 || 命令2   <span class="comment"># 只有命令1执行失败(非0)才会执行命令2</span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-引用符号"><a href="#1-2-引用符号" class="headerlink" title="1.2 引用符号"></a>1.2 引用符号</h3><table>
<thead>
<tr>
<th>符号</th>
<th>名称</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&#39;</code></td>
<td>单引号</td>
<td>内部所有内容视为纯文本，不解释变量和特殊字符</td>
</tr>
<tr>
<td><code>&quot;</code></td>
<td>双引号</td>
<td>会解释$、`和\等特殊字符，变量会被展开</td>
</tr>
<tr>
<td><code>`</code></td>
<td>反引号</td>
<td>执行内部命令并将结果替换到当前位置(等同于<code>$(命令)</code>语法)</td>
</tr>
</tbody></table>
<h2 id="2-命令历史"><a href="#2-命令历史" class="headerlink" title="2. 命令历史"></a>2. 命令历史</h2><h3 id="2-1-history-命令"><a href="#2-1-history-命令" class="headerlink" title="2.1 history 命令"></a>2.1 history 命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">history</span>        <span class="comment"># 显示命令历史记录</span></span><br><span class="line">!5            <span class="comment"># 执行历史记录中第5条命令</span></span><br><span class="line">!<span class="built_in">ls</span>           <span class="comment"># 执行最近以ls开头的命令</span></span><br><span class="line">!?config      <span class="comment"># 执行最近包含config的命令</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-历史记录管理"><a href="#2-2-历史记录管理" class="headerlink" title="2.2 历史记录管理"></a>2.2 历史记录管理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">history</span> -c    <span class="comment"># 清除当前shell的历史记录</span></span><br><span class="line"><span class="built_in">history</span> -d 10 <span class="comment"># 删除第10条历史记录</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-相关环境变量"><a href="#2-3-相关环境变量" class="headerlink" title="2.3 相关环境变量"></a>2.3 相关环境变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HISTSIZE=1000       <span class="comment"># 内存中保存的历史记录数量</span></span><br><span class="line">HISTFILESIZE=2000   <span class="comment"># 历史记录文件保存的最大数量</span></span><br><span class="line">HISTFILE=~/.bash_history  <span class="comment"># 历史记录文件路径</span></span><br></pre></td></tr></table></figure>

<h2 id="3-Shell-类型与快捷键"><a href="#3-Shell-类型与快捷键" class="headerlink" title="3. Shell 类型与快捷键"></a>3. Shell 类型与快捷键</h2><h3 id="3-1-常见Shell类型"><a href="#3-1-常见Shell类型" class="headerlink" title="3.1 常见Shell类型"></a>3.1 常见Shell类型</h3><ul>
<li><strong>Bourne Shell(sh)</strong>: 经典Unix shell → 衍生出bash</li>
<li><strong>Bash(Bourne-Again Shell)</strong>: Linux默认shell</li>
<li><strong>C Shell(csh)</strong>: 类C语法 → 衍生出tcsh</li>
<li><strong>Korn Shell(ksh)</strong>: 结合sh和csh优点</li>
<li><strong>Z Shell(zsh)</strong>: 功能强大的现代shell</li>
</ul>
<h3 id="3-2-常用快捷键"><a href="#3-2-常用快捷键" class="headerlink" title="3.2 常用快捷键"></a>3.2 常用快捷键</h3><table>
<thead>
<tr>
<th>快捷键</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td>Tab</td>
<td>命令&#x2F;文件名自动补全</td>
</tr>
<tr>
<td>Ctrl+A</td>
<td>移动到行首</td>
</tr>
<tr>
<td>Ctrl+E</td>
<td>移动到行尾</td>
</tr>
<tr>
<td>Ctrl+D</td>
<td>删除当前字符(相当于Delete)</td>
</tr>
<tr>
<td>Ctrl+H</td>
<td>删除前一个字符(相当于Backspace)</td>
</tr>
<tr>
<td>Ctrl+L</td>
<td>清屏(等同于clear命令)</td>
</tr>
<tr>
<td>Ctrl+C</td>
<td>终止当前命令</td>
</tr>
<tr>
<td>Ctrl+Z</td>
<td>暂停当前命令(可用fg恢复)</td>
</tr>
<tr>
<td>Ctrl+S</td>
<td>暂停屏幕输出</td>
</tr>
<tr>
<td>Ctrl+Q</td>
<td>恢复屏幕输出</td>
</tr>
</tbody></table>
<h2 id="4-变量与环境设置"><a href="#4-变量与环境设置" class="headerlink" title="4. 变量与环境设置"></a>4. 变量与环境设置</h2><h3 id="4-1-变量操作"><a href="#4-1-变量操作" class="headerlink" title="4.1 变量操作"></a>4.1 变量操作</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> VAR=value    <span class="comment"># 设置环境变量(对新shell有效)</span></span><br><span class="line"><span class="built_in">unset</span> VAR           <span class="comment"># 删除变量</span></span><br><span class="line">PATH=<span class="variable">$PATH</span>:/new/path <span class="comment"># 追加PATH路径</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-set-命令选项"><a href="#4-2-set-命令选项" class="headerlink" title="4.2 set 命令选项"></a>4.2 set 命令选项</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> -o option      <span class="comment"># 启用选项</span></span><br><span class="line"><span class="built_in">set</span> +o option      <span class="comment"># 禁用选项</span></span><br></pre></td></tr></table></figure>
<p>常用选项：</p>
<ul>
<li><code>noclobber</code>&#x2F;<code>-C</code>: 防止重定向覆盖已有文件</li>
<li><code>histexpand</code>&#x2F;<code>-H</code>: 启用<code>!</code>历史命令扩展</li>
</ul>
<h3 id="4-3-提示符定制-PS1"><a href="#4-3-提示符定制-PS1" class="headerlink" title="4.3 提示符定制(PS1)"></a>4.3 提示符定制(PS1)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS1=<span class="string">&#x27;[\u@\h \W]\$ &#x27;</span>  <span class="comment"># 常见默认提示符格式</span></span><br></pre></td></tr></table></figure>
<p>可用转义符：</p>
<ul>
<li><code>\s</code>: shell名称</li>
<li><code>\v</code>: bash版本</li>
<li><code>\u</code>: 用户名</li>
<li><code>\h</code>: 主机名</li>
<li><code>\w</code>: 当前工作目录</li>
</ul>
<h3 id="4-4-用户切换"><a href="#4-4-用户切换" class="headerlink" title="4.4 用户切换"></a>4.4 用户切换</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su user       <span class="comment"># 切换用户(不改变环境变量)</span></span><br><span class="line">su - user     <span class="comment"># 完全切换用户(包括环境)</span></span><br></pre></td></tr></table></figure>

<h2 id="5-帮助命令-man-详解"><a href="#5-帮助命令-man-详解" class="headerlink" title="5.帮助命令 man 详解"></a>5.帮助命令 <code>man</code> 详解</h2><h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man <span class="built_in">command</span>      <span class="comment"># 查看命令的手册页(返回第一个匹配的帮助文件)</span></span><br></pre></td></tr></table></figure>

<h3 id="常用选项"><a href="#常用选项" class="headerlink" title="常用选项"></a>常用选项</h3><table>
<thead>
<tr>
<th>选项</th>
<th>功能说明</th>
<th>等价命令</th>
</tr>
</thead>
<tbody><tr>
<td><code>-a</code></td>
<td>显示所有匹配的手册页(按顺序显示)</td>
<td>-</td>
</tr>
<tr>
<td><code>-f</code></td>
<td>查找完全匹配的命令文档</td>
<td><code>whatis</code></td>
</tr>
<tr>
<td><code>-k</code></td>
<td>查找包含关键词的文档</td>
<td><code>apropos</code></td>
</tr>
<tr>
<td><code>-w</code></td>
<td>显示手册页的存储路径</td>
<td>-</td>
</tr>
</tbody></table>
<h3 id="指定手册章节"><a href="#指定手册章节" class="headerlink" title="指定手册章节"></a>指定手册章节</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">man 5 passwd     <span class="comment"># 查看/etc/passwd文件的格式说明(第5节)</span></span><br><span class="line">man 3 <span class="built_in">printf</span>     <span class="comment"># 查看C库函数printf的文档(第3节)</span></span><br></pre></td></tr></table></figure>

<h3 id="手册章节分类"><a href="#手册章节分类" class="headerlink" title="手册章节分类"></a>手册章节分类</h3><table>
<thead>
<tr>
<th>Section</th>
<th>内容类型</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>用户命令</td>
</tr>
<tr>
<td>2</td>
<td>系统调用</td>
</tr>
<tr>
<td>3</td>
<td>C库函数</td>
</tr>
<tr>
<td>4</td>
<td>设备文件</td>
</tr>
<tr>
<td>5</td>
<td>配置文件格式</td>
</tr>
<tr>
<td>6</td>
<td>游戏</td>
</tr>
<tr>
<td>7</td>
<td>杂项</td>
</tr>
<tr>
<td>8</td>
<td>系统管理命令</td>
</tr>
<tr>
<td>9</td>
<td>Linux内核相关</td>
</tr>
</tbody></table>
<h3 id="手册页存储位置"><a href="#手册页存储位置" class="headerlink" title="手册页存储位置"></a>手册页存储位置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/man         <span class="comment"># 系统手册页主目录</span></span><br><span class="line">/usr/local/share/man   <span class="comment"># 本地安装软件的手册页</span></span><br></pre></td></tr></table></figure>

<h3 id="维护whatis数据库"><a href="#维护whatis数据库" class="headerlink" title="维护whatis数据库"></a>维护whatis数据库</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">makewhatis            <span class="comment"># 生成/更新whatis数据库(供-f/-k使用)</span></span><br><span class="line">mandb                 <span class="comment"># 现代系统中更新手册数据库(替代makewhatis)</span></span><br></pre></td></tr></table></figure>

<h3 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">man -a <span class="built_in">printf</span>        <span class="comment"># 查看所有章节的printf文档</span></span><br><span class="line">man -k <span class="string">&quot;copy&quot;</span>        <span class="comment"># 查找所有包含&quot;copy&quot;关键词的命令</span></span><br><span class="line">man -f <span class="built_in">ls</span>            <span class="comment"># 精确查找ls命令的文档</span></span><br><span class="line">man -w 5 passwd      <span class="comment"># 显示passwd配置文件的文档路径</span></span><br></pre></td></tr></table></figure>



<h2 id="6-管道与重定向"><a href="#6-管道与重定向" class="headerlink" title="6. 管道与重定向"></a>6. 管道与重定向</h2><h3 id="6-1-标准文件描述符"><a href="#6-1-标准文件描述符" class="headerlink" title="6.1 标准文件描述符"></a>6.1 标准文件描述符</h3><table>
<thead>
<tr>
<th>文件描述符</th>
<th>名称</th>
<th>默认设备</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>标准输入(stdin)</td>
<td>键盘</td>
</tr>
<tr>
<td>1</td>
<td>标准输出(stdout)</td>
<td>屏幕</td>
</tr>
<tr>
<td>2</td>
<td>标准错误(stderr)</td>
<td>屏幕</td>
</tr>
</tbody></table>
<h3 id="6-2-管道"><a href="#6-2-管道" class="headerlink" title="6.2 管道(|)"></a>6.2 管道(|)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">命令1 | 命令2    <span class="comment"># 将命令1的输出作为命令2的输入</span></span><br></pre></td></tr></table></figure>

<h3 id="6-3-tee命令"><a href="#6-3-tee命令" class="headerlink" title="6.3 tee命令"></a>6.3 tee命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">命令 | <span class="built_in">tee</span> 文件    <span class="comment"># 同时输出到屏幕和文件</span></span><br><span class="line">命令 | <span class="built_in">tee</span> -a 文件 <span class="comment"># 追加模式(不覆盖原文件)</span></span><br></pre></td></tr></table></figure>

<h3 id="6-4-重定向操作"><a href="#6-4-重定向操作" class="headerlink" title="6.4 重定向操作"></a>6.4 重定向操作</h3><table>
<thead>
<tr>
<th>语法</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>命令 &gt; 文件</code></td>
<td>标准输出覆盖写入文件</td>
</tr>
<tr>
<td><code>命令 &gt;&gt; 文件</code></td>
<td>标准输出追加写入文件</td>
</tr>
<tr>
<td><code>命令 &lt; 文件</code></td>
<td>从文件读取标准输入</td>
</tr>
<tr>
<td><code>命令 2&gt; 文件</code></td>
<td>标准错误覆盖写入文件</td>
</tr>
<tr>
<td><code>命令 2&gt;&gt; 文件</code></td>
<td>标准错误追加写入文件</td>
</tr>
<tr>
<td><code>命令 &gt; 文件 2&gt;&amp;1</code></td>
<td>标准输出和错误都覆盖写入同一文件</td>
</tr>
<tr>
<td><code>命令 &gt;&gt; 文件 2&gt;&amp;1</code></td>
<td>标准输出和错误都追加写入同一文件</td>
</tr>
<tr>
<td><code>命令 &lt;&lt; 结束标记</code></td>
<td>从标准输入读取直到遇到”结束标记”(here文档)</td>
</tr>
<tr>
<td><code>命令 &amp;&gt; 文件</code></td>
<td>标准输出和错误都覆盖写入文件(bash简写)</td>
</tr>
</tbody></table>
<h2 id="7-文件操作命令"><a href="#7-文件操作命令" class="headerlink" title="7. 文件操作命令"></a>7. 文件操作命令</h2><h3 id="7-1-ls命令"><a href="#7-1-ls命令" class="headerlink" title="7.1 ls命令"></a>7.1 ls命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -a    <span class="comment"># 显示所有文件(包括.开头的隐藏文件)</span></span><br><span class="line"><span class="built_in">ls</span> -A    <span class="comment"># 类似-a但不显示.和..</span></span><br><span class="line"><span class="built_in">ls</span> -d    <span class="comment"># 显示目录本身而非内容</span></span><br><span class="line"><span class="built_in">ls</span> -F    <span class="comment"># 显示文件类型标识(/:目录, *:可执行, @:链接)</span></span><br><span class="line"><span class="built_in">ls</span> -i    <span class="comment"># 显示inode编号</span></span><br><span class="line"><span class="built_in">ls</span> -l    <span class="comment"># 长格式显示详细信息</span></span><br><span class="line"><span class="built_in">ls</span> -t    <span class="comment"># 按修改时间排序</span></span><br><span class="line"><span class="built_in">ls</span> -h    <span class="comment"># 人类可读的文件大小(如1K, 2M)</span></span><br></pre></td></tr></table></figure>

<h3 id="7-2-cp命令"><a href="#7-2-cp命令" class="headerlink" title="7.2 cp命令"></a>7.2 cp命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> -f    <span class="comment"># 强制覆盖不提示</span></span><br><span class="line"><span class="built_in">cp</span> -i    <span class="comment"># 覆盖前提示确认</span></span><br><span class="line"><span class="built_in">cp</span> -p    <span class="comment"># 保留原文件属性</span></span><br><span class="line"><span class="built_in">cp</span> -r/R  <span class="comment"># 递归复制目录</span></span><br><span class="line"><span class="built_in">cp</span> -d    <span class="comment"># 保留链接文件</span></span><br><span class="line"><span class="built_in">cp</span> -a    <span class="comment"># 归档模式(相当于-dpR)</span></span><br></pre></td></tr></table></figure>

<h3 id="7-3-mv命令"><a href="#7-3-mv命令" class="headerlink" title="7.3 mv命令"></a>7.3 mv命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> -f    <span class="comment"># 强制覆盖不提示</span></span><br><span class="line"><span class="built_in">mv</span> -i    <span class="comment"># 覆盖前提示确认</span></span><br></pre></td></tr></table></figure>

<h3 id="7-4-mkdir命令"><a href="#7-4-mkdir命令" class="headerlink" title="7.4 mkdir命令"></a>7.4 mkdir命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -m 755 <span class="built_in">dir</span>   <span class="comment"># 创建指定权限的目录</span></span><br><span class="line"><span class="built_in">mkdir</span> -p dir1/dir2 <span class="comment"># 创建多级目录</span></span><br></pre></td></tr></table></figure>

<h3 id="7-5-rm命令"><a href="#7-5-rm命令" class="headerlink" title="7.5 rm命令"></a>7.5 rm命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -f    <span class="comment"># 强制删除不提示</span></span><br><span class="line"><span class="built_in">rm</span> -i    <span class="comment"># 删除前提示确认</span></span><br><span class="line"><span class="built_in">rm</span> -r/R  <span class="comment"># 递归删除目录</span></span><br></pre></td></tr></table></figure>

<h3 id="7-6-rmdir命令"><a href="#7-6-rmdir命令" class="headerlink" title="7.6 rmdir命令"></a>7.6 rmdir命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rmdir</span> -p dir1/dir2 <span class="comment"># 删除多级空目录</span></span><br></pre></td></tr></table></figure>

<h3 id="7-7-touch命令"><a href="#7-7-touch命令" class="headerlink" title="7.7 touch命令"></a>7.7 touch命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> -t 202405071530.00 file  <span class="comment"># 设置特定时间戳(YYMMDDhhmm.ss)</span></span><br><span class="line"><span class="built_in">touch</span> -a file       <span class="comment"># 仅更新访问时间</span></span><br><span class="line"><span class="built_in">touch</span> -m file       <span class="comment"># 仅更新修改时间</span></span><br></pre></td></tr></table></figure>

<h3 id="7-8-file命令"><a href="#7-8-file命令" class="headerlink" title="7.8 file命令"></a>7.8 file命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file document.txt   <span class="comment"># 检测文件类型和编码</span></span><br></pre></td></tr></table></figure>

<h2 id="8-元字符-通配符"><a href="#8-元字符-通配符" class="headerlink" title="8. 元字符(通配符)"></a>8. 元字符(通配符)</h2><table>
<thead>
<tr>
<th>元字符</th>
<th>功能描述</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>*</code></td>
<td>匹配任意长度字符(包括空字符)</td>
<td><code>ls *.txt</code></td>
</tr>
<tr>
<td><code>?</code></td>
<td>匹配任意单个字符</td>
<td><code>ls file?.txt</code></td>
</tr>
<tr>
<td><code>[]</code></td>
<td>匹配括号内任意一个字符</td>
<td><code>ls file[123].txt</code></td>
</tr>
<tr>
<td><code>[!]</code></td>
<td>匹配不在括号内的任意一个字符</td>
<td><code>ls file[!a-z].txt</code></td>
</tr>
<tr>
<td><code>&#123;&#125;</code></td>
<td>展开括号内逗号分隔的多个模式</td>
<td><code>touch file&#123;1,2,3&#125;</code></td>
</tr>
</tbody></table>
<p>示例扩展：</p>
<ul>
<li><code>[a-z]</code>: 任意小写字母</li>
<li><code>[0-9]</code>: 任意数字</li>
<li><code>[a-zA-Z]</code>: 任意字母</li>
<li><code>file&#123;1..3&#125;</code>: 展开为file1, file2, file3</li>
</ul>
<h2 id="9-文档处理命令"><a href="#9-文档处理命令" class="headerlink" title="9. 文档处理命令"></a>9. 文档处理命令</h2><h3 id="9-1-文件内容查看"><a href="#9-1-文件内容查看" class="headerlink" title="9.1 文件内容查看"></a>9.1 文件内容查看</h3><h4 id="cat-命令"><a href="#cat-命令" class="headerlink" title="cat 命令"></a>cat 命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> -n file.txt  <span class="comment"># 显示文件内容并添加行号</span></span><br></pre></td></tr></table></figure>

<h4 id="nl-命令（行号显示）"><a href="#nl-命令（行号显示）" class="headerlink" title="nl 命令（行号显示）"></a>nl 命令（行号显示）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nl</span> -b a file.txt    <span class="comment"># 所有行添加行号</span></span><br><span class="line"><span class="built_in">nl</span> -b t file.txt    <span class="comment"># 非空行添加行号</span></span><br><span class="line"><span class="built_in">nl</span> -h a -f a file.txt  <span class="comment"># 为页眉和页脚也添加行号</span></span><br></pre></td></tr></table></figure>

<h4 id="od-命令（二进制查看）"><a href="#od-命令（二进制查看）" class="headerlink" title="od 命令（二进制查看）"></a>od 命令（二进制查看）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">od</span> -t c file.bin    <span class="comment"># 以ASCII字符显示</span></span><br><span class="line"><span class="built_in">od</span> -t o file.bin    <span class="comment"># 以八进制显示</span></span><br><span class="line"><span class="built_in">od</span> -t x file.bin    <span class="comment"># 以十六进制显示</span></span><br></pre></td></tr></table></figure>

<h3 id="9-2-文件头部-尾部查看"><a href="#9-2-文件头部-尾部查看" class="headerlink" title="9.2 文件头部&#x2F;尾部查看"></a>9.2 文件头部&#x2F;尾部查看</h3><h4 id="head-命令"><a href="#head-命令" class="headerlink" title="head 命令"></a>head 命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">head</span> -n 10 file.txt    <span class="comment"># 显示前10行</span></span><br><span class="line"><span class="built_in">head</span> -10 file.txt      <span class="comment"># 同上</span></span><br><span class="line"><span class="built_in">head</span> -c 100 file.txt   <span class="comment"># 显示前100字节</span></span><br></pre></td></tr></table></figure>

<h4 id="tail-命令"><a href="#tail-命令" class="headerlink" title="tail 命令"></a>tail 命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -n 10 file.txt    <span class="comment"># 显示最后10行</span></span><br><span class="line"><span class="built_in">tail</span> -10 file.txt      <span class="comment"># 同上</span></span><br><span class="line"><span class="built_in">tail</span> -c 100 file.txt   <span class="comment"># 显示最后100字节</span></span><br><span class="line"><span class="built_in">tail</span> -f log.txt        <span class="comment"># 实时监控日志文件</span></span><br></pre></td></tr></table></figure>

<h3 id="9-3-文本提取与转换"><a href="#9-3-文本提取与转换" class="headerlink" title="9.3 文本提取与转换"></a>9.3 文本提取与转换</h3><h4 id="cut-命令"><a href="#cut-命令" class="headerlink" title="cut 命令"></a>cut 命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cut</span> -c 1-5 file.txt      <span class="comment"># 提取每行第1-5个字符</span></span><br><span class="line"><span class="built_in">cut</span> -d: -f1 /etc/passwd  <span class="comment"># 以冒号分隔，提取第一个字段</span></span><br></pre></td></tr></table></figure>

<h4 id="join-命令（合并文件）"><a href="#join-命令（合并文件）" class="headerlink" title="join 命令（合并文件）"></a>join 命令（合并文件）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">join</span> -j 1 file1.txt file2.txt  <span class="comment"># 按第一个字段合并两个文件</span></span><br></pre></td></tr></table></figure>

<h4 id="paste-命令"><a href="#paste-命令" class="headerlink" title="paste 命令"></a>paste 命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">paste</span> -d<span class="string">&quot;;&quot;</span> file1.txt file2.txt  <span class="comment"># 用分号分隔合并文件</span></span><br></pre></td></tr></table></figure>

<h4 id="tr-命令（字符转换）"><a href="#tr-命令（字符转换）" class="headerlink" title="tr 命令（字符转换）"></a>tr 命令（字符转换）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tr</span> <span class="string">&#x27;a-z&#x27;</span> <span class="string">&#x27;A-Z&#x27;</span> &lt; file.txt    <span class="comment"># 小写转大写</span></span><br><span class="line"><span class="built_in">tr</span> -d <span class="string">&#x27;\r&#x27;</span> &lt; file.txt        <span class="comment"># 删除回车符</span></span><br><span class="line"><span class="built_in">tr</span> -s <span class="string">&#x27; &#x27;</span> &lt; file.txt         <span class="comment"># 压缩连续空格</span></span><br><span class="line"><span class="built_in">tr</span> -d <span class="string">&#x27;[:digit:]&#x27;</span> &lt; file.txt <span class="comment"># 删除所有数字</span></span><br></pre></td></tr></table></figure>

<h3 id="9-4-文本排序与统计"><a href="#9-4-文本排序与统计" class="headerlink" title="9.4 文本排序与统计"></a>9.4 文本排序与统计</h3><h4 id="sort-命令"><a href="#sort-命令" class="headerlink" title="sort 命令"></a>sort 命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt          <span class="comment"># 按字母顺序排序</span></span><br><span class="line"><span class="built_in">sort</span> -n file.txt       <span class="comment"># 按数值排序</span></span><br><span class="line"><span class="built_in">sort</span> -r file.txt       <span class="comment"># 反向排序</span></span><br><span class="line"><span class="built_in">sort</span> -t: -k3n /etc/passwd  <span class="comment"># 按冒号分隔的第3列数值排序</span></span><br></pre></td></tr></table></figure>

<h4 id="uniq-命令（去重）"><a href="#uniq-命令（去重）" class="headerlink" title="uniq 命令（去重）"></a>uniq 命令（去重）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt | <span class="built_in">uniq</span>    <span class="comment"># 去重（需先排序）</span></span><br><span class="line"><span class="built_in">uniq</span> -d file.txt        <span class="comment"># 只显示重复行</span></span><br><span class="line"><span class="built_in">uniq</span> -u file.txt        <span class="comment"># 只显示唯一行</span></span><br></pre></td></tr></table></figure>

<h4 id="wc-命令（统计）"><a href="#wc-命令（统计）" class="headerlink" title="wc 命令（统计）"></a>wc 命令（统计）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> -l file.txt    <span class="comment"># 统计行数</span></span><br><span class="line"><span class="built_in">wc</span> -w file.txt    <span class="comment"># 统计单词数</span></span><br><span class="line"><span class="built_in">wc</span> -c file.txt    <span class="comment"># 统计字节数</span></span><br></pre></td></tr></table></figure>

<h3 id="9-5-文本分割与格式化"><a href="#9-5-文本分割与格式化" class="headerlink" title="9.5 文本分割与格式化"></a>9.5 文本分割与格式化</h3><h4 id="split-命令"><a href="#split-命令" class="headerlink" title="split 命令"></a>split 命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">split</span> -l 1000 bigfile.txt part_  <span class="comment"># 每1000行分割文件</span></span><br></pre></td></tr></table></figure>

<h4 id="pr-命令（分页）"><a href="#pr-命令（分页）" class="headerlink" title="pr 命令（分页）"></a>pr 命令（分页）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">pr</span> -l 40 file.txt    <span class="comment"># 按每页40行分页显示</span></span><br></pre></td></tr></table></figure>

<h4 id="fmt-命令（格式化）"><a href="#fmt-命令（格式化）" class="headerlink" title="fmt 命令（格式化）"></a>fmt 命令（格式化）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">fmt</span> -w 80 file.txt   <span class="comment"># 设置每行80个字符</span></span><br></pre></td></tr></table></figure>

<h4 id="expand-unexpand-命令"><a href="#expand-unexpand-命令" class="headerlink" title="expand&#x2F;unexpand 命令"></a>expand&#x2F;unexpand 命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">expand</span> -t 4 file.txt    <span class="comment"># 将tab转为4个空格</span></span><br><span class="line"><span class="built_in">unexpand</span> -t 4 file.txt  <span class="comment"># 将4个空格转为tab</span></span><br></pre></td></tr></table></figure>

<h3 id="8-6-高级文本处理"><a href="#8-6-高级文本处理" class="headerlink" title="8.6 高级文本处理"></a>8.6 高级文本处理</h3><h4 id="xargs-命令"><a href="#xargs-命令" class="headerlink" title="xargs 命令"></a>xargs 命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find . -name <span class="string">&quot;*.log&quot;</span> | xargs <span class="built_in">rm</span>    <span class="comment"># 删除所有log文件</span></span><br><span class="line">find . -<span class="built_in">type</span> f | xargs grep <span class="string">&quot;text&quot;</span> <span class="comment"># 在所有文件中搜索文本</span></span><br></pre></td></tr></table></figure>

<h2 id="10-vi-vim-编辑器"><a href="#10-vi-vim-编辑器" class="headerlink" title="10. vi&#x2F;vim 编辑器"></a>10. vi&#x2F;vim 编辑器</h2><h3 id="10-1-基本操作"><a href="#10-1-基本操作" class="headerlink" title="10.1 基本操作"></a>10.1 基本操作</h3><h4 id="启动与退出"><a href="#启动与退出" class="headerlink" title="启动与退出"></a>启动与退出</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi file.txt        <span class="comment"># 编辑文件</span></span><br><span class="line">vi -R file.txt     <span class="comment"># 只读模式</span></span><br><span class="line">:q                 <span class="comment"># 退出</span></span><br><span class="line">:q!                <span class="comment"># 强制退出</span></span><br><span class="line">:wq 或 ZZ          <span class="comment"># 保存退出</span></span><br></pre></td></tr></table></figure>

<h4 id="模式切换"><a href="#模式切换" class="headerlink" title="模式切换"></a>模式切换</h4><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>i</td>
<td>在光标前插入</td>
</tr>
<tr>
<td>a</td>
<td>在光标后插入</td>
</tr>
<tr>
<td>I</td>
<td>在行首插入</td>
</tr>
<tr>
<td>A</td>
<td>在行尾插入</td>
</tr>
<tr>
<td>o</td>
<td>在下一行插入</td>
</tr>
<tr>
<td>O</td>
<td>在上一行插入</td>
</tr>
<tr>
<td>ESC</td>
<td>返回命令模式</td>
</tr>
</tbody></table>
<h3 id="10-2-光标移动"><a href="#10-2-光标移动" class="headerlink" title="10.2 光标移动"></a>10.2 光标移动</h3><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>h&#x2F;j&#x2F;k&#x2F;l</td>
<td>左&#x2F;下&#x2F;上&#x2F;右</td>
</tr>
<tr>
<td>0</td>
<td>行首</td>
</tr>
<tr>
<td>$</td>
<td>行尾</td>
</tr>
<tr>
<td>gg</td>
<td>文件开头</td>
</tr>
<tr>
<td>G</td>
<td>文件末尾</td>
</tr>
<tr>
<td>50G</td>
<td>跳转到第50行</td>
</tr>
<tr>
<td>Ctrl+b</td>
<td>上一页</td>
</tr>
<tr>
<td>Ctrl+f</td>
<td>下一页</td>
</tr>
</tbody></table>
<h3 id="10-3-编辑命令"><a href="#10-3-编辑命令" class="headerlink" title="10.3 编辑命令"></a>10.3 编辑命令</h3><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>x</td>
<td>删除当前字符</td>
</tr>
<tr>
<td>X</td>
<td>删除前一个字符</td>
</tr>
<tr>
<td>dd</td>
<td>删除当前行</td>
</tr>
<tr>
<td>dw</td>
<td>删除下一个单词</td>
</tr>
<tr>
<td>yy</td>
<td>复制当前行</td>
</tr>
<tr>
<td>p</td>
<td>粘贴到光标后</td>
</tr>
<tr>
<td>P</td>
<td>粘贴到光标前</td>
</tr>
<tr>
<td>u</td>
<td>撤销</td>
</tr>
<tr>
<td>Ctrl+r</td>
<td>重做</td>
</tr>
</tbody></table>
<h3 id="10-4-搜索与替换"><a href="#10-4-搜索与替换" class="headerlink" title="10.4 搜索与替换"></a>10.4 搜索与替换</h3><table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;pattern</td>
<td>向前搜索</td>
</tr>
<tr>
<td>?pattern</td>
<td>向后搜索</td>
</tr>
<tr>
<td>n</td>
<td>下一个匹配项</td>
</tr>
<tr>
<td>N</td>
<td>上一个匹配项</td>
</tr>
<tr>
<td>:%s&#x2F;old&#x2F;new&#x2F;g</td>
<td>全局替换</td>
</tr>
<tr>
<td>:1,10s&#x2F;old&#x2F;new&#x2F;g</td>
<td>替换1-10行的内容</td>
</tr>
</tbody></table>
<h3 id="10-5-设置选项"><a href="#10-5-设置选项" class="headerlink" title="10.5 设置选项"></a>10.5 设置选项</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">:<span class="keyword">set</span> <span class="keyword">nu</span>        # 显示行号</span><br><span class="line">:<span class="keyword">set</span> nonu      # 隐藏行号</span><br><span class="line">:<span class="keyword">set</span> <span class="keyword">ts</span>=<span class="number">4</span>      # 设置<span class="keyword">tab</span>为<span class="number">4</span>个空格</span><br><span class="line">:<span class="keyword">set</span> <span class="keyword">list</span>      # 显示不可见字符</span><br></pre></td></tr></table></figure>

<h2 id="11-正则表达式与文本搜索"><a href="#11-正则表达式与文本搜索" class="headerlink" title="11. 正则表达式与文本搜索"></a>11. 正则表达式与文本搜索</h2><h3 id="11-1-基本元字符"><a href="#11-1-基本元字符" class="headerlink" title="11.1 基本元字符"></a>11.1 基本元字符</h3><table>
<thead>
<tr>
<th>元字符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>匹配任意单个字符</td>
</tr>
<tr>
<td>*</td>
<td>前一个字符0次或多次</td>
</tr>
<tr>
<td>[]</td>
<td>匹配括号内任意一个字符</td>
</tr>
<tr>
<td>[^]</td>
<td>不匹配括号内的字符</td>
</tr>
<tr>
<td>^</td>
<td>行首</td>
</tr>
<tr>
<td>$</td>
<td>行尾</td>
</tr>
<tr>
<td>\</td>
<td>转义特殊字符</td>
</tr>
</tbody></table>
<h3 id="11-2-grep-命令"><a href="#11-2-grep-命令" class="headerlink" title="11.2 grep 命令"></a>11.2 grep 命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&quot;pattern&quot;</span> file.txt      <span class="comment"># 基本搜索</span></span><br><span class="line">grep -i <span class="string">&quot;pattern&quot;</span> file.txt   <span class="comment"># 忽略大小写</span></span><br><span class="line">grep -v <span class="string">&quot;pattern&quot;</span> file.txt   <span class="comment"># 反向匹配</span></span><br><span class="line">grep -n <span class="string">&quot;pattern&quot;</span> file.txt   <span class="comment"># 显示行号</span></span><br><span class="line">grep -E <span class="string">&quot;regex&quot;</span> file.txt     <span class="comment"># 使用扩展正则</span></span><br><span class="line">grep -r <span class="string">&quot;pattern&quot;</span> /dir       <span class="comment"># 递归搜索目录</span></span><br></pre></td></tr></table></figure>

<h4 id="特殊变体"><a href="#特殊变体" class="headerlink" title="特殊变体"></a>特殊变体</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">egrep = grep -E       <span class="comment"># 扩展正则表达式</span></span><br><span class="line">fgrep = grep -F       <span class="comment"># 不解析正则，快速搜索</span></span><br><span class="line">pgrep -u root         <span class="comment"># 搜索root用户的进程</span></span><br></pre></td></tr></table></figure>

<h3 id="11-3-sed-流编辑器"><a href="#11-3-sed-流编辑器" class="headerlink" title="11.3 sed 流编辑器"></a>11.3 sed 流编辑器</h3><h4 id="基本用法-1"><a href="#基本用法-1" class="headerlink" title="基本用法"></a>基本用法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;s/old/new/&#x27;</span> file.txt       <span class="comment"># 替换第一个匹配</span></span><br><span class="line">sed <span class="string">&#x27;s/old/new/g&#x27;</span> file.txt      <span class="comment"># 替换所有匹配</span></span><br><span class="line">sed <span class="string">&#x27;1,5d&#x27;</span> file.txt             <span class="comment"># 删除1-5行</span></span><br><span class="line">sed <span class="string">&#x27;/pattern/d&#x27;</span> file.txt       <span class="comment"># 删除匹配行</span></span><br></pre></td></tr></table></figure>

<h4 id="高级用法"><a href="#高级用法" class="headerlink" title="高级用法"></a>高级用法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">&#x27;10,20p&#x27;</span> file.txt       <span class="comment"># 只打印10-20行</span></span><br><span class="line">sed <span class="string">&#x27;y/abc/ABC/&#x27;</span> file.txt      <span class="comment"># 字符转换</span></span><br><span class="line">sed -i.bak <span class="string">&#x27;s/old/new/&#x27;</span> file   <span class="comment"># 直接修改文件并备份</span></span><br><span class="line">sed -e <span class="string">&#x27;cmd1&#x27;</span> -e <span class="string">&#x27;cmd2&#x27;</span> file   <span class="comment"># 执行多个命令</span></span><br></pre></td></tr></table></figure>

<h4 id="脚本示例"><a href="#脚本示例" class="headerlink" title="脚本示例"></a>脚本示例</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将1-5行行首添加&gt;字符</span></span><br><span class="line">sed <span class="string">&#x27;1,5s/^/&gt;/&#x27;</span> file.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将每行的第一个数字替换为#</span></span><br><span class="line">sed <span class="string">&#x27;s/[0-9]/#/&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>

<h3 id="11-4-正则表达式示例"><a href="#11-4-正则表达式示例" class="headerlink" title="11.4 正则表达式示例"></a>11.4 正则表达式示例</h3><ol>
<li>匹配IP地址：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&#x27;([0-9]&#123;1,3&#125;\.)&#123;3&#125;[0-9]&#123;1,3&#125;&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>匹配邮箱地址：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&#x27;[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]&#123;2,&#125;&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>提取HTML标签内容：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">&#x27;s/&lt;title&gt;\(.*\)&lt;\/title&gt;/\1/p&#x27;</span> file.html</span><br></pre></td></tr></table></figure>
                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../../2020/05/07/linux/3-bash/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../../2020/05/07/linux/2-linux%E5%AE%89%E8%A3%85%E4%B8%8E%E5%8C%85%E7%AE%A1%E7%90%86/"
                            aria-label=": 2.linux安装与包管理"
                        >
                            2.linux安装与包管理
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-07T16:29:52+08:00">
	
		    2020 年 5 月 7 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Linux-安装与软件包管理"><a href="#Linux-安装与软件包管理" class="headerlink" title="Linux 安装与软件包管理"></a>Linux 安装与软件包管理</h1><h2 id="1-硬盘分区布局"><a href="#1-硬盘分区布局" class="headerlink" title="1. 硬盘分区布局"></a>1. 硬盘分区布局</h2><h3 id="1-1-标准目录结构"><a href="#1-1-标准目录结构" class="headerlink" title="1.1 标准目录结构"></a>1.1 标准目录结构</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/home     # 普通用户文件存储目录</span><br><span class="line">/var      # 存放日志文件、邮件队列等可变数据</span><br><span class="line">/usr      # 存放程序、库文件、文档等(通常占用空间最大)</span><br><span class="line">/boot     # 引导分区，通常100MB左右足够</span><br><span class="line">/swap     # 交换分区(建议大小为物理内存的1-2倍)</span><br></pre></td></tr></table></figure>

<h2 id="2-引导加载程序-GRUB"><a href="#2-引导加载程序-GRUB" class="headerlink" title="2. 引导加载程序(GRUB)"></a>2. 引导加载程序(GRUB)</h2><h3 id="2-1-传统GRUB-GRUB-Legacy"><a href="#2-1-传统GRUB-GRUB-Legacy" class="headerlink" title="2.1 传统GRUB (GRUB Legacy)"></a>2.1 传统GRUB (GRUB Legacy)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grub-install /dev/sda   <span class="comment"># 安装GRUB到指定设备</span></span><br><span class="line">grub-install -v         <span class="comment"># 显示详细安装信息</span></span><br></pre></td></tr></table></figure>

<h4 id="配置文件关键参数-boot-grub-menu-lst"><a href="#配置文件关键参数-boot-grub-menu-lst" class="headerlink" title="配置文件关键参数(&#x2F;boot&#x2F;grub&#x2F;menu.lst):"></a>配置文件关键参数(&#x2F;boot&#x2F;grub&#x2F;menu.lst):</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">timeout      # 等待用户选择的时间(秒)</span><br><span class="line">default      # 默认启动项序号</span><br><span class="line">title        # 启动项标题</span><br><span class="line">root         # 指定根分区</span><br><span class="line">kernel       # 指定内核文件</span><br><span class="line">makeactive   # 激活分区</span><br><span class="line">chainloader  # 链式加载其他引导程序</span><br><span class="line">hiddenmenu   # 是否隐藏菜单</span><br></pre></td></tr></table></figure>

<h3 id="2-2-GRUB2-现代Linux默认使用"><a href="#2-2-GRUB2-现代Linux默认使用" class="headerlink" title="2.2 GRUB2 (现代Linux默认使用)"></a>2.2 GRUB2 (现代Linux默认使用)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update-grub2   <span class="comment"># 更新GRUB2配置</span></span><br></pre></td></tr></table></figure>

<h4 id="配置文件-etc-default-grub"><a href="#配置文件-etc-default-grub" class="headerlink" title="配置文件(&#x2F;etc&#x2F;default&#x2F;grub):"></a>配置文件(&#x2F;etc&#x2F;default&#x2F;grub):</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GRUB_DEFAULT                  # 默认启动项</span><br><span class="line">GRUB_HIDDEN_TIMEOUT           # 隐藏菜单超时</span><br><span class="line">GRUB_HIDDEN_TIMEOUT_QUIET     # 是否静默隐藏</span><br><span class="line">GRUB_TIMEOUT                  # 菜单显示时间</span><br><span class="line">GRUB_CMDLINE_LINUX_DEFAULT    # 默认内核参数</span><br><span class="line">GRUB_CMDLINE_LINUX            # 附加内核参数</span><br></pre></td></tr></table></figure>

<h2 id="3-共享库管理"><a href="#3-共享库管理" class="headerlink" title="3. 共享库管理"></a>3. 共享库管理</h2><h3 id="3-1-基本概念"><a href="#3-1-基本概念" class="headerlink" title="3.1 基本概念"></a>3.1 基本概念</h3><ul>
<li><strong>共享库(Shared Library)</strong>: 通过动态链接方式被多个程序共同使用的库文件</li>
<li>命名规则: <code>lib*.so*</code> (如 <code>libc.so.6</code>)</li>
</ul>
<h3 id="3-2-常用命令"><a href="#3-2-常用命令" class="headerlink" title="3.2 常用命令"></a>3.2 常用命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ldd /bin/ls      <span class="comment"># 查看二进制文件依赖的共享库</span></span><br><span class="line">ldconfig         <span class="comment"># 重建共享库缓存</span></span><br><span class="line">ldconfig -p      <span class="comment"># 打印当前缓存内容</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-共享库搜索顺序"><a href="#3-3-共享库搜索顺序" class="headerlink" title="3.3 共享库搜索顺序"></a>3.3 共享库搜索顺序</h3><ol>
<li>可执行文件中的DT_RPATH或DT_RUNPATH段</li>
<li>环境变量<code>LD_LIBRARY_PATH</code>指定的路径</li>
<li><code>/etc/ld.so.cache</code>缓存中的路径(除非使用<code>-z nodeflib</code>选项)</li>
<li>默认路径<code>/lib</code>和<code>/usr/lib</code>(除非使用<code>-z nodeflib</code>选项)</li>
</ol>
<h3 id="3-4-添加自定义库路径"><a href="#3-4-添加自定义库路径" class="headerlink" title="3.4 添加自定义库路径"></a>3.4 添加自定义库路径</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 临时添加(当前会话有效)</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:/path/to/library</span><br><span class="line"></span><br><span class="line"><span class="comment"># 永久添加(需修改配置文件)</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;/path/to/library&quot;</span> &gt;&gt; /etc/ld.so.conf</span><br><span class="line">ldconfig</span><br></pre></td></tr></table></figure>

<h2 id="4-Debian系包管理-Debian-Ubuntu等"><a href="#4-Debian系包管理-Debian-Ubuntu等" class="headerlink" title="4. Debian系包管理(Debian&#x2F;Ubuntu等)"></a>4. Debian系包管理(Debian&#x2F;Ubuntu等)</h2><h3 id="4-1-包命名格式"><a href="#4-1-包命名格式" class="headerlink" title="4.1 包命名格式"></a>4.1 包命名格式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tree_1.5.3-1_i386.deb</span><br><span class="line">├── 包名(tree)</span><br><span class="line">├── 版本号(1.5.3)</span><br><span class="line">├── 发布号(1)</span><br><span class="line">├── 架构(i386)</span><br><span class="line">└── 扩展名(.deb)</span><br></pre></td></tr></table></figure>

<h3 id="4-2-dpkg命令-底层工具"><a href="#4-2-dpkg命令-底层工具" class="headerlink" title="4.2 dpkg命令(底层工具)"></a>4.2 dpkg命令(底层工具)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">dpkg -i package.deb       <span class="comment"># 安装包</span></span><br><span class="line">dpkg -r package           <span class="comment"># 移除包(保留配置)</span></span><br><span class="line">dpkg -P package           <span class="comment"># 完全清除包(包括配置)</span></span><br><span class="line">dpkg -l                   <span class="comment"># 列出已安装包</span></span><br><span class="line">dpkg -L package           <span class="comment"># 列出包安装的文件</span></span><br><span class="line">dpkg -s package           <span class="comment"># 显示包状态信息</span></span><br><span class="line">dpkg -S /path/to/file     <span class="comment"># 查找文件属于哪个包</span></span><br><span class="line">dpkg --configure package  <span class="comment"># 配置已解压的包</span></span><br><span class="line">dpkg --unpack package.deb <span class="comment"># 仅解压不配置</span></span><br></pre></td></tr></table></figure>

<h3 id="4-3-apt-get命令-高级工具"><a href="#4-3-apt-get命令-高级工具" class="headerlink" title="4.3 apt-get命令(高级工具)"></a>4.3 apt-get命令(高级工具)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">apt-get update            <span class="comment"># 更新包数据库</span></span><br><span class="line">apt-get upgrade           <span class="comment"># 升级所有可升级包</span></span><br><span class="line">apt-get dist-upgrade      <span class="comment"># 智能升级(处理依赖变化)</span></span><br><span class="line">apt-get install package   <span class="comment"># 安装包</span></span><br><span class="line">apt-get remove package    <span class="comment"># 移除包</span></span><br><span class="line">apt-get clean             <span class="comment"># 清理下载的包文件</span></span><br><span class="line">apt-get -d install package <span class="comment"># 仅下载不安装</span></span><br><span class="line">apt-get -s install package <span class="comment"># 模拟安装(不实际执行)</span></span><br></pre></td></tr></table></figure>

<h3 id="4-4-软件源配置-etc-apt-sources-list"><a href="#4-4-软件源配置-etc-apt-sources-list" class="headerlink" title="4.4 软件源配置(&#x2F;etc&#x2F;apt&#x2F;sources.list)"></a>4.4 软件源配置(&#x2F;etc&#x2F;apt&#x2F;sources.list)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class="line">↑         ↑                          ↑       ↑</span><br><span class="line">类型     镜像地址                    发行版   组件</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>类型</strong>: <code>deb</code>(二进制包)或<code>deb-src</code>(源代码包)</li>
<li><strong>组件</strong>:<ul>
<li><code>main</code>: 官方支持的免费软件</li>
<li><code>contrib</code>: 非自由软件但有自由依赖</li>
<li><code>non-free</code>: 有分发限制的软件</li>
</ul>
</li>
</ul>
<h3 id="4-5-apt-cache命令-查询工具"><a href="#4-5-apt-cache命令-查询工具" class="headerlink" title="4.5 apt-cache命令(查询工具)"></a>4.5 apt-cache命令(查询工具)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-cache search keyword    <span class="comment"># 搜索包</span></span><br><span class="line">apt-cache show package      <span class="comment"># 显示包详细信息</span></span><br><span class="line">apt-cache depends package   <span class="comment"># 显示包依赖</span></span><br></pre></td></tr></table></figure>

<h3 id="4-6-aptitude命令-交互式工具"><a href="#4-6-aptitude命令-交互式工具" class="headerlink" title="4.6 aptitude命令(交互式工具)"></a>4.6 aptitude命令(交互式工具)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">aptitude update          <span class="comment"># 更新包列表</span></span><br><span class="line">aptitude install package <span class="comment"># 安装包</span></span><br><span class="line">aptitude remove package  <span class="comment"># 移除包</span></span><br><span class="line">aptitude purge package   <span class="comment"># 完全清除包</span></span><br><span class="line">aptitude upgrade         <span class="comment"># 升级包</span></span><br><span class="line">aptitude dist-upgrade    <span class="comment"># 智能升级</span></span><br></pre></td></tr></table></figure>

<h2 id="5-RedHat系包管理-RHEL-CentOS-Fedora"><a href="#5-RedHat系包管理-RHEL-CentOS-Fedora" class="headerlink" title="5. RedHat系包管理(RHEL&#x2F;CentOS&#x2F;Fedora)"></a>5. RedHat系包管理(RHEL&#x2F;CentOS&#x2F;Fedora)</h2><h3 id="5-1-rpm命令-底层工具"><a href="#5-1-rpm命令-底层工具" class="headerlink" title="5.1 rpm命令(底层工具)"></a>5.1 rpm命令(底层工具)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh package.rpm     <span class="comment"># 安装包(-v:详细,-h:进度条)</span></span><br><span class="line">rpm -Uvh package.rpm     <span class="comment"># 升级包</span></span><br><span class="line">rpm -Fvh *.rpm           <span class="comment"># 仅升级已安装的包</span></span><br><span class="line">rpm -e package           <span class="comment"># 卸载包</span></span><br><span class="line">rpm -qa                  <span class="comment"># 查询所有已安装包</span></span><br><span class="line">rpm -qf /path/to/file    <span class="comment"># 查询文件属于哪个包</span></span><br><span class="line">rpm -qi package          <span class="comment"># 查询包信息</span></span><br><span class="line">rpm -ql package          <span class="comment"># 列出包安装的文件</span></span><br><span class="line">rpm -qc package          <span class="comment"># 列出包配置文件</span></span><br><span class="line">rpm -qd package          <span class="comment"># 列出包文档文件</span></span><br><span class="line">rpm --nodeps             <span class="comment"># 忽略依赖关系(不推荐)</span></span><br><span class="line">rpm --<span class="built_in">test</span>               <span class="comment"># 测试模式(不实际执行)</span></span><br></pre></td></tr></table></figure>

<h3 id="5-2-rpm文件提取"><a href="#5-2-rpm文件提取" class="headerlink" title="5.2 rpm文件提取"></a>5.2 rpm文件提取</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm2cpio package.rpm | cpio -idv  <span class="comment"># 提取rpm包内容</span></span><br><span class="line">rpm2cpio package.rpm | cpio -t    <span class="comment"># 列出rpm包内容</span></span><br></pre></td></tr></table></figure>

<h3 id="5-3-yum命令-高级工具"><a href="#5-3-yum命令-高级工具" class="headerlink" title="5.3 yum命令(高级工具)"></a>5.3 yum命令(高级工具)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">yum install package      <span class="comment"># 安装包</span></span><br><span class="line">yum remove package       <span class="comment"># 移除包</span></span><br><span class="line">yum update               <span class="comment"># 更新所有包</span></span><br><span class="line">yum update package       <span class="comment"># 更新指定包</span></span><br><span class="line">yum check-update         <span class="comment"># 检查可用更新</span></span><br><span class="line">yum info package         <span class="comment"># 显示包信息</span></span><br><span class="line">yum list                 <span class="comment"># 列出包</span></span><br><span class="line">yum search keyword       <span class="comment"># 搜索包</span></span><br><span class="line">yum groupinstall <span class="string">&quot;Development Tools&quot;</span> <span class="comment"># 安装软件组</span></span><br><span class="line">yum repolist             <span class="comment"># 列出已配置的仓库</span></span><br></pre></td></tr></table></figure>

<h3 id="5-4-下载rpm包"><a href="#5-4-下载rpm包" class="headerlink" title="5.4 下载rpm包"></a>5.4 下载rpm包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yumdownloader package    <span class="comment"># 下载rpm包不安装</span></span><br></pre></td></tr></table></figure>

<h3 id="5-5-zypper命令-SUSE系统"><a href="#5-5-zypper命令-SUSE系统" class="headerlink" title="5.5 zypper命令(SUSE系统)"></a>5.5 zypper命令(SUSE系统)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">zypper install package   <span class="comment"># 安装包</span></span><br><span class="line">zypper remove package    <span class="comment"># 移除包</span></span><br><span class="line">zypper update            <span class="comment"># 更新系统</span></span><br></pre></td></tr></table></figure>

<h2 id="6-软件包管理对比"><a href="#6-软件包管理对比" class="headerlink" title="6. 软件包管理对比"></a>6. 软件包管理对比</h2><table>
<thead>
<tr>
<th>功能</th>
<th>Debian系(apt)</th>
<th>RedHat系(yum)</th>
<th>SUSE系(zypper)</th>
</tr>
</thead>
<tbody><tr>
<td>安装包</td>
<td>apt-get install</td>
<td>yum install</td>
<td>zypper install</td>
</tr>
<tr>
<td>移除包</td>
<td>apt-get remove</td>
<td>yum remove</td>
<td>zypper remove</td>
</tr>
<tr>
<td>更新系统</td>
<td>apt-get upgrade</td>
<td>yum update</td>
<td>zypper update</td>
</tr>
<tr>
<td>搜索包</td>
<td>apt-cache search</td>
<td>yum search</td>
<td>zypper search</td>
</tr>
<tr>
<td>显示包信息</td>
<td>apt-cache show</td>
<td>yum info</td>
<td>zypper info</td>
</tr>
<tr>
<td>清理缓存</td>
<td>apt-get clean</td>
<td>yum clean</td>
<td>zypper clean</td>
</tr>
</tbody></table>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../../2020/05/07/linux/2-linux%E5%AE%89%E8%A3%85%E4%B8%8E%E5%8C%85%E7%AE%A1%E7%90%86/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../../2020/05/06/linux/1-%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/"
                            aria-label=": 1.系统架构"
                        >
                            1.系统架构
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-05-06T16:06:24+08:00">
	
		    2020 年 5 月 6 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="1-系统架构"><a href="#1-系统架构" class="headerlink" title="1. 系统架构"></a>1. 系统架构</h2><h3 id="1-1-PCI架构"><a href="#1-1-PCI架构" class="headerlink" title="1.1 PCI架构"></a>1.1 PCI架构</h3><ul>
<li><strong>PCI(外围组件互连)</strong>: Intel Core系统的主要总线架构</li>
<li><strong>组件</strong>:<ul>
<li><strong>CPU</strong>:<ul>
<li>显示: eDP(支持i7 CPU和DDR4内存)</li>
<li>显示: HDMI(支持i7 CPU和DDR4内存)</li>
</ul>
</li>
<li><strong>PCH(平台控制器中枢)</strong>:<ul>
<li>USB 3.0接口</li>
<li>PCI总线</li>
<li>音频输出</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="1-2-lspci命令"><a href="#1-2-lspci命令" class="headerlink" title="1.2 lspci命令"></a>1.2 lspci命令</h3><ul>
<li>显示PCI总线和连接设备的信息</li>
<li>可以查看:<ul>
<li>中断请求(IRQ)信息</li>
<li>设备路径和速度</li>
<li>制造商ID</li>
</ul>
</li>
</ul>
<h3 id="1-3-ACPI-高级配置与电源接口"><a href="#1-3-ACPI-高级配置与电源接口" class="headerlink" title="1.3 ACPI(高级配置与电源接口)"></a>1.3 ACPI(高级配置与电源接口)</h3><ul>
<li>电源管理规范标准</li>
<li>管理功能包括:<ul>
<li>电源按钮操作</li>
<li>笔记本开合盖检测</li>
<li>电池充电状态</li>
<li>CPU速度调节</li>
</ul>
</li>
<li><strong>重要说明</strong>:<ul>
<li>不直接管理硬件，而是处理电源事件</li>
<li>配置文件位置:<ul>
<li><code>/etc/acpi/</code>目录</li>
<li><code>/proc/acpi/</code>目录</li>
</ul>
</li>
</ul>
</li>
<li><strong>守护进程</strong>:<ul>
<li><code>acpid</code>:<ul>
<li>配置目录: <code>/etc/acpi/</code></li>
<li>示例: 查看电源配置<code>cat /etc/acpi/events/power.conf</code></li>
</ul>
</li>
<li><code>systemd-logind</code>:<ul>
<li>配置文件: <code>/etc/systemd/logind.conf</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="2-启动流程"><a href="#2-启动流程" class="headerlink" title="2. 启动流程"></a>2. 启动流程</h2><h3 id="2-1-传统SysV-Init启动"><a href="#2-1-传统SysV-Init启动" class="headerlink" title="2.1 传统SysV Init启动"></a>2.1 传统SysV Init启动</h3><ol>
<li>电源启动</li>
<li>BIOS初始化</li>
<li>引导加载程序(GRUB)</li>
<li>加载内核(<code>vmlinuz</code>, <code>initramfs</code>)</li>
<li>执行内核</li>
<li>执行initramfs</li>
<li>init进程启动并挂载根文件系统</li>
<li>init启动各种服务</li>
</ol>
<h3 id="2-2-现代systemd启动"><a href="#2-2-现代systemd启动" class="headerlink" title="2.2 现代systemd启动"></a>2.2 现代systemd启动</h3><ol>
<li>电源启动</li>
<li>UEFI初始化</li>
<li>引导加载程序(GRUB2)</li>
<li>加载内核(<code>vmlinuz</code>, <code>initramfs</code>)</li>
<li>执行内核</li>
<li>执行initramfs</li>
<li>systemd启动并挂载根文件系统</li>
<li>systemd启动各种服务</li>
</ol>
<h3 id="2-3-Init进程详情"><a href="#2-3-Init进程详情" class="headerlink" title="2.3 Init进程详情"></a>2.3 Init进程详情</h3><ul>
<li>第一个用户空间进程路径: <code>/sbin/init</code></li>
<li>传统init流程:<ol>
<li>init读取<code>/etc/inittab</code></li>
<li>init执行<code>/etc/rc.sysinit</code>脚本</li>
<li>init执行<code>/etc/rc</code>脚本</li>
<li><code>/etc/rc</code>执行<code>/etc/rc&lt;运行级别&gt;.d/</code>目录下的脚本</li>
</ol>
</li>
</ul>
<h2 id="3-分区表"><a href="#3-分区表" class="headerlink" title="3. 分区表"></a>3. 分区表</h2><h3 id="3-1-GPT-GUID分区表"><a href="#3-1-GPT-GUID分区表" class="headerlink" title="3.1 GPT(GUID分区表)"></a>3.1 GPT(GUID分区表)</h3><ul>
<li>EFI规范的一部分</li>
<li>支持最大9.4TB分区</li>
<li>使用GUID标识:<ul>
<li>设备标识</li>
<li>分区标识</li>
</ul>
</li>
</ul>
<h3 id="3-2-MBR-主引导记录"><a href="#3-2-MBR-主引导记录" class="headerlink" title="3.2 MBR(主引导记录)"></a>3.2 MBR(主引导记录)</h3><ul>
<li>使用CHS(柱面&#x2F;磁头&#x2F;扇区)寻址</li>
<li>最大只支持2TB分区</li>
</ul>
<h2 id="4-系统信息命令"><a href="#4-系统信息命令" class="headerlink" title="4. 系统信息命令"></a>4. 系统信息命令</h2><h3 id="4-1-uname命令"><a href="#4-1-uname命令" class="headerlink" title="4.1 uname命令"></a>4.1 uname命令</h3><p>显示系统信息:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uname</span> -m  <span class="comment"># 显示硬件架构类型</span></span><br><span class="line"><span class="built_in">uname</span> -n  <span class="comment"># 显示网络节点主机名</span></span><br><span class="line"><span class="built_in">uname</span> -r  <span class="comment"># 显示内核发行版本</span></span><br><span class="line"><span class="built_in">uname</span> -s  <span class="comment"># 显示操作系统名称</span></span><br><span class="line"><span class="built_in">uname</span> -v  <span class="comment"># 显示内核版本</span></span><br><span class="line"><span class="built_in">uname</span> -a  <span class="comment"># 显示所有信息</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-wall命令"><a href="#4-2-wall命令" class="headerlink" title="4.2 wall命令"></a>4.2 wall命令</h3><p>向所有用户广播消息:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wall <span class="string">&quot;消息内容&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-3-dmesg命令"><a href="#4-3-dmesg命令" class="headerlink" title="4.3 dmesg命令"></a>4.3 dmesg命令</h3><p>显示内核环形缓冲区消息(启动日志):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dmesg</span><br></pre></td></tr></table></figure>

<h3 id="4-4-lsmod命令"><a href="#4-4-lsmod命令" class="headerlink" title="4.4 lsmod命令"></a>4.4 lsmod命令</h3><p>列出已加载的内核模块:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsmod</span><br></pre></td></tr></table></figure>

<h3 id="4-5-modprobe命令"><a href="#4-5-modprobe命令" class="headerlink" title="4.5 modprobe命令"></a>4.5 modprobe命令</h3><p>手动加载设备驱动:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modprobe &lt;设备名称&gt;</span><br></pre></td></tr></table></figure>

<h2 id="5-proc文件系统"><a href="#5-proc文件系统" class="headerlink" title="5. &#x2F;proc文件系统"></a>5. &#x2F;proc文件系统</h2><p>&#x2F;proc目录下的重要文件:</p>
<ul>
<li><code>/proc/bus/usb/*</code> - USB设备信息</li>
<li><code>/proc/cpuinfo</code> - CPU信息</li>
<li><code>/proc/interrupts</code> - 中断请求信息</li>
<li><code>/proc/pci</code> - PCI设备信息</li>
<li><code>/proc/scsi/scsi</code> - SCSI设备信息</li>
<li><code>/proc/version</code> - 内核版本信息</li>
<li><code>/proc/meminfo</code> - 内存信息</li>
</ul>
<h2 id="6-运行级别"><a href="#6-运行级别" class="headerlink" title="6. 运行级别"></a>6. 运行级别</h2><p>运行级别配置文件:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/inittab</span><br></pre></td></tr></table></figure>

<h2 id="7-模拟器"><a href="#7-模拟器" class="headerlink" title="7. 模拟器"></a>7. 模拟器</h2><p>通过软件模拟硬件环境来运行不同操作系统的工具</p>
<h2 id="8-启动顺序图示"><a href="#8-启动顺序图示" class="headerlink" title="8. 启动顺序图示"></a>8. 启动顺序图示</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">graph TD</span><br><span class="line">    A[BIOS/UEFI固件] --&gt; B[引导加载程序]</span><br><span class="line">    B --&gt; C[Linux内核]</span><br><span class="line">    C --&gt; D[Init/Systemd]</span><br><span class="line">    D --&gt; E[系统服务]</span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../../2020/05/06/linux/1-%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../../2017/04/28/iptables/"
                            aria-label=": iptables"
                        >
                            iptables
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2017-04-28T23:08:51+08:00">
	
		    2017 年 4 月 28 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><hr>
<h3 id="查看iptable版本"><a href="#查看iptable版本" class="headerlink" title="查看iptable版本"></a>查看iptable版本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -q iptables</span><br></pre></td></tr></table></figure>
<h3 id="查看iptables-规则"><a href="#查看iptables-规则" class="headerlink" title="查看iptables 规则"></a>查看iptables 规则</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service iptables status</span><br><span class="line"># 或</span><br><span class="line">service -L --line-numbers</span><br></pre></td></tr></table></figure>
<h2 id="表"><a href="#表" class="headerlink" title="表"></a>表</h2><p>iptables的4个表分别是：</p>
<ul>
<li>filter（过滤）：数据包过滤&#x2F;拦截，可以包含INPUT、FORWARD、OUTPUT这3个内置chain。</li>
<li>nat（地址转换）：IP地址或端口号转换，可以包含PREROUTING、OUTPUT、POSTROUTING 3个内置chain，nat table在会话建立时会记录转换的对应关系，同一会话的回包和后续报文会自动地址转换，这是因为nat使用了ip_conntrack模块。</li>
<li>mangle（包管理）：用来修改IP报文，可以包含PREROUTING、OUTPUT、INPUT、FORWARD、POSTROUTING 5个内置chain。</li>
<li>raw：此表的优先级高于ip_conntrack模块和其它的table，主要用于将有会话状态的连接（比如tcp）的数据包排除在会话外。可以包含POSTROUTING、OUTPUT两个内置chain。</li>
</ul>
<p>看到这里肯定会有这样的疑问，为什么table只能包含一些而不是全部的chain呢？我想这个构架是按需设计而不是按功能设计的，尽管table不是包含所有的chain，但是每种功能的table都包含了实现这种功能所需的chain，即使包含更多的chain也是累赘或者无用的，而且实际上用起来也的确如此，够用了。</p>
<p>还有就是不同table生效优先顺序问题，先后优先级是这样的：</p>
<p>raw &gt; mangle &gt; nat &gt; filter</p>
<p>所以，如果有filter禁止ping目的地址2.2.2.2，而nat又有策略将目的地址1.1.1.1转换成2.2.2.2，那么ping 1.1.1.1是ping不通的。</p>
<p>不过一般情况下filter是不会和nat的策略打起架来，比如INPUT chain能做filter，却不能做nat，PREROUTING能做nat却不能做filter，而且PREROUTING只能做目的地址转换，不会对源地址过滤的需求造成麻烦，所以通常是不会相互干扰的。</p>
<h2 id="规则链-chain"><a href="#规则链-chain" class="headerlink" title="规则链(chain)"></a>规则链(chain)</h2><p>iptables内置的5个chain：PREROUTING、INPUT、OUPUT、FORWARD、POSTROUGING，这5个chain分别与netfilter中数据转发路径上的5个不同的位置挂钩，以匹配筛选不同类型的数据流，如下图所示：</p>
<p>其中：</p>
<ul>
<li>PREROUTING链：应用于所有进入机器的ip包，包括目的地址是本机和目的地址非本机的包。</li>
<li>INPUT链：应用于所有目的是本机的包，也就是目的IP是本机接口地址，所有发给本地socket的数据都经过它。</li>
<li>OUPUT链：应用于所有由本机产生的包，所有应用程序发出的数据都经过它。</li>
<li>FORWARD链：应用于所有经过路由决策被转发的包，也就是目的地址不是本机的数据包。</li>
<li>POSTROUGING链：应用于所有发出机器的IP包，包括本机发出的和从本机转发的数据包。</li>
</ul>
<p>策略匹配按照重上到下的顺序进行，当测试到某策略匹配时执行target并跳出，不再向下匹配，当测试到最后一条策略仍不匹配时，则采用policy指定的动作，如下图：</p>
<p>除了内置chain外，还可以自定义chain，自定义chain并不能利用netfilter的hook来捕捉数据包，但是可用于策略的分类，比如有3类不同的用户访问主机上的不同服务，如果所有策略都放在INPUT chain中策略会多而难以维护，这个时候就可以定义3个自定义chain，分别配置不同的策略，同时在INPUT chain中添加策略对来访者分类并将目标指向3个自定义chain。</p>
<p>自定义chain大显神威的地方在于动态生成策略，例如VPN服务器上，需要对不同分组的用户区别对待管理，但是用户IP是随机分配的，不能根据IP来区分用户组，这时候可以预先定义好各组chain，利用VPN服务端软件的一些钩子，当用户登陆时自动添加策略引导到自定义chain上来匹配。如果这时候没有自定义chain，那么策略的数量将是（用户数×所属组策略数），每增加一个用户，都要把所属组的全部策略添加一遍，这样大量的时间花费在策略匹配上，性能下降很快。</p>
<hr>
<h2 id="各指令的含义"><a href="#各指令的含义" class="headerlink" title="各指令的含义"></a>各指令的含义</h2><hr>
<h3 id="APPEND-A"><a href="#APPEND-A" class="headerlink" title="-APPEND -A"></a>-APPEND -A</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -A chain firewall-rule</span><br></pre></td></tr></table></figure>
<p>将规则添加到末尾。</p>
<p>一般情况下,iptables 中最后的规则是丢弃所有数据包。</p>
<p>于是使用-A参数添加的规则在丢弃规则后，将不起作用。</p>
<hr>
<h3 id="DELETE-D"><a href="#DELETE-D" class="headerlink" title="-DELETE -D"></a>-DELETE -D</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">iptables -D chain firewall-rule</span><br><span class="line"># 删除对应规则direwall-rule的那一条</span><br><span class="line"># 或</span><br><span class="line">iptables -D chain rulenum</span><br><span class="line"># 删除chain中编号为rulenum的那一条.1表示第一条。</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="INSERT-I"><a href="#INSERT-I" class="headerlink" title="-INSERT -I"></a>-INSERT -I</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -I chain [rulenum] firewall-rule.</span><br></pre></td></tr></table></figure>
<p>将firewall-rule添加为chain中的第rulenum条规则,原先的第rulenum条规则及以后的各条顺次+1。如未指定rulenum,则默认为1.</p>
<hr>
<h3 id="REPLACE-R"><a href="#REPLACE-R" class="headerlink" title="-REPLACE -R"></a>-REPLACE -R</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -R chain [rulenum] firewall-rule.</span><br></pre></td></tr></table></figure>
<p>将firewall-rule添加为chain中的第rulenum条规则,原先的第rulenum条规则及以后的各条顺次+1。如未指定rulenum,则默认为1.</p>
<hr>
<h3 id="LIST-L"><a href="#LIST-L" class="headerlink" title="-LIST -L"></a>-LIST -L</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -L chain [rulenum] firewall-rule.</span><br></pre></td></tr></table></figure>

<p>列出chain或所有chain的第rulenum条规则或所有规则，在-L后再加上–lube-numbers，则显示序号</p>
<hr>
<h3 id="LIST-RULES-S"><a href="#LIST-RULES-S" class="headerlink" title="-LIST-RULES -S"></a>-LIST-RULES -S</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -S chain [rulenum] </span><br></pre></td></tr></table></figure>

<p>打印全部规则</p>
<hr>
<h3 id="FLUSH-F"><a href="#FLUSH-F" class="headerlink" title="-FLUSH -F"></a>-FLUSH -F</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -F chain</span><br></pre></td></tr></table></figure>

<p>情况chain(或全部chain)中的规则</p>
<hr>
<h3 id="ZERO-Z"><a href="#ZERO-Z" class="headerlink" title="-ZERO -Z"></a>-ZERO -Z</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -Z chain [rulenum] </span><br></pre></td></tr></table></figure>

<p>清空chain或所有chain的包和字节计数器</p>
<hr>
<h3 id="NEW-N"><a href="#NEW-N" class="headerlink" title="-NEW -N"></a>-NEW -N</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -N chain [rulenum] </span><br></pre></td></tr></table></figure>

<p>创建名称为chain的新链</p>
<hr>
<h3 id="DELETE-CHAIN-X"><a href="#DELETE-CHAIN-X" class="headerlink" title="-DELETE-CHAIN -X"></a>-DELETE-CHAIN -X</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -X [chain] </span><br></pre></td></tr></table></figure>

<p>删除用户自定义chain或所有用户定义的chain,该指令不影响预设规则</p>
<hr>
<h3 id="POLICY-P"><a href="#POLICY-P" class="headerlink" title="-POLICY -P"></a>-POLICY -P</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -P chain target </span><br></pre></td></tr></table></figure>

<p>改变chain的策略为target</p>
<hr>
<h3 id="RENAME-CHAIN-E"><a href="#RENAME-CHAIN-E" class="headerlink" title="-RENAME-CHAIN -E"></a>-RENAME-CHAIN -E</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -E old-chain new-chain</span><br></pre></td></tr></table></figure>

<p>将old-chain名更换为new-chain,使得old-chain的规则失效</p>
<hr>
<h2 id="各参数的含义"><a href="#各参数的含义" class="headerlink" title="各参数的含义"></a>各参数的含义</h2><hr>
<h3 id="P-代表协议（PROTOCOL）"><a href="#P-代表协议（PROTOCOL）" class="headerlink" title="-P 代表协议（PROTOCOL）"></a>-P 代表协议（PROTOCOL）</h3><ul>
<li>指明当前规则针对的传输协议（如 TCP、UDP、ICMP 等）</li>
<li>可能的参数值有：tcp, udp, icmp, all</li>
<li>使用 “all” 表示适用于所有协议。而如果在规则中不指定 -p 参数，则默认使用 “all” 参数。一般不使用 “all” 这个值，要么指定某个特定的协议，要么就指定 -p 参数。</li>
<li>-p 的参数值既可以用名称（如 tcp）也可以用协议对应的数值（如 6 代表 tcp 协议）</li>
<li>&#x2F;etc&#x2F;protocols 文件中包含了所有允许的协议名称和相应数值</li>
<li>也可以用长的参数名 –protocol</li>
</ul>
<h3 id="S-代表源地址（SOURCE）"><a href="#S-代表源地址（SOURCE）" class="headerlink" title="-S 代表源地址（SOURCE）"></a>-S 代表源地址（SOURCE）</h3><ul>
<li>指定数据包的源地址</li>
<li>可以是 ip 地址，或者网络地址，或者主机名（hostname）</li>
<li>例如：-s 192.168.1.101 表示针对特定的 ip 地址</li>
<li>对于网络掩码，使用 &#x2F;mask。例如，“-s 192.168.1.0&#x2F;24″ 表示网络掩码为 255.255.255.0 的所有 192.168.1.x 地址都匹配。</li>
<li>如果不指定 -s 参数，默认匹配所有源地址</li>
<li>也可以用长参数名 –src 或者 –source</li>
</ul>
<h3 id="D-代表目的地址（DESTINATION）"><a href="#D-代表目的地址（DESTINATION）" class="headerlink" title="-D 代表目的地址（DESTINATION）"></a>-D 代表目的地址（DESTINATION）</h3><ul>
<li>指定数据包的目的地址</li>
<li>使用方式与上面的 “-s” 一样（不同之处仅在于 -s 指源，而 -d 表示目的地址）</li>
<li>也可以用长参数名 –dst 或者 –destination</li>
</ul>
<h3 id="J-代表跳转（TARGET）"><a href="#J-代表跳转（TARGET）" class="headerlink" title="-J 代表跳转（TARGET）"></a>-J 代表跳转（TARGET）</h3><ul>
<li>j 的意思是 “jump”（跳转） 到目标</li>
<li>指定当某个数据包满足该规则的时候的就跳转到的下一个处理规则，而不再顺序执行后面的规则判断</li>
<li>可能的值有：ACCEPT, DROP, QUEUE, RETURN，分别表示接受、丢弃、进入队列，返回（跳出，通常是从某个 chain 中跳回到调用该 chain 的上层 chain）</li>
<li>也可以跳转到某个自定义的 chain 中，使用该 chain 的名称做为跳转目标</li>
</ul>
<h3 id="I-代表-IN-INTERFACE（入站接口）"><a href="#I-代表-IN-INTERFACE（入站接口）" class="headerlink" title="-I 代表 IN INTERFACE（入站接口）"></a>-I 代表 IN INTERFACE（入站接口）</h3><ul>
<li>i 表示 “input interface”（输入接口，即，指定网络数据处理的网卡，一般 eth0 即表示第一块有线网卡的外网接口，lo 表示局域网接口）</li>
<li>可以直接理解为 “-i” 表示接口。不过，-i 和 -o 都表示接口，-i 表示输入时的接口，而 -o 特指输出用的接口。</li>
<li>指定数据包进入 INPUT、FORWARD 和 PREROUTING 链时经由的接口。</li>
<li>例如：-i eth0 表示该规则应该针对从 eth0 接口进来的数据包。</li>
<li>如果不指定 -i 参数，则经由系统中所有可用的接口进入的数据包都可以匹配该规则。</li>
<li>也可以使用长参数 –in-interface</li>
</ul>
<h3 id="O-代表-OUT-INTERFACE（出站接口）"><a href="#O-代表-OUT-INTERFACE（出站接口）" class="headerlink" title="-O 代表 OUT INTERFACE（出站接口）"></a>-O 代表 OUT INTERFACE（出站接口）</h3><ul>
<li>o 表示 “output interface”（出站经由接口）</li>
<li>指定发送出去的数据包进入 INPUT、FORWARD 和 PREROUTING 链时经由的接口。</li>
<li>如果不指定 -o 参数，则经由系统中所有可用的接口发出的数据包都可以匹配该规则。</li>
<li>也可以使用长参数 –out-interface</li>
</ul>
<hr>
<h2 id="其它防火墙参数选项"><a href="#其它防火墙参数选项" class="headerlink" title="其它防火墙参数选项"></a>其它防火墙参数选项</h2><p>上面某些防火墙参数还有属于它自己的参数选项，可以与其配合使用。下面是一些常用的选项。</p>
<p>要使用这些参数选项，需要指定相应的参数，例如，要使用 “–sport” 选项，应该在规则中指定 “-p tcp” （或者 “-p udp”）等参数。</p>
<p>注意：所有这些选项前面都是 –（2个短横线 – ）。</p>
<h3 id="–SPORT-表示-SOURCE-PORT-源端口，用于-P-TCP-或者-P-UDP"><a href="#–SPORT-表示-SOURCE-PORT-源端口，用于-P-TCP-或者-P-UDP" class="headerlink" title="–SPORT 表示 SOURCE PORT (源端口，用于 -P TCP, 或者 -P UDP)"></a>–SPORT 表示 SOURCE PORT (源端口，用于 -P TCP, 或者 -P UDP)</h3><ul>
<li>默认匹配所有端口（未特别指定时）</li>
<li>可以指定端口号（数字），也可以指定端口名称。例如，默认的 SSH 端口号码为 22，名称为 ssh，可以表示为 “–sport 22″ 或者 “–sport ssh”。</li>
<li>&#x2F;etc&#x2F;services 文件包含了所有允许的端口名称和对应的端口号码。</li>
<li>在规则中使用号码比使用名称要好（效率高些）</li>
<li>要匹配一个端口范围，使用英文半角冒号（:），如 22:100 匹配从 22 到 100 的所有端口号。</li>
<li>也可以使用长名称 –source-port</li>
</ul>
<h3 id="–DPORT-表示-DESTINATION-PORT-目的端口，-P-TCP-或者-P-UDP"><a href="#–DPORT-表示-DESTINATION-PORT-目的端口，-P-TCP-或者-P-UDP" class="headerlink" title="–DPORT 表示 DESTINATION PORT (目的端口，-P TCP, 或者 -P UDP)"></a>–DPORT 表示 DESTINATION PORT (目的端口，-P TCP, 或者 -P UDP)</h3><ul>
<li>与 –sport 的用法相同，区别仅在于对象是目的端口</li>
<li>也可以使用长名称 –destination-port</li>
</ul>
<h3 id="–TCP-FLAGS-表示-TCP-FLAGS-用于-P-TCP"><a href="#–TCP-FLAGS-表示-TCP-FLAGS-用于-P-TCP" class="headerlink" title="–TCP-FLAGS 表示 TCP FLAGS (用于 -P TCP)"></a>–TCP-FLAGS 表示 TCP FLAGS (用于 -P TCP)</h3><ul>
<li>可以使用英文半角逗号（,）来指定多个 TCP 状态标识</li>
<li>可能值有：SYN, ACK, FIN, RST, URG, PSH。可以全用，也可以不用。</li>
</ul>
<h3 id="–ICMP-TYPE-表示-ICMP-TYPE-ICMP-类型，用于-P-ICMP"><a href="#–ICMP-TYPE-表示-ICMP-TYPE-ICMP-类型，用于-P-ICMP" class="headerlink" title="–ICMP-TYPE 表示 ICMP TYPE (ICMP 类型，用于 -P ICMP)"></a>–ICMP-TYPE 表示 ICMP TYPE (ICMP 类型，用于 -P ICMP)</h3><ul>
<li>当使用 icmp 协议 “-p icmp” 的时候，可以使用 “–icmp-type” 特别指定 ICMP 类型</li>
<li>例如，使用 “–icmp-type 0″ 表示 “Echo Reply”，“–icmp-type 8″ 表示 “Echo”。</li>
</ul>
<p>添加VIP:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth0:1 192.168.1.22 broadcast 192.168.1.2 netmask 255.255.255.0 up</span><br></pre></td></tr></table></figure>


                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../../2017/04/28/iptables/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../../../2017/04/28/linux%E5%9F%BA%E7%A1%80/"
                            aria-label=": linux基础"
                        >
                            linux基础
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2017-04-28T22:06:40+08:00">
	
		    2017 年 4 月 28 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/">后端</a>, <a class="category-link" href="../../../../categories/%E5%90%8E%E7%AB%AF/linux/">linux</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Linux-基础操作笔记"><a href="#Linux-基础操作笔记" class="headerlink" title="Linux 基础操作笔记"></a>Linux 基础操作笔记</h1><h2 id="1-文件操作"><a href="#1-文件操作" class="headerlink" title="1. 文件操作"></a>1. 文件操作</h2><h3 id="1-1-创建文件"><a href="#1-1-创建文件" class="headerlink" title="1.1 创建文件"></a>1.1 创建文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建单个文件</span></span><br><span class="line"><span class="built_in">touch</span> file</span><br><span class="line"></span><br><span class="line"><span class="comment"># 批量创建文件（创建love_1_linux.txt到love_10_linux.txt）</span></span><br><span class="line"><span class="built_in">touch</span> love_&#123;1..10&#125;_linux.txt</span><br></pre></td></tr></table></figure>

<h3 id="1-2-文件权限查看"><a href="#1-2-文件权限查看" class="headerlink" title="1.2 文件权限查看"></a>1.2 文件权限查看</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -l  <span class="comment"># 详细列表显示文件权限</span></span><br></pre></td></tr></table></figure>
<p>输出示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-rw-r--r-- 1 user group 1024 Mar 1 10:00 example.txt</span><br></pre></td></tr></table></figure>
<p>权限字段说明：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[文件类型][所有者权限][组权限][其他用户权限]</span><br><span class="line">d rwx r-x r-x</span><br></pre></td></tr></table></figure>
<ul>
<li>文件类型：<code>-</code>普通文件，<code>d</code>目录，<code>l</code>链接文件</li>
<li>权限组成：<code>r</code>读(4) + <code>w</code>写(2) + <code>x</code>执行(1)</li>
</ul>
<h2 id="2-帮助系统"><a href="#2-帮助系统" class="headerlink" title="2. 帮助系统"></a>2. 帮助系统</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">man &lt;<span class="built_in">command</span>&gt;  <span class="comment"># 查看命令手册</span></span><br><span class="line">man <span class="built_in">ls</span>         <span class="comment"># 示例：查看ls命令手册</span></span><br></pre></td></tr></table></figure>
<p>常用操作键：</p>
<ul>
<li>空格键：向下翻页</li>
<li><code>q</code>：退出手册</li>
<li><code>/</code>：搜索内容</li>
</ul>
<h2 id="3-用户管理"><a href="#3-用户管理" class="headerlink" title="3. 用户管理"></a>3. 用户管理</h2><h3 id="3-1-用户查看命令"><a href="#3-1-用户查看命令" class="headerlink" title="3.1 用户查看命令"></a>3.1 用户查看命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">whoami</span>        <span class="comment"># 显示当前用户名</span></span><br><span class="line"><span class="built_in">who</span> am i      <span class="comment"># 显示登录信息</span></span><br><span class="line"><span class="built_in">who</span> -m        <span class="comment"># 同&quot;who am i&quot;</span></span><br><span class="line"><span class="built_in">who</span> mom likes <span class="comment"># 显示特定用户信息（需实际用户存在）</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-用户操作"><a href="#3-2-用户操作" class="headerlink" title="3.2 用户操作"></a>3.2 用户操作</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建用户（自动创建home目录）</span></span><br><span class="line"><span class="built_in">sudo</span> adduser lilei</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看已创建用户</span></span><br><span class="line"><span class="built_in">ls</span> /home</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换用户</span></span><br><span class="line">su -l lilei   <span class="comment"># &quot;-l&quot;模拟完整登录环境</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除用户及home目录</span></span><br><span class="line"><span class="built_in">sudo</span> deluser lilei --remove-home</span><br></pre></td></tr></table></figure>

<h2 id="4-用户组管理"><a href="#4-用户组管理" class="headerlink" title="4. 用户组管理"></a>4. 用户组管理</h2><h3 id="4-1-用户组查看"><a href="#4-1-用户组查看" class="headerlink" title="4.1 用户组查看"></a>4.1 用户组查看</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看指定用户所属组</span></span><br><span class="line"><span class="built_in">groups</span> shiyanlou</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有组（按字母排序）</span></span><br><span class="line"><span class="built_in">cat</span> /etc/group | <span class="built_in">sort</span></span><br></pre></td></tr></table></figure>
<p><code>/etc/group</code> 文件格式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">group_name:password:GID:user_list</span><br></pre></td></tr></table></figure>

<h3 id="4-2-用户组操作"><a href="#4-2-用户组操作" class="headerlink" title="4.2 用户组操作"></a>4.2 用户组操作</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加用户到组（需要root权限）</span></span><br><span class="line"><span class="built_in">sudo</span> usermod -aG <span class="built_in">sudo</span> lilei  <span class="comment"># 示例：添加sudo组</span></span><br></pre></td></tr></table></figure>

<h2 id="5-权限管理"><a href="#5-权限管理" class="headerlink" title="5. 权限管理"></a>5. 权限管理</h2><h3 id="5-1-文件权限修改"><a href="#5-1-文件权限修改" class="headerlink" title="5.1 文件权限修改"></a>5.1 文件权限修改</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 变更文件所有者</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chown</span> shiyanlou iphone6</span><br><span class="line"></span><br><span class="line"><span class="comment"># 变更文件所属组</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chgrp</span> group_name file</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改所有权限（所有者/组/其他用户）</span></span><br><span class="line"><span class="built_in">chmod</span> 755 filename  <span class="comment"># rwxr-xr-x</span></span><br></pre></td></tr></table></figure>

<h3 id="5-2-权限数字表示法"><a href="#5-2-权限数字表示法" class="headerlink" title="5.2 权限数字表示法"></a>5.2 权限数字表示法</h3><table>
<thead>
<tr>
<th>权限</th>
<th>数字</th>
</tr>
</thead>
<tbody><tr>
<td>r–</td>
<td>4</td>
</tr>
<tr>
<td>-w-</td>
<td>2</td>
</tr>
<tr>
<td>–x</td>
<td>1</td>
</tr>
<tr>
<td>rwx</td>
<td>7 (4+2+1)</td>
</tr>
</tbody></table>
<h2 id="6-文件类型说明"><a href="#6-文件类型说明" class="headerlink" title="6. 文件类型说明"></a>6. 文件类型说明</h2><p>Linux 一切皆文件，主要类型包括：</p>
<ul>
<li><code>-</code>：普通文件</li>
<li><code>d</code>：目录文件</li>
<li><code>l</code>：符号链接（相当于快捷方式）</li>
<li><code>c</code>：字符设备文件</li>
<li><code>b</code>：块设备文件</li>
<li><code>s</code>：套接字文件</li>
<li><code>p</code>：管道文件</li>
</ul>
<h2 id="7-重要补充说明"><a href="#7-重要补充说明" class="headerlink" title="7. 重要补充说明"></a>7. 重要补充说明</h2><ol>
<li><p>目录权限特殊含义：</p>
<ul>
<li>读权限：可查看目录内容</li>
<li>写权限：可创建&#x2F;删除文件</li>
<li>执行权限：可进入目录</li>
</ul>
</li>
<li><p>新建用户默认会：</p>
<ul>
<li>创建同名用户组</li>
<li>在<code>/home</code>下创建用户目录</li>
<li>基本配置文件从<code>/etc/skel</code>复制</li>
</ul>
</li>
<li><p>sudo权限配置路径：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/sudoers</span><br><span class="line">/etc/sudoers.d/</span><br></pre></td></tr></table></figure></li>
</ol>
<p>建议后续可补充：</p>
<ul>
<li>实际权限修改案例</li>
<li>用户组管理实验</li>
<li>sudoers文件的配置方法</li>
<li>ACL高级权限控制</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../../../2017/04/28/linux%E5%9F%BA%E7%A1%80/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
          <li class="pagination-prev">
            <a
                class="btn btn--default btn--small"
                href="../../"
                aria-label="上一頁"
            >
              <i class="fa fa-angle-left text-base icon-mr"></i>
              <span>上一頁</span>
            </a>
          </li>
        
        
        <li class="pagination-number">第 2 頁 共 2 頁</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2025 Kein Chan. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="../../../../assets/images/profile.jpg" alt="作者的圖片"/>
        
            <h4 id="about-card-name">Kein Chan</h4>
        
            <div id="about-card-bio"><p>這是獨立全棧工程師Kein Chan的技術博客</br>Kein目前居住在東京和澳門.</br>熱愛旅遊.已探訪日本40多個都道府縣.曾自駕環繞日本半個本州.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>全棧工程師</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Tokyo/Macao
            </div>
        
    </div>
</div>

        
            <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-times"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="../assets/images/logo-algolia-nebula-blue-full.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    />
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">沒有找到文章</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2017/04/28/linux%E5%9F%BA%E7%A1%80/"
                            aria-label=": linux基础"
                        >
                            <h3 class="media-heading">linux基础</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2017年4月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2017/04/28/iptables/"
                            aria-label=": iptables"
                        >
                            <h3 class="media-heading">iptables</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2017年4月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2017/08/12/git%E6%95%99%E7%A8%8B/"
                            aria-label=": git教程"
                        >
                            <h3 class="media-heading">git教程</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2017年8月12日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2019/01/18/Java%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B/"
                            aria-label=": Java变量类型"
                        >
                            <h3 class="media-heading">Java变量类型</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2019年1月18日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2019/09/12/%E6%95%B0%E5%AD%A6/markdown-latex%E7%9A%84%E6%95%B0%E5%AD%A6%E5%BC%8F%E5%86%99%E6%B3%95/"
                            aria-label=": LaTeX的写法"
                        >
                            <h3 class="media-heading">LaTeX的写法</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2019年9月12日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2019/09/13/%E6%95%B0%E5%AD%A6/0-%E4%B8%AD%E5%AD%A6%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0/"
                            aria-label=": 0.中学数学复习"
                        >
                            <h3 class="media-heading">0.中学数学复习</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2019年9月13日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2019/09/28/%E6%95%B0%E5%AD%A6/1-%E5%88%9D%E7%AD%89%E5%87%BD%E6%95%B0%E7%9A%84%E5%AF%BC%E6%95%B0%E6%8E%A8%E5%AF%BC/"
                            aria-label=": 1.初等函数的导数推导"
                        >
                            <h3 class="media-heading">1.初等函数的导数推导</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2019年9月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2019/09/28/%E6%95%B0%E5%AD%A6/2-%E5%87%BD%E6%95%B0%E7%9A%84%E6%B1%82%E5%AF%BC%E6%B3%95%E5%88%99/"
                            aria-label=": 2.函数的求导法则"
                        >
                            <h3 class="media-heading">2.函数的求导法则</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2019年9月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2019/09/28/%E6%95%B0%E5%AD%A6/3-%E8%8E%B1%E5%B8%83%E5%B0%BC%E5%85%B9%E5%85%AC%E5%BC%8F/"
                            aria-label=": 3.莱布尼兹公式"
                        >
                            <h3 class="media-heading">3.莱布尼兹公式</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2019年9月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2019/09/28/%E6%95%B0%E5%AD%A6/4-%E5%BE%AE%E5%88%86/"
                            aria-label=": 4.微分"
                        >
                            <h3 class="media-heading">4.微分</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2019年9月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="沒有找到文章"
                data-message-one="找到 1 篇文章"
                data-message-other="找到 {n} 篇文章">
                找到 42 篇文章
            </p>
        </div>
    </div>
</div>

        
        
<div id="cover" style="background-image:url('../../../../assets/images/cover.jpeg');"></div>
        <!--SCRIPTS-->

<script src="../../../../assets/js/script-qtzvvb63gamuirvfphht7lytrxkfllzng1escnm2phjtlt4tvvxi5gl0wx4o.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
