
<!DOCTYPE html>
<html lang="zh-tw">
    
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css">

    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/min/moment.min.js"></script>
    
      <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/locale/zh-tw.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
    <script>
      window.algoliaConfig = {
        appId: 'AWFC86Q51O',
        apiKey: 'c9d952906eb1b154d75cf863e75c1ede',
        indexName: 'MyBlog'
      };
      var algoliaIndex = algoliasearch(
        algoliaConfig.appId,
        algoliaConfig.apiKey
      ).initIndex(algoliaConfig.indexName);
    </script>


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Kein&#39;s blog">
    <title>標籤: oracleDB - Kein&#39;s blog</title>
    <meta name="author" content="Kein Chan">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Kein&#39;s blog">
<meta property="og:url" content="https://chankein.github.io/tags/oracleDB/index.html">
<meta property="og:site_name" content="Kein&#39;s blog">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Kein Chan">
<meta name="twitter:card" content="summary">
    
    
        
    
    
        <meta property="og:image" content="https://chankein.github.io../../assets/images/profile.jpg"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="../../assets/css/style-l9zwheso7r7pnk98nvirovsz9dl7fhkrc9mlb5vmuxw7tk5movrk0eevsrpr.min.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="../../index.html"
            aria-label=""
        >
            Kein&#39;s blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打開鏈接: ../../#about"
            >
        
        
            <img class="header-picture" src="../../assets/images/profile.jpg" alt="作者的圖片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="../../#about"
                    aria-label="閱讀有關作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="../../assets/images/profile.jpg" alt="作者的圖片"/>
                </a>
                <h4 class="sidebar-profile-name">Kein Chan</h4>
                
                    <h5 class="sidebar-profile-bio"><p>這是獨立全棧工程師Kein Chan的技術博客</br>分享一些技術教程,命令備忘(cheat-sheet)等</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../index.html"
                            
                            rel="noopener"
                            title="首頁"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首頁</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../all-categories"
                            
                            rel="noopener"
                            title="分類"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">分類</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../all-tags"
                            
                            rel="noopener"
                            title="標籤"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">標籤</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../all-archives"
                            
                            rel="noopener"
                            title="所有文章"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">所有文章</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="搜尋"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜尋</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="關於"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">關於</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/chankein/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../mailto:kein.chan85@gmail.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Email"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Email</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="../../atom.xml"
                            
                            rel="noopener"
                            title="Atom"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Atom</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="../../2021/05/09/oracelBD%E5%9F%BA%E7%A1%80/"
                            aria-label=": oracelBD基础"
                        >
                            oracelBD基础
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-05-09T07:15:08+08:00">
	
		    2021 年 5 月 9 日
    	
    </time>
    
        <span>分類 </span>
        
    <a class="category-link" href="../../categories/database/">database</a>, <a class="category-link" href="../../categories/database/oracleDB/">oracleDB</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1>OracleDB 笔记整理</h1>
<h2 id="1-SQL-分类">1. SQL 分类</h2>
<table>
<thead>
<tr>
<th>分类</th>
<th>说明</th>
<th>关键字</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>DML</strong> (Data Manipulation Language)</td>
<td>数据操作语言</td>
<td><code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>, <code>MERGE</code></td>
</tr>
<tr>
<td><strong>DDL</strong> (Data Definition Language)</td>
<td>数据定义语言</td>
<td><code>CREATE</code>, <code>ALTER</code>, <code>DROP</code>, <code>RENAME</code>, <code>TRUNCATE</code>, <code>COMMENT</code></td>
</tr>
<tr>
<td><strong>DCL</strong> (Data Control Language)</td>
<td>数据控制语言</td>
<td><code>GRANT</code>, <code>REVOKE</code></td>
</tr>
<tr>
<td><strong>事务</strong> (Transaction)</td>
<td>事务控制</td>
<td><code>COMMIT</code>, <code>ROLLBACK</code>, <code>SAVEPOINT</code></td>
</tr>
</tbody>
</table>
<h2 id="2-OracleDB-构成">2. OracleDB 构成</h2>
<h3 id="2-1-基本构成">2.1 基本构成</h3>
<p>OracleDB 由 <strong>Oracle实例(instance)</strong> 和 <strong>Database</strong> 构成：</p>
<ul>
<li><strong>实例(Instance)</strong> 由：
<ul>
<li><strong>SGA(System Global Area)</strong>：内存区域</li>
<li><strong>Background Process</strong>：后台进程</li>
</ul>
</li>
<li><strong>Database</strong> 由：
<ul>
<li>控制文件（制御ファイル）</li>
<li>REDO 文件（REDO ログ）</li>
<li>数据文件（データファイル）</li>
</ul>
</li>
</ul>
<h3 id="2-2-进程视角">2.2 进程视角</h3>
<p>除了实例中的 <strong>Background Process</strong>，还包括：</p>
<ul>
<li>用户进程</li>
<li>服务器进程</li>
<li>监听进程</li>
</ul>
<h3 id="2-3-工具列表">2.3 工具列表</h3>
<h4 id="安装和升级相关工具">安装和升级相关工具</h4>
<table>
<thead>
<tr>
<th>工具名</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>Oracle Universal Installer (OUI)</td>
<td>安装 Oracle 软件</td>
</tr>
<tr>
<td>Oracle Database Configuration Assistant (DBCA)</td>
<td>创建数据库</td>
</tr>
<tr>
<td>Oracle Database Upgrade Assistant (DBUA)</td>
<td>升级现有数据库到新版本</td>
</tr>
</tbody>
</table>
<h4 id="网络相关工具">网络相关工具</h4>
<table>
<thead>
<tr>
<th>工具名</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>Oracle Net Manager (netmgr)</td>
<td>配置 Oracle 网络</td>
</tr>
<tr>
<td>Oracle Net Configuration Assistant (netca)</td>
<td>配置 Oracle 网络</td>
</tr>
</tbody>
</table>
<h4 id="实例和数据库管理工具">实例和数据库管理工具</h4>
<table>
<thead>
<tr>
<th>工具名</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>Oracle Enterprise Manager (EM)</td>
<td>管理 Oracle DB</td>
</tr>
<tr>
<td>SQL*Plus</td>
<td>SQL 命令行工具</td>
</tr>
<tr>
<td>SQL Developer</td>
<td>图形化数据库管理工具</td>
</tr>
<tr>
<td>Recovery Manager (RMAN)</td>
<td>数据库备份、恢复、复原</td>
</tr>
<tr>
<td>Oracle Secure Backup</td>
<td>备份管理</td>
</tr>
<tr>
<td>Data Pump</td>
<td>数据库间高速数据传输</td>
</tr>
<tr>
<td>SQL*Loader</td>
<td>外部文件数据批量导入</td>
</tr>
</tbody>
</table>
<h2 id="3-安装">3. 安装</h2>
<h3 id="3-1-OUI-功能">3.1 OUI 功能</h3>
<ul>
<li>显示已安装的 Oracle 软件</li>
<li>安装新软件</li>
<li>删除软件</li>
<li>查看在线帮助</li>
<li>检查安装需求</li>
</ul>
<h3 id="3-2-系统要求">3.2 系统要求</h3>
<ul>
<li><strong>内存</strong>：1GB</li>
<li><strong>SWAP</strong>：1.5GB</li>
<li><strong>硬盘空间</strong>：
<ul>
<li>最小 1GB</li>
<li>一般需要 6.1GB</li>
</ul>
</li>
</ul>
<h3 id="3-3-创建用户和组">3.3 创建用户和组</h3>
<ul>
<li><strong>软件所有者</strong>：Oracle 用户</li>
<li><strong>Oracle Inventory Group</strong>：用于管理 Oracle 软件</li>
<li><strong>DB 管理组</strong>：
<ul>
<li><code>OSDBA</code>：数据库管理员组</li>
<li><code>OSOPER</code>：受限制的数据库管理员组</li>
</ul>
</li>
</ul>
<h3 id="3-4-环境变量">3.4 环境变量</h3>
<table>
<thead>
<tr>
<th>变量名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ORACLE_BASE</code></td>
<td>Oracle 主目录</td>
</tr>
<tr>
<td><code>ORACLE_HOME</code></td>
<td>Oracle 软件安装位置</td>
</tr>
<tr>
<td><code>ORACLE_SID</code></td>
<td>系统标识（实例名）</td>
</tr>
<tr>
<td><code>LD_LIBRARY_PATH</code></td>
<td>共享库路径（如 <code>$ORACLE_HOME/lib</code>）</td>
</tr>
</tbody>
</table>
<h3 id="3-5-安装脚本">3.5 安装脚本</h3>
<table>
<thead>
<tr>
<th>脚本名</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>orainstRoot.sh</code></td>
<td>生成 inventory pointer 文件</td>
</tr>
<tr>
<td><code>root.sh</code></td>
<td>生成 <code>oratab</code> 并设置环境变量 (<code>oraenv</code> 和 <code>coraenv</code>)，指定 <code>dbstart</code> 和 <code>dbshut</code> 脚本</td>
</tr>
</tbody>
</table>
<h3 id="3-6-创建数据库（DBCA）">3.6 创建数据库（DBCA）</h3>
<h4 id="3-6-1-指定-Global-DB-名">3.6.1 指定 Global DB 名</h4>
<p>格式：<code>database_name.domain_name</code></p>
<h4 id="3-6-2-Enterprise-Manager-选项">3.6.2 Enterprise Manager 选项</h4>
<ul>
<li><strong>Database Express</strong>：单数据库管理</li>
<li><strong>Cloud Control</strong>：集中管理多个数据库（需预先安装 Cloud Control）</li>
</ul>
<h4 id="3-6-3-存储类型">3.6.3 存储类型</h4>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>文件系统</td>
<td>使用操作系统文件</td>
</tr>
<tr>
<td>ASM (Automatic Storage Management)</td>
<td>文件存储在 ASM 磁盘组，需额外实例</td>
</tr>
</tbody>
</table>
<h4 id="3-6-4-数据库文件位置">3.6.4 数据库文件位置</h4>
<ul>
<li><strong>使用模板的文件位置</strong></li>
<li><strong>所有数据库文件共享文件夹</strong></li>
<li><strong>Oracle Managed Files</strong>：由 Oracle 直接管理文件</li>
</ul>
<h4 id="3-6-5-模板">3.6.5 模板</h4>
<p>模板包含以下信息：</p>
<ul>
<li>数据库选项</li>
<li>初始化参数</li>
<li>存储属性（数据文件、表空间、控制文件、REDO 日志属性）</li>
</ul>
<h5 id="模板分类">模板分类</h5>
<table>
<thead>
<tr>
<th>模板类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>通用事务处理（默认）</td>
<td>适用于 OLTP 场景</td>
</tr>
<tr>
<td>数据仓库 (Data Warehouse)</td>
<td>适用于复杂查询和大数据处理</td>
</tr>
<tr>
<td>自定义模板</td>
<td>用户自定义配置</td>
</tr>
</tbody>
</table>
<h5 id="模板形式">模板形式</h5>
<table>
<thead>
<tr>
<th>形式</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sheet Template</td>
<td>包含现有数据库结构和物理文件</td>
</tr>
<tr>
<td>Non-Sheet Template</td>
<td>仅包含数据库特性</td>
</tr>
</tbody>
</table>
<h2 id="4-EM-Express">4. EM Express</h2>
<h3 id="4-1-功能">4.1 功能</h3>
<ul>
<li>提供数据库管理功能（<strong>不包括启动/停止数据库</strong>）</li>
<li>如需启动/停止数据库，需使用 <strong>Oracle Enterprise Manager Cloud Control</strong></li>
</ul>
<h3 id="4-2-手动配置-EM-Express">4.2 手动配置 EM Express</h3>
<ol>
<li><strong>启动监听进程</strong></li>
<li><strong>初始化 <code>DISPATCHERS</code> 参数</strong>（设置 <code>PROTOCOL=TCP</code>）：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dispatchers<span class="operator">=</span>&quot;(PROTOCOL=TCP)(SERVICE=&lt;sid&gt;XDB)&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><strong>设置端口</strong>（需 <code>SYSDBA</code> 权限）：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXEC</span> DBMS_XDB_CONFIG.setHTTPSPORT(<span class="number">5500</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="4-3-使用-EM-Express">4.3 使用 EM Express</h3>
<h4 id="4-3-1-查询-EM-Express-端口">4.3.1 查询 EM Express 端口</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DBMS_XDB_CONFIG.getHTTPSPort <span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>
<h4 id="4-3-2-权限分配">4.3.2 权限分配</h4>
<table>
<thead>
<tr>
<th>权限</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>EM_EXPRESS_BASIC</code></td>
<td>只读模式</td>
</tr>
<tr>
<td><code>EM_EXPRESS_ALL</code></td>
<td>完全权限</td>
</tr>
</tbody>
</table>
<h3 id="4-4-连接数据库">4.4 连接数据库</h3>
<h4 id="4-4-1-SQL-Plus-连接方式">4.4.1 SQL*Plus 连接方式</h4>
<ol>
<li>运行 <code>oraenv</code> 设置环境变量：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">. oraenv</span><br></pre></td></tr></table></figure>
</li>
<li>启动 SQL*Plus（<code>/nolog</code> 表示不登录数据库）：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlplus /nolog</span><br></pre></td></tr></table></figure>
</li>
<li>连接数据库：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CONNECT</span> <span class="operator">&lt;</span>用户名<span class="operator">&gt;</span><span class="operator">/</span><span class="operator">&lt;</span>密码<span class="operator">&gt;</span> [<span class="keyword">AS</span> SYSDBA <span class="operator">|</span> <span class="keyword">AS</span> SYSOPER]</span><br></pre></td></tr></table></figure>
</li>
<li>其他功能：
<ul>
<li>执行 SQL 脚本：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="operator">&lt;</span><span class="keyword">sql</span>文件名<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>执行操作系统命令：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HOST <span class="operator">&lt;</span>命令<span class="operator">&gt;</span>  # 例如：HOST ls</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h4 id="4-4-2-SQL-Developer-连接方式">4.4.2 SQL Developer 连接方式</h4>
<ol>
<li>运行 <code>oraenv</code> 设置环境变量：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">. oraenv</span><br></pre></td></tr></table></figure>
</li>
<li>启动 SQL Developer：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$ORACLE_HOME</span>/sqldeveloper</span><br><span class="line">sh sqldeveloper.sh</span><br></pre></td></tr></table></figure>
</li>
<li>功能：
<ul>
<li><strong>普通模式</strong>：查看、创建、编辑、删除表、视图等对象</li>
<li><strong>DBA Navigator</strong>：连接 DBA 用户后可启动/停止数据库</li>
</ul>
</li>
</ol>
<h2 id="5-Oracle-网络构成">5. Oracle 网络构成</h2>
<h3 id="5-1-Oracle-Net-概述">5.1 Oracle Net 概述</h3>
<ul>
<li><strong>功能</strong>：提供网络服务</li>
<li><strong>安装方式</strong>：随 Oracle 数据库软件或客户端一同安装</li>
<li><strong>通信模式</strong>：
<ul>
<li><strong>客户端-服务端模式</strong>：两端均需安装 Oracle Net</li>
<li><strong>客户端-Web 服务器-DB 服务器模式</strong>：客户端和 Web 服务器需安装 Oracle Net</li>
</ul>
</li>
</ul>
<h3 id="5-2-通信条件">5.2 通信条件</h3>
<table>
<thead>
<tr>
<th><strong>角色</strong></th>
<th><strong>要求</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>DB 服务端</strong></td>
<td>1. 网络服务器在线<br>2. 已安装 Oracle DB<br>3. 支持 TCP/IP 协议<br>4. 监听进程已启动</td>
</tr>
<tr>
<td><strong>客户端</strong></td>
<td>1. 网络服务器在线<br>2. 已安装 Oracle 客户端<br>3. 支持 TCP/IP 协议</td>
</tr>
</tbody>
</table>
<h3 id="5-3-监听进程">5.3 监听进程</h3>
<ul>
<li>
<p><strong>自动安装</strong>：通过 OUI 初始化 DB 时，NetCA 会默认安装监听进程</p>
</li>
<li>
<p><strong>作用</strong>：处理客户端连接请求（连接建立后不再参与通信）</p>
</li>
<li>
<p><strong>关键命令</strong>：</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lsnrctl start &lt;监听进程名&gt;</code></td>
<td>启动监听进程</td>
</tr>
<tr>
<td><code>lsnrctl stop &lt;监听进程名&gt;</code></td>
<td>停止监听进程</td>
</tr>
<tr>
<td><code>lsnrctl status &lt;监听进程名&gt;</code></td>
<td>查看状态</td>
</tr>
<tr>
<td><code>lsnrctl services &lt;监听进程名&gt;</code></td>
<td>查看支持的服务</td>
</tr>
<tr>
<td><code>LSNRCTL&gt; set current_listener &lt;名称&gt;</code></td>
<td>切换监听进程（需交互模式）</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h3 id="5-4-客户端构成">5.4 客户端构成</h3>
<ul>
<li><strong>数据库连接示例</strong>：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CONNECT</span> hr@(DESCRIPTION <span class="operator">=</span> </span><br><span class="line">  (ADDRESS <span class="operator">=</span> (PROTOCOL <span class="operator">=</span> TCP)(HOST <span class="operator">=</span> proj1<span class="operator">-</span>sv)(PORT <span class="operator">=</span> <span class="number">1521</span>))</span><br><span class="line">  (CONNECT_DATA <span class="operator">=</span> (SERVICE_NAME <span class="operator">=</span> sales.edifist.com)))</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="5-5-命名方法">5.5 命名方法</h3>
<table>
<thead>
<tr>
<th><strong>类型</strong></th>
<th><strong>存储位置</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>本地命名</strong></td>
<td>客户端 <code>tnsnames.ora</code></td>
<td>网络服务名映射存储在本地文件</td>
</tr>
<tr>
<td><strong>LDAP 基准</strong></td>
<td>LDAP 服务器</td>
<td>集中管理服务名映射</td>
</tr>
<tr>
<td><strong>简易连接命名</strong></td>
<td>无</td>
<td>直接使用 TCP/IP 连接字符串（如 <code>connect scott@host名/服务名</code>）</td>
</tr>
<tr>
<td><strong>外部命名</strong></td>
<td>第三方命名服务（如 NIS）</td>
<td>依赖非 Oracle 服务</td>
</tr>
</tbody>
</table>
<h4 id="本地命名配置方法">本地命名配置方法</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netca  <span class="comment"># 启动图形化配置工具</span></span><br></pre></td></tr></table></figure>
<h4 id="简易连接示例">简易连接示例</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sqlplus <span class="operator">/</span>nolog</span><br><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">CONNECT</span> hr<span class="operator">/</span>hr<span class="variable">@oracle_sv</span><span class="operator">/</span>orcl.edifist.com</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="6-数据库服务器架构概要">6. 数据库服务器架构概要</h2>
<h3 id="6-1-核心组件">6.1 核心组件</h3>
<ul>
<li><strong>Oracle 实例</strong>：内存结构（SGA） + 后台进程</li>
<li><strong>Oracle 数据库</strong>：物理文件集合</li>
</ul>
<h3 id="6-2-SGA-System-Global-Area-构成">6.2 SGA (System Global Area) 构成</h3>
<table>
<thead>
<tr>
<th><strong>组件</strong></th>
<th><strong>功能</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>数据库缓存</strong></td>
<td>存储数据块（Buffer Cache）</td>
</tr>
<tr>
<td><strong>REDO 日志 Buffer</strong></td>
<td>记录数据变更历史</td>
</tr>
<tr>
<td><strong>共享池</strong></td>
<td>缓存 SQL/PLSQL 解析结果、执行计划、数据字典</td>
</tr>
<tr>
<td><strong>Large Pool</strong></td>
<td>可选，用于共享服务器模式、并行查询、RMAN 备份等</td>
</tr>
<tr>
<td><strong>Java Pool</strong></td>
<td>支持 Java 虚拟机（JVM）</td>
</tr>
<tr>
<td><strong>Stream Pool</strong></td>
<td>支持 Oracle Stream 数据复制</td>
</tr>
</tbody>
</table>
<h3 id="6-3-关键后台进程">6.3 关键后台进程</h3>
<table>
<thead>
<tr>
<th><strong>进程</strong></th>
<th><strong>名称</strong></th>
<th><strong>功能</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>SMON</strong></td>
<td>System Monitor</td>
<td>实例恢复（如崩溃后自动修复）</td>
</tr>
<tr>
<td><strong>PMON</strong></td>
<td>Process Monitor</td>
<td>清理异常终止的用户进程资源</td>
</tr>
<tr>
<td><strong>DBWn</strong></td>
<td>Database Writer</td>
<td>将脏缓冲区写入数据文件</td>
</tr>
<tr>
<td><strong>CKPT</strong></td>
<td>Checkpoint</td>
<td>触发 DBWn 写入，更新控制文件（用于灾难恢复）</td>
</tr>
<tr>
<td><strong>LGWR</strong></td>
<td>Log Writer</td>
<td>将 REDO 日志缓冲区写入磁盘</td>
</tr>
<tr>
<td><strong>ARCn</strong></td>
<td>Archiver</td>
<td>归档 REDO 日志</td>
</tr>
<tr>
<td><strong>MMON</strong></td>
<td>Manageability Monitor</td>
<td>执行 AWR（自动工作负载仓库）相关任务</td>
</tr>
</tbody>
</table>
<h3 id="6-4-用户与服务器进程">6.4 用户与服务器进程</h3>
<ul>
<li><strong>用户进程</strong>：运行应用程序（如 SQL*Plus）</li>
<li><strong>服务器进程</strong>：处理用户提交的 SQL 查询</li>
</ul>
<h3 id="6-5-PGA-Program-Global-Area">6.5 PGA (Program Global Area)</h3>
<ul>
<li><strong>特点</strong>：非共享内存，仅限单个进程访问</li>
<li><strong>用途</strong>：存储 SQL 执行时的排序区、会话信息等</li>
</ul>
<hr>
<h2 id="7-实例启停">7. 实例启停</h2>
<h3 id="7-1-启动方法">7.1 启动方法</h3>
<ul>
<li>SQL*Plus（<code>STARTUP</code> 命令）</li>
<li>Windows 服务管理器</li>
<li>SQL Developer</li>
<li>Enterprise Manager Cloud Control</li>
</ul>
<h3 id="7-2-启动状态迁移">7.2 启动状态迁移</h3>
<table>
<thead>
<tr>
<th><strong>状态</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>NOMOUNT</strong></td>
<td>读取参数文件，分配 SGA，启动后台进程（控制文件未打开）</td>
</tr>
<tr>
<td><strong>MOUNT</strong></td>
<td>打开控制文件（获知数据文件/日志文件路径，但未打开文件）</td>
</tr>
<tr>
<td><strong>OPEN</strong></td>
<td>打开所有数据文件和 REDO 日志，数据库可用</td>
</tr>
</tbody>
</table>
<h3 id="7-3-权限要求">7.3 权限要求</h3>
<table>
<thead>
<tr>
<th><strong>权限</strong></th>
<th><strong>能力</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>SYSDBA</strong></td>
<td>完全控制（包括启停实例、用户授权）</td>
</tr>
<tr>
<td><strong>SYSOPER</strong></td>
<td>仅限启停实例（无权管理用户对象）</td>
</tr>
</tbody>
</table>
<h4 id="连接示例">连接示例</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CONNECT</span> 用户名<span class="operator">/</span>密码 <span class="keyword">AS</span> &#123;SYSOPER <span class="operator">|</span> SYSDBA&#125;</span><br><span class="line">sqlplus <span class="operator">/</span>nolog</span><br><span class="line"><span class="keyword">CONNECT</span> sys <span class="keyword">AS</span> sysdba</span><br><span class="line">STARTUP</span><br></pre></td></tr></table></figure>
<h3 id="7-4-停止流程">7.4 停止流程</h3>
<ol>
<li><strong>关闭数据库</strong>（OPEN → CLOSED）
<ul>
<li>执行 Checkpoint，写入数据文件和 REDO 日志</li>
<li>关闭数据文件和 REDO 日志（控制文件仍打开）</li>
</ul>
</li>
<li><strong>卸载数据库</strong>（CLOSED → DISMOUNT）
<ul>
<li>实例与数据库分离</li>
</ul>
</li>
<li><strong>停止实例</strong>（DISMOUNT → SHUTDOWN）
<ul>
<li>终止后台进程，释放 SGA 内存</li>
</ul>
</li>
</ol>
<h3 id="7-5-停止模式对比">7.5 停止模式对比</h3>
<table>
<thead>
<tr>
<th><strong>行为</strong></th>
<th>NORMAL</th>
<th>TRANSACTIONAL</th>
<th>IMMEDIATE</th>
<th>ABORT</th>
</tr>
</thead>
<tbody>
<tr>
<td>接受新连接</td>
<td>×</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
<tr>
<td>等待当前会话结束</td>
<td>✓</td>
<td>✓</td>
<td>×</td>
<td>×</td>
</tr>
<tr>
<td>等待当前事务结束</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>×</td>
</tr>
<tr>
<td>执行 Checkpoint 后关闭</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>×</td>
</tr>
</tbody>
</table>
<h3 id="7-6-初始化参数文件">7.6 初始化参数文件</h3>
<table>
<thead>
<tr>
<th><strong>类型</strong></th>
<th><strong>名称</strong></th>
<th><strong>特点</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>静态</strong></td>
<td>PFILE（文本文件）</td>
<td>手动编辑，需重启生效</td>
</tr>
<tr>
<td><strong>动态</strong></td>
<td>SPFILE（二进制文件）</td>
<td>支持在线修改（<code>ALTER SYSTEM</code>），优先使用</td>
</tr>
</tbody>
</table>

                    
                        


                    
                    
                        <p>
                            <a
                                href="../../2021/05/09/oracelBD%E5%9F%BA%E7%A1%80/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                留言與分享
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">第 1 頁 共 1 頁</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2025 Kein Chan. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="../../assets/images/profile.jpg" alt="作者的圖片"/>
        
            <h4 id="about-card-name">Kein Chan</h4>
        
            <div id="about-card-bio"><p>這是獨立全棧工程師Kein Chan的技術博客</br>分享一些技術教程,命令備忘(cheat-sheet)等</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>全棧工程師</br>資深技術顧問</br>數據科學家</br>Hit廣島觀光大使</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Tokyo/Macau
            </div>
        
    </div>
</div>

        
            <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-times"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="../assets/images/logo-algolia-nebula-blue-full.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    />
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">沒有找到文章</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2013/04/27/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85/"
                            aria-label=": R语言-环境安装"
                        >
                            <h3 class="media-heading">R语言-环境安装</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年4月27日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2013/04/28/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E5%9F%BA%E7%A1%80/"
                            aria-label=": R语言-基础"
                        >
                            <h3 class="media-heading">R语言-基础</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年4月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2013/05/01/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE/"
                            aria-label=": R语言-读取数据"
                        >
                            <h3 class="media-heading">R语言-读取数据</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月1日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2013/05/02/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E7%BB%98%E5%9B%BE/"
                            aria-label=": R语言-绘图"
                        >
                            <h3 class="media-heading">R语言-绘图</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月2日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2013/05/03/R%E8%AF%AD%E8%A8%80/R%E8%AF%AD%E8%A8%80-%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/"
                            aria-label=": R语言-线性回归"
                        >
                            <h3 class="media-heading">R语言-线性回归</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年5月3日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2015/02/22/Algorithms/1.%E7%AE%97%E6%B3%95%E5%9C%A8%E8%AE%A1%E7%AE%97%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8/"
                            aria-label=": 1. 算法在计算中的作用"
                        >
                            <h3 class="media-heading">1. 算法在计算中的作用</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月22日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2015/02/23/Algorithms/2.%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/"
                            aria-label=": 2. 算法基础"
                        >
                            <h3 class="media-heading">2. 算法基础</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月23日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2015/02/24/Algorithms/3.%E5%87%BD%E6%95%B0%E7%9A%84%E5%A2%9E%E9%95%BF/"
                            aria-label=": 3. 函数的增长"
                        >
                            <h3 class="media-heading">3. 函数的增长</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月24日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2015/02/25/Algorithms/4.%E5%88%86%E6%B2%BB%E7%AD%96%E7%95%A5/"
                            aria-label=": 4. 分治策略"
                        >
                            <h3 class="media-heading">4. 分治策略</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月25日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a
                            class="link-unstyled"
                            href="https://chankein.github.io/2015/02/26/Algorithms/5.%E6%A6%82%E7%8E%87%E5%88%86%E6%9E%90%E5%92%8C%E9%9A%8F%E6%9C%BA%E7%AE%97%E6%B3%95/"
                            aria-label=": 5. 概率分析和随机算法"
                        >
                            <h3 class="media-heading">5. 概率分析和随机算法</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2015年2月26日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="沒有找到文章"
                data-message-one="找到 1 篇文章"
                data-message-other="找到 {n} 篇文章">
                找到 134 篇文章
            </p>
        </div>
    </div>
</div>

        
        
<div id="cover" style="background-image:url('../../assets/images/cover.jpeg');"></div>
        <!--SCRIPTS-->

<script src="../../assets/js/script-qtzvvb63gamuirvfphht7lytrxkfllzng1escnm2phjtlt4tvvxi5gl0wx4o.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
